{"version":3,"sources":["webpack:///webpack/bootstrap 453f331a74caf1eefdd7","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/components/LightDispatcher.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/App.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/view/CargoView.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/UX.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/cub/Components.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/view/components/TextLabelView.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/view/EntryInputView.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/components/assets/ColorTemplate.js","webpack:///./src/api/components/Visualization.js","webpack:///./src/api/components/User.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/view/components/FloatingShelf.js","webpack:///./src/api/view/components/Outline.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/packer/cub/CUB.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/cub/Math2D.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/utils/cik/Tween.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","typeofObject","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","undefined","keys","forEach","key","AssignUndefined","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","push","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","index","indexOf","splice","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","args","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","numEntries","getDefaultLabel","epsilon","pow","numberType","BoxEntry","dimensions","Dimensions","weight","quantity","properties","stacking","StackingProperty","rotation","RotationConstraint","translation","TranslationConstraint","descriptions","TextField","Reset","defaultContent","clear","entry","Copy","field","own","Clone","Assert","CargoEntry","_weight","Symbol","uid","Map","generateUUID","Signaler","signals","dispatches","event","On","callbacks","SolidMaterialType","MeshStandardMaterial","TransparentMaterialType","InvisibleMaterialType","MeshBasicMaterial","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","castShadow","receiveShadow","colorTemplates","Asset","roughness","metalness","geometry","material","mesh","Mesh","modified","setHex","getHex","reduce","clamp","opacity","transparent","texturePath","CastReceiveShadow","traverse","child","colors","template","ColorTemplate","CreateColorTemplate","combinedVolume","ContainingVolume","Container","volumes","WarnOnce","volume","numVolumes","minX","Number","MAX_SAFE_INTEGER","minY","minZ","maxX","MIN_SAFE_INTEGER","maxY","maxZ","combinedWeightCapacity","pos","position","dim","width","height","weightCapacity","container","Set","containingVolume","FromJSON","Add","_signals","_dispatches","LightDispatcher","serializeModes","none","property","min","max","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","setKey","val","endKey","download","filename","file","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","isColor","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","has","category","shortcut","start","App","containerDiv","ux","cargoInput","packingSpaceInput","packerInterface","packerParams","packer","Packer","extendedParams","CargoInput","insert","boxEntry","cargoList","modify","Modify","SolveAgain","remove","Remove","PackingSpaceInput","containerLoaded","packingSpace","AddContainer","PackerInterface","solveRequest","solverParams","Solve","sceneSetup","SceneSetup","Init","then","Start","bind","viewParams","view","View","_Bind","update","hud","Preview","onPackUpdate","packingResult","_Notify","solved","packUpdate","onPackFailed","error","failed","packFailed","Dispatch","autoUpdatePack","solveAgain","ClearPackingResults","dummyGeometry","SphereBufferGeometry","dummyMaterial","_entry","_focus","CargoView","Object3D","floor","labelView","tlvParams","font","backColor","fontColor","textAlign","sidePadding","ratioToX","TextLabelView","rotateY","rotateX","UpdateText","copy","cargoView","PackedCargo","orientation","UnpackedCargo","unpackedQuantity","PackingResult","numTotalItems","runtime","packed","unpacked","defaultParams","_solverParams","PackingSpace","CargoList","solverExecutionsCount","algorithm","algorithmParams","SolveCUB","ready","Item","current","items","entries","groups","values","group","validOrientations","enabled","allowedOrientations","stackingCapacity","capacity","defaultStackingFactor","grounded","item","CUB","startTime","performance","pack","cubRuntime","cubRuntime2Dec","round","packedItems","packedItem","ref","Vector3","packedWidth","packedHeight","packedLength","ResolveOrientation","packedCargo","unpackedItems","unpackedItem","unpackedCargo","_weightCapacity","SetUID","Volume","init","started","paused","stopped","quality","Quality","Common","units","controllerParams","sceneController","rendererParams","clearColor","sceneRenderer","Renderer","renderer","toneMappingExposure","cameraParams","fov","aspect","near","far","cameraController","Camera","OrbitControls","Input","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hudParams","hudCameraParams","HUDView","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","Promise","resolve","reject","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","directionalLightComplem","onGUIChanged","dl","shadow","updateProjectionMatrix","UpdateShadowMaps","map","mapSize","manhattanDistanceTo","dispose","dlHelper","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","global","clone","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","_vec3","unitCubeGeometry","BoxBufferGeometry","materialTemplate","flatShading","brightnessRange","hueBase","random","nextColor","keepBase","setHSL","GoldenSeries","_materialSettings","_color","typeofNumber","CargoBoxView","colorHex","Description","scale","vec3","s","SetScale","RestoreMaterial","abs","SetMaterialFocus","focus","UX","app","visualization","Visualization","user","User","typeofString","_selectedEntryUID","labels","tempBox","Box3","tempVec","sort","select","deselect","interact","outlineOffset","CargoListView","templatesView","cargoTemplateViews","fsParams","padding","ColorTemplates","Apply","floatingShelf","FloatingShelf","raycastGroupItems","raycastGroup","RaycastGroup","OnInteract","outline","Outline","offsetFactor","templateCargoView","ticketParams","Dummy","UpdateItems","Sort","ReflectEntry","SetOutline","raycastGroupIndex","delete","box","intersection","entryUID","GetTemplate","CargoGroup","cargoGroup","textColor","textLabelView","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","offset","cargoes","next","done","setFromObject","applyMatrix4","getSize","halfSize","Compare","Cargo","currentQuantity","onFocus","onFocusLost","draggable","Draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","visible","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","spaces","world","local","modes","translate","rotate","defaultControls","TransformControls","addEventListener","renderOrder","attach","detach","Detach","space","setMode","stringType","groupAdded","groupRemoved","groupModified","size","containerAdded","_currentIndex","containers","currentIndex","_maxHeight","_validOrientations","orientations","xyz","zyx","yxz","yzx","zxy","xzy","vo","toLowerCase","maxHeight","GetOrientedDimensions","minDimensions","iItem","numItems","iOrient","UpdateComponent","interval","lastUpdateTime","collectionQuery","updateProperty","recursive","raycastItems","GetRaycastItems","rItem","Cik","raycastItem","raycaster","UpdateRaycastItems","intersects","intersectObjects","raycastItemIndex","BubbleUpForIndex","collection","nestLimit","numCollection","parent","itemsContainer","name","miscContainer","defaults","Scene","objName","getObjectByName","tempVec3","tempVec3_b","PerspectiveCamera","fpsControls","Navigation","FirstPerson","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","saveState","reset","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","box3","distanceMultiplier","extent","frameSize","distance","center","getCenter","tlWatchTimer","tlWatchEntries","tlWatchUpdater","newValue","propertyName","savedValue","tl","addTLWatch","setInterval","_value","change","TextLabel","GetString","changed","PlaneGeometry","side","DoubleSide","textLabel","text","canvas2d","context2d","getContext","fillStyle","fillRect","textBaseline","fillText","CanvasTexture","minFilter","LinearFilter","anisotropy","image","needsUpdate","OnChange","Label","stopPropagation","e","stylesheet","createCSS","css","getElementsByTagName","Array","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","title","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","p","parentNode","divTop","divLeft","cursor","stopMoving","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","guiExtensions","blockEvent","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","delay","time","debugGeometry","debugMaterial","TextureLoader","load","wrapS","wrapT","RepeatWrapping","debugBox","DebugBox","alphaHexMask","debugObjects","tVec3","tPos","tScale","DebugViz","h","l","duration","wireframe","checkered","repeat","RemoveObjectByUID","packingSpaceView","objects","packResultView","cargoViews","o","AFitTest","Box","Viz","api","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","Request","cv","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","ContainerBox","createContainerBoxes","boxes","CreateMesh","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","initializationBox3","StandardSceneObject","containerBoxes","platformMesh","planeGeom","BoxGeometry","planeMaterial","CreateSolidMaterialMatte","ReceiveShadow","object3d","_new","_reset","Pool","fnNew","fnReset","_cargoList","abort","GetEntry","IsVolume","Abs","commitedEntry","existing","sliderValueChange","sliderValueStop","jsonObject","model","thickness","PlatformVisibility","ResultSpace","ResultEntry","packingSpaces","totalPacked","totalUnpacked","solveDuration","toInterfaceResults","getSpace","containerUID","ps","packEntry","resultEntry","isFirst","FreightPacker","utils","devSetup","domain","fp","toConsole","traceToConsole","OnIncludingPrior","SetViewParent","auto","uxParams","cargoInputParams","packingSpaceInputParams","appParams","webgl","Capabilities","IsWebGLReady","canvas","gl","WebGLRenderingContext","defaultKeysListen","concat","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","dx","dy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","keypress","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","button","UpdateScreenAndMouse","getElapsedTime","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","vx","vy","preventDefault","delta","wheelDelta","detail","lerp","isNaN","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","drid","clearTimeout","_repeats","clearInterval","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","testCallback","composer","antialias","shadows","renderSizeMul","Boolean","OnTestComplete","shadowMapType","PCFSoftShadowMap","shadowsAutoUpdate","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","Uncharted2ToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","ResizeDomElement","UseComposer","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","defaultCamTRS","Transform","Euler","cameraTransform","entryInputViewParams","entryInputView","EntryInputView","_position","_rotation","transform","tempBox3","_scaleFigure","scaleFigure","man","woman","preview","previewTypes","alphaMap","setX","refMesh","children","boxView","PeekNextColor","_enabled","PackingProperty","prop","Constraint","_allowedOrientations","findNearest","dMin","nearest","vz","tempColor","mapColor","Material","_app","PackResults","Slice","animationDuration","visualizationSignals","packResults","highlightPackedInstances","cargoListView","Select","SelectEntry","boxEntryInteract","onCargoInteract","cargoEntry","PackingItem","cargo","targetView","cubeGeometry","outlineMaterial","depthWrite","depthTest","boxOutlineMaterial","offsetUnits","outlines","Disable","oChild","outlineReady","boxMaterial","boxMesh","addScalar","inverse","applyMatrix","_box3","setFromCenterAndSize","region","solid","blinks","onDuration","offDuration","debugRegion","sleep","debugRegionBlink","SetPackingSpaceVisibility","packedContainer","PackedContainer","unpackItem","SetUnpacked","packItem","SetPacked","ProcessRegions","FitLessWaste","debugLog","PackedItem","debugClear","debugging","running","ListenKeys","ms","force","execute","tid","debugUID","DrawVolume","uids","ClearAll","numberFormat","n","nStr","format","nf","smallValue","smallValueSqrt","maxWeightValue","setRectangleWeights","rect","Region","preferredX","SetWeights","tempCorners","tempPoints","px","py","pz","subRegion","rx","ry","rz","rw","rh","rl","other","tempRegion","fit","weightFit","minRegionAxis","newRegions","axis","east","west","over","south","ptsA","GetFloorPoints","ptsB","tempPoints2","adjacent","intersections","iA","nextA","ax","az","nax","naz","iB","nextB","bx","bz","nbx","nbz","rectangles","rectA","p1","p2","p3","p4","rectB","tempRegion2","firstRegion","regions","tops","cumulatedWeight","Subtract","assistant","regionIndex","debugUIDs","numRegions","volumeItem","regionScoreTable","orientationScoreTable","testSuccessfulRegions","iRegion","dummyRegion","regionFitTest","FitTest","orientationScore","RateFit","SortByN","regionScore","pop","highestScore","WeightPass","GetPlacementWithHighestScore","FitRegular","CommitFit","firstFit","GetFirstFit","containingRegion","placement","numPackedItems","iPacked","packedRegion","Intersects","regionRemains","Occupy","containerWidth","toInt","coordID","levels","neighbours","regionA","jRegion","regionB","numNeighbours","iNeighbour","neighbourA","jNeighbour","neighbourB","connectedNeighbours","ConnectFloorRects","yCat","levelsYCats","iYCat","numYCats","level","regionY","regionHeight","iRect","numRects","newRegion","harsh","itemVolume","ContainsRegion","ProcessRegionsPerPackedItem","volumeA","volumeB","processRegionsCount","ProcessRegionsPreferredX","ProcessRegionsForPackedItems","ProcessRegionsMergeExpand","ProcessRegionsForZeroRegions","ProcessRegionsEnclosed","SortDeepestSmallest","PackingAssistant","minDimensionsNoWasteFactor","workingItems","workingRegions","workingItemsSortFunction","VolumeSort","minDimensionsSearchSet","GetMinDimensionsOverall","fittedItem","containerLength","minZScore","minWasteScore","scoreW","scoreH","scoreL","minZ_weight","minWaste_weight","score","toItems","TestData","containerData","ID","Name","Length","Width","Height","itemsData","Quantity","WeightCapacity","StackingCapacity","almost","n1","n2","dim1","dim2","dim3","IsPacked","Dim1","Dim2","Dim3","CoordX","CoordY","CoordZ","PackDimX","PackDimY","PackDimZ","segmentIntersect","x1","y1","x2","y2","x3","y3","x4","y4","denominator","ua","ub","linesIntersect","ay","by","cx","cy","a1","b1","c1","a2","b2","c2","determinant","rectangleContainsPoint","rectangleContainsRectangle","ox","oy","ow","oh","rectanglesFromPoints","points","xs","xCat","ys","iY","sortYCat","xsKeys","iX","intersectedXs","xCat1","ys1","iX2","xCat2","ys2","yIntersect","xIntersect","iY1","iY2","iIX","intersectedX","rectangle","reduceRectangles","ra","aw","ah","jRect","rb","bw","bh","segmentContainsPoint","vxa","vya","vxb","vyb","db","paddingZ","paddingY","DisplayPackingResult","lights","DefaultLights","light","dlData","Load","dlComp","onContainerAdded","Frame","containerSize","AddRaycastGroup","onCargoListViewChanged","listViewCenterX","getWorldPosition","offsetX","centerX","onCargoGroupAdded","onCargoGroupRemoved","onCargoGroupModified","PackResultView","HUDSetup","Clear","Toggle","poolNewFN","packedCargoView","PackedCargoBoxView","Extend","poolResetFN","getOrientationAngles","getOrientationEuler","rad","pool","animatingViews","matrix","GetMatrix","decompose","packedQuantities","onTweenComplete","OnCargoFirstTweenComplete","zEntry","delayPerItem","cargoViewTemplate","packedQuantity","totalQuantity","UpdateLabel","SetRotationAngles","posTweenCombo","Tween","Combo","Request3","functions","ease","easeOutQuad","extraData","Hook","onComplete","unpackedOffset","numUnpackedItems","j","tween","OnTweenComplete","scaleTweenCombo","special","pingPong","Unhook","Return","DisableHighlights","Highlight","numCargoViews","cvEntry","halfHeight","low","high","animatingView","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","LineBasicMaterial","_wireMaterialSettings","meshMaterial","blending","NormalBlending","wireMesh","LineSegments","TweenCallback","startValue","TweenCompletedCallback","linear","easeOutElastic","ts","tc","easeOutCubic","TweenComboCompletedCallback","TweenCombo","tweens","completed","startValue0","startValue1","startValue2","delta0","delta1","delta2","tween0","tween1","tween2","combo","endValue"],"mappings":"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","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 453f331a74caf1eefdd7","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nconst typeofObject = 'object';\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(typeof source[key] === typeofObject) Utils.AssignUndefined(target[key], source[key]);\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import { StackingProperty, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {StackingProperty} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new StackingProperty();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    set weight(value){ super.weight = value; }\r\n    get weight(){\r\n        return super.weight;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && StackingProperty.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nBoxEntry.StackingProperty = StackingProperty;\r\nBoxEntry.RotationConstraint = RotationConstraint;\r\nBoxEntry.TranslationConstraint = TranslationConstraint;\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _weight = Symbol('weight');\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n        this[_weight] = 0;\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /** @returns {Number} */\r\n    get weight(){ return this[_weight]; }\r\n    set weight(value){ this[_weight] = value; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    /** @param {string} key @param {string} [value] ommit value param to get description content instead of setting it */\r\n    Description(key, value){\r\n        let d = this.descriptions.get(key);\r\n        if(d){\r\n            if(value === undefined) return d.content;\r\n\r\n            d.content = value;\r\n        }\r\n        else{\r\n            if(value === undefined) return false;\r\n\r\n            d = new TextField(key, value);\r\n            this.descriptions.set(key, d);\r\n        }\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nclass Signaler {\r\n    constructor(){\r\n        /** @type {Array<SignalerCallback>} */\r\n        this.signals = {};\r\n        /** @type {Array<string>} */\r\n        this.dispatches = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    OnIncludingPrior(event, callback){\r\n        var args = this.dispatches[event];\r\n        if(args){\r\n            callback(...args);\r\n        }\r\n        else{\r\n            this.On(event, callback);\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this.dispatches[event] = args;\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import ColorTemplate from \"./ColorTemplate\";\r\n\r\nconst SolidMaterialType = THREE.MeshStandardMaterial;\r\nconst TransparentMaterialType = THREE.MeshStandardMaterial;\r\nconst InvisibleMaterialType = THREE.MeshBasicMaterial;\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new SolidMaterialType({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nconst castShadow = true;\r\nconst receiveShadow = true;\r\n\r\n/** @type {Map<string, ColorTemplate>} */\r\nvar colorTemplates = new Map();\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * @param {Number} color hex\r\n     */\r\n    static CreateSolidMaterialMatte(color){\r\n        return new Asset.SolidMaterialType({color: color, roughness: 1, metalness: .2});\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    static RestoreMaterial(material, modified){\r\n        if(modified === undefined) return;\r\n\r\n        let keys = Object.keys(modified);\r\n        for(let i = 0; i < keys.length; i++){\r\n            let key = keys[i];\r\n            if(material[key] !== undefined){\r\n                if(material[key].setHex){\r\n                    /** @type {THREE.Color} */\r\n                    let color = material.color;\r\n                    color.setHex(modified[key]);\r\n                }\r\n                else{\r\n                    material[key] = modified[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static SetMaterialFocus(material, value, modified){\r\n\r\n        /** @type {THREE.Color} */\r\n        let color = material.color;\r\n        if(color !== undefined){\r\n            if(modified) modified.color = color.getHex();\r\n\r\n            let reduce = (value - 1) / 4;\r\n            color.r = THREE.Math.clamp(color.r - reduce, 0, 1);\r\n            color.g = THREE.Math.clamp(color.g - reduce, 0, 1);\r\n            color.b = THREE.Math.clamp(color.b - reduce, 0, 1);\r\n        }\r\n\r\n        /** @type {Number} */\r\n        let opacity = material.opacity;\r\n        if(opacity !== undefined){\r\n            if(modified){\r\n                modified.opacity = opacity;\r\n                modified.transparent = material.transparent;\r\n            }\r\n\r\n            material.opacity = THREE.Math.clamp(material.opacity * value, 0, 1);;\r\n            material.transparent = material.opacity < 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @returns {THREE.Object3D}\r\n     */\r\n    static FromJSON(json){\r\n        return objectLoader.parse(json);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object */\r\n    static StandardSceneObject(object){\r\n        Asset.CastReceiveShadow(object);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastReceiveShadow(object, value){\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value === undefined ? castShadow : value;\r\n                child.receiveShadow = value === undefined ? receiveShadow : value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static ReceiveShadow(object, value){\r\n        if(value === undefined) value = receiveShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.receiveShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastShadow(object, value){\r\n        if(value === undefined) value = castShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    static CreateColorTemplate(key, ...colors){\r\n        var template = new ColorTemplate(...colors);\r\n        colorTemplates.set(key, template);\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     */\r\n    static ColorTemplates(key){\r\n        return colorTemplates.get(key);\r\n    }\r\n\r\n}\r\n\r\nAsset.SolidMaterialType = SolidMaterialType;\r\nAsset.TransparentMaterialType = TransparentMaterialType;\r\nAsset.InvisibleMaterialType = InvisibleMaterialType;\r\n\r\nAsset.CreateColorTemplate('Containers', 0x020202, 0x7f7f7f, 0xffffff);\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nvar combinedVolume = new ContainingVolume();\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'label not implemented');\r\n    }\r\n\r\n    /** @param {ContainingVolume} volume */\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    get combinedVolume(){\r\n        let minX = Number.MAX_SAFE_INTEGER,\r\n            minY = Number.MAX_SAFE_INTEGER,\r\n            minZ = Number.MAX_SAFE_INTEGER;\r\n\r\n        let maxX = Number.MIN_SAFE_INTEGER,\r\n            maxY = Number.MIN_SAFE_INTEGER,\r\n            maxZ = Number.MIN_SAFE_INTEGER;\r\n\r\n        let combinedWeightCapacity = 0;\r\n        \r\n        this.volumes.forEach(volume => {\r\n            let pos = volume.position;\r\n            let dim = volume.dimensions;\r\n            if(pos.x < minX) minX = pos.x;\r\n            if(pos.y < minY) minY = pos.y;\r\n            if(pos.z < minZ) minZ = pos.z;\r\n            if(pos.x + dim.width > maxX) maxX = pos.x + dim.width;\r\n            if(pos.y + dim.height > maxY) maxY = pos.y + dim.height;\r\n            if(pos.z + dim.length > maxZ) maxZ = pos.z + dim.length;\r\n\r\n            combinedWeightCapacity += volume.weightCapacity;\r\n        });\r\n\r\n        combinedVolume.container = this;\r\n        combinedVolume.dimensions.Set(maxX - minX, maxZ - minZ, maxY - minY);\r\n        combinedVolume.position.set((maxX + minX) / 2, (maxZ + minZ) / 2, (maxY + minY) / 2);\r\n        combinedVolume.weightCapacity = combinedWeightCapacity;\r\n        \r\n        return combinedVolume;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) throw('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            containingVolume.container = container;\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nconst _signals = Symbol('signals');\r\nconst _dispatches = Symbol('dispatches');\r\n\r\nclass LightDispatcher {\r\n    constructor(){\r\n        this[_signals] = {};\r\n        this[_dispatches] = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this[_signals][event] === undefined){\r\n            this[_signals][event] = [];\r\n        }\r\n        this[_signals][event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this[_dispatches][event] = args;\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default LightDispatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/LightDispatcher.js","import Utils from \"../Utils\";\r\n\r\nconst serializeModes = {\r\n    none: 'none',\r\n    json: 'json'\r\n};\r\n\r\n/**\r\n * @typedef ConfigParams\r\n * @property {Boolean} debug\r\n * @property {Boolean} save\r\n * @property {serializeModes} serializeMode\r\n */\r\n\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    var propertyPath = key;\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0],\r\n        propertyPath: propertyPath\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    var endKey = key.shift();\r\n    if(obj[endKey].setHex){\r\n        obj[endKey].setHex(val);\r\n    }\r\n    else{\r\n        obj[endKey] = val;\r\n    }\r\n    return obj[endKey];\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\n/** \r\n * @typedef GUI\r\n * @property {HTMLElement} domElement\r\n */\r\n\r\nclass Shortcut{\r\n    /**\r\n     * @param {string} label \r\n     */\r\n    constructor(label){\r\n        this.label = label;\r\n\r\n        ///** @type {Map<string, GUI>} */\r\n        //this.folders = new Map();\r\n\r\n        this.controller = {};\r\n    }\r\n\r\n    Add(label, target){\r\n        label = label.replace(new RegExp(' ', 'g'), '_');\r\n        this.controller[label] = target;\r\n        Config.shortcutsGUI.add(this.controller, label);\r\n        console.log('added ' + label + ' shortcut to ' + this.label);\r\n    }\r\n}\r\n\r\n/** @type {GUI} */\r\nvar shortcutsGUI;\r\n\r\n/** @type {Map<string, Shortcut>} */\r\nvar shortcuts = new Map();\r\n\r\n/** @type {Map<Object, Config>} */\r\nvar instances = new Map();\r\n\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = instances;\r\n        instances.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Serialize(){\r\n        var data = {};\r\n        this.keys.forEach(key => {\r\n            let isController = key instanceof Controller;\r\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\r\n            let keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\r\n                data[keyInfo.propertyPath] = saveValue;\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Function} guiChanged \r\n     * @param {string} label \r\n     * @param {string} gui - or a dat.GUI object\r\n     * @param {ConfigParams} params \r\n     */\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            },\r\n\r\n            Serialize: function(){\r\n                if(scope.Update){\r\n                    scope.Update();\r\n                    var data = scope.Serialize();\r\n                    var json = JSON.stringify(data);\r\n                    console.log(data, json);\r\n                }\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        switch(params.serializeMode){\r\n            default: break;\r\n            case serializeModes.json:\r\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n                if(this.editing['editor.Serialize'] !== true){\r\n                    this.defaultsFolder.add(editor, 'Serialize');\r\n                    this.editing['editor.Serialize'] = true;\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    static get shortcuts(){\r\n        return shortcuts;\r\n    }\r\n\r\n    static get shortcutsGUI(){\r\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n            autoPlace: false\r\n        });\r\n        return shortcutsGUI;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} property - #property marks a folder\r\n     * @param {Array<string>} subProperties \r\n     * @returns returns the subProperties full paths\r\n     */\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    /**\r\n     * @param {*} target \r\n     * @param {*} data \r\n     */\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n\r\n        if(instances.has(target) && instances.get(target).Update)\r\n            instances.get(target).Update();\r\n    }\r\n\r\n    /**\r\n     * @param {string} category\r\n     * @param {string} label \r\n     * @param {Function} target \r\n     */\r\n    static MakeShortcut(category, label, target){\r\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\r\n        var shortcut = shortcuts.get(category);\r\n        shortcut.Add(label, target);\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer, { PackerParams } from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\nimport Signaler from './utils/cik/Signaler';\r\nimport PackerInterface, { SolverParams } from './components/PackerInterface';\r\nimport BoxEntry from './components/box/BoxEntry';\r\nimport Container from './packer/container/Container';\r\n\r\nconst signals = {\r\n    start: 'start'\r\n};\r\n\r\n/**\r\n * @typedef AppParams\r\n * @property {UX} ux\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n * @property {PackerInterface} packerInterface\r\n */\r\n\r\nclass App extends Signaler{\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {AppParams} params\r\n     */\r\n    constructor(containerDiv, params) {\r\n\r\n        super();\r\n\r\n        let scope = this;\r\n\r\n        this.ux = params.ux;\r\n        this.cargoInput = params.cargoInput;\r\n        this.packingSpaceInput = params.packingSpaceInput;\r\n        this.packerInterface = params.packerInterface;\r\n\r\n        /** @type {PackerParams} */\r\n        let packerParams = {ux: this.ux};\r\n        this.packer = new Packer(packerParams);\r\n        this.packer.extendedParams = this.packerInterface.params;\r\n        \r\n        this.cargoInput.On(CargoInput.signals.insert, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Add(boxEntry);\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.modify, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Modify(boxEntry);\r\n                scope.SolveAgain();\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.remove, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Remove(boxEntry.uid);\r\n                scope.SolveAgain();\r\n            });\r\n        \r\n        this.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, \r\n            /** @param {Container} container */\r\n            function(container){\r\n                scope.packer.packingSpace.AddContainer(container);\r\n            });\r\n\r\n        this.packerInterface.On(PackerInterface.signals.solveRequest, \r\n            /** @param {SolverParams} solverParams */\r\n            function(solverParams){\r\n                scope.Solve(solverParams);\r\n            });\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n\r\n    Start(){\r\n        let scope = this;\r\n        let packerInterface = this.packerInterface;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        let viewParams = { ux: this.ux };\r\n        this.view = new View(this.packer, this.sceneSetup, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.ux._Bind(this);\r\n        this.cargoInput._Bind(this);\r\n        this.packingSpaceInput._Bind(this);\r\n\r\n        this.cargoInput.On(CargoInput.signals.update, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.view.sceneSetup.hud.Preview(boxEntry);\r\n            });\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            packerInterface._Notify(PackerInterface.signals.solved, packingResult);\r\n        }\r\n        this.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        /** @param {*} error */\r\n        function onPackFailed(error){\r\n            packerInterface._Notify(PackerInterface.signals.failed, error);\r\n        }\r\n        this.packer.On(Packer.signals.packFailed, onPackFailed);\r\n\r\n        this.Dispatch(signals.start);\r\n    }\r\n\r\n    SolveAgain(){\r\n        if(this.ux.params.autoUpdatePack && this.packer.solveAgain) this.Solve();\r\n    }\r\n\r\n    /** @param {SolverParams} [solverParams] */\r\n    Solve(solverParams){\r\n        this.view.ClearPackingResults();\r\n        this.packer.Solve(solverParams);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 11\n// module chunks = 0","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\n\r\n/**\r\n * @typedef CargoViewLabelParams\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new Asset.TransparentMaterialType({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\nconst _focus = Symbol('focus');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /** @type {THREE.Mesh} */\r\n        this.mesh;\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this[_focus] = 1;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        this[_focus] = value;\r\n    }\r\n\r\n    get focus(){ return this[_focus]; }\r\n\r\n    ReflectEntry(){\r\n        \r\n    }\r\n\r\n    /** @param {string} value @param {CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        const height = 64;\r\n        let width = Math.floor( params.width / params.height * height );\r\n        if(this.labelView === undefined){\r\n            /** @type {import('./TextLabelView').TLVParams} */\r\n            let tlvParams = { font: '32px sans serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                textAlign: 'right', sidePadding: 16, width: width, height: height\r\n            };\r\n            let ratioToX = 64\r\n\r\n            this.labelView = new TextLabelView(tlvParams);\r\n            this.labelView.view.rotateY( 90 * Math.PI / 180 );\r\n            this.labelView.view.rotateX( -90 * Math.PI / 180 );\r\n            this.view.add(this.labelView.view);\r\n        }\r\n\r\n        this.labelView.UpdateText(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"./container/ContainingVolume\";\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} defaultStackingFactor\r\n */\r\n\r\n/** @typedef SolverParams\r\n * @property {*} algorithmParams\r\n * @property {string} algorithm\r\n */\r\n\r\nclass PackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {ContainingVolume} containingVolume \r\n     * @param {THREE.Vector3} position \r\n     * @param {Number} orientation \r\n     */\r\n    constructor(entry, containingVolume, position, orientation){\r\n        this.entry = entry;\r\n        this.containingVolume = containingVolume;\r\n        this.position = position;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nclass UnpackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {Number} unpackedQuantity\r\n     */\r\n    constructor(entry, unpackedQuantity){\r\n        this.entry = entry;\r\n        this.unpackedQuantity = unpackedQuantity;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    /** @param {Number} numTotalItem @param {Number} runtime */\r\n    constructor(numTotalItems, runtime){\r\n        /** @type {Array<PackedCargo>} */\r\n        this.packed = [];\r\n\r\n        /** @type {Array<UnpackedCargo>} */\r\n        this.unpacked = [];\r\n\r\n        this.numTotalItems = numTotalItems || 0;\r\n\r\n        this.runtime = runtime || -1;\r\n    }\r\n}\r\n\r\n/** @type {PackerParams} */\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate',\r\n    packFailed: 'packFailed'\r\n};\r\n\r\nconst _solverParams = Symbol('solverParams');\r\n\r\nclass Packer extends Signaler {\r\n    /** @param {PackerParams} params */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n\r\n        this.solverExecutionsCount = 0;\r\n    }\r\n\r\n    /** @param {PackerParams} extendedParams */\r\n    set extendedParams(extendedParams){\r\n        this.params = Utils.AssignUndefined(this.params, extendedParams);\r\n    }\r\n\r\n    /** @param {SolverParams} params */\r\n    Solve(params){\r\n        params = params || this[_solverParams];\r\n        this[_solverParams] = params;\r\n\r\n        this.solverExecutionsCount++;\r\n\r\n        let algorithm = params.algorithm;\r\n        let algorithmParams = params.algorithmParams;\r\n        if(algorithm === 'cub')\r\n            this.SolveCUB(algorithmParams);\r\n    }\r\n\r\n    /** @param {import('../packer/cub/CUB').CUBParams} params */\r\n    async SolveCUB(params){\r\n\r\n        if(this.packingSpace.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Packing space not ready');\r\n            return;\r\n        }\r\n\r\n        if(this.cargoList.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Cargo list not ready');\r\n            return;\r\n        }\r\n\r\n        const Container = require('./cub/Components').Container;\r\n        const Item = require('./cub/Components').Item;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n\r\n        var numTotalItems = 0;\r\n\r\n         /** @type {Array<Item>} */\r\n         var items = [];\r\n         var entries = {};\r\n         for(let group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let validOrientations = entry.properties.rotation.enabled ? entry.properties.rotation.allowedOrientations : undefined;\r\n            let stackingCapacity = entry.properties.stacking.enabled ? entry.properties.stacking.capacity : entry.weight * this.params.defaultStackingFactor;\r\n            let grounded = entry.properties.translation.enabled ? entry.properties.translation.grounded : false;\r\n            let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight, entry.quantity, validOrientations, stackingCapacity, grounded);\r\n            items.push(item);\r\n            numTotalItems += entry.quantity;\r\n        }\r\n\r\n        const CUB = require('./cub/CUB');\r\n        var startTime = performance.now();\r\n        var result = await CUB.pack(container, items, params);\r\n        var cubRuntime = performance.now() - startTime;\r\n\r\n        var cubRuntime2Dec = Math.round(cubRuntime / 1000 * 100) / 100;\r\n        var packingResult = new PackingResult(numTotalItems, cubRuntime2Dec);\r\n        result.packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.ref.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.x + packedItem.packedWidth / 2,\r\n                packedItem.y + packedItem.packedHeight / 2,\r\n                packedItem.z + packedItem.packedLength / 2\r\n            );\r\n            let orientation = Item.ResolveOrientation(packedItem.orientation);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n\r\n        result.unpackedItems.forEach(unpackedItem => {\r\n            let entry = entries[unpackedItem.id];\r\n            let unpackedQuantity = unpackedItem.quantity;\r\n            let unpackedCargo = new UnpackedCargo(entry, unpackedQuantity);\r\n            packingResult.unpacked.push(unpackedCargo);\r\n        });\r\n\r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    get solveAgain(){\r\n        return this.solverExecutionsCount > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nPacker.PackingResult = PackingResult;\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\r\nimport Container from \"./Container\";\r\n\r\nconst _weightCapacity = Symbol('weightCapacity');\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    /** @param {Container} container */\r\n    constructor(container){\r\n        super();\r\n        \r\n        this.container = container;\r\n        this.weightCapacity = 0;\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    set weightCapacity(value){ this[_weightCapacity] = value; }\r\n    get weightCapacity(){ return this[_weightCapacity]; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        json.weightCapacity = this.weightCapacity;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        containingVolume.weightCapacity = data.weightCapacity;\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nconst signals = {\r\n    init: 'init',\r\n    started: 'started',\r\n    paused: 'paused',\r\n    stopped: 'stopped'\r\n};\r\n\r\nclass SceneSetup extends Signaler {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        /** @type {import('../scene/Renderer').RendererParams} */\r\n        var rendererParams = {clearColor: 0xefefef};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.sceneRenderer.renderer.toneMappingExposure = 1.6;\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: 30, aspect: 1, near: 1 * units, far: 3000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15, container: this.sceneRenderer.renderer.domElement}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            gridHelper: true,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 100 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        var scope = this;\r\n        return new Promise((resolve, reject) => {\r\n            scope.Dispatch(signals.init);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.cameraController.Update();\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n\r\n        this.Dispatch(signals.started);\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n\r\n        this.Dispatch(signals.paused);\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n\r\n        this.Dispatch(signals.stopped);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    DefaultLights(controller, configure, helpers){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(300 * units, 300 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(ambientLight);\r\n        controller.ambientContainer.add(directionalLight);\r\n\r\n        var directionalLightComplem = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLightComplem.position.set(-200 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(directionalLightComplem);\r\n\r\n        if(this.ux.params.configure && configure){\r\n            let Smart = require('../utils/cik/config/Smart').default;\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            let Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n            let dl = directionalLight;\r\n            let smart = new Smart(dl, 'Directional light');\r\n            smart.MakeShortcut('Configure');\r\n            \r\n            let lightController = ['color', 'intensity', 'castShadow'];\r\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\r\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\r\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\r\n\r\n            let dlHelper, dlCameraHelper;\r\n            if(helpers){\r\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\r\n                this.sceneController.AddDefault(dlHelper);\r\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\r\n                this.sceneController.AddDefault(dlCameraHelper);\r\n            }\r\n\r\n            let sceneRenderer = this.sceneRenderer;\r\n            global.sceneRenderer = sceneRenderer;\r\n            let mapSize = dl.shadow.mapSize.clone();\r\n            function onGUIChanged(){\r\n                dl.shadow.camera.updateProjectionMatrix();\r\n                sceneRenderer.UpdateShadowMaps();\r\n                if(dl.shadow.map){\r\n                    if(dl.shadow.mapSize.manhattanDistanceTo(mapSize) > 0.0001){\r\n                        mapSize.copy(dl.shadow.mapSize);\r\n                        dl.shadow.map.dispose();\r\n                        dl.shadow.map = null;\r\n                    }\r\n                }\r\n\r\n                if(helpers){\r\n                    dlHelper.update();\r\n                    dlCameraHelper.update();\r\n                }\r\n            }\r\n\r\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\r\n                ...lightController,\r\n                ...shadowControllers,\r\n                ...shadowCameraControllers\r\n            );\r\n        }\r\n\r\n        return [ambientLight, directionalLight, directionalLightComplem];\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            function onGUIChanged(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            smart.MakeShortcut('Configure');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        /** @type {Number} */\r\n        this.width = width;\r\n        /** @type {Number} */\r\n        this.length = length;\r\n        /** @type {Number} */\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height);\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new Asset.SolidMaterialType({roughness: 1, metalness: 0, flatShading: true});\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\n/** @param {Boolean} [keepBase] default = false, set to true to keep hue base unchanged, ie: peek next color */\r\nfunction nextColor(keepBase){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    if(!keepBase) hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nconst _materialSettings = Symbol('matSet');\r\nconst _color = Symbol('color');\r\n\r\nconst typeofNumber = 'number';\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n\r\n        let colorHex = boxEntry.Description('color');\r\n        this[_color] = colorHex ? new THREE.Color(colorHex) : nextColor();\r\n        material.color = this[_color];\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_materialSettings]) Asset.RestoreMaterial(this.mesh.material, this[_materialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_materialSettings] === undefined){\r\n                this.mesh.material = this.mesh.material.clone();\r\n                this[_materialSettings] = {};\r\n                Asset.SetMaterialFocus(this.mesh.material, value, this[_materialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.mesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /** @returns {THREE.Color} */\r\n    get color(){ return this[_color]; }\r\n\r\n    /** @param {Number} value hex */\r\n    set color(value){\r\n        /** @type {THREE.Color} */\r\n        let c = this[_color];\r\n        if(typeof value === typeofNumber) c.setHex(value);\r\n        else c.copy(value);\r\n        if(this[_materialSettings]) this[_materialSettings].color = c.getHex();\r\n        else this.mesh.material.color = c;\r\n        this.focus = super.focus;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n    }\r\n\r\n    ReflectEntry(){\r\n        this.entry = this.entry;\r\n    }\r\n\r\n    /** \r\n     * @param {string} value \r\n     * @param {import('./CargoView').CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        super.SetLabel(value, params);\r\n\r\n        this.labelView.view.scale.y = params.height;\r\n        this.labelView.view.scale.x = params.width;\r\n        this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\r\n        this.labelView.view.position.y = .001;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    static get PeekNextColor(){\r\n        return nextColor(true);\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import Utils from \"./utils/cik/Utils\";\r\nimport Visualization from \"./components/Visualization\";\r\nimport User from \"./components/User\";\r\nimport App from \"./App\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud default = true, create hud (hud currently disabled in api)\r\n * @property {Boolean} configure default = false, execute helpers that allow configuration\r\n * @property {Number} units default = 1, conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n * @property {Boolean} autoUpdatePack default = true, will auto-update the packing if entries are modified or deleted\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1,\r\n    autoUpdatePack: true\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    \r\n        /** Interface with visual elements */\r\n\t\tthis.visualization = new Visualization(app);\r\n\r\n\t\t/** Interface with user input/output */\r\n        this.user = new User(app);\r\n    }\r\n\r\n}\r\n\r\nUX.User = User;\r\nUX.Visualization = Visualization;\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport FloatingShelf from \"./components/FloatingShelf\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\nimport RaycastGroup, { RaycastCallback } from \"../utils/cik/input/RaycastGroup\";\r\nimport Outline from \"./components/Outline\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} outlineOffset\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nconst typeofString = 'string';\r\n\r\nconst _selectedEntryUID = Symbol('seUID');\r\n\r\n/** @type {Map<CargoView, TextLabelView>} */\r\nvar labels = new Map();\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort',\r\n    select: 'select',\r\n    deselect: 'deselect',\r\n    interact: 'interact'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {\r\n    outlineOffset: 4\r\n};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.templatesView = new THREE.Object3D();\r\n        this.view.add(this.templatesView);\r\n\r\n        /** @type {Map<CargoGroup, CargoView>} */\r\n        this.cargoTemplateViews = new Map();\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        // Shelf\r\n        /** @type {import('./components/FloatingShelf').FloatingShelfParams} */\r\n        let fsParams = {padding: new THREE.Vector3(10 * units, (this.params.outlineOffset * units + 1) * units, 10 * units), colorHex: Asset.ColorTemplates('Containers').Apply(0x000000)};\r\n        this.floatingShelf = new FloatingShelf(this.templatesView, fsParams);\r\n        this.view.add(this.floatingShelf.view);\r\n\r\n        // Interaction\r\n        this.raycastGroupItems = [];\r\n        this.raycastGroup = new RaycastGroup(this.raycastGroupItems, this.OnInteract.bind(this), \r\n            /** @param {CargoView} item */\r\n            function(item){\r\n                return item.view;\r\n            },\r\n            false,\r\n            true);\r\n\r\n        this.outline = new Outline({color: 0xffffff, opacity: 1, offsetFactor: this.params.outlineOffset * units});\r\n        this.view.add(this.outline.view);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        let units = this.params.ux.params.units;\r\n\r\n        let templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n\r\n                let ticketParams = { width: 50 * units, height: 20 * units };\r\n\r\n                const height = 96;\r\n                let width = Math.floor( ticketParams.width / ticketParams.height * height );\r\n                /** @type {import('./TextLabelView').TLVParams} */\r\n                let tlvParams = { font: '64px sans-serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                    textAlign: 'left', sidePadding: 30, width: width, height: height\r\n                };\r\n\r\n                let labelView = new TextLabelView(tlvParams);\r\n                labelView.view.rotateY( 90 * Math.PI / 180 );\r\n                labelView.view.rotateX( -90 * Math.PI / 180 );\r\n                labelView.view.scale.y = ticketParams.height;\r\n                labelView.view.scale.x = ticketParams.width;\r\n                /** @type {BoxEntry} */\r\n                let boxEntry = group.entry;\r\n                labelView.view.position.z = ticketParams.width / 2;\r\n                this.view.add(labelView.view);\r\n\r\n                labelView.UpdateText(boxEntry.quantity);\r\n\r\n                labels.set(templateCargoView, labelView);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.raycastGroupItems.push(templateCargoView);\r\n        this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Update(group){\r\n        let templateCargoView = this.cargoTemplateViews.get(group);\r\n        templateCargoView.ReflectEntry();\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n\r\n        if(this[_selectedEntryUID] === group.entry.uid) this.SetOutline(templateCargoView);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n\r\n            let raycastGroupIndex = this.raycastGroupItems.indexOf(templateCargoView);\r\n            if(raycastGroupIndex !== -1) this.raycastGroupItems.splice(raycastGroupIndex, 1);\r\n            this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            if(this[_selectedEntryUID] === group.entry.uid) this.outline.box = false;\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * RaycastCallback\r\n     * @param {CargoView} cargoView\r\n     * @param {THREE.Intersection} intersection\r\n     */\r\n    OnInteract(cargoView, intersection){\r\n        this.Dispatch(signals.interact, cargoView.entry);\r\n    }\r\n\r\n    /** @param {CargoView} cargoView */\r\n    Select(entryUID){\r\n\r\n        this[_selectedEntryUID] = entryUID;\r\n\r\n        if(!entryUID){\r\n            this.outline.box = false;\r\n            this.Dispatch(signals.deselect);\r\n        }\r\n        else{\r\n            let cargoView = this.GetTemplate(entryUID);\r\n            this.SetOutline(cargoView);\r\n            this.Dispatch(signals.select, cargoView.entry);\r\n        }\r\n    }\r\n\r\n    /** @param {CargoView} target */\r\n    SetOutline(target){\r\n        this.outline.box = target instanceof CargoBoxView ? target.mesh : target.view;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoView} cargoView \r\n     * @param {string} value \r\n     * @param {string} textColor css\r\n     */\r\n    UpdateLabel(cargoView, value, textColor){\r\n        let textLabelView = labels.get(cargoView);\r\n        if(textLabelView){\r\n            if(textColor) textLabelView.params.fontColor = textColor;\r\n            textLabelView.UpdateText(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.view.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 5 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(start, 0, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.x / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(start + offset, tempVec.y / 2 + padding, -tempVec.z / 2);\r\n\r\n            let labelView = labels.get(cargoView.value);\r\n            labelView.view.position.x = cargoView.value.position.x;\r\n            labelView.view.position.y = padding + 1 * units;\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n\r\n        /** @type {Array<Cargo>} */\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\nconst serializeModes = Config.serializeModes;\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\nclass Smart {\r\n    /**\r\n     * @param {*} target \r\n     * @param {string} label \r\n     */\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.visible = false;\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.visible = true;\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {string} folderName \r\n     * @param {*} target \r\n     * @param {Function} guiChanged \r\n     * @param {serializeModes} serializeMode\r\n     * @param {Array<string|Config.Controller>} args \r\n     */\r\n    Config(folderName, target, guiChanged, serializeMode, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     */\r\n    MakeShortcut(category){\r\n        Smart.MakeShortcut(category, this);\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Smart} target \r\n     */\r\n    static MakeShortcut(category, target){\r\n        Config.MakeShortcut(category, target.label, function(){\r\n            if(target.visible){\r\n                target.Hide();\r\n            }\r\n            else{\r\n                target.Show();\r\n            }\r\n        });\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved',\r\n    groupModified: 'groupModified'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Modify(entry){\r\n        var group = this.groups.get(entry.uid);\r\n        this.Dispatch(signals.groupModified, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\r\n    GetEntry(entryUID){\r\n        if(this.groups.has(entryUID)) return this.groups.get(entryUID).entry;\r\n    }\r\n\r\n    get ready(){\r\n        return this.groups.size > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    /** @param {Container} container */\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /** @returns {Container} */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex !== -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    get ready(){\r\n        return this[_currentIndex] !== -1;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","\r\nconst typeofNumber = 'number';\r\n\r\nconst _maxHeight = Symbol('maxHeight');\r\nconst _validOrientations = Symbol('validOrientations');\r\n\r\nconst orientations = [ 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy' ];\r\nvar dimensions = [0, 0, 0];\r\n\r\nclass Item{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weight \r\n     * @param {Number} quantity \r\n     * @param {Array<Number|string>} validOrientations\r\n     * @param {Number} stackingCapacity \r\n     * @param {Boolean} grounded \r\n     */\r\n    constructor(id, width, height, length, weight, quantity, validOrientations, stackingCapacity, grounded){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weight = weight;\r\n        /** @type {Number} */\r\n        this.volume = width * height * length;\r\n        this.quantity = quantity;\r\n\r\n        this.validOrientations = validOrientations;\r\n\r\n        this.stackingCapacity = stackingCapacity;\r\n        this.grounded = grounded;\r\n    }\r\n\r\n    /** @returns {Array<Number>} */\r\n    get validOrientations(){ return this[_validOrientations]; }\r\n    set validOrientations(value){\r\n        if(!value) value = orientations;\r\n\r\n        let validOrientations = [];\r\n        for(let i = 0; i < value.length; i++){\r\n            let vo = value[i];\r\n            let orientation = (typeof vo === typeofNumber) ? vo : orientations.indexOf(vo.toLowerCase());\r\n            if(orientation !== -1) validOrientations.push(orientation);\r\n        }\r\n\r\n        this[_validOrientations] = validOrientations;\r\n        this[_maxHeight] = undefined;\r\n    }\r\n\r\n    get xyz(){ dimensions[0] = this.width; dimensions[1] = this.height; dimensions[2] = this.length; return dimensions; }\r\n    get zyx(){ dimensions[0] = this.length; dimensions[1] = this.height; dimensions[2] = this.width; return dimensions; }\r\n    get yxz(){ dimensions[0] = this.height; dimensions[1] = this.width; dimensions[2] = this.length; return dimensions; }\r\n    get yzx(){ dimensions[0] = this.height; dimensions[1] = this.length; dimensions[2] = this.width; return dimensions; }\r\n    get zxy(){ dimensions[0] = this.length; dimensions[1] = this.width; dimensions[2] = this.height; return dimensions; }\r\n    get xzy(){ dimensions[0] = this.width; dimensions[1] = this.length; dimensions[2] = this.height; return dimensions; }\r\n\r\n    /** @returns {Number} */\r\n    get maxHeight(){\r\n        if(this[_maxHeight] === undefined){\r\n            let maxHeight = 0;\r\n            for(let i = 0; i < this.validOrientations.length; i++){\r\n                let dimensions = this.GetOrientedDimensions(this.validOrientations[i]);\r\n                if(dimensions[1] > maxHeight) maxHeight = dimensions[1];\r\n            }\r\n            this[_maxHeight] = maxHeight;\r\n        }\r\n        \r\n        return this[_maxHeight];\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    GetOrientedDimensions(orientation){\r\n        switch(orientation){\r\n            case 0: return this.xyz;\r\n            case 1: return this.zyx;\r\n            case 2: return this.yxz;\r\n            case 3: return this.yzx;\r\n            case 4: return this.zxy;\r\n            case 5: return this.xzy;\r\n        }\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    static ResolveOrientation(orientation){\r\n        return orientations[orientation];\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    static GetMinDimensions(items){\r\n        var minDimensions = [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\r\n\r\n        for(let iItem = 0, numItems = items.length; iItem < numItems; iItem++){\r\n            let item = items[iItem];\r\n            var validOrientations = item.validOrientations;\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n                if(dimensions[0] < minDimensions[0]) minDimensions[0] = dimensions[0];\r\n                if(dimensions[1] < minDimensions[1]) minDimensions[1] = dimensions[1];\r\n                if(dimensions[2] < minDimensions[2]) minDimensions[2] = dimensions[2];\r\n            }\r\n        }\r\n\r\n        return minDimensions;\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static VolumeSort(a, b){\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static HeightSort(a, b){\r\n        if(a.maxHeight < b.maxHeight) return -1;\r\n        if(a.maxHeight > b.maxHeight) return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass Container{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weightCapacity \r\n     */\r\n    constructor(id, width, height, length, weightCapacity){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weightCapacity = weightCapacity;\r\n    }\r\n}\r\n\r\nexport {\r\n    Item,\r\n    Container\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/Components.js","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\n/**\r\n * RaycastCallback\r\n * \r\n * @callback RaycastCallback\r\n * @param {Object} obj\r\n * @param {THREE.Intersection} intersection\r\n */\r\n\r\n /**\r\n  * Mapping function\r\n  * \r\n  * @callback RaycastMapping\r\n  * @param {Object} obj\r\n  */\r\n\r\nclass RaycastGroup {\r\n\r\n    /**\r\n     * \r\n     * @param {Array<THREE.Object3D>} items \r\n     * @param {RaycastCallback} callback \r\n     * @param {RaycastMapping} collectionQuery \r\n     * @param {Boolean} updateProperty \r\n     * @param {Boolean} recursive \r\n     */\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive){\r\n        /**\r\n         * @type {Boolean}\r\n         */\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    UpdateRaycastItems(){\r\n        this.raycastItems.length = 0;\r\n        for(var i = 0; i < this.items.length; i++){\r\n            let raycastItem = this.collectionQuery(this.items[i]);\r\n            if(raycastItem) this.raycastItems.push(raycastItem);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        \r\n        if(this.updateProperty){\r\n            this.UpdateRaycastItems();\r\n        }\r\n        \r\n        var raycastItems = this.raycastItems;\r\n        \r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            if(this.collectionQuery){\r\n                var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n                if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n            }\r\n            else{\r\n                this.callback(intersects[0].object, intersects[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nvar tempVec3 = new THREE.Vector3(),\r\n    tempVec3_b = new THREE.Vector3();\r\n\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\nclass Camera {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target.copy(lookTarget);\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.saveState();\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.reset();\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    /** @param {THREE.Vector3} position */\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.enabled && this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(!this.enabled && this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    Frame(box3, distanceMultiplier){\r\n        if(distanceMultiplier === undefined) distanceMultiplier = .75;\r\n\r\n        var fov = this.camera.fov * (Math.PI / 180);\r\n\r\n        var extent = tempVec3;\r\n        box3.getSize(extent);\r\n        var frameSize = Math.max(extent.x, extent.y, extent.z);\r\n        var distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\r\n        \r\n        var center = tempVec3_b;\r\n        box3.getCenter(center);\r\n        \r\n        var position = tempVec3;\r\n        position.subVectors(this.camera.position, center).normalize().multiplyScalar(distance).add(center);\r\n        position.y = Math.abs(position.y);\r\n\r\n        this.camera.position.copy(position);\r\n        this.SetTarget(center);\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls && this.controls.enabled;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Signaler from \"../../utils/cik/Signaler\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\nvar tlWatchTimer, tlWatchEntries;\r\nfunction tlWatchUpdater(){\r\n    for(let i = 0; i < tlWatchEntries.length; i++){\r\n        let entry = tlWatchEntries[i];\r\n        let newValue = entry.owner[entry.propertyName];\r\n        if(newValue !== entry.savedValue){\r\n            entry.savedValue = newValue;\r\n            entry.tl.value = newValue;\r\n        }\r\n    };\r\n}\r\nfunction addTLWatch(tl, owner, propertyName){\r\n    if(tlWatchTimer === undefined){\r\n        tlWatchEntries = [];\r\n        tlWatchTimer = setInterval(tlWatchUpdater, 200);\r\n    }\r\n    tlWatchEntries.push({tl: tl, owner: owner, propertyName: propertyName, savedValue: null});\r\n}\r\n\r\nconst _value = Symbol('value');\r\nconst typeofString = 'string';\r\n\r\nconst signals = {\r\n    change: 'change'\r\n};\r\n\r\nclass TextLabel extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        this[_value] = '';\r\n    }\r\n\r\n    get value(){\r\n        return this[_value];\r\n    }\r\n\r\n    /** @param {string} v */\r\n    set value(v){\r\n        if(v !== typeofString) v = this.GetString(v);\r\n\r\n        let changed = this[_value] !== v;\r\n        this[_value] = v;\r\n        if(changed) this.Dispatch(signals.change, this);\r\n    }\r\n\r\n    GetString(v){\r\n        return v.ToString ? v.ToString() : v.toString();\r\n    }\r\n\r\n    Watch(owner, propertyName){\r\n        addTLWatch(this, owner, propertyName);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nconst defaultGeometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n\r\n/**\r\n * @typedef TLVParams\r\n * @property {string} font css 32px sans-serif\r\n * @property {string} textAlign start, end, left, right or center\r\n * @property {string} sidePadding px\r\n * @property {Number} fontColor css\r\n * @property {Number} backColor css\r\n * @property {Number} width px\r\n * @property {Number} height px\r\n */\r\n/** @type {TLVParams} */\r\nconst defaultParams = {\r\n    font: '32px sans-serif',\r\n    textAlign: 'center',\r\n    sidePadding: 16,\r\n    fontColor: 0x000000,\r\n    backColor: 0xffffff,\r\n    width: 256,\r\n    height: 64\r\n};\r\n\r\nclass TextLabelView{\r\n    \r\n    /** @param {TLVParams} params */\r\n    constructor(params){\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        let material = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide});\r\n        this.view = new THREE.Mesh(defaultGeometry, material);\r\n    }\r\n\r\n    /** @param {TextLabel} value */\r\n    set textLabel(value){\r\n        value.On(TextLabel.signals.change, this.OnChange.bind(this));\r\n    }\r\n\r\n    /** @param {TextLabel} textLabel */\r\n    OnChange(textLabel){\r\n        let text = textLabel.value;\r\n        this.UpdateText(text);\r\n    }\r\n\r\n    /** @param {string} text */\r\n    UpdateText(text){\r\n        if(this.canvas2d === undefined)\r\n            this.canvas2d = document.createElement('canvas');\r\n\r\n        this.canvas2d.width = this.params.width;\r\n        this.canvas2d.height = this.params.height;\r\n\r\n        let context2d = this.canvas2d.getContext('2d');\r\n            context2d.fillStyle = this.params.backColor;\r\n            context2d.fillRect(0, 0, this.params.width + 2, this.params.height + 2);\r\n            context2d.fillStyle = this.params.fontColor;\r\n            context2d.font = this.params.font;\r\n            context2d.textAlign = this.params.textAlign;\r\n            context2d.textBaseline = 'middle';\r\n\r\n        let x = this.params.textAlign === 'start' || this.params.textAlign === 'left' ? this.params.sidePadding :\r\n            ( this.params.textAlign === 'end' || this.params.textAlign === 'right' ? this.params.width - this.params.sidePadding :\r\n            ( this.params.width / 2 ) );\r\n        context2d.fillText(text, x, this.params.height / 2);\r\n\r\n        //\r\n        let mesh = this.view;\r\n        /** @type {THREE.MeshBasicMaterial} */\r\n        let material = mesh.material;\r\n        if(!material.map){\r\n            material.map = new THREE.CanvasTexture(this.canvas2d);\r\n            material.map.minFilter = THREE.LinearFilter;\r\n            material.map.anisotropy = 1.4;\r\n        }\r\n        else{\r\n            material.map.image = this.canvas2d;\r\n        }\r\n        material.map.needsUpdate = true;\r\n    }\r\n\r\n}\r\n\r\nTextLabelView.Label = TextLabel;\r\n\r\nexport default TextLabelView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/TextLabelView.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","import { Element } from \"./UIUtils\";\r\n\r\nif(window.dat && !window.dat.guiExtensions){\r\n\r\n    window.dat.guiExtensions = true;\r\n\r\n    Element.CreateCSS([\r\n        '.tooltip .tooltiptext {',\r\n        '    visibility: hidden;',\r\n        '    position: absolute;',\r\n        '    width: 120px;',\r\n        '    background-color: #111;',\r\n        '    color: #fff;',\r\n        '    text-align: center;',\r\n        '    padding: 2px 0;',\r\n        '    border-radius: 2px;',\r\n        '    z-index: 1;',\r\n        '    opacity: 0;',\r\n        '    transition: opacity .6s;',\r\n        '}',\r\n\r\n        '.tooltip-top {',\r\n        '    bottom: 125%;',\r\n        '    left: 50%;',\r\n        '    margin-left: -60px;',\r\n        '}',\r\n        \r\n        '.tooltip:hover .tooltiptext {',\r\n        '    visibility: visible;',\r\n        '    opacity: 1;',\r\n        '}'\r\n    ]);\r\n\r\n    const styles = {\r\n        datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n    };\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n        get: function(){\r\n            if(!this._onGUIEvent)\r\n                this._onGUIEvent = [];\r\n            return this._onGUIEvent;\r\n        }\r\n    });\r\n\r\n    // update all\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n        var gui = this;\r\n        for (var i in gui.__controllers) {\r\n            var controller = gui.__controllers[i];\r\n            controller.updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            folders[i].updateAll();\r\n        }\r\n    };\r\n\r\n    // find\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n        var gui = this, controller, i;\r\n\r\n        if(property){ // 2 arguments\r\n            for (i = 0; i < gui.__controllers.length; i++){\r\n                controller = gui.__controllers[i];\r\n                if (controller.object == object && controller.property == property)\r\n                    return controller;\r\n            }\r\n\r\n            var folders = Object.values(gui.__folders);\r\n            for(i = 0; i < folders.length; i++){\r\n                controller = folders[i].find(object, property);\r\n                if(controller) return controller;\r\n            }\r\n        }\r\n        else{\r\n            property = object; // 1 argument\r\n\r\n            var folderKeys = Object.keys(gui.__folders);\r\n            for(i = 0; i < folderKeys.length; i++){\r\n                var folderName = folderKeys[i];\r\n                var folder = gui.__folders[folderName];\r\n                if(folderName === property)\r\n                    return folder;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n\r\n    // On open event\r\n    //if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n        get: function(){\r\n            return !this.closed;\r\n        },\r\n\r\n        set: function(value){\r\n            for(var i = 0; i < this.onGUIEvent.length; i++){\r\n                this.onGUIEvent[i](value ? 'open' : 'close');\r\n            }\r\n        }\r\n    });\r\n\r\n    // Disabled\r\n    function blockEvent(event){\r\n        event.stopPropagation();\r\n    }\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n        get: function(){\r\n            return this.domElement.hasAttribute(\"disabled\");\r\n        },\r\n\r\n        set: function(value){\r\n            if (value){\r\n                this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n                this.domElement.addEventListener(\"click\", blockEvent, true);\r\n                Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n            }\r\n            else{\r\n                this.domElement.removeAttribute(\"disabled\");\r\n                this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n                Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n            }\r\n        },\r\n\r\n        enumerable: true\r\n    });\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n        var controller = this.find(object, property);\r\n        controller.disabled = !value;\r\n    };\r\n\r\n    // Tooltip\r\n\r\n    Object.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n        get: function(){\r\n            return this._tooltip.innerHTML;\r\n        },\r\n\r\n        set: function(value){\r\n            if (value){\r\n                if(this._tooltip === undefined) {\r\n                    this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                    /**\r\n                     * @type {HTMLElement}\r\n                     */\r\n                    var container = this.domElement.parentElement.parentElement;\r\n                    container.classList.add('tooltip');\r\n                    container.appendChild(this._tooltip);\r\n                }\r\n                this._tooltip.innerHTML = value;\r\n            }\r\n        },\r\n\r\n        enumerable: true\r\n    });\r\n\r\n    (window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n        var controller = this.find(object, property);\r\n        controller.tooltip = value;\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import AFitTest from \"../packer/afit/AFitTest\";\r\n\r\nfunction delay(time, callback){\r\n    setTimeout(callback, time);\r\n}\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35, map: new THREE.TextureLoader().load('../resources/textures/checkers.jpg', function(map){\r\n    map.wrapS = map.wrapT = THREE.RepeatWrapping; \r\n})});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nconst alphaHexMask = 256 * 256 * 256;\r\n\r\n/** @type {THREE.Object3D} */\r\nvar view;\r\n\r\n/** @type {Map<string, *>} */\r\nvar debugObjects = new Map();\r\n\r\nvar tVec3 = new THREE.Vector3(),\r\n    tPos = new THREE.Vector3(),\r\n    tScale = new THREE.Vector3();\r\n\r\nclass DebugViz {\r\n\r\n    /**\r\n     * @param {THREE.Object3D} parent\r\n     */\r\n    static SetViewParent(parent){\r\n        view = new THREE.Object3D();\r\n        view.name = 'DebugViz view';\r\n        console.log(view.name + ' created...');\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        parent.add(view);\r\n    }\r\n\r\n    static get view(){ return view; }\r\n\r\n    /**\r\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\r\n     * @param {Number} [color] hex color\r\n     * @param {Number} [duration] in milliseconds\r\n     * @param {Boolean} [checkered] checkers map\r\n     */\r\n    static DrawVolume(x, y, z, w, h, l, color, duration, wireframe, checkered){\r\n        tPos.set(x, y, z);\r\n        tScale.set(w, h, l);\r\n\r\n        /** @type {THREE.Mesh} */\r\n        var volume = debugBox.clone();\r\n        view.add(volume);\r\n\r\n        volume.position.copy(tPos);\r\n        volume.scale.copy(tScale);\r\n\r\n        if(color){\r\n            /** @type {THREE.MeshStandardMaterial} */\r\n            let material = volume.material.clone();\r\n            volume.material = material;\r\n            material.color.setHex(color && 0xffffff);\r\n            if(wireframe === true){\r\n                material.wireframe = true;\r\n            }\r\n            else{\r\n                material.opacity = Math.floor(color / alphaHexMask) / 256;\r\n                material.transparent = material.opacity > 0 && material.opacity < .99;\r\n            }\r\n\r\n            if(!checkered){\r\n                material.map = null;\r\n            }\r\n            else{\r\n                material.map.repeat.set(10, 10);\r\n            }\r\n        }\r\n\r\n        let uid = THREE.Math.generateUUID();\r\n        debugObjects.set(uid, volume);\r\n\r\n        if(duration > 0){\r\n            delay(duration, function(){\r\n                DebugViz.RemoveObjectByUID(uid);\r\n            });\r\n        }\r\n\r\n        return uid;\r\n    }\r\n\r\n    /**\r\n     * @param {string} uid \r\n     */\r\n    static RemoveObjectByUID(uid){\r\n        var object = debugObjects.get(uid);\r\n        if(object instanceof THREE.Object3D && object.parent){\r\n            object.parent.remove(object);\r\n        }\r\n    }\r\n\r\n    static ClearAll(){\r\n        for(var uid of debugObjects.keys()){\r\n            DebugViz.RemoveObjectByUID(uid);\r\n        }\r\n    }\r\n\r\n    /** @param {Boolean} visible */\r\n    static SetPackingSpaceVisibility(visible){\r\n        Debug.app.view.packingSpaceView.view.visible = visible;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nclass Debug {\r\n\r\n    static MaterialEdit(callback){\r\n        let objects = Debug.app.view.packResultView.cargoViews;\r\n        objects.forEach(o => {\r\n            let material = o.mesh.material;\r\n            callback(material);\r\n            material.needsUpdate = true;\r\n        });\r\n    }\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\nDebug.Viz = DebugViz;\r\n\r\n/** @type {import('../../FreightPacker').default} */\r\nDebug.api;\r\n/** @type {import('../App').default} */\r\nDebug.app;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Container} container\r\n     */\r\n    Add(container){\r\n        let containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    Clear(){\r\n        for(let i = 0; i < this.containerViews.length; i++){\r\n            let cv = this.containerViews[i];\r\n            this.view.remove(cv.view);\r\n        }\r\n        this.containerViews.length = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(let iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(let iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nclass ContainerBox{\r\n    /** @param {THREE.Mesh} mesh */\r\n    constructor(mesh){\r\n        this.mesh = mesh;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, ContainerBox>}\r\n     */\r\n    var boxes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .2;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        boxes.set(cv, new ContainerBox(mesh));\r\n    });\r\n\r\n    return boxes;\r\n}\r\n\r\nvar tempVec3 = new THREE.Vector3();\r\n\r\n/** @type {WeakMap<Container, ContainerView>} */\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        // Store original dimensions\r\n        this.initializationBox3 = new THREE.Box3();\r\n        this.initializationBox3.setFromObject(view);\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        Asset.StandardSceneObject(this.view);\r\n        Asset.ColorTemplates('Containers').Apply(this.view);\r\n\r\n        this.containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, box] of this.containerBoxes){\r\n            box.mesh.position.add(cv.position);\r\n            this.view.add(box.mesh);\r\n        }\r\n\r\n    }\r\n\r\n    //** @param {Input} input @param {Camera} cameraController */\r\n    /*InitSliderBoxes(input, cameraController, changeCallback, stopCallback){\r\n        for(var box of this.containerBoxes.values()){\r\n            box.UseInput(input, cameraController);\r\n            box.On(sliderSignals.change, changeCallback);\r\n            box.On(sliderSignals.stop, stopCallback);\r\n        }\r\n    }*/\r\n\r\n    /**\r\n     * @param {Boolean} visible\r\n     * @param {THREE.Vector3} [padding]\r\n     */\r\n    PlatformVisibility(visible, padding){\r\n\r\n        if(visible && this.platformMesh === undefined){\r\n\r\n            if(padding === undefined) padding = new THREE.Vector3(0, .01, 0);\r\n        \r\n            this.initializationBox3.getSize(tempVec3);\r\n\r\n            let planeGeom = new THREE.BoxGeometry(tempVec3.x + padding.x * 2, padding.y, tempVec3.z + padding.z * 2, 1, 1, 1);\r\n            let planeMaterial = new Asset.CreateSolidMaterialMatte(Asset.ColorTemplates('Containers').Apply(0xffffff));\r\n            this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n            Asset.ReceiveShadow(this.platformMesh);\r\n\r\n            this.platformMesh.position.y = .001;\r\n            this.view.add(this.platformMesh);\r\n        }\r\n\r\n        this.platformMesh.visible = visible;\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( !view ){\r\n            let boxes = createContainerBoxes(container);\r\n            let object3d = new THREE.Object3D();\r\n            for(var [cv, box] of boxes){\r\n                box.mesh.position.add(cv.position);\r\n                object3d.add(box.mesh);\r\n            }\r\n\r\n            view = new ContainerView(container, object3d);\r\n            views.set(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","import Logger from '../utils/cik/Logger';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\nimport LightDispatcher from './LightDispatcher';\r\nimport App from '../App';\r\nimport CargoList from '../packer/CargoList';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst _cargoList = Symbol('cargoList');\r\n\r\nconst signals = {\r\n    update: 'update',\r\n    abort: 'abort',\r\n    insert: 'insert',\r\n    modify: 'modify',\r\n    remove: 'remove'\r\n};\r\n\r\n/**\r\n * @typedef {Object} CargoInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends LightDispatcher {\r\n\r\n    /**\r\n     * @param {CargoInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n\r\n        this[_cargoList] = app.packer.cargoList;\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        return new BoxEntry();\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\r\n    GetEntry(entryUID){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entry = cargoList.GetEntry(entryUID);\r\n        return entry;\r\n    }\r\n\r\n    /** @returns {Array<BoxEntry>} all entries or an empty array */\r\n    GetEntries(){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entries = [];\r\n        cargoList.groups.forEach(value => entries.push(value.entry));\r\n\r\n        return entries;\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.update, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.abort);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Add, entry rejected, dimensions != Volume:', entry.dimensions);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                let commitedEntry = entry.Clone();\r\n                let uid = commitedEntry.SetUID();\r\n\r\n                this.Dispatch(signals.insert, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Modify an existing box entry\r\n     * @param {string} entryUID\r\n     * @param {BoxEntry} boxEntry\r\n     * @returns {Boolean} success\r\n     */\r\n    Modify(entryUID, boxEntry){\r\n        let existing = this.GetEntry(entryUID);\r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Modify, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        if(BoxEntry.Assert(boxEntry)){\r\n\r\n            if( Dimensions.IsVolume(boxEntry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Modify, entry rejected, dimensions != Volume:', boxEntry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                existing.Copy(boxEntry);\r\n\r\n                this.Dispatch(signals.modify, existing);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Modify, error/entry:', error, boxEntry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Modify, entry:', boxEntry);\r\n        return false;\r\n    }\r\n\r\n    /** Removes an existing box entry\r\n     * @param {string} entryUID\r\n     * @returns {Boolean} success\r\n     */\r\n    Remove(entryUID){\r\n        \r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let existing = cargoList.GetEntry(entryUID);\r\n        \r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Remove, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        this.Dispatch(signals.remove, existing);\r\n        return true;\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nCargoInput.BoxEntry = BoxEntry;\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {*} jsonObject.view json data\r\n * @property {Container} jsonObject.container json data\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded',\r\n    sliderValueChange: 'sliderValueChange',\r\n    sliderValueStop: 'sliderValueStop'\r\n};\r\n\r\n/**\r\n * @typedef {Object} PackingSpaceInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\nclass PackingSpaceInput extends LightDispatcher {\r\n    /**\r\n     * @param {PackingSpaceInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    }\r\n\r\n    /**\r\n     * @param {PackingSpaceJSON} jsonObject \r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Load(jsonObject){\r\n\r\n        /** @type {PackingSpaceJSON} jsonObject */\r\n        let data;\r\n        try{\r\n            data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        }\r\n        catch(error){\r\n            Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject:', error, jsonObject);\r\n            return false;\r\n        }\r\n\r\n        if(data.container){\r\n            let container;\r\n            try{\r\n                container = Container.FromJSON(data.container);\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.container:', error, data.container);\r\n                return false;\r\n            }\r\n\r\n            if(!container.uid) container.SetUID();\r\n            let uid = container.uid;\r\n            \r\n            let model;\r\n            if(data.view){\r\n                try{\r\n                    model = Asset.FromJSON(data.view);\r\n                }\r\n                catch(error){\r\n                    Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.view:', error, data.view);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            let containerView;\r\n            if(model){\r\n                containerView = new ContainerView(container, model);\r\n            }\r\n            else{\r\n                containerView = ContainerView.Request(container);\r\n            }\r\n            \r\n            let units = this.params.ux.params.units;\r\n            let padding = 60 * units;\r\n            let thickness = 2 * units;\r\n            containerView.PlatformVisibility(true, new THREE.Vector3(padding, thickness, padding));\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n            return uid;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport Packer from \"../packer/Packer\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/** @typedef {import('../packer/Packer').SolverParams} SolverParams\r\n */\r\n\r\n/** @typedef {import('../packer/cub/CUB').CUBParams} CUBParams\r\n */\r\n\r\nclass ResultSpace{\r\n    /** @param {string} uid */\r\n    constructor(uid){\r\n        this.uid = uid;\r\n    }\r\n}\r\n\r\nclass ResultEntry{\r\n    /** @param {string} uid @param {ResultSpace} space @param {Number} quantity */\r\n    constructor(uid, space, quantity){\r\n        this.uid = uid;\r\n        this.space = space;\r\n        this.quantity = quantity || 0;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n        /** @type {Array<ResultSpace>} */\r\n        this.packingSpaces = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.packed = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.unpacked = [];\r\n\r\n        this.totalPacked = 0;\r\n        this.totalUnpacked = 0;\r\n        /** algorithm runtime in seconds */\r\n        this.solveDuration = 1;\r\n    }\r\n}\r\n\r\n/** @param {Packer.PackingResult} packingResult */\r\nfunction toInterfaceResults(packingResult){\r\n    let result = new PackingResult();\r\n    \r\n    /** @param {string} containerUID */\r\n    function getSpace(containerUID){\r\n        for(let i = 0; i < result.packingSpaces.length; i++){\r\n            if(result.packingSpaces[i].uid === containerUID){\r\n                return result.packingSpaces[i];\r\n            }\r\n        }\r\n\r\n        let ps = new ResultSpace(containerUID);\r\n        result.packingSpaces.push(ps);\r\n        return ps;\r\n    }\r\n\r\n    let totalPacked = 0,\r\n        totalUnpacked = 0;\r\n\r\n    /** @param {ResultEntry} resultEntry @param {Array<ResultEntry>} list */\r\n    function packEntry(resultEntry, list){\r\n        let isFirst = true;\r\n        for(let i = 0; i < list.length; i++){\r\n            if(list[i].uid === resultEntry.uid){\r\n                isFirst = false;\r\n                list[i].quantity ++;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(isFirst){\r\n            resultEntry.quantity = 1;\r\n            list.push(resultEntry);\r\n        }\r\n    }\r\n\r\n    packingResult.packed.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = getSpace(p.containingVolume.container.uid);\r\n        packEntry(new ResultEntry(uid, space), result.packed);\r\n        totalPacked++;\r\n    });\r\n\r\n    packingResult.unpacked.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = null;\r\n        let unpackedQuantity = p.unpackedQuantity;\r\n        result.unpacked.push(new ResultEntry(uid, space, unpackedQuantity));\r\n        totalUnpacked += unpackedQuantity;\r\n    });\r\n\r\n    result.totalPacked = totalPacked;\r\n    result.totalUnpacked = totalUnpacked;\r\n    result.solveDuration = packingResult.runtime;\r\n\r\n    return result;\r\n}\r\n\r\nconst signals = {\r\n    solveRequest: 'solveRequest',\r\n    solved: 'solved',\r\n    failed: 'failed'\r\n};\r\n\r\n/** @typedef PackerParams @property {Number} defaultStackingFactor */\r\nconst defaultParams = {\r\n    defaultStackingFactor: 10\r\n};\r\n\r\nclass PackerInterface extends LightDispatcher {\r\n\r\n    /** @param {PackerParams} params */\r\n    constructor(params){\r\n        super();\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n    /** @param {SolverParams} params */\r\n    Solve(params){\r\n        this.Dispatch(signals.solveRequest, params);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Notify(...args){\r\n        let value = args[0];\r\n        switch(value){\r\n            case signals.solved:\r\n                let packingResult = args[1];\r\n                let result = toInterfaceResults(packingResult);\r\n                this.Dispatch(signals.solved, result);\r\n                break;\r\n            case signals.failed:\r\n                let error = args[1];\r\n                this.Dispatch(signals.failed, error);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App, { AppParams } from './api/App';\r\nimport CargoInput, { CargoInputParams } from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput, { PackingSpaceInputParams } from './api/components/PackingSpaceInput';\r\nimport UX, { UXParams } from './api/UX';\r\nimport PackerInterface, { PackerParams } from './api/components/PackerInterface';\r\nimport LightDispatcher from './api/components/LightDispatcher';\r\n\r\n//#region dev\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default,\r\n\tConfig: require('./api/utils/cik/config/Config').default\r\n};\r\n\r\n/** @param {FreightPacker|App} domain */\r\nfunction devSetup(domain){\r\n\tif(domain instanceof FreightPacker){\r\n\t\tlet fp = domain;\r\n\t\tglobal.fp = fp;\r\n\t\tFreightPacker.utils.Debug.api = fp;\r\n\t\tlet params = fp.params;\r\n\t\tif(params.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\r\n\t\t//require('./api/debug/Tester').testPool();\r\n\t\t//utils.Debug.CLPTest.Test1();\r\n\t}\r\n\r\n\tif(domain instanceof App){\r\n\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\r\n\t\tlet app = domain;\r\n\t\tFreightPacker.utils.Debug.app = app;\r\n\t\tapp.sceneSetup.OnIncludingPrior(SceneSetup.signals.init, function(){\r\n\t\t\tFreightPacker.utils.Debug.Viz.SetViewParent(app.sceneSetup.sceneController.scene);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/** @param {FreightPacker} fp */\r\nfunction auto(fp){\r\n\t\r\n}\r\n\r\n//#endregion\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug set to false for deployment\r\n * @property {UXParams} uxParams UX parameters\r\n * @property {PackerParams} packerParams Packer general parameters\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst signals = {\r\n\tready: 'ready'\r\n};\r\n\r\nclass FreightPacker extends LightDispatcher {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tsuper();\r\n\t\tlet scope = this;\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tdevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.uxParams);\r\n\r\n\t\t/** @type {CargoInputParams} */\r\n\t\tlet cargoInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: description fields (label, etc.), dimensions and constraints */\r\n\t\tthis.cargoInput = new CargoInput(cargoInputParams);\r\n\r\n\t\t/** @type {PackingSpaceInputParams} */\r\n\t\tlet packingSpaceInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: packing spaces configurations and assets */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput(packingSpaceInputParams);\r\n\r\n\t\t/** Manual solving and notification */\r\n\t\tthis.packer = new PackerInterface(this.params.packerParams);\r\n\r\n\t\t/** @type {AppParams} */\r\n\t\tlet appParams = {ux: this.ux, cargoInput: this.cargoInput, packingSpaceInput: this.packingSpaceInput, packerInterface: this.packer};\r\n\t\tlet app = new App(containerDiv, appParams);\r\n\t\t\tapp.On(App.signals.start, function(){\r\n\t\t\t\tscope.Dispatch(signals.ready);\r\n\t\t\t});\r\n\r\n\t\tdevSetup(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tauto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tlet webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/** Enumeration of dispatched types */\r\n\tstatic get signals(){\r\n\t\treturn signals;\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n}\r\n\r\nFreightPacker.UX = UX;\r\nFreightPacker.CargoInput = CargoInput;\r\nFreightPacker.PackingSpaceInput = PackingSpaceInput;\r\nFreightPacker.Packer = PackerInterface;\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\nimport RaycastGroup from \"./RaycastGroup\";\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * @param {string} event Update Update25 Update10 OnMouseDown OnDoubleClick OnMouseUp OnRightClick OnClick\r\n     * @param {string} groupID \r\n     * @param {RaycastGroup} group \r\n     */\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef RendererParams\r\n * @property {Boolean} antialias\r\n * @property {Boolean} shadows\r\n * @property {Boolean} shadowsAutoUpdate\r\n * @property {Number} clearColor - hex color 0xff7f00\r\n * @property {Number} renderSizeMul\r\n * @property {Boolean} composer\r\n */\r\n\r\n/** @type {RendererParams} */\r\nconst defaultParams = {\r\n    antialias: true,\r\n    shadows: true,\r\n    shadowMapType: THREE.PCFSoftShadowMap,\r\n    shadowsAutoUpdate: true,\r\n    clearColor: 0xcfcfcf,\r\n    renderSizeMul: 1,\r\n    composer: false\r\n};\r\n\r\nclass Renderer {\r\n    /**\r\n     * @param {RendererParams} params \r\n     */\r\n    constructor(params) {\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        this.renderer.shadowMap.enabled = this.params.shadows;\r\n        this.renderer.shadowMap.type = this.params.shadowMapType;\r\n        this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.Uncharted2ToneMapping;\r\n        this.renderer.toneMappingExposure = 1.4;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport EntryInputView from \"./EntryInputView\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {HTMLElement} container\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 0, -100), new THREE.Euler(0, Math.PI, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n        this.cameraController.OrbitControls(this.params.container);\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n\r\n        let entryInputViewParams = Utils.AssignUndefined({}, this.params);\r\n        this.entryInputView = new EntryInputView(entryInputViewParams);\r\n        this.AddDefault(this.entryInputView.view);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Preview(entry){\r\n        this.entryInputView.Preview(entry);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import CargoEntry from '../components/common/CargoEntry';\r\nimport BoxEntry from '../components/box/BoxEntry';\r\nimport CargoBoxView from './CargoBoxView';\r\nimport CargoView from './CargoView';\r\nimport Utils from '../utils/cik/Utils';\r\n\r\n/**\r\n * @typedef {Object} EntryInputViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @type {EntryInputViewParams} */\r\nconst defaultParams = {\r\n\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec3 = new THREE.Vector3();\r\n\r\nconst _scaleFigure = Symbol('scaleFigure');\r\nconst scaleFigure = {\r\n    man: 'man',\r\n    woman: 'woman'\r\n};\r\n\r\nclass EntryInputView{\r\n    /** @param {EntryInputViewParams} params */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.preview = new THREE.Object3D();\r\n        this.view.add(this.preview);\r\n\r\n        /** @type {Map<string, CargoView>} */\r\n        this.previewTypes = new Map();\r\n\r\n        // scale ref\r\n        const height = 71 * this.params.ux.params.units;\r\n        const scope = this;\r\n        new THREE.TextureLoader().load('../resources/textures/scaleref-alphaMap.jpg', function(alphaMap){\r\n            alphaMap.repeat.setX(.5);\r\n\r\n            let refMesh = new THREE.Mesh(\r\n                new THREE.PlaneGeometry(height / 2, height, 1, 1),\r\n                new THREE.MeshBasicMaterial({color: 0x000000, alphaMap: alphaMap})\r\n            );\r\n\r\n            refMesh.position.y = height / 2;\r\n\r\n            console.log(refMesh);\r\n\r\n            scope.view.add(refMesh);\r\n            scope.refMesh = refMesh;\r\n            scope.scaleFigure = scaleFigure.man;\r\n        });\r\n        \r\n    }\r\n\r\n    /** @param {scaleFigure} value */\r\n    set scaleFigure(value){\r\n        this[_scaleFigure] = value;\r\n        let refMesh = this.refMesh;\r\n        if(refMesh instanceof THREE.Mesh){\r\n            /** @type {THREE.Texture} */\r\n            let alphaMap = refMesh.material.alphaMap;\r\n            if(value === scaleFigure.man){\r\n                alphaMap.offset.setX(0);\r\n            }\r\n            else{\r\n                alphaMap.offset.setX(-.5);\r\n            }\r\n        }\r\n    }\r\n\r\n    get scaleFigure(){ return this[_scaleFigure]; }\r\n\r\n    static get scaleFigure(){ return scaleFigure; }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Preview(entry){\r\n        let c = this.preview.children;\r\n        while(c.length > 0) this.preview.remove(c[c.length - 1]);\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        /** @type {THREE.Object3D} */\r\n        let view;\r\n        if(entry instanceof BoxEntry){\r\n            /** @type {CargoBoxView} */\r\n            let boxView = this.previewTypes.get(entry.type);\r\n            if(boxView){\r\n                if(boxView.entry.uid !== entry.uid){\r\n                    boxView.color = CargoBoxView.PeekNextColor();\r\n                    entry.Description('color', boxView.color.getHex());\r\n                }\r\n                boxView.entry = entry;\r\n            }\r\n            else{\r\n                boxView = new CargoBoxView(entry);\r\n                this.previewTypes.set(entry.type, boxView);\r\n                entry.Description('color', boxView.color.getHex());\r\n            }\r\n\r\n            view = boxView.view;\r\n        }\r\n\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        this.preview.add(view);\r\n    }\r\n}\r\n\r\nexport default EntryInputView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/EntryInputView.js","\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    /**\r\n     * @param {PackingProperty} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass StackingProperty extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        this.capacity = Number.MAX_SAFE_INTEGER;\r\n    }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        this.capacity = Number.MAX_SAFE_INTEGER;\r\n    }\r\n\r\n    /**\r\n     * @param {StackingProperty} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.capacity = prop.capacity;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new StackingProperty();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nconst orientations = { xyz: 'xyz', zyx: 'zyx', yxz: 'yxz', yzx: 'yzx', zxy: 'zxy', xzy: 'xzy' };\r\nconst _allowedOrientations = Symbol('allowedOrientations');\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /** @param {Array<string>} value */\r\n    set allowedOrientations(value){\r\n        this[_allowedOrientations] = value;\r\n    }\r\n    get allowedOrientations(){ return this[_allowedOrientations]; }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        this.allowedOrientations = undefined;\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.allowedOrientations = prop.allowedOrientations instanceof Array ? prop.allowedOrientations.slice() : undefined;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n\r\n    /** Enumerations of orientation values, do not modify directly */\r\n    static get orientations(){\r\n        return orientations;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n\r\n        this.grounded = false;\r\n    }\r\n\r\n    Reset(){\r\n        super.Reset();\r\n        this.grounded = false;\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        super.Copy(prop);\r\n        this.grounded = prop.grounded;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.Copy(this);\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    StackingProperty,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","\r\nconst typeofNumber = 'number';\r\n\r\n/** @param {THREE.Color} source @param {Array<THREE.Color>} colors */\r\nfunction findNearest(source, colors){\r\n    var dMin = Number.MAX_SAFE_INTEGER;\r\n    var nearest = source;\r\n    colors.forEach(color => {\r\n        let vx = color.r - source.r,\r\n            vy = color.g - source.g,\r\n            vz = color.b - source.b;\r\n        let d = vx * vx + vy * vy + vz * vz;\r\n        if(d < dMin){\r\n            dMin = d;\r\n            nearest = color;\r\n        }\r\n    });\r\n\r\n    return nearest;\r\n}\r\n\r\nvar tempColor = new THREE.Color();\r\n\r\nclass ColorTemplate{\r\n    /**\r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    constructor(...colors){\r\n        /** @type {Array<THREE.Color>} */\r\n        this.colors = [];\r\n        colors.forEach(color => {\r\n            if( !(color instanceof THREE.Color) ) color = new THREE.Color(color);\r\n            this.colors.push(color);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @returns {T}\r\n     */\r\n    Apply(target){\r\n        var scope = this;\r\n        if(typeof target === typeofNumber){\r\n            let mapColor = findNearest(tempColor.setHex(target), this.colors);\r\n            target = mapColor.getHex();\r\n        }\r\n        else if(target instanceof THREE.Color){\r\n            let mapColor = findNearest(target, this.colors);\r\n            target.copy(mapColor);\r\n        }\r\n        else if(target instanceof THREE.Material){\r\n            let color = target.color;\r\n            if(color instanceof THREE.Color){\r\n                let mapColor = findNearest(color, this.colors);\r\n                color.copy(mapColor);\r\n            }\r\n        }\r\n        else if(target instanceof THREE.Object3D){\r\n            target.traverse(function(child){\r\n                if(child instanceof THREE.Mesh){\r\n                    scope.Apply(child.material);\r\n                }\r\n            });\r\n        }\r\n        return target;\r\n    }\r\n}\r\n\r\nexport default ColorTemplate;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/ColorTemplate.js","import App from \"../App\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst typeofNumber = 'number';\r\n\r\nclass PackResults {\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n\r\n        this[_app] = app;\r\n    }\r\n\r\n    get animationDuration(){ \r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        return app.view.packResultView.params.animationDuration;\r\n    }\r\n    set animationDuration(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.animationDuration error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.params.animationDuration = value; \r\n    }\r\n\r\n    /** \r\n     * 0: None - 1: All (over y span)\r\n     * @param {Number} value\r\n     */\r\n    SliceResults(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.SliceResults error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.Slice(value);\r\n    }\r\n\r\n}\r\n\r\nconst visualizationSignals = {\r\n    \r\n};\r\n\r\nclass Visualization extends LightDispatcher{\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        this.packResults = new PackResults(app);\r\n    }\r\n\r\n    /** Selects an entry in the scene, optionally highlighting packed instances\r\n     *  @param {string | Boolean} [entryUID] default = false (deselect) @param {Boolean} [highlightPackedInstances] default = true */\r\n    SelectEntry(entryUID, highlightPackedInstances){\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n\r\n        if(entryUID && !app.packer.cargoList.GetEntry(entryUID)){\r\n            Logger.Warn('Visualization.SelectEntry failed, entry not found for:', entryUID);\r\n            return;\r\n        }\r\n\r\n        app.view.cargoListView.Select(entryUID);\r\n\r\n        if(highlightPackedInstances === undefined) highlightPackedInstances = true;\r\n        if(highlightPackedInstances || !entryUID) app.view.packResultView.SelectEntry(entryUID);\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return visualizationSignals;\r\n    }\r\n}\r\n\r\nexport default Visualization;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/Visualization.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport App from \"../App\";\r\nimport CargoListView from \"../view/CargoListView\";\r\nimport CargoEntry from \"./common/CargoEntry\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    boxEntryInteract: 'beInteract0'\r\n};\r\n\r\nclass User extends LightDispatcher{\r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        let scope = this;\r\n        /** @param {CargoEntry} cargoEntry */\r\n        function onCargoInteract(cargoEntry){\r\n            scope.Dispatch(signals.boxEntryInteract, cargoEntry.uid);\r\n        }\r\n\r\n        app.view.cargoListView.On(CargoListView.signals.interact, onCargoInteract);\r\n    }\r\n\r\n    /** Enumeration of dispatched types */\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/User.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Utils from \"../../utils/cik/Utils\";\r\nimport Asset from \"../../components/assets/Asset\";\r\n\r\n/** @typedef FloatingShelfParams @property {THREE.Vector3} padding x z for padding, y for thickness @property {Number} colorHex */\r\n/** @type {FloatingShelfParams} */\r\nconst defaultParams = {\r\n    padding: new THREE.Vector3(0, .001, 0),\r\n    colorHex: 0xffffff\r\n};\r\n\r\nvar box3 = new THREE.Box3();\r\nvar vec3 = new THREE.Vector3();\r\n\r\nclass FloatingShelf{\r\n    /** @param {THREE.Object3D} targetView @param {FloatingShelfParams} params */\r\n    constructor(targetView, params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.targetView = targetView;\r\n        this.view = new THREE.Object3D();\r\n\r\n        let planeGeom = new THREE.BoxGeometry(1, 1, 1, 1, 1, 1);\r\n        let planeMaterial = new Asset.CreateSolidMaterialMatte(this.params.colorHex);\r\n        this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n        Asset.ReceiveShadow(this.platformMesh);\r\n\r\n        this.view.add(this.platformMesh);\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Update(){\r\n        box3.setFromObject(this.targetView);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.targetView.matrixWorld);\r\n        box3.applyMatrix4(worldToLocal);\r\n        box3.getSize(vec3);\r\n        let height = vec3.y;\r\n\r\n        let padding = this.params.padding;\r\n        let thickness = Math.max(.0001, padding.y);\r\n        this.platformMesh.scale.set(Math.max(.0001, vec3.x + padding.x * 2), thickness, Math.max(.0001, vec3.z + padding.z * 2));\r\n\r\n        box3.getCenter(vec3);\r\n        this.platformMesh.position.set(vec3.x, vec3.y - height / 2 - thickness, vec3.z);\r\n    }\r\n}\r\n\r\nexport default FloatingShelf;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/FloatingShelf.js","import Utils from \"../../utils/cik/Utils\";\r\n\r\n\r\nconst cubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst outlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide, depthWrite:false, depthTest:true});\r\nconst boxOutlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide});\r\n\r\n/** @typedef OutlineParams @property {Number} color @property {Number} opacity @property {Number} offsetFactor @property {Number} offsetUnits */\r\n/** @type {OutlineParams} */\r\nconst defaultParams = {\r\n    color: 0x000000,\r\n    opacity: 1,\r\n    offsetFactor: 1,\r\n    offsetUnits: 1\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass Outline{\r\n\r\n    /** @param {OutlineParams} params */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        /** @type {Map<THREE.Object3D, THREE.Object3D>} */\r\n        this.outlines = new Map();\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set object3d(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.material === undefined) this.material = outlineMaterial.clone();\r\n        let material = this.material;\r\n            material.color.setHex(this.params.color);\r\n            material.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n            material.transparent = true;//material.opacity < .999;\r\n            material.polygonOffset = true;\r\n            material.polygonOffsetFactor = -this.params.offsetFactor;\r\n            material.polygonOffsetUnits = this.params.offsetUnits;\r\n\r\n        let outline = this.outlines.get(value);\r\n        if(!outline){\r\n            outline = value.clone(true);\r\n            if(outline instanceof THREE.Mesh){\r\n                outline.material = material;\r\n            }\r\n            else{\r\n                outline.children.forEach(oChild => oChild.traverse(function(child){\r\n                    if(child instanceof THREE.Mesh){\r\n                        let outlineReady = child.clone();\r\n                        outlineReady.material = material;\r\n                        if(child.parent){\r\n                            // Assuming end of hierarchical tree\r\n                            child.parent.add(outlineReady);\r\n                            child.parent.remove(child);\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n\r\n            this.outlines.set(value, outline);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        outline.matrixWorld.copy(value.matrixWorld);\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(outline);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set box(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.boxMaterial === undefined) this.boxMaterial = boxOutlineMaterial.clone();\r\n        this.boxMaterial.color.setHex(this.params.color);\r\n        this.boxMaterial.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n        this.boxMaterial.transparent = this.boxMaterial.opacity < .999;\r\n\r\n        if(this.boxMesh === undefined){\r\n            this.boxMesh = new THREE.Mesh(cubeGeometry, this.boxMaterial);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        tempBox3.setFromObject(value);\r\n        tempBox3.getSize(this.view.scale);\r\n        this.view.scale.addScalar(this.params.offsetFactor);\r\n        tempBox3.getCenter(this.view.position);\r\n\r\n        let parent = this.view.parent;\r\n        if(parent){\r\n            parent.updateMatrixWorld();\r\n            let inverse = tempMatrix4.getInverse(parent.matrixWorld);\r\n            this.view.applyMatrix(inverse);\r\n        }\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(this.boxMesh);\r\n    }\r\n\r\n    Disable(){\r\n        this.view.visible = false;\r\n    }\r\n    \r\n}\r\n\r\nexport default Outline;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Outline.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nconst type = 'Volume';\r\nconst _box3 = Symbol('box3');\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n\r\n        this[_box3] = new THREE.Box3();\r\n    }\r\n\r\n    /** @returns {THREE.Box3} */\r\n    get box3(){\r\n        /** @type {THREE.Box3} */\r\n        let b = this[_box3];\r\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\r\n        return b;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","/** @author chadiik <http://chadiik.com/> */\r\n\r\nimport { Container, Item } from \"./Components\";\r\nimport Debug from \"../../debug/Debug\";\r\nimport { rectanglesFromPoints, linesIntersect, rectangleContainsPoint, rectangleContainsRectangle, reduceRectangles } from \"./Math2D\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\nconst debugging = false;\r\n\r\nvar running = true;\r\nif(debugging){\r\n    Debug.app.sceneSetup.input.ListenKeys(['right', 'space']);\r\n}\r\n\r\nfunction sleep(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force) setTimeout(resolve, ms);\r\n        else resolve();\r\n    });\r\n}\r\n\r\nfunction click(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('mouseup', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('mouseup', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\nfunction keypress(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('keydown', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('keydown', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\nfunction debugLog(...args){\r\n    console.log(...args);\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nfunction debugRegion(region, color, solid, duration, checkered){\r\n    var x = region.x, y = region.y, z = region.z, w = region.width, h = region.height, l = region.length;\r\n    var debugUID = Debug.Viz.DrawVolume(x + w/2, y + h/2, z + l/2, w, h, l, color || 0xaaffff, duration || -1, !Boolean(solid), checkered);\r\n    return debugUID;\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nasync function debugRegionBlink(region, color, solid, checkered, blinks, onDuration, offDuration){\r\n    for(let i = 0; i < blinks; i++){\r\n        debugRegion(region, color, solid, onDuration, checkered);\r\n        await sleep(onDuration + offDuration);\r\n    }\r\n}\r\n\r\n/** @param {Array<string>} */\r\nfunction debugClear(uids){\r\n    if(uids){\r\n        uids.forEach(uid => {\r\n            Debug.Viz.RemoveObjectByUID(uid);\r\n        });\r\n    }\r\n    else{\r\n        Debug.Viz.ClearAll();\r\n    }\r\n}\r\n\r\nfunction numberFormat(n, d){\r\n    if(n > Number.MAX_SAFE_INTEGER - 2) return 'MAX';\r\n    let nStr = Math.round(n) !== n ? n.toFixed(d) : n;\r\n    return nStr;\r\n}\r\n\r\n/** @typedef FormatParams @property {Function} nf number formatting function */\r\n/** @param {string} str @param {FormatParams} params @param {Array<*>} args */\r\nfunction format(str, params, ...args){\r\n    let index = 0;\r\n    while( (index = str.indexOf('@', index)) !== -1 ){\r\n        if(str[index - 1] !== '\\\\'){\r\n            let a = args.shift();\r\n            if(typeof a === 'number') a = params.nf(a);\r\n            str = str.replace('@', a);\r\n        }\r\n        index += 1;\r\n    }\r\n    return str;\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst smallValue = .000001;\r\nconst smallValueSqrt = .001;\r\nconst maxWeightValue = Number.MAX_SAFE_INTEGER;\r\n\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 \r\n * @property {Number} weight @property {Number} weightCapacity @property {Number} stackingCapacity \r\n */\r\n\r\n/**\r\n * @param {Rectangle | Array<Rectangle>} rect \r\n * @param {Number} weight \r\n * @param {Number} weightCapacity \r\n * @param {Number} stackingCapacity \r\n */\r\nfunction setRectangleWeights(rect, weight, weightCapacity, stackingCapacity){\r\n    if(rect instanceof Array){\r\n        for(let i = 0; i < rect.length; i++){\r\n            rect[i].weight = weight;\r\n            rect[i].weightCapacity = weightCapacity;\r\n            rect[i].stackingCapacity = stackingCapacity;\r\n        }\r\n    }\r\n    else{\r\n        rect.weight = weight;\r\n        rect.weightCapacity = weightCapacity;\r\n        rect.stackingCapacity = stackingCapacity;\r\n    }\r\n}\r\n\r\nclass Region{\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    constructor(x, y, z, width, height, length, preferredX){\r\n        this.Set(x, y, z, width, height, length, preferredX);\r\n        this.SetWeights(0, maxWeightValue, maxWeightValue);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    Set(x, y, z, width, height, length, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.preferredX = preferredX;\r\n        return this;\r\n    }\r\n    \r\n    /**\r\n     * @param {Number} weight \r\n     * @param {Number} weightCapacity \r\n     * @param {Number} stackingCapacity \r\n     */\r\n    SetWeights(weight, weightCapacity, stackingCapacity){\r\n        this.weight = weight;\r\n        this.weightCapacity = weightCapacity;\r\n        this.stackingCapacity = stackingCapacity;\r\n    }\r\n\r\n    /** @param {Region} region */\r\n    Copy(region){\r\n        this.Set(region.x, region.y, region.z, region.width, region.height, region.length, region.preferredX);\r\n        this.SetWeights(this.weight, this.weightCapacity, this.stackingCapacity);\r\n        return this;\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before calculating corners \r\n     * @returns {Array<Number>} 8 corners, length = 24 + center point [24, 25, 26]\r\n     */\r\n    GetCorners(offset){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n\r\n        tempCorners[0] = x;       tempCorners[1] = y;       tempCorners[2] = z;         // 0:\r\n        tempCorners[3] = x + w;   tempCorners[4] = y;       tempCorners[5] = z;         // 0:w\r\n        tempCorners[6] = x;       tempCorners[7] = y + h;   tempCorners[8] = z;         // 0:h\r\n        tempCorners[9] = x + w;   tempCorners[10] = y + h;  tempCorners[11] = z;        // 0:wh\r\n\r\n        tempCorners[12] = x;      tempCorners[13] = y;      tempCorners[14] = z + l;    // 1:\r\n        tempCorners[15] = x + w;  tempCorners[16] = y;      tempCorners[17] = z + l;    // 1:w\r\n        tempCorners[18] = x;      tempCorners[19] = y + h;  tempCorners[20] = z + l;    // 1:h\r\n        tempCorners[21] = x + w;  tempCorners[22] = y + h;  tempCorners[23] = z + l;    // 1:wh\r\n\r\n        tempCorners[24] = x + w/2;tempCorners[25] = y + h/2;tempCorners[26] = z + l/2;  // center\r\n\r\n        return tempCorners;\r\n    }\r\n\r\n    /**\r\n     * @param {Array} result\r\n     * @returns {Array<Number>} 4 corners, length = 12\r\n     */\r\n    GetFloorPoints(result){\r\n        if(result === undefined) result = tempPoints;\r\n        var x = this.x, y = this.y, z = this.z, w = this.width, l = this.length;\r\n\r\n        result[0] = x;         result[1] = y;     result[2] = z;\r\n        result[3] = x + w;     result[4] = y;     result[5] = z;\r\n        result[6] = x + w;     result[7] = y;     result[8] = z + l;\r\n        result[9] = x;         result[10] = y;    result[11] = z + l;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before checking * @param {Number} px * @param {Number} py * @param {Number} pz \r\n     */\r\n    ContainsPoint(offset, px, py, pz){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        return px > x && px < x + w\r\n            && py > y && py < y + h\r\n            && pz > z && pz < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\n    ContainsRegion(offset, subRegion){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        var rx = subRegion.x, ry = subRegion.y, rz = subRegion.z, rw = subRegion.width, rh = subRegion.height, rl = subRegion.length;\r\n        return rx > x && rx + rw < x + w\r\n            && ry > y && ry + rh < y + h\r\n            && rz > z && rz + rl < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} other */\r\n    Intersects(offset, other){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n    \r\n        return x <= other.x + other.width && x + w >= other.x\r\n                && y <= other.y + other.height && y + h >= other.y \r\n                && z <= other.z + other.length && z + l >= other.z;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Number} width * @param {Number} height * @param {Number} length\r\n     * @param {Number} weight @param {Boolean} grounded\r\n     * @param {Region} [result]\r\n     */\r\n    FitTest(offset, width, height, length, weight, grounded, result){\r\n        if(!result) result = tempRegion;\r\n\r\n        if(grounded && this.y > smallValue) return false;\r\n\r\n        // Check that all dimensions fit\r\n        let fit = width < this.width + offset * 2 && height < this.height + offset * 2 && length < this.length + offset * 2;\r\n        if(fit){\r\n\r\n            let weightFit = weight <= this.weightCapacity;\r\n            if(weightFit){\r\n\r\n                // Calculate x based on preferred side\r\n                let x = this.preferredX !== 0 ? this.x + this.width - width : this.x;\r\n                result.Set(x, this.y, this.z, width, height, length, this.preferredX);\r\n                result.SetWeights(weight, 0, maxWeightValue);\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Number} minRegionAxis */\r\n    Subtract(region, minRegionAxis){\r\n        /** @type {Array<Region>} */\r\n        var newRegions;\r\n        \r\n        // Calculate a new east region\r\n        let axis = region.x + region.width;\r\n        let size = this.x + this.width - axis;\r\n        if(size > minRegionAxis){\r\n            let east = new Region(axis, this.y, this.z, size, this.height, this.length, 0);\r\n            east.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(east);\r\n        }\r\n\r\n        // Calculate a new west region\r\n        axis = this.x;\r\n        size = region.x - axis;\r\n        if(size > minRegionAxis){\r\n            let west = new Region(axis, this.y, this.z, size, this.height, this.length, 1);\r\n            west.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(west);\r\n        }\r\n\r\n        // Calculate a new over/up region\r\n        axis = region.y + region.height;\r\n        size = this.y + this.height - axis;\r\n        if(size > minRegionAxis){\r\n            let over = new Region(region.x, axis, region.z, region.width, size, region.length, 0); // todo: add overhang var? // togglePreferredX based on pre-packed weight distribution?\r\n            over.SetWeights(0, region.stackingCapacity, region.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(over);\r\n        }\r\n\r\n        // Calculate a new south region\r\n        axis = this.z;\r\n        size = region.z - axis;\r\n        if(false && size > minRegionAxis){\r\n            let south = new Region(this.x, this.y, axis, this.width, this.height, size, 0); // todo togglePreferredX based on pre-packed weight distribution?\r\n            south.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(south);\r\n        }\r\n\r\n        // Set this as new north/front region\r\n        axis = region.z + region.length;\r\n        size = this.z + this.length - axis;\r\n        this.z = axis;\r\n        this.length = size;\r\n        this.SetWeights(0, this.weightCapacity, this.stackingCapacity);\r\n\r\n        return newRegions;\r\n    }\r\n\r\n    /** @param {Region} other */\r\n    ConnectFloorRects(other){\r\n        var ptsA = this.GetFloorPoints(tempPoints),\r\n            ptsB = other.GetFloorPoints(tempPoints2);\r\n\r\n        var adjacent = 0;\r\n        var intersections = [];\r\n        for(let iA = 0; iA < 12; iA += 3){\r\n            let nextA = iA + 3 === 12 ? 0 : iA + 3;\r\n            let ax = ptsA[iA], az = ptsA[iA + 2], nax = ptsA[nextA], naz = ptsA[nextA + 2];\r\n\r\n            for(let iB = 0; iB < 12; iB += 3){\r\n                let nextB = iB + 3 === 12 ? 0 : iB + 3;\r\n                let bx = ptsB[iB], bz = ptsB[iB + 2], nbx = ptsB[nextB], nbz = ptsB[nextB + 2];\r\n\r\n                if(\r\n                    rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], bx, bz)\r\n                    || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], ax, az)\r\n                ){\r\n                    adjacent++;\r\n                }\r\n\r\n                let intersection = linesIntersect(ax, az, nax, naz, bx, bz, nbx, nbz);\r\n                if(intersection &&\r\n                    (\r\n                        rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], intersection.x, intersection.y)\r\n                        || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], intersection.x, intersection.y)\r\n                    )\r\n                ){\r\n                    intersections.push(intersection);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(adjacent > 1){\r\n            for(let i = 0; i < 12; i += 3) intersections.push({x: ptsA[i], y: ptsA[i + 2]}, {x: ptsB[i], y: ptsB[i + 2]});\r\n        }\r\n        else{\r\n            intersections.length = 0;\r\n        }\r\n\r\n        var rectangles = rectanglesFromPoints(intersections);\r\n\r\n        let rectA = { p1: {x: ptsA[0], y: ptsA[2]}, p2: {x: ptsA[3], y: ptsA[5]}, p3: {x: ptsA[6], y: ptsA[8]}, p4: {x: ptsA[9], y: ptsA[11]} };\r\n        let rectB = { p1: {x: ptsB[0], y: ptsB[2]}, p2: {x: ptsB[3], y: ptsB[5]}, p3: {x: ptsB[6], y: ptsB[8]}, p4: {x: ptsB[9], y: ptsB[11]} };\r\n        rectangles.push(rectA, rectB);\r\n\r\n        reduceRectangles(rectangles);\r\n\r\n        setRectangleWeights(rectangles, this.weight + other.weight, this.weightCapacity + other.weightCapacity, this.stackingCapacity + other.stackingCapacity);\r\n        \r\n        return rectangles;\r\n    }\r\n\r\n    ToString(){\r\n        return format('R(p:[@, @, @], d:[@, @, @], w:@, wCap:@, sCap:@)', {nf: function(n){\r\n                return numberFormat(n, 2);\r\n            }},\r\n            this.x, this.y, this.z,\r\n            this.width, this.height, this.length,\r\n            this.weight, this.weightCapacity, this.stackingCapacity\r\n        );\r\n    }\r\n    \r\n    /**\r\n     * Deepest to front, smallest to largest\r\n     * @param {Region} a * @param {Region} b \r\n     */\r\n    static SortDeepestSmallest(a, b){\r\n        if(a.z < b.z) return -1;\r\n        if(a.z > b.z)return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nvar tempRegion = new Region();\r\nvar tempRegion2 = new Region();\r\nvar tempCorners = [0];\r\nvar tempPoints = [0];\r\nvar tempPoints2 = [0];\r\n\r\nclass PackedItem{\r\n\r\n    /**\r\n     * @param {Item} ref \r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @param {Number} z\r\n     * @param {Number} packedWidth\r\n     * @param {Number} packedHeight\r\n     * @param {Number} packedLength\r\n     * @param {Number} orientation \r\n     */\r\n    constructor(ref, x, y, z, packedWidth, packedHeight, packedLength, orientation){\r\n        this.ref = ref;\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.packedWidth = packedWidth; this.packedHeight = packedHeight; this.packedLength = packedLength;\r\n        this.orientation = orientation;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static DepthSort(a, b){\r\n        let az = a.z + a.packedLength,\r\n            bz = b.z + b.packedLength;\r\n        if(az + smallValue < bz) return -1;\r\n        if(az > bz + smallValue) return 1;\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static Sort(a, b){\r\n        if(a.z + smallValue < b.z){\r\n            if(a.z + a.packedLength > b.z && a.y > b.y) return 1;\r\n            return -1;\r\n        }\r\n        if(b.z + smallValue < a.z){\r\n            if(b.z + b.packedLength > a.z && b.y > a.y) return 1;\r\n            return 1;\r\n        }\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass PackedContainer{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {CUBParams} params\r\n     */\r\n    constructor(container, params){\r\n        this.container = container;\r\n        this.params = params;\r\n        \r\n        /** @type {Array<PackedItem>} */\r\n        this.packedItems = [];\r\n        /** @type {Array<Item>} */\r\n        this.unpackedItems = [];\r\n\r\n        var firstRegion = new Region(0, 0, 0, container.width, container.height, container.length, 0);\r\n        firstRegion.SetWeights(0, this.container.weightCapacity, 0);\r\n        /** @type {Array<Region>} */\r\n        this.regions = [firstRegion];\r\n\r\n        /** @type {Array<PackedItem>} */\r\n        this.tops = [];\r\n\r\n        this.cumulatedWeight = 0;\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    set items(items){\r\n        this.assistant = new PackingAssistant(items, this);\r\n    }\r\n\r\n    /** @param {PackedItem} item */\r\n    SetPacked(item){\r\n        this.cumulatedWeight += item.ref.weight;\r\n        this.packedItems.push(item);\r\n        this.tops.push(item);\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    SetUnpacked(item){\r\n        this.unpackedItems.push(item);\r\n    }\r\n\r\n    /** @param {Number} weight */\r\n    WeightPass(weight){\r\n        return this.cumulatedWeight + weight <= this.container.weightCapacity;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Region} fit * @returns {Boolean} false if region has been deleted */\r\n    Occupy(region, fit){\r\n\r\n        /*console.group('Regions');\r\n        this.regions.forEach(region => {\r\n            console.log(region.ToString());\r\n        });\r\n        console.groupEnd();*/\r\n\r\n        // Subtracts fit from region and calculates new bounding regions\r\n        var newRegions = region.Subtract(fit, this.assistant.minRegionAxis);\r\n\r\n        // Add new bounding regions if any\r\n        if(newRegions) this.regions.push(...newRegions);\r\n\r\n        // Check that region is still valid, otherwise remove it\r\n        if(region.length < this.assistant.minRegionAxis){\r\n            let regionIndex = this.regions.indexOf(region);\r\n            this.regions.splice(regionIndex, 1);\r\n            return false;\r\n        }\r\n\r\n        var debugUIDs = [];\r\n        if(!newRegions) newRegions = [];\r\n        newRegions.push(region);\r\n        //console.group('Occupy');\r\n        newRegions.forEach(region => {\r\n            //console.log(region.ToString());\r\n            debugUIDs.push(debugRegion(region, 0xffff0000, true, -1, true));\r\n        });\r\n        //console.groupEnd();\r\n\r\n        debugClear(debugUIDs);\r\n\r\n        return true;\r\n    }\r\n\r\n    static SortByN(a, b){\r\n        if(isNaN(a.n) || isNaN(b.n)) return 0;\r\n\r\n        if(a.n < b.n) return -1;\r\n        if(a.n > b.n) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    GetPlacementWithHighestScore(item){\r\n        var numRegions = this.regions.length;\r\n        var volumeItem = item.volume;\r\n        var validOrientations = item.validOrientations;\r\n\r\n        /** @typedef PlacementScore @property {Number} region region index @property {Number} orientation orientation index @property {Number} n score */\r\n        /** @type {Array<PlacementScore>} */\r\n        var regionScoreTable = [],\r\n            orientationScoreTable = [];\r\n        var testSuccessfulRegions = 4;\r\n        // Try to fit in sorted regions\r\n        for(let iRegion = 0; iRegion < numRegions && testSuccessfulRegions > 0; iRegion++){\r\n            let region = this.regions[iRegion];\r\n\r\n            if(region.volume > volumeItem){\r\n                let dummyRegion = tempRegion2.Copy(region);\r\n\r\n                orientationScoreTable.length = 0;\r\n                for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                    let orientation = validOrientations[iOrient];\r\n\r\n                    let dimensions = item.GetOrientedDimensions(orientation);\r\n                    let regionFitTest = region.FitTest(smallValue, \r\n                        dimensions[0], dimensions[1], dimensions[2], \r\n                        item.weight, item.grounded);\r\n                    \r\n                    if(regionFitTest !== false){\r\n\r\n                        testSuccessfulRegions--;\r\n\r\n                        // Subtracts fit from region and calculates new bounding regions\r\n                        let newRegions = dummyRegion.Subtract(regionFitTest, this.assistant.minRegionAxis);\r\n                        if(newRegions === undefined) newRegions = [];\r\n                        if(dummyRegion.length > this.assistant.minRegionAxis)\r\n                            newRegions.push(dummyRegion);\r\n\r\n                        let orientationScore = {\r\n                            region: iRegion,\r\n                            orientation: orientation, \r\n                            n: this.assistant.RateFit(item, regionFitTest, newRegions)\r\n                        };\r\n                        orientationScoreTable.push(orientationScore);\r\n                    }\r\n                }\r\n\r\n                if(orientationScoreTable.length > 0){\r\n                    orientationScoreTable.sort(PackedContainer.SortByN);\r\n                    let regionScore = orientationScoreTable.pop();\r\n                    regionScoreTable.push(regionScore);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(regionScoreTable.length === 0){\r\n            return false;\r\n        }\r\n\r\n        regionScoreTable.sort(PackedContainer.SortByN);\r\n        let highestScore = regionScoreTable.pop();\r\n        return highestScore;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    FitLessWaste(item){\r\n\r\n        // General weight check\r\n        if(this.WeightPass(item.weight) === false) return false;\r\n        \r\n        let highestScore = this.GetPlacementWithHighestScore(item);\r\n\r\n        if(highestScore === false){\r\n            console.log('revertedToRegular');\r\n            return this.FitRegular(item);\r\n        }\r\n\r\n        let region = this.regions[highestScore.region];\r\n        let orientation = item.validOrientations[highestScore.orientation];\r\n        let dimensions = item.GetOrientedDimensions(orientation);\r\n        let regionFitTest = region.FitTest(smallValue, \r\n            dimensions[0], dimensions[1], dimensions[2],\r\n            item.weight, item.grounded);\r\n        if(regionFitTest !== false){\r\n            return this.CommitFit(item, region, regionFitTest, orientation);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    GetFirstFit(item){\r\n        var validOrientations = item.validOrientations;\r\n        var numRegions = this.regions.length;\r\n\r\n        // Try to fit in sorted regions\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let region = this.regions[iRegion];\r\n\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n\r\n                // Fit test (success: Region, failure: false)\r\n                let regionFitTest = region.FitTest(smallValue, \r\n                    dimensions[0], dimensions[1], dimensions[2],\r\n                    item.weight, item.grounded);\r\n                if(regionFitTest !== false){\r\n\r\n                    // Stacking & weight test \r\n\r\n                    /** @typedef Placement @property {Number} region region index @property {Number} orientation orientation index */\r\n                    /** @type {Placement} */\r\n                    let result = {region: iRegion, orientation: orientation};\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    FitRegular(item){\r\n\r\n        // General weight check\r\n        if(this.WeightPass(item.weight) === false) return false;\r\n\r\n        var firstFit = this.GetFirstFit(item);\r\n        if(firstFit){\r\n\r\n            let region = this.regions[firstFit.region];\r\n            let orientation = item.validOrientations[firstFit.orientation];\r\n            let dimensions = item.GetOrientedDimensions(orientation);\r\n\r\n            let regionFitTest = region.FitTest(smallValue, \r\n                dimensions[0], dimensions[1], dimensions[2],\r\n                item.weight, item.grounded);\r\n            if(regionFitTest !== false){\r\n\r\n                return this.CommitFit(item, region, regionFitTest, orientation);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item @param {Region} containingRegion @param {Region} placement @param {Number} orientation */\r\n    CommitFit(item, containingRegion, placement, orientation){\r\n        \r\n        placement.SetWeights(item.weight, 0, item.stackingCapacity);\r\n\r\n        let numPackedItems = this.packedItems.length;\r\n\r\n        // Make sure that the new 'packed item to be' does not collide with a previous one\r\n        for(let iPacked = 0; iPacked < numPackedItems; iPacked++){\r\n            let packedItem = this.packedItems[iPacked];\r\n            // Creates temporary region for following calculations\r\n            let packedRegion = tempRegion2.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n            packedRegion.SetWeights(packedItem.ref.weight, 0, packedItem.ref.stackingCapacity);\r\n            \r\n            let intersects = packedRegion.Intersects(-smallValue, placement);\r\n            if(intersects){\r\n                console.log('revertedToRegular - CommitFit');\r\n                return this.FitRegular(item);\r\n            }\r\n        }\r\n\r\n        // Create a new packed item\r\n        let packedItem = new PackedItem(item, placement.x, placement.y, placement.z, placement.width, placement.height, placement.length, orientation);\r\n        /**/let debugUID = debugRegion(placement, 0xffff0000, true);\r\n\r\n        // Reserve the tested sub region: regionFitTest from the containing region: region\r\n        let regionRemains = this.Occupy(containingRegion, placement);\r\n\r\n        /**/debugClear([debugUID]);\r\n        debugRegion(placement, 0xffffffff, false);\r\n\r\n        return packedItem;\r\n    }\r\n\r\n    ProcessRegionsPreferredX(){\r\n        var regions = this.regions,\r\n            numRegions = regions.length;\r\n        var containerWidth = this.container.width;\r\n\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(Math.abs(region.x) < smallValue) region.preferredX = 0;\r\n            else if(Math.abs(region.x + region.width - containerWidth) < smallValue) region.preferredX = 1;\r\n        }\r\n    }\r\n\r\n    ProcessRegionsMergeExpand(){\r\n        var regions = this.regions,\r\n            numRegions = regions.length;\r\n\r\n        var toInt = 1 / smallValue;\r\n        function coordID(value){\r\n            return Math.floor(value * toInt);\r\n        }\r\n\r\n        /** @typedef Level @property {Number} y @property {Array<Rectangle>} rectangles */\r\n        /** @type {Array<Level>} */\r\n        var levels = {};\r\n\r\n        var neighbours = [], rectangles = [];\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let regionA = regions[iRegion];\r\n\r\n            if(regionA.weightCapacity > smallValue){\r\n                neighbours.length = 0;\r\n                neighbours.push(iRegion);\r\n                \r\n                for(let jRegion = iRegion + 1; jRegion < numRegions; jRegion++){\r\n                    let regionB = regions[jRegion];\r\n\r\n                    if(regionB.weightCapacity > smallValue && Math.abs(regionA.y - regionB.y) < smallValue){\r\n                        let intersects = regionA.Intersects(smallValue, regionB);\r\n                        if(intersects){\r\n                            neighbours.push(jRegion);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let numNeighbours = neighbours.length;\r\n                if(numNeighbours > 1){\r\n                    rectangles.length = 0;\r\n\r\n                    for(let iNeighbour = 0; iNeighbour < numNeighbours; iNeighbour++){\r\n                        let neighbourA = regions[neighbours[iNeighbour]];\r\n\r\n                        for(let jNeighbour = iNeighbour + 1; jNeighbour < numNeighbours; jNeighbour++){\r\n                            let neighbourB = regions[neighbours[jNeighbour]];\r\n\r\n                            let connectedNeighbours = neighbourA.ConnectFloorRects(neighbourB);\r\n                            rectangles.push(...connectedNeighbours);\r\n                        }\r\n                    }\r\n\r\n                    if(rectangles.length > 0){\r\n                        let yCat = coordID(regionA.y);\r\n                        if(levels[yCat] === undefined) levels[yCat] = {y: regionA.y, rectangles: []};\r\n                        levels[yCat].rectangles.push(...rectangles);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        var levelsYCats = Object.keys(levels);\r\n        for(let iYCat = 0, numYCats = levelsYCats.length; iYCat < numYCats; iYCat++){\r\n            /** @type {Level} */\r\n            let level = levels[levelsYCats[iYCat]];\r\n            let rectangles = level.rectangles;\r\n            let regionY = level.y;\r\n            let regionHeight = this.container.height - regionY;\r\n            \r\n            reduceRectangles(rectangles);\r\n            for(let iRect = 0, numRects = rectangles.length; iRect < numRects; iRect++){\r\n                let rect = rectangles[iRect];\r\n                let rx = rect.p1.x, ry = rect.p1.y;\r\n                let rw = rect.p3.x - rx, rh = rect.p3.y - ry;\r\n\r\n                // Calculate preferred packing side based on center point relative to container\r\n                let preferredX = (rx.x + rw / 2) < (this.container.width / 2) ? 0 : 1;\r\n                let newRegion = new Region(rx, regionY, ry, rw, regionHeight, rh, preferredX);\r\n                newRegion.SetWeights(rect.weight, rect.weightCapacity, rect.stackingCapacity);\r\n                this.regions.push(newRegion);\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsForZeroRegions(){\r\n        var regions = this.regions;\r\n        var minRegionAxis = this.assistant.minRegionAxis;\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            if(region.width < minRegionAxis || region.height < minRegionAxis || region.length < minRegionAxis){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {PackedItem} packedItem @param {Boolean} [harsh] default = false */\r\n    ProcessRegionsPerPackedItem(packedItem, harsh){\r\n        var regions = this.regions;\r\n        let itemVolume = packedItem.ref.volume;\r\n        \r\n        // Creates temporary region for following calculations\r\n        let packedRegion = tempRegion.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n        packedRegion.SetWeights(packedItem.ref.weight, 0, packedItem.ref.stackingCapacity);\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(itemVolume > region.volume && packedRegion.ContainsRegion(smallValue, region)){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n                console.log('Contained region' + iRegion + ' deleted');\r\n                continue;\r\n            }\r\n\r\n            if(packedRegion.Intersects(-smallValue, region)){\r\n\r\n                if(harsh){\r\n                    console.log('\\tIntersecting region' + iRegion + ' deleted (!)');\r\n                    regions.slice(iRegion, 1);\r\n                    iRegion--;\r\n                    continue;\r\n                }\r\n                \r\n                let regionRemains = this.Occupy(region, packedRegion);\r\n                iRegion --;\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsForPackedItems(harsh){\r\n        var packedItems = this.packedItems,\r\n            numPackedItems = packedItems.length;\r\n\r\n        for(let iItem = 0; iItem < numPackedItems; iItem++){\r\n            let packedItem = packedItems[iItem];\r\n            this.ProcessRegionsPerPackedItem(packedItem, harsh);\r\n        }\r\n    }\r\n\r\n    ProcessRegionsEnclosed(){\r\n        var regions = this.regions;\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let regionA = regions[iRegion];\r\n            let volumeA = regionA.volume;\r\n\r\n            for(let jRegion = iRegion + 1; jRegion < regions.length; jRegion++){\r\n                let regionB = regions[jRegion];\r\n                let volumeB = regionB.volume;\r\n\r\n                if(volumeA < volumeB){\r\n                    // If a A is completely contained within B, remove the A\r\n                    if(regionB.ContainsRegion(smallValue, regionA)){\r\n                        regions.splice(iRegion, 1);\r\n                        iRegion--;\r\n                        break;\r\n                    }\r\n                }\r\n                else{\r\n                    // If a B is completely contained within A, remove the B\r\n                    if(regionA.ContainsRegion(smallValue, regionB)){\r\n                        regions.splice(jRegion, 1);\r\n                        jRegion--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegions(){\r\n        var regions = this.regions;\r\n\r\n        if(global.processRegionsCount === undefined) global.processRegionsCount = 0;\r\n\r\n        // Recalculate preferred insertion side per region (left or right)\r\n        this.ProcessRegionsPreferredX();\r\n\r\n        // Removes regions that are completely enclosed in packed volumes, and correct any intersecting ones\r\n        this.ProcessRegionsForPackedItems();\r\n\r\n        // Merge and expand free regions (can span several packed item tops)\r\n        this.ProcessRegionsMergeExpand();\r\n\r\n        // Removes unuseable regions\r\n        this.ProcessRegionsForZeroRegions();\r\n\r\n        // Removes regions that are completely enclosed in larger regions\r\n        this.ProcessRegionsEnclosed();\r\n\r\n        // Sort by z (first) and volume (second)\r\n        regions.sort(Region.SortDeepestSmallest);\r\n\r\n        this.packedItems.sort(PackedItem.Sort);\r\n\r\n        /*console.group('ProcessRegions');\r\n        regions.forEach(region => {\r\n            console.log(region.ToString());\r\n        });\r\n        console.groupEnd();*/\r\n    }\r\n}\r\n\r\nclass PackingAssistant{\r\n    /**\r\n     * @param {Array<Item>} items \r\n     * @param {PackedContainer} packedContainer \r\n     */\r\n    constructor(items, packedContainer){\r\n\r\n        global.assistant = this;\r\n        this.debugRegion = function(regionIndex){\r\n\r\n        }\r\n\r\n        this.params = {\r\n            minDimensionsNoWasteFactor: [1, 1, 1]\r\n        };\r\n\r\n        this.workingItems = items;\r\n        this.packedContainer = packedContainer;\r\n        this.workingRegions = this.packedContainer.regions;\r\n\r\n        this.minRegionAxis = smallValue;\r\n\r\n        this.workingItemsSortFunction = Item.VolumeSort;\r\n\r\n        // Sort items by volume ascending\r\n        this.workingItems.sort(this.workingItemsSortFunction);\r\n\r\n        var minDimensionsSearchSet = this.workingItems;\r\n        //minDimensionsSearchSet = [this.workingItems[0]];\r\n        this.minDimensions = this.GetMinDimensionsOverall(minDimensionsSearchSet);\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    GetMinDimensionsOverall(items){\r\n        var minDimensions = [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\r\n\r\n        for(let iItem = 0, numItems = items.length; iItem < numItems; iItem++){\r\n            let item = items[iItem];\r\n            var validOrientations = item.validOrientations;\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n                if(dimensions[0] < minDimensions[0]) minDimensions[0] = dimensions[0];\r\n                if(dimensions[1] < minDimensions[1]) minDimensions[1] = dimensions[1];\r\n                if(dimensions[2] < minDimensions[2]) minDimensions[2] = dimensions[2];\r\n            }\r\n        }\r\n\r\n        return minDimensions;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Item} fittedItem \r\n     * @param {Region} fit \r\n     * @param {Array<Region>} newRegions \r\n     */\r\n    RateFit(fittedItem, fit, newRegions){\r\n        \r\n        // Try out a recursive deep rate fit\r\n\r\n        var containerLength = this.packedContainer.container.length;\r\n        var minDimensions = this.minDimensions;\r\n        var minDimensionsNoWasteFactor = this.params.minDimensionsNoWasteFactor;\r\n\r\n        var minZScore = 1 - (fit.z + fit.length) / containerLength; // 0-1\r\n\r\n        // new regions usability score\r\n        var minWasteScore = 1; // have completely filled the region if newRegions.length === 0\r\n        if(newRegions.length > 0){\r\n            minWasteScore = 0;\r\n            for(let iRegion = 0; iRegion < newRegions.length; iRegion++){\r\n                let region = newRegions[iRegion];\r\n                \r\n                let scoreW = 0, scoreH = 0, scoreL = 0;\r\n                if(region.width >= minDimensions[0] && (region.width - minDimensions[0]) < minDimensions[0] * minDimensionsNoWasteFactor[0]) scoreW += 1;\r\n                if(region.height >= minDimensions[1] && (region.width - minDimensions[1]) < minDimensions[1] * minDimensionsNoWasteFactor[1]) scoreH += 1;\r\n                if(region.length >= minDimensions[2] && (region.width - minDimensions[2]) < minDimensions[2] * minDimensionsNoWasteFactor[2]) scoreL += 1;\r\n                \r\n                minWasteScore += scoreW * .5 + scoreH * .3 + scoreL * .2;\r\n            }\r\n            minWasteScore /= newRegions.length;\r\n        }\r\n\r\n        var minZ_weight = this.packedContainer.params.minZ_weight;\r\n        var minWaste_weight = this.packedContainer.params.minWaste_weight;\r\n        var score = minZScore * minZ_weight + minWasteScore * minWaste_weight;\r\n        return score;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef CUBParams\r\n * @property {Number} minZ_weight\r\n * @property {Number} minWaste_weight\r\n */\r\n\r\n/** @type {CUBParams} */\r\nconst defaultParams = {\r\n    minZ_weight: .9,\r\n    minWaste_weight: .1\r\n};\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n * @param {Array<Item>} items // this array (and content) will be changed/emptied\r\n * @param {CUBParams} params \r\n */\r\nasync function pack(container, items, params){\r\n\r\n    this.params = Utils.AssignUndefined(params, defaultParams);\r\n    console.log('CUBParams:', this.params);\r\n\r\n    Debug.Viz.SetPackingSpaceVisibility(false);\r\n\r\n    var packedContainer = new PackedContainer(container, this.params);\r\n    packedContainer.items = items;\r\n\r\n    var iItem = items.length - 1;\r\n\r\n    // Helper function\r\n    function unpackItem(index){\r\n        let item = items[index];\r\n        packedContainer.SetUnpacked(item);\r\n        items.splice(index, 1);\r\n        iItem--;\r\n    }\r\n\r\n    // Helper function\r\n    /** @param {Number} index * @param {PackedItem} item */\r\n    function packItem(index, item){\r\n        packedContainer.SetPacked(item);\r\n        \r\n        item.ref.quantity--;\r\n        if(item.ref.quantity === 0){\r\n            items.splice(index, 1);\r\n            iItem--;\r\n        }\r\n    }\r\n\r\n    while(items.length > 0){\r\n        let item = items[iItem];\r\n\r\n        // Clean-up regions\r\n        packedContainer.ProcessRegions();\r\n        /**/await sleep(16);\r\n\r\n        // Try to pack item\r\n        let packedItem = packedContainer.FitLessWaste(item);\r\n        if( packedItem === false ){\r\n\r\n            /**/debugLog('item fitting failed.');\r\n            unpackItem(iItem);\r\n        }\r\n        else{\r\n\r\n            packItem(iItem, packedItem);\r\n        }\r\n\r\n        /**/await sleep(16);\r\n    }\r\n\r\n    packedContainer.packedItems.sort(PackedItem.Sort);\r\n\r\n    debugClear();\r\n    Debug.Viz.SetPackingSpaceVisibility(true);\r\n\r\n    return packedContainer;\r\n}\r\n\r\nexport {\r\n    pack\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/CUB.js","import Item from \"./components/Item\";\r\nimport Container from \"./components/Container\";\r\n\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102, WeightCapacity: 48000 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7, StackingCapacity: 0 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 28, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 23, Height: 34, Quantity: 20 },\r\n            { ID: 1005, Name: 'Item6', Length: 45,  Width: 20, Height: 30, Quantity: 30 },\r\n            { ID: 1005, Name: 'Item6', Length: 35,  Width: 22, Height: 18, Quantity: 27 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n\r\n    /** \r\n     * @param {Item} item\r\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n     */\r\n    static ResolveOrientation(item){\r\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\r\n\r\n        if(almost(item.PackDimX, w)){ // x\r\n            if(almost(item.PackDimY, h)){ // y\r\n                return 'xyz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'xzy';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, h)){ // y\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'yxz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'yzx';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, l)){ // z\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'zxy';\r\n            }\r\n            else if(almost(item.PackDimY, h)){ // y\r\n                return 'zyx';\r\n            }\r\n        }\r\n\r\n        return 'xyz';\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","\r\n/** @typedef Vec2 @property {Number} x @property {Number} y */\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst smallValue = .000001;\r\nconst smallValueSqrt = .001;\r\n\r\n// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/\r\n// Determine the intersection point of two line segments\r\n// Return FALSE if the lines don't intersect\r\nfunction segmentIntersect(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n\r\n    // Check if none of the lines are of length 0\r\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\r\n        return false;\r\n    }\r\n  \r\n    var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\r\n  \r\n    // Lines are parallel\r\n    if (Math.abs(denominator) < epsilon) {\r\n        return false;\r\n    }\r\n  \r\n    var ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\r\n    var ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\r\n  \r\n    // is the intersection along the segments\r\n    if (ua > 0 || ua < 1 || ub > 0 || ub < 1) return false;\r\n  \r\n    // Return a object with the x and y coordinates of the intersection\r\n    var x = x1 + ua * (x2 - x1);\r\n    var y = y1 + ua * (y2 - y1);\r\n\r\n    return {x, y};\r\n}\r\n\r\nfunction linesIntersect(ax, ay, bx, by, cx, cy, dx, dy){\r\n    // Line AB represented as a1x + b1y = c1\r\n    var a1 = by - ay,\r\n        b1 = ax - bx;\r\n    var c1 = a1 * ax + b1 * ay;\r\n  \r\n    // Line CD represented as a2x + b2y = c2\r\n    var a2 = dy - cy,\r\n        b2 = cx - dx;\r\n    var c2 = a2 * cx + b2 * cy;\r\n  \r\n    var determinant = a1 * b2 - a2 * b1;\r\n  \r\n    // The lines are parallel\r\n    if (Math.abs(determinant) < smallValue) return false;\r\n\r\n    var x = (b2 * c1 - b1 * c2) / determinant;\r\n    var y = (a1 * c2 - a2 * c1) / determinant;\r\n    return {x: x, y: y};\r\n}\r\n\r\nfunction rectangleContainsPoint(offset, rx, ry, rw, rh, px, py){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return px > x && px < x + w\r\n        && py > y && py < y + h;\r\n}\r\n\r\n/** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\nfunction rectangleContainsRectangle(offset, rx, ry, rw, rh, ox, oy, ow, oh){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return ox > x && ox + ow < x + w\r\n        && oy > y && oy + oh < y + h;\r\n}\r\n\r\n/**\r\n * @param {Array<Vec2>} points\r\n */\r\nfunction rectanglesFromPoints(points){\r\n    // Separate points in lists of 'y' coordinate, grouped by 'x' coordinate\r\n    const toInt = Math.round(1 / smallValue);\r\n    var xs = {};\r\n    points.forEach(point => {\r\n        let xCat = Math.floor(point.x * toInt);\r\n        if(xs[xCat] === undefined) xs[xCat] = {x: point.x, ys: []};\r\n        let ys = xs[xCat].ys;\r\n        let yCat = Math.floor(point.y * toInt);\r\n        let insert = true;\r\n        for(let iY = 0; iY < ys.length; iY++){\r\n            if(ys[iY].yCat === yCat) insert = false;\r\n        }\r\n        if(insert) ys.push({yCat: yCat, y: point.y});\r\n    });\r\n\r\n    //console.log('xs:', xs);\r\n\r\n    // Intersect lists\r\n    function sortYCat(a, b){\r\n        if(a.yCat < b.yCat) return -1;\r\n        if(a.yCat > b.yCat) return 1;\r\n        return 0;\r\n    }\r\n    var xsKeys = Object.keys(xs);\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat = xs[xsKeys[iX]];\r\n        xCat.ys.sort(sortYCat);\r\n    }\r\n\r\n    /** @typedef IntersectedX @property {Number} x1 @property {Number} x2 @property {Array<Number>} ys */\r\n    /** @type {Array<IntersectedX>} */\r\n    var intersectedXs = [];\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat1 = xs[xsKeys[iX]];\r\n        let ys1 = xCat1.ys;\r\n        for(let iX2 = iX + 1; iX2 < xsKeys.length; iX2++){\r\n            let xCat2 = xs[xsKeys[iX2]];\r\n            let ys2 = xCat2.ys;\r\n\r\n            let yIntersect = [];\r\n            let xIntersect = {x1: xCat1.x, x2: xCat2.x, ys: yIntersect};\r\n            for(let iY1 = 0; iY1 < ys1.length; iY1++){\r\n                for(let iY2 = 0; iY2 < ys2.length; iY2++){\r\n                    if(ys1[iY1].yCat === ys2[iY2].yCat){\r\n                        yIntersect.push(ys1[iY1].y);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(yIntersect.length > 1) intersectedXs.push(xIntersect);\r\n        }\r\n    }\r\n\r\n    //console.log(intersectedXs);\r\n\r\n    /** @type {Array<Rectangle>} */\r\n    var rectangles = [];\r\n    for(let iIX = 0; iIX < intersectedXs.length; iIX++){\r\n        let intersectedX = intersectedXs[iIX];\r\n        let ys = intersectedX.ys;\r\n        let x1 = intersectedX.x1, x2 = intersectedX.x2;\r\n        for(let iY1 = 0; iY1 < ys.length; iY1++){\r\n            for(let iY2 = iY1 + 1; iY2 < ys.length; iY2++){\r\n                let p1 = {x: x1, y: ys[iY1]},\r\n                    p2 = {x: x2, y: ys[iY1]},\r\n                    p3 = {x: x2, y: ys[iY2]},\r\n                    p4 = {x: x1, y: ys[iY2]};\r\n                \r\n                let rectangle = {p1: p1, p2: p2, p3: p3, p4: p4};\r\n                rectangles.push(rectangle);\r\n            }\r\n        }\r\n    }\r\n\r\n    return rectangles;\r\n}\r\n\r\n/**\r\n * @param {Array<Rectangle>} rectangles \r\n * @returns {Array<Rectangle>} the array is edited in-place\r\n */\r\nfunction reduceRectangles(rectangles){\r\n    for(let iRect = 0; iRect < rectangles.length; iRect++){\r\n        let ra = rectangles[iRect];\r\n        let ax = ra.p1.x, ay = ra.p1.y;\r\n        let aw = ra.p3.x - ax, ah = ra.p3.y - ay;\r\n        for(let jRect = 0; jRect < rectangles.length; jRect++){\r\n            if(iRect !== jRect){\r\n                let rb = rectangles[jRect];\r\n                let bx = rb.p1.x, by = rb.p1.y;\r\n                let bw = rb.p3.x - bx, bh = rb.p3.y - by;\r\n                if(rectangleContainsRectangle(smallValue, ax, ay, aw, ah, bx, by, bw, bh)){\r\n                    rectangles.splice(jRect, 1);\r\n                    jRect--;\r\n                    iRect = Math.max(0, jRect - 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return rectangles;\r\n}\r\n\r\n/** @param {Number} ax @param {Number} ay @param {Number} bx @param {Number} by @param {Number} x @param {Number} y */\r\nfunction segmentContainsPoint(ax, ay, bx, by, x, y){\r\n    var vx = bx - ax, vy = by - ay,\r\n        vxa = x - ax, vya = y - ay,\r\n        vxb = x - bx, vyb = y - by;\r\n    var d = Math.sqrt(vx * vx + vy * vy),\r\n        da = Math.sqrt(vxa * vxa + vya * vya),\r\n        db = Math.sqrt(vxb * vxb + vyb * vyb);\r\n    return Math.abs( d - (da + db) ) < smallValueSqrt;\r\n}\r\n\r\nexport {\r\n    linesIntersect,\r\n    rectangleContainsPoint,\r\n    rectangleContainsRectangle,\r\n    reduceRectangles,\r\n    rectanglesFromPoints\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/Math2D.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\nimport Container from \"../packer/container/Container\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Object} cargoListView\r\n * @property {Number} cargoListView.paddingZ\r\n * @property {Number} cargoListView.paddingY\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    cargoListView: {\r\n        paddingZ: 120,\r\n        paddingY: 40,\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {\r\n            animationDuration: 1\r\n        }\r\n    }\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, params){\r\n\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var scope = this;\r\n        var units = this.params.ux.params.units;\r\n\r\n        // Fill lights\r\n        if(true){\r\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, true);\r\n\r\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\r\n            let dlData = {\"color\":\"0xfceeee\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.00001,\"shadow.radius\":4,\"shadow.mapSize.x\":4096,\"shadow.mapSize.y\":4096,\"shadow.camera.left\":-400,\"shadow.camera.top\":300,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-300,\"shadow.camera.near\":20,\"shadow.camera.far\":800};\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            Config.Load(dl, dlData);\r\n\r\n            if(this.sceneSetup.ux.params.hud){\r\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\r\n            }\r\n\r\n            let dlComp = lights.filter(light => light instanceof THREE.DirectionalLight)[1];\r\n            dlComp.castShadow = true;\r\n        }\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        /** @param {Container} container */\r\n        function onContainerAdded(container){\r\n            /** @type {THREE.Box3} */\r\n            let box3 = container.combinedVolume.box3;\r\n            scope.sceneSetup.cameraController.Frame(box3, .7);\r\n            scope.packingSpaceView.Add(container);\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getSize(tempVec);\r\n\r\n            let containerSize = Math.max(tempVec.x, tempVec.y, tempVec.z);\r\n            scope.cargoListView.view.position.z = containerSize / 2 + scope.params.cargoListView.paddingZ * units;\r\n            scope.cargoListView.view.position.y = scope.params.cargoListView.paddingY * units;\r\n        }\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n\r\n        this.sceneSetup.input.AddRaycastGroup('OnClick', 'cargoListView', this.cargoListView.raycastGroup);\r\n\r\n        this.sceneSetup.sceneController.AddDefault(this.cargoListView.view);\r\n\r\n        function onCargoListViewChanged(){\r\n            tempBox3.setFromObject(scope.cargoListView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let listViewCenterX = tempVec.x;\r\n            scope.cargoListView.view.getWorldPosition(tempVec);\r\n            let offsetX = listViewCenterX - tempVec.x;\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let centerX = tempVec.x;\r\n\r\n            scope.cargoListView.view.position.x = centerX - offsetX;\r\n        }\r\n        function onCargoGroupAdded(group){\r\n            scope.cargoListView.Add(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        function onCargoGroupRemoved(group){\r\n            scope.cargoListView.Remove(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoGroupRemoved);\r\n        function onCargoGroupModified(group){\r\n            scope.cargoListView.Update(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupModified, onCargoGroupModified);\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        async function onPackUpdate(packingResult){\r\n            await scope.packResultView.DisplayPackingResult(packingResult);\r\n        }\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        if(this.params.ux.params.hud){\r\n            this.HUDSetup();\r\n        }\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var scope = this;\r\n\r\n\r\n    }\r\n\r\n    ClearPackingResults(){\r\n        this.packResultView.Clear();\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.view);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Tween from '../utils/cik/Tween';\r\nimport Packer from '../packer/Packer';\r\nimport BoxEntry from '../components/box/BoxEntry';\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} animationDuration\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    let packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nfunction getOrientationAngles(orientation){\r\n    switch(orientation){\r\n        case 'xyz': return  [0,     0,      0];\r\n        case 'xzy': return  [90,    0,      0];\r\n        case 'yxz': return  [0,     0,      90];\r\n        case 'yzx': return  [90,    0,      90];\r\n        case 'zxy': return  [90,    -90,    0];\r\n        case 'zyx': return  [0,     -90,    0];\r\n    }\r\n}\r\n\r\n/**\r\n * @param {string} orientation \r\n */\r\nfunction getOrientationEuler(orientation){\r\n    const rad = Math.PI / 180.0;\r\n    let a = getOrientationAngles(orientation);\r\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\r\n}\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass PackResultView{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        /** @type {Array<CargoView} */\r\n        this.cargoViews = [];\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Packer.PackingResult} packingResult\r\n     */\r\n    async DisplayPackingResult(packingResult){\r\n\r\n        let units = this.params.ux.params.units;\r\n        \r\n        let containingVolume = packingResult.packed[0].containingVolume;\r\n        let matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        let offset = new THREE.Vector3();\r\n        let orientation = new THREE.Quaternion();\r\n        let scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n        /** @type {Map<CargoView, Number>} */\r\n        let packedQuantities = new Map();\r\n\r\n        let animatingViews = this.animatingViews;\r\n        let view = this.view;\r\n        let onTweenComplete = this.OnCargoFirstTweenComplete.bind(this);\r\n        let zEntry = containingVolume.dimensions.length;\r\n        let numPackedItems = packingResult.packed.length;\r\n        let delayPerItem = this.params.animationDuration * 1000 / numPackedItems;\r\n        for(let i = 0; i < numPackedItems; i++){\r\n            let item = packingResult.packed[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            let packedQuantity = packedQuantities.get(cargoViewTemplate);\r\n            let totalQuantity = cargoViewTemplate.entry.quantity;\r\n            if(packedQuantity === undefined) packedQuantities.set(cargoViewTemplate, packedQuantity = 0);\r\n            packedQuantities.set(cargoViewTemplate, ++packedQuantity);\r\n            let textColor = packedQuantity === totalQuantity ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\r\n            this.cargoListView.UpdateLabel(cargoViewTemplate, packedQuantity + '/' + totalQuantity, textColor);\r\n\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            this.cargoViews.push(packedCargoView);\r\n\r\n            let rotation = getOrientationEuler(item.orientation);\r\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\r\n\r\n            let x = item.position.x + offset.x,\r\n                y = item.position.y + offset.y,\r\n                z = item.position.z + offset.z;\r\n\r\n            let posTweenCombo = Tween.Combo.Request3(Tween.functions.ease.easeOutQuad,\r\n                x, y, zEntry, \r\n                0, 0, z - zEntry,\r\n                .5\r\n            );\r\n            \r\n            posTweenCombo.extraData = packedCargoView;\r\n            posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n            posTweenCombo.onComplete = onTweenComplete;\r\n            posTweenCombo.Update(0);\r\n            animatingViews.push(posTweenCombo);\r\n    \r\n            view.add(packedCargoView.view);\r\n            await sleep(delayPerItem);\r\n        }\r\n\r\n        await sleep(500);\r\n\r\n        let unpackedOffset = 6 * units;\r\n        for(let i = 0, numUnpackedItems = packingResult.unpacked.length; i < numUnpackedItems; i++){\r\n            let item = packingResult.unpacked[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            if(i === 0) unpackedOffset += item.entry.dimensions.width / 2;\r\n\r\n            for(let j = 0; j < item.unpackedQuantity; j++){\r\n                let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n                this.cargoViews.push(packedCargoView);\r\n                \r\n                let x = containingVolume.dimensions.width * 1.5 + unpackedOffset + offset.x,\r\n                    y = item.entry.dimensions.height / 2 + offset.y,\r\n                    z = item.entry.dimensions.length * j + offset.z;\r\n\r\n                let posTweenCombo = Tween.Combo.Request3(Tween.functions.ease.easeOutQuad,\r\n                    x, y, zEntry, \r\n                    0, 0, z - zEntry,\r\n                    .5\r\n                );\r\n                \r\n                posTweenCombo.extraData = packedCargoView;\r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenComplete;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n        \r\n                view.add(packedCargoView.view);\r\n                await sleep(delayPerItem * .5);\r\n            }\r\n\r\n            unpackedOffset += item.entry.dimensions.width + 6 * units;\r\n        }\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnCargoFirstTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        this.OnTweenComplete(tween);\r\n        let scaleTweenCombo = Tween.Combo.Request3(Tween.functions.special.pingPong,\r\n            1, 1, 1, \r\n            .1, .1, .1,\r\n            .1\r\n        );\r\n        \r\n        scaleTweenCombo.extraData = packedCargoView;\r\n        scaleTweenCombo.Hook(packedCargoView.view.scale, 'x', 'y', 'z');\r\n        scaleTweenCombo.onComplete = this.OnTweenComplete.bind(this);;\r\n        scaleTweenCombo.Update(0);\r\n        this.animatingViews.push(scaleTweenCombo);\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        packedCargoView.view.scale.set(1, 1, 1);\r\n        let index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    SelectEntry(entryUID){\r\n        if(!entryUID){\r\n            this.DisableHighlights();\r\n        }\r\n        else{\r\n            this.Highlight(entryUID);\r\n        }\r\n    }\r\n\r\n    DisableHighlights(){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            this.cargoViews[i].focus = 1;\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    Highlight(entryUID){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            let cargoView = this.cargoViews[i];\r\n\r\n            let cvEntry = cargoView.entry;\r\n            if(cvEntry.uid === entryUID){\r\n                cargoView.focus = 1.75;\r\n            }\r\n            else{\r\n                cargoView.focus = .25;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    Slice(value){\r\n        if(value >= 1){\r\n            this.view.children.forEach(child => {\r\n                child.visible = true;\r\n            });\r\n            return;\r\n        }\r\n\r\n        let minY = Number.MAX_SAFE_INTEGER, maxY = Number.MIN_SAFE_INTEGER;\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n            let high = tempVec.y + halfHeight;\r\n            if(low < minY) minY = low;\r\n            if(high > maxY) maxY = high;\r\n        });\r\n\r\n        let y = minY + value * (maxY - minY);\r\n\r\n        //console.log('slice ' + y.toFixed(2) + ' between ' + minY.toFixed(2) + ' and ' + maxY.toFixed(2));\r\n\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n\r\n            if(low < y) child.visible = true;\r\n            else child.visible = false;\r\n        });\r\n    }\r\n\r\n    Clear(){\r\n        this.animatingViews.length = 0;\r\n        this.cargoViews.length = 0;\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff, flatShading: true});\r\n\r\nconst _wireMaterialSettings = Symbol('wireMatSet');\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 1;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n        meshMaterial.blending = THREE.NormalBlending;\r\n        meshMaterial.depthTest = true;\r\n        meshMaterial.depthWrite = false;\r\n\r\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.renderOrder = Number.MAX_SAFE_INTEGER - 1;\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_wireMaterialSettings]) Asset.RestoreMaterial(this.wireMesh.material, this[_wireMaterialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_wireMaterialSettings] === undefined){\r\n                this.wireMesh.material = this.wireMesh.material.clone();\r\n                this[_wireMaterialSettings] = {};\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value, this[_wireMaterialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n        this.wireMesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutQuad: function (t, b, c, d) {\r\n            return -c *(t/=d)*(t-2) + b;\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutCubic: function (t, b, c, d) {\r\n            return c*((t=t/d-1)*t*t + 1) + b;\r\n        }\r\n    },\r\n\r\n    special: {\r\n        /** @type {TweenCallback} */\r\n        pingPong: function (t, b, c, d) {\r\n            return Math.sin(t / d * Math.PI) * c + b;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => {\r\n            tween.Unhook();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, startValue0, startValue1, startValue2, delta0, delta1, delta2, duration){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.startTime = clock.getElapsedTime();\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js"],"sourceRoot":""}