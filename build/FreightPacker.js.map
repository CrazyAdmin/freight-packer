{"version":3,"sources":["webpack:///webpack/bootstrap ef9f03297c857b421aa1","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/UX.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/view/CargoView.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/App.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/packer/afit/AFit.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/view/View.js","webpack:///./src/api/utils/cik/Utils3D.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/utils/cik/Tween.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/packer/afit/AFitTest.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","undefined","keys","forEach","key","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","AssignUndefined","push","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","index","indexOf","splice","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","args","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","Signaler","signals","event","callbacks","CargoEntry","quantity","properties","uid","descriptions","Map","generateUUID","entry","Container","volumes","WarnOnce","volume","numVolumes","container","containingVolume","ContainingVolume","FromJSON","Add","numEntries","getDefaultLabel","epsilon","pow","numberType","BoxEntry","dimensions","weight","stacking","rotation","translation","Reset","TextField","defaultContent","clear","Copy","field","own","Clone","Dimensions","Assert","SupportsStacking","RotationConstraint","TranslationConstraint","defaultParams","hud","configure","units","UX","property","min","max","createKeyInfo","isFolderGrouped","split","slice","join","shift","owner","getKey","reduce","setKey","val","download","filename","file","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Config","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","isColor","addColor","call","scope","editor","Save","Debug","defaultsFolder","unrolled","subProperties","subProperty","sumOfVolumes","items","sum","Volume","_afit","Symbol","packUpdate","Packer","packingSpace","cargoList","afit","Item","current","width","height","groups","values","group","item","startTime","performance","Solve","PackTimeInMilliseconds","ceil","containerVolume","Length","Width","Height","itemVolumePacked","PackedItems","itemVolumeUnpacked","UnpackedItems","PercentContainerVolumePacked","floor","PercentItemVolumePacked","Dispatch","CargoGroup","cargoes","template","currentQuantity","containerAdded","_currentIndex","PackingSpace","containers","currentIndex","SetUID","_vec3","Set","Vector3","ID","dim1","dim2","dim3","IsPacked","Dim1","Dim2","Dim3","CoordX","CoordY","CoordZ","Quantity","PackDimX","PackDimY","PackDimZ","dummyGeometry","SphereBufferGeometry","dummyMaterial","MeshStandardMaterial","transparent","opacity","_entry","CargoView","mesh","view","position","copy","cargoView","Mesh","App","containerDiv","ux","components","packerParams","packer","sceneSetup","Init","then","Start","bind","viewParams","cargoInput","On","CargoInput","completed","boxEntry","packingSpaceInput","PackingSpaceInput","containerLoaded","AddContainer","onPackUpdate","packingResult","SceneSetup","quality","Common","controllerParams","sceneController","rendererParams","clearColor","renderSizeMul","sceneRenderer","renderer","cameraParams","fov","aspect","near","far","cameraController","OrbitControls","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hudParams","hudCameraParams","hudCameraRef","AdjustCamera","autoClear","setupParams","fillLights","gridHelper","SetTarget","DefaultLights","GridHelper","AddDefault","Configure","Promise","resolve","reject","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","ambient","AmbientLight","directionalLight","DirectionalLight","ambientContainer","Smart","Control3D","appControl3D","control","hudControl3D","onGUIChanged","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","smart","config","VecToString","rotationProperties","Unroll","rotationControllers","Multiple","keyboard","on","Show","UpdateComponent","interval","lastUpdateTime","itemsContainer","Object3D","name","miscContainer","defaults","Scene","objName","getObjectByName","remove","Camera","PerspectiveCamera","fpsControls","Navigation","FirstPerson","enabled","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","update","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","onFocus","onFocusLost","draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","SetCurrent","oldPos","GetPosition","SetPosition","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","stopPropagation","e","stylesheet","createCSS","css","getElementsByTagName","Array","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","addEventListener","text","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","Draggable","title","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","p","parentNode","divTop","divLeft","parseInt","cursor","stopMoving","random","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","blockEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","spaces","world","local","modes","translate","rotate","scale","defaultControls","TransformControls","traverse","child","renderOrder","visible","attach","detach","Detach","space","setMode","stringType","groupAdded","groupRemoved","CargoList","delete","ScrapPad","CumX","CumZ","Post","Pre","Layer","layerEval","LayerDim","LayerEval","l1","l2","PackingResult","IsCompletePack","Number","MAX_SAFE_INTEGER","itemsToPack","itemsPackedInOrder","layers","scrapfirst","smallestZ","trash","evened","hundredPercentPacked","layerDone","packing","packingBest","quit","bboxi","bestIteration","bestVariant","boxi","cboxi","layerListLen","packedItemCount","bbfx","bbfy","bbfz","bboxx","bboxy","bboxz","bfx","bfy","bfz","boxx","boxy","boxz","cboxx","cboxy","cboxz","layerinlayer","layerThickness","lilz","packedVolume","packedy","prelayer","prepackedy","preremainpy","px","py","pz","remainpy","remainpz","itemsToPackCount","totalItemVolume","totalContainerVolume","AFit","Initialize","ExecuteIterations","Report","hmx","hy","hmy","hz","hmz","abs","itelayer","layersIndex","bestVolume","containerOrientationVariant","ListCanditLayers","sort","SortByEval","PackLayer","FindLayer","MAX_VALUE","AnalyzeBox","thickness","exdim","dimdif","dimen2","dimen3","layereval","maxEvaluations","scrapmemb","iItems","numItems","newItem","same","k","packCoordX","packCoordY","packCoordZ","packDimX","packDimY","packDimZ","lenx","lenz","lpz","FindSmallestZ","FindBox","CheckFound","VolumeCheck","OutputBoxList","tempBox","Box3","tempVec","CargoListView","templatesView","cargoTemplateViews","templateCargoView","Dummy","Sort","cargoGroup","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","padding","start","offset","next","done","setFromObject","applyMatrix4","getSize","halfSize","Compare","entries","unitCubeGeometry","BoxBufferGeometry","materialTemplate","brightnessRange","hueBase","nextColor","setHSL","GoldenSeries","CargoBoxView","material","clone","vec3","s","SetScale","typeofString","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","Request","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","createContainerBoxes","meshes","Asset","CreateMesh","extent","cv","setHex","side","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","containerBoxes","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","geometry","texturePath","_new","_reset","Pool","fnNew","fnReset","objects","updated","aborted","error","IsVolume","Abs","commitedEntry","jsonObject","model","global","FreightPacker","utils","DevSetup","app","Auto","webgl","Capabilities","IsWebGLReady","fp","toConsole","traceToConsole","canvas","gl","getContext","WebGLRenderingContext","defaultKeysListen","concat","Input","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","raycaster","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","dx","dy","distance","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keypress","Listener","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","button","UpdateScreenAndMouse","getElapsedTime","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","vx","vy","clamp","preventDefault","delta","wheelDelta","detail","lerp","isNaN","updateProjectionMatrix","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","delay","drid","clearTimeout","_repeats","setInterval","clearInterval","recursive","intersects","intersectObjects","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","Quality","testCallback","composer","antialias","shadows","Boolean","OnTestComplete","Renderer","WebGLRenderer","shadowMap","PCFSoftShadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","defaultCamTRS","Euler","HUDView","cameraTransform","Apply","_position","_rotation","Transform","transform","PackingItem","Cargo","cargo","_enabled","PackingProperty","prop","Constraint","cargoListView","bottomLeft","packResultView","View","packingSpaceView","onContainerAdded","onCargoGroupAdded","onCargoRemoved","Remove","HUDSetup","DisplayPackingResult","clv","cargoListViewRect","Utils3D","Rect","clvRectIgnore","Offset","viewportPointA","viewportPointB","dragOffset","onSort","sortResult","Project","sub","ratio","dragEvent","ContainsPoint","clvMin","clvMax","ignoredAreas","onScreenResize","ToNDC","Unproject","Toggle","vec","viewportPoint","axis","unproject","worldPoint","project","rect","poolNewFN","packedCargoView","Extend","poolResetFN","PackResultView","pool","animatingViews","containingVolumeID","matrix","GetMatrix","orientation","decompose","onTweenCompleted","OnTweenCompleted","cargoViewTemplate","GetTemplate","zEntry","posTweenCombo","Tween","Combo","Request3","functions","linear","Hook","onComplete","numPackedItems","tween","Unhook","Return","animatingView","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","LineBasicMaterial","PackedCargoBoxView","meshMaterial","wireMesh","LineSegments","TweenCallback","time","startValue","duration","TweenCompletedCallback","ease","easeOutElastic","ts","tc","TweenComboCompletedCallback","TweenCombo","tweens","startValue0","startValue1","startValue2","delta0","delta1","delta2","tween0","tween1","tween2","combo","endValue","_app","PackerInterface","debugGeometry","debugMaterial","debugBox","DebugBox","center","size","box","box3","getCenter","Box","toItems","o","TestData","AFitTest","aFitPacker","containerData","Name","itemsData"],"mappings":"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","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 38);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ef9f03297c857b421aa1","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'weight, label not implemented');\r\n    }\r\n\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {SupportsStacking} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && SupportsStacking.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","import Utils from \"./utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud - Create a hud controller (Scene, camera, loop, etc.)\r\n * @property {Boolean} configure - Execute helpers that allow configuration\r\n * @property {Number} units - Conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n}\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import Utils from \"../Utils\";\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0]\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return obj[key.shift()] = val;\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\nvar debug = new Map();\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = debug;\r\n        debug.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport AFit from \"./afit/AFit\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * @typedef {import('./afit/AFit').PackingResult} PackingResult\r\n */\r\n\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\nconst _afit = Symbol('afit');\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass Packer extends Signaler {\r\n    /**\r\n     * @param {PackerParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this[_afit] = new AFit();\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n    }\r\n\r\n    Solve(){\r\n        /** @type {AFit} */\r\n        var afit = this[_afit];\r\n\r\n        var Container = require('./afit/components/Container').default;\r\n        var Item = require('./afit/components/Item').default;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.length, d.height);\r\n\r\n        /** @type {Array<Item>} */\r\n        var items = [];\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            d = entry.dimensions;\r\n            let item = new Item(entry.uid, d.width, d.length, d.height, entry.quantity);\r\n            items.push(item);\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var startTime = performance.now();\r\n        var result = afit.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n        \r\n        this.Dispatch(signals.packUpdate, result);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /**\r\n     * @returns {Container}\r\n     */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex != -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","import Volume from \"./Volume\";\r\n\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    constructor(){\r\n        super();\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height);\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","import CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new THREE.MeshStandardMaterial({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /**\r\n         * @type {THREE.Mesh}\r\n         */\r\n        this.mesh;\r\n\r\n        /**\r\n         * @type {THREE.Object3D}\r\n         */\r\n        this.view;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 17\n// module chunks = 0","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\n\r\n/**\r\n * @typedef AppComponents\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n */\r\n\r\nclass App {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {UX} ux\r\n     * @param {AppComponents} components \r\n     */\r\n    constructor(containerDiv, ux, components) {\r\n        this.ux = ux;\r\n        this.components = components;\r\n\r\n        /** @type {import('./packer/Packer').PackerParams} */\r\n        var packerParams = {ux: this.ux};\r\n        this.packer = new Packer(packerParams);\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        var packer = this.packer;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        var viewParams = { ux: this.ux };\r\n        this.view = new View(packer, this.sceneSetup, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.components.cargoInput.On(CargoInput.signals.completed, function(boxEntry){\r\n            packer.cargoList.Add(boxEntry);\r\n        });\r\n\r\n        this.components.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, function(container){\r\n            packer.packingSpace.AddContainer(container);\r\n        });\r\n\r\n        /** @param {import('./packer/Packer').PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            Logger.Log('Packing result', packingResult);\r\n        }\r\n\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\n\r\nclass SceneSetup {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        var rendererParams = {clearColor: 0xafafaf, renderSizeMul: 1};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: 30, aspect: 1, near: 0.1 * units, far: 4000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            fillLights: true,\r\n            gridHelper: true,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Fill lights\r\n        if(setupParams.fillLights){\r\n            this.DefaultLights(this.sceneController);\r\n            if(this.ux.params.hud){\r\n                this.DefaultLights(this.hud);\r\n            }\r\n        }\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.cameraController.Update();\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n    }\r\n\r\n    DefaultLights(controller){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambient = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(7 * units, 15 * units, 30 * units);\r\n        \r\n        controller.ambientContainer.add(ambient);\r\n        controller.ambientContainer.add(directionalLight);\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            var onGUIChanged = function(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, \r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            this.input.keyboard.on('s', function(){\r\n                smart.Show();\r\n            });\r\n\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\nclass Camera {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target = lookTarget;\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls.enabled;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\n\r\nclass Smart {\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    Config(folderName, target, guiChanged, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","import { Element } from \"./UIUtils\";\r\n\r\nElement.CreateCSS([\r\n    '.tooltip .tooltiptext {',\r\n    '    visibility: hidden;',\r\n    '    position: absolute;',\r\n    '    width: 120px;',\r\n    '    background-color: #111;',\r\n    '    color: #fff;',\r\n    '    text-align: center;',\r\n    '    padding: 2px 0;',\r\n    '    border-radius: 2px;',\r\n    '    z-index: 1;',\r\n    '    opacity: 0;',\r\n    '    transition: opacity .6s;',\r\n    '}',\r\n\r\n    '.tooltip-top {',\r\n    '    bottom: 125%;',\r\n    '    left: 50%;',\r\n    '    margin-left: -60px;',\r\n    '}',\r\n    \r\n    '.tooltip:hover .tooltiptext {',\r\n    '    visibility: visible;',\r\n    '    opacity: 1;',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n};\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n    get: function(){\r\n        if(!this._onGUIEvent)\r\n            this._onGUIEvent = [];\r\n        return this._onGUIEvent;\r\n    }\r\n});\r\n\r\n// update all\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n    var gui = this;\r\n    for (var i in gui.__controllers) {\r\n        var controller = gui.__controllers[i];\r\n        controller.updateDisplay();\r\n    }\r\n\r\n    var folders = Object.values(gui.__folders);\r\n    for(i = 0; i < folders.length; i++){\r\n        folders[i].updateAll();\r\n    }\r\n};\r\n\r\n// find\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n    var gui = this, controller, i;\r\n\r\n    if(property){ // 2 arguments\r\n        for (i = 0; i < gui.__controllers.length; i++){\r\n            controller = gui.__controllers[i];\r\n            if (controller.object == object && controller.property == property)\r\n                return controller;\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            controller = folders[i].find(object, property);\r\n            if(controller) return controller;\r\n        }\r\n    }\r\n    else{\r\n        property = object; // 1 argument\r\n\r\n        var folderKeys = Object.keys(gui.__folders);\r\n        for(i = 0; i < folderKeys.length; i++){\r\n            var folderName = folderKeys[i];\r\n            var folder = gui.__folders[folderName];\r\n            if(folderName === property)\r\n                return folder;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n// On open event\r\n//if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n    get: function(){\r\n        return !this.closed;\r\n    },\r\n\r\n    set: function(value){\r\n        for(var i = 0; i < this.onGUIEvent.length; i++){\r\n            this.onGUIEvent[i](value ? 'open' : 'close');\r\n        }\r\n    }\r\n});\r\n\r\n// Disabled\r\nfunction blockEvent(event){\r\n    event.stopPropagation();\r\n}\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n    get: function(){\r\n        return this.domElement.hasAttribute(\"disabled\");\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n            this.domElement.addEventListener(\"click\", blockEvent, true);\r\n            Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n        else{\r\n            this.domElement.removeAttribute(\"disabled\");\r\n            this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n            Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.disabled = !value;\r\n};\r\n\r\n// Tooltip\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n    get: function(){\r\n        return this._tooltip.innerHTML;\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            if(this._tooltip === undefined) {\r\n                this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                /**\r\n                 * @type {HTMLElement}\r\n                 */\r\n                var container = this.domElement.parentElement.parentElement;\r\n                container.classList.add('tooltip');\r\n                container.appendChild(this._tooltip);\r\n            }\r\n            this._tooltip.innerHTML = value;\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.tooltip = value;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Container from \"./components/Container\";\r\nimport Item from \"./components/Item\";\r\n\r\nconst epsilon = Math.pow(2, -52);;\r\n\r\n/**\r\n * From the master's thesis:\r\n * \"The double linked list we use keeps the topology of the edge of the \r\n * current layer under construction. We keep the x and z coordinates of \r\n * each gap's right corner. The program looks at those gaps and tries to \r\n * fill them with boxes one at a time while trying to keep the edge of the\r\n * layer even\" (p. 3-7).\r\n */\r\nclass ScrapPad{\r\n    constructor(){\r\n        /** The x coordinate of the gap's right corner. */\r\n        this.CumX = 0;\r\n        /** The z coordinate of the gap's right corner. */\r\n        this.CumZ = 0;\r\n        \r\n        /** The following entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Post;\r\n\r\n        /** The previous entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Pre;\r\n    }\r\n}\r\n\r\n/**\r\n * A list that stores all the different lengths of all item dimensions.\r\n * From the master's thesis:\r\n * \"Each Layerdim value in this array represents a different layer thickness\r\n * value with which each iteration can start packing. Before starting iterations,\r\n * all different lengths of all box dimensions along with evaluation values are\r\n * stored in this array\" (p. 3-6).\r\n */\r\nclass Layer {\r\n    constructor(layerEval){\r\n        this.LayerDim = 0;\r\n        this.LayerEval = layerEval !== undefined ? layerEval : 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Layer} l1 \r\n     * @param {Layer} l2 \r\n     */\r\n    static SortByEval(l1, l2){\r\n        return l1.LayerEval - l2.LayerEval;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef PackingResult\r\n * @property {Container} Container\r\n * @property {Boolean} IsCompletePack\r\n * @property {Array<Item>} PackedItems\r\n * @property {Number} PercentContainerVolumePacked\r\n * @property {Number} PercentItemVolumePacked\r\n * @property {Array<Item>} UnpackedItems\r\n * @property {Number} PackTimeInMilliseconds\r\n */\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n\t\t/** @type {Container} */\r\n\t\tthis.Container;\r\n        this.IsCompletePack = false;\r\n        /** @type {Array<Item>} */\r\n        this.PackedItems = [];\r\n        this.PercentContainerVolumePacked = 0;\r\n        this.PercentItemVolumePacked = 0;\r\n        /** @type {Array<Item>} */\r\n        this.UnpackedItems = [];\r\n        this.PackTimeInMilliseconds = Number.MAX_SAFE_INTEGER;\r\n    }\r\n}\r\n\r\n\r\n/** @type {Array<Item>} */\r\nvar itemsToPack = [];\r\n/** @type {Array<Item>} */\r\nvar itemsPackedInOrder;\r\n/** @type {Array<Layer>} */\r\nvar layers;\r\n\r\n/** @type {ScrapPad} */\r\nvar scrapfirst;\r\n/** @type {ScrapPad} */\r\nvar smallestZ;\r\n/** @type {ScrapPad} */\r\nvar trash;\r\n\r\nvar evened = false;\r\nvar hundredPercentPacked = false\r\nvar layerDone = false;\r\nvar packing = false;\r\nvar packingBest = false;\r\nvar quit = false;\r\n\r\nvar bboxi = 0;\r\nvar bestIteration = 0;\r\nvar bestVariant = 0;\r\nvar boxi = 0;\r\nvar cboxi = 0;\r\nvar layerListLen = 0;\r\nvar packedItemCount = 0;\r\nvar x = 0;\r\n\r\nvar bbfx = 0;\r\nvar bbfy = 0;\r\nvar bbfz = 0;\r\nvar bboxx = 0;\r\nvar bboxy = 0;\r\nvar bboxz = 0;\r\nvar bfx = 0;\r\nvar bfy = 0;\r\nvar bfz = 0;\r\nvar boxx = 0;\r\nvar boxy = 0;\r\nvar boxz = 0;\r\nvar cboxx = 0;\r\nvar cboxy = 0;\r\nvar cboxz = 0;\r\nvar layerinlayer = 0;\r\nvar layerThickness = 0;\r\nvar lilz = 0;\r\nvar packedVolume = 0;\r\nvar packedy = 0;\r\nvar prelayer = 0;\r\nvar prepackedy = 0;\r\nvar preremainpy = 0;\r\nvar px = 0;\r\nvar py = 0;\r\nvar pz = 0;\r\nvar remainpy = 0;\r\nvar remainpz = 0;\r\nvar itemsToPackCount = 0;\r\nvar totalItemVolume = 0;\r\nvar totalContainerVolume = 0;\r\n\r\n/**\r\n * Current port by chadiik (2018)\r\n * A 3D bin packing algorithm originally ported from https://github.com/davidmchapman/3DContainerPacking\r\n * which itself was ported from https://github.com/keremdemirer/3dbinpackingjs,\r\n * which itself was a JavaScript port of https://github.com/wknechtel/3d-bin-pack/, which is a C reconstruction \r\n * of a novel algorithm developed in a U.S. Air Force master's thesis by Erhan Baltacioglu in 2001.\r\n */\r\nclass AFit {\r\n    constructor(){\r\n\r\n    }\r\n    \r\n    /**\r\n     * Runs the algorithm\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     * @returns {PackingResult}\r\n     */\r\n    Solve(container, items)\r\n    {\r\n        this.Initialize(container, items);\r\n        this.ExecuteIterations(container);\r\n        this.Report(container);\r\n\r\n\t\tvar result = new PackingResult();\r\n\t\tresult.Container = container;\r\n\r\n        for (var i = 1; i <= itemsToPackCount; i++)\r\n        {\r\n            itemsToPack[i].Quantity = 1;\r\n\r\n            if (!itemsToPack[i].IsPacked)\r\n            {\r\n                result.UnpackedItems.push(itemsToPack[i]);\r\n            }\r\n        }\r\n\r\n        result.PackedItems = itemsPackedInOrder;\r\n        \r\n\r\n\r\n        if (result.UnpackedItems.length == 0)\r\n        {\r\n            result.IsCompletePack = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Analyzes each unpacked box to find the best fitting one to the empty space given.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     */\r\n    AnalyzeBox(hmx, hy, hmy, hz, hmz, dim1, dim2, dim3)\r\n\t{\r\n\t\tif (dim1 <= hmx && dim2 <= hmy && dim3 <= hmz)\r\n\t\t{\r\n\t\t\tif (dim2 <= hy)\r\n\t\t\t{\r\n\t\t\t\tif (hy - dim2 < bfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 < bfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 == bfx && Math.abs(hz - dim3) < bfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (dim2 - hy < bbfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 < bbfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 == bbfx && Math.abs(hz - dim3) < bbfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * After finding each box, the candidate boxes and the condition of the layer are examined.\r\n     */\r\n\tCheckFound()\r\n\t{\r\n\t\tevened = false;\r\n\r\n\t\tif (boxi != 0)\r\n\t\t{\r\n\t\t\tcboxi = boxi;\r\n\t\t\tcboxx = boxx;\r\n\t\t\tcboxy = boxy;\r\n\t\t\tcboxz = boxz;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ((bboxi > 0) && (layerinlayer != 0 || (!smallestZ.Pre && !smallestZ.Post)))\r\n\t\t\t{\r\n\t\t\t\tif (layerinlayer == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tprelayer = layerThickness;\r\n\t\t\t\t\tlilz = smallestZ.CumZ;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcboxi = bboxi;\r\n\t\t\t\tcboxx = bboxx;\r\n\t\t\t\tcboxy = bboxy;\r\n\t\t\t\tcboxz = bboxz;\r\n\t\t\t\tlayerinlayer = layerinlayer + bboxy - layerThickness;\r\n\t\t\t\tlayerThickness = bboxy;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (!smallestZ.Pre && !smallestZ.Post)\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerDone = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tevened = true;\r\n\r\n\t\t\t\t\tif (!smallestZ.Pre)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!smallestZ.Post)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Pre.CumZ < smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Executes the packing algorithm variants.\r\n     * @param {Container} container \r\n     */\r\n\tExecuteIterations(container)\r\n\t{\r\n\t\tvar itelayer = 0;\r\n\t\tvar layersIndex = 0;\r\n\t\tvar bestVolume = 0;\r\n\r\n\t\tfor (var containerOrientationVariant = 1; (containerOrientationVariant <= 6) && !quit; containerOrientationVariant++)\r\n\t\t{\r\n\t\t\tswitch (containerOrientationVariant)\r\n\t\t\t{\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlayers.push(new Layer(-1));\r\n\t\t\tthis.ListCanditLayers();\r\n            //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n            layers.sort(Layer.SortByEval);\r\n\r\n\t\t\tfor (layersIndex = 1; (layersIndex <= layerListLen) && !quit; layersIndex++)\r\n\t\t\t{\r\n\t\t\t\tpackedVolume = 0;\r\n\t\t\t\tpackedy = 0;\r\n\t\t\t\tpacking = true;\r\n\t\t\t\tlayerThickness = layers[layersIndex].LayerDim;\r\n\t\t\t\titelayer = layersIndex;\r\n\t\t\t\tremainpy = py;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t\tpackedItemCount = 0;\r\n\r\n\t\t\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdo\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerinlayer = 0;\r\n\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\t\t\tif (layerinlayer != 0 && !quit)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprepackedy = packedy;\r\n\t\t\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\t\t\tremainpz = lilz;\r\n\t\t\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\t\t\tremainpz = pz;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t\t} while (packing && !quit);\r\n\r\n\t\t\t\tif ((packedVolume > bestVolume) && !quit)\r\n\t\t\t\t{\r\n\t\t\t\t\tbestVolume = packedVolume;\r\n\t\t\t\t\tbestVariant = containerOrientationVariant;\r\n\t\t\t\t\tbestIteration = itelayer;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hundredPercentPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (hundredPercentPacked) break;\r\n\r\n\t\t\tif ((container.Length == container.Height) && (container.Height == container.Width)) containerOrientationVariant = 6;\r\n\r\n\t\t\tlayers = [];\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper boxes by looking at all six possible orientations,\r\n\t * empty space given, adjacent boxes, and pallet limits.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     */\r\n\tFindBox(hmx, hy, hmy, hz, hmz)\r\n\t{\r\n        var y = 0;\r\n        \r\n\t\tbfx = Number.MAX_VALUE;\r\n\t\tbfy = Number.MAX_VALUE;\r\n\t\tbfz = Number.MAX_VALUE;\r\n\t\tbbfx = Number.MAX_VALUE;\r\n\t\tbbfy = Number.MAX_VALUE;\r\n\t\tbbfz = Number.MAX_VALUE;\r\n\t\tboxi = 0;\r\n\t\tbboxi = 0;\r\n\r\n\t\tfor (y = 1; y <= itemsToPackCount; y = y + itemsToPack[y].Quantity)\r\n\t\t{\r\n\t\t\tfor (x = y; x < x + itemsToPack[y].Quantity - 1; x++)\r\n\t\t\t{\r\n\t\t\t\tif (!itemsToPack[x].IsPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tif (x > itemsToPackCount) return;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim2, itemsToPack[x].Dim3);\r\n\r\n\t\t\tif ((itemsToPack[x].Dim1 == itemsToPack[x].Dim3) && (itemsToPack[x].Dim3 == itemsToPack[x].Dim2)) continue;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim3, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim1, itemsToPack[x].Dim3);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim3, itemsToPack[x].Dim1);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim1, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim2, itemsToPack[x].Dim1);\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper layer height by looking at the unpacked boxes and the remaining empty space available.\r\n     * @param {Number} thickness \r\n     */\r\n\tFindLayer(thickness)\r\n\t{\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar layereval = 0;\r\n        var maxEvaluations = 1000000;\r\n        \r\n\t\tlayerThickness = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tif ((exdim <= thickness) && (((dimen2 <= px) && (dimen3 <= pz)) || ((dimen3 <= px) && (dimen2 <= pz))))\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!(x == z) && !(itemsToPack[z].IsPacked))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (layereval < maxEvaluations)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmaxEvaluations = layereval;\r\n\t\t\t\t\t\tlayerThickness = exdim;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layerThickness == 0 || layerThickness > remainpy) packing = false;\r\n\t}\r\n\r\n    /**\r\n     * Finds the first to be packed gap in the layer edge.\r\n     */\r\n\tFindSmallestZ()\r\n\t{\r\n\t\tvar scrapmemb = scrapfirst;\r\n\t\tsmallestZ = scrapmemb;\r\n\r\n\t\twhile (scrapmemb.Post)\r\n\t\t{\r\n\t\t\tif (scrapmemb.Post.CumZ < smallestZ.CumZ)\r\n\t\t\t{\r\n\t\t\t\tsmallestZ = scrapmemb.Post;\r\n\t\t\t}\r\n\r\n\t\t\tscrapmemb = scrapmemb.Post;\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Initializes everything.\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n\tInitialize(container, items)\r\n\t{\r\n\t\titemsToPack = [];\r\n\t\titemsPackedInOrder = [];\r\n\r\n\t\t// The original code uses 1-based indexing everywhere. This fake entry is added to the beginning\r\n\t\t// of the list to make that possible.\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0, 0));\r\n\r\n\t\tlayers = [];\r\n\t\titemsToPackCount = 0;\r\n\r\n\t\tfor(var iItems = 0, numItems = items.length; iItems < numItems; iItems++)\r\n\t\t{\r\n            let item = items[iItems];\r\n\t\t\tfor (var i = 1; i <= item.Quantity; i++)\r\n\t\t\t{\r\n\t\t\t\tlet newItem = new Item(item.ID, item.Dim1, item.Dim2, item.Dim3, item.Quantity);\r\n\t\t\t\titemsToPack.push(newItem);\r\n\t\t\t}\r\n\r\n\t\t\titemsToPackCount += item.Quantity;\r\n\t\t}\r\n\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0));\r\n\r\n\t\ttotalContainerVolume = container.Length * container.Height * container.Width;\r\n\t\ttotalItemVolume = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\ttotalItemVolume = totalItemVolume + itemsToPack[x].Volume;\r\n\t\t}\r\n\r\n\t\tscrapfirst = new ScrapPad();\r\n\r\n\t\tscrapfirst.Pre = undefined;\r\n\t\tscrapfirst.Post = undefined;\r\n\t\tpackingBest = false;\r\n\t\thundredPercentPacked = false;\r\n\t\tquit = false;\r\n\t}\r\n\r\n    /**\r\n     * Lists all possible layer heights by giving a weight value to each of them.\r\n     */\r\n\tListCanditLayers()\r\n\t{\r\n\t\tvar same = false;\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar k = 0;\r\n\t\tvar layereval = 0;\r\n\r\n\t\tlayerListLen = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((exdim > py) || (((dimen2 > px) || (dimen3 > pz)) && ((dimen3 > px) || (dimen2 > pz)))) continue;\r\n\r\n\t\t\t\tsame = false;\r\n\r\n\t\t\t\tfor (k = 1; k <= layerListLen; k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (exdim == layers[k].LayerDim)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsame = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (same) continue;\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!(x == z))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayerListLen++;\r\n\r\n\t\t\t\tlayers.push(new Layer());\r\n\t\t\t\tlayers[layerListLen].LayerEval = layereval;\r\n\t\t\t\tlayers[layerListLen].LayerDim = exdim;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Transforms the found coordinate system to the one entered by the user and writes them to the report file.\r\n     */\r\n\tOutputBoxList()\r\n\t{\r\n\t\tvar packCoordX = 0;\r\n\t\tvar packCoordY = 0;\r\n\t\tvar packCoordZ = 0;\r\n\t\tvar packDimX = 0;\r\n\t\tvar packDimY = 0;\r\n\t\tvar packDimZ = 0;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\titemsToPack[cboxi].CoordX = packCoordX;\r\n\t\titemsToPack[cboxi].CoordY = packCoordY;\r\n\t\titemsToPack[cboxi].CoordZ = packCoordZ;\r\n\t\titemsToPack[cboxi].PackDimX = packDimX;\r\n\t\titemsToPack[cboxi].PackDimY = packDimY;\r\n\t\titemsToPack[cboxi].PackDimZ = packDimZ;\r\n\r\n\t\titemsPackedInOrder.push(itemsToPack[cboxi]);\r\n\t}\r\n\r\n    /**\r\n     * Packs the boxes found and arranges all variables and records properly.\r\n     */\r\n\tPackLayer()\r\n\t{\r\n\t\tvar lenx = 0;\r\n\t\tvar lenz = 0;\r\n\t\tvar lpz = 0;\r\n\r\n\t\tif (layerThickness == 0)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tscrapfirst.CumX = px;\r\n\t\tscrapfirst.CumZ = 0;\r\n\r\n        //for (; !quit;)\r\n        while(!quit)\r\n\t\t{\r\n\t\t\tthis.FindSmallestZ();\r\n\r\n\t\t\tif ((!smallestZ.Pre) && (!smallestZ.Post))\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-1: NO BOXES ON THE RIGHT AND LEFT SIDES ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lpz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.Post = new ScrapPad();\r\n\r\n\t\t\t\t\tsmallestZ.Post.Post = undefined;\r\n\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ;\r\n\t\t\t\t\tsmallestZ.CumX = cboxx;\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Pre)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-2: NO BOXES ON THE LEFT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlenz = smallestZ.Post.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Post)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-3: NO BOXES ON THE RIGHT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-4: THERE ARE BOXES ON BOTH OF THE SIDES ***\r\n\r\n\t\t\t\t//*** SUBSITUATION-4A: SIDES ARE EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (smallestZ.Pre.CumX < px - smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//*** SUBSITUATION-4B: SIDES ARE NOT EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == (smallestZ.CumX - smallestZ.Pre.CumX))\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.VolumeCheck();\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Using the parameters found, packs the best solution found and reports to the console.\r\n     * @param {Container} container \r\n     */\r\n\tReport(container)\r\n\t{\r\n\t\tquit = false;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tpackingBest = true;\r\n\r\n\t\t//Print(\"BEST SOLUTION FOUND AT ITERATION                      :\", bestIteration, \"OF VARIANT\", bestVariant);\r\n\t\t//Print(\"TOTAL ITEMS TO PACK                                   :\", itemsToPackCount);\r\n\t\t//Print(\"TOTAL VOLUME OF ALL ITEMS                             :\", totalItemVolume);\r\n\t\t//Print(\"WHILE CONTAINER ORIENTATION X - Y - Z                 :\", px, py, pz);\r\n\r\n\t\tlayers.length = 0;\r\n\t\tlayers[0] = new Layer(-1);\r\n\t\tthis.ListCanditLayers();\r\n        //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n        layers.sort(Layer.SortByEval);\r\n\t\tpackedVolume = 0;\r\n\t\tpackedy = 0;\r\n\t\tpacking = true;\r\n\t\tlayerThickness = layers[bestIteration].LayerDim;\r\n\t\tremainpy = py;\r\n\t\tremainpz = pz;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t}\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\tlayerinlayer = 0;\r\n\t\t\tlayerDone = false;\r\n\t\t\tthis.PackLayer();\r\n\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\tif (layerinlayer > epsilon)\r\n\t\t\t{\r\n\t\t\t\tprepackedy = packedy;\r\n\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\tremainpz = lilz;\r\n\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\tlayerDone = false;\r\n\t\t\t\tthis.PackLayer();\r\n\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t}\r\n\r\n\t\t\tif (!quit)\r\n\t\t\t{\r\n\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t}\r\n\t\t} while (packing && !quit);\r\n\t}\r\n\r\n    /**\r\n     * After packing of each item, the 100% packing condition is checked.\r\n     */\r\n\tVolumeCheck()\r\n\t{\r\n\t\titemsToPack[cboxi].IsPacked = true;\r\n\t\titemsToPack[cboxi].PackDimX = cboxx;\r\n\t\titemsToPack[cboxi].PackDimY = cboxy;\r\n\t\titemsToPack[cboxi].PackDimZ = cboxz;\r\n\t\tpackedVolume = packedVolume + itemsToPack[cboxi].Volume;\r\n\t\tpackedItemCount++;\r\n\r\n\t\tif (packingBest)\r\n\t\t{\r\n\t\t\tthis.OutputBoxList();\r\n\t\t}\r\n\t\telse if (packedVolume == totalContainerVolume || packedVolume == totalItemVolume)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\thundredPercentPacked = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default AFit;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFit.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view;\r\n        this.templatesView = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Map<CargoGroup, CargoView>}\r\n         */\r\n        this.cargoTemplateViews = new Map();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        //Logger.Log('Adding cargo group #' + this.cargoTemplateViews.size + ': ' + group.ToString() + ' to view', group);\r\n        var templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.Sort();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.templatesView.scale.set(1, 1, 1);\r\n        this.templatesView.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 3 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(0, start, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.y / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(0, start + offset, 0);\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        //result.min = tempVec.set(0, result.min, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        //result.max = tempVec.set(0, offset, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n\r\n        //for(var [cargo, cargoView] of cargoViews){}\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n\r\n        this.cargoTemplateViews.clear();\r\n        list.forEach(entry => {\r\n            this.cargoTemplateViews.set(entry[0], entry[1]);\r\n        });\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new THREE.MeshStandardMaterial();\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\nfunction nextColor(){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n        material.color = nextColor();\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     */\r\n    Add(container){\r\n        Logger.Log('Adding container: ' + container.ToString() + ' to view', container);\r\n        var containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     */\r\n    Remove(container){\r\n\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(var iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(var iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, THREE.Mesh>}\r\n     */\r\n    var meshes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .5;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        meshes.set(cv, mesh);\r\n    });\r\n\r\n    return meshes;\r\n}\r\n\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        var containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, mesh] of containerBoxes){\r\n            mesh.position.add(cv.position);\r\n            this.view.add(mesh);\r\n        }\r\n\r\n    }\r\n\r\n    /*\r\n    Set(object3d){\r\n        this.view = object3d;\r\n    }*/\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( ! view ){\r\n            let meshes = createContainerBoxes(container);\r\n            let view = new THREE.Object3D();\r\n            for(var [cv, mesh] of meshes){\r\n                mesh.position.add(cv.position);\r\n                view.add(mesh);\r\n            }\r\n\r\n            containerView = new ContainerView(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","\r\n\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new THREE.MeshStandardMaterial({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @param {THREE.Object3D} texturePath \r\n     */\r\n    static FromJSON(json, texturePath){\r\n        return objectLoader.parse(json, texturePath);\r\n    }\r\n}\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst signals = {\r\n    updated: 'updated',\r\n    aborted: 'aborted',\r\n    completed: 'completed'\r\n};\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        /** Do not modify directly, use CargoInput.Update instead\r\n         * @ignore\r\n         */\r\n        //this.entry = new BoxEntry();\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        return new BoxEntry();\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.updated, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.aborted);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('Cargo.Input.Add, entry rejected, dimensions != Volume:', entry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                var commitedEntry = entry.Clone();\r\n                var uid = commitedEntry.SetUID();\r\n\r\n                this.Dispatch(signals.completed, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {THREE.Geometry} jsonObject.geometry\r\n * @property {Container} jsonObject.container\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded'\r\n};\r\n\r\nclass PackingSpaceInput extends Signaler {\r\n    constructor(){\r\n        super();\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {PackingSpaceJSON} jsonObject \r\n     */\r\n    Load(jsonObject){\r\n        var data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        console.log(data);\r\n        if(data.container){\r\n            var container = Container.FromJSON(data.container);\r\n            \r\n            if(data.view){\r\n                var model = Asset.FromJSON(data.view);\r\n                //var model = Asset.CreateMesh(geometry);\r\n                var containerView = new ContainerView(container, model);\r\n            }\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport CargoInput from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput from './api/components/PackingSpaceInput';\r\nimport UX from './api/UX';\r\nimport PackerInterface from './api/components/PackerInterface';\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug\r\n * @property {import('./api/UX').UXParams} ux\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default\r\n};\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tFreightPacker.DevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.ux);\r\n\r\n\t\t/**\r\n\t\t * Handles input of: description fields (label, etc.), dimensions and constraints\r\n\t\t * @type {CargoInput}\r\n\t\t */\r\n\t\tthis.cargoInput = new CargoInput();\r\n\r\n\t\t/**\r\n\t\t * Handles input of: packing spaces configurations and assets\r\n\t\t * @type {PackingSpaceInput}\r\n\t\t */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput();\r\n\r\n\t\tvar app = new App(containerDiv, this.ux, {\r\n\t\t\tcargoInput: this.cargoInput,\r\n\t\t\tpackingSpaceInput: this.packingSpaceInput\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Manual solving and notification\r\n\t\t * @type {PackerInterface}\r\n\t\t */\r\n\t\tthis.packer = new PackerInterface(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tFreightPacker.Auto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n\t/** @param {FreightPacker} fp */\r\n\tstatic DevSetup(fp){\r\n\t\tglobal.fp = fp;\r\n\t\tvar params = fp.params;\r\n\t\tif(params.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\r\n\t\t//require('./api/debug/Tester').testPool();\r\n\t}\r\n\r\n\t/** @param {FreightPacker} fp */\r\n\tstatic Auto(fp){\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","\r\nclass Renderer {\r\n    constructor(params) {\r\n\r\n        this.params = params;\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            this.renderer.shadowMap.autoUpdate = false;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 80, 400), new THREE.Euler(-0.1, 0, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nconst type = 'Volume';\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Copy(){\r\n        Logger.Warn('PackingProperty.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        \r\n    }\r\n\r\n    /**\r\n     * @param {SupportsStacking} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new SupportsStacking();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        Logger.Warn('Constraint.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils3D from \"../utils/cik/Utils3D\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Object} cargoListView\r\n * @property {import('../utils/cik/Utils3D').IPoint} cargoListView.bottomLeft\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    cargoListView: {\r\n        bottomLeft: { x: 100, y: 100 },\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {}\r\n    }\r\n};\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, params){\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        var onContainerAdded = this.packingSpaceView.Add.bind(this.packingSpaceView);\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n        var onCargoGroupAdded = this.cargoListView.Add.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        var onCargoRemoved = this.cargoListView.Remove.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoRemoved);\r\n\r\n        // Cargo list display\r\n        if(this.params.ux.params.hud){    \r\n            this.sceneSetup.hud.Add(this.cargoListView.templatesView);\r\n            this.HUDSetup();\r\n        }\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        var onPackUpdate = this.packResultView.DisplayPackingResult.bind(this.packResultView);\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var clv = this.cargoListView;\r\n        var scope = this;\r\n\r\n        var cargoListViewRect = new Utils3D.Rect(0, 0, 150, input.screen.height);\r\n        var clvRectIgnore = cargoListViewRect.Clone();\r\n        clvRectIgnore.Offset(input.screen.left, input.screen.top);\r\n\r\n        var min = -1, max = 1;\r\n        var v = new THREE.Vector3(),\r\n            viewportPointA = new THREE.Vector2(),\r\n            viewportPointB = new THREE.Vector2();\r\n        var dragOffset = 0;\r\n\r\n        // \r\n        \r\n        /**\r\n         * @param {import('./CargoListView').SortResult} sortResult\r\n         */\r\n        function onSort(sortResult){\r\n            if(sortResult.cargoes > 0){\r\n                Utils3D.Project(v.set(0, sortResult.min, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, sortResult.max, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                \r\n                var distance = viewportPointA.sub(viewportPointB).length();\r\n                var ratio = .8 / distance;\r\n                var s = Math.max(.6, Math.pow(Math.min(1, clv.templatesView.scale.length() * ratio), .9));\r\n                clv.templatesView.scale.set(s, s, s);\r\n                clv.templatesView.updateMatrixWorld();\r\n            }\r\n\r\n            min = v.set(0, sortResult.min, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n            max = v.set(0, sortResult.max, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n        }\r\n        this.cargoListView.On(CargoListView.signals.sort, onSort);\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').DragEvent} dragEvent \r\n         */\r\n        function onDrag(dragEvent){\r\n            let start = cargoListViewRect.ContainsPoint(dragEvent.sx, dragEvent.sy);\r\n            let current = cargoListViewRect.ContainsPoint(dragEvent.x, dragEvent.y);\r\n            if(start && current){\r\n                let offset = dragEvent.dy * .5 * units;\r\n                let clvMin = min + offset,\r\n                    clvMax = max + offset;\r\n                Utils3D.Project(v.set(0, clvMin, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, clvMax, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                //console.log(viewportPointA, viewportPointB);\r\n                if( (offset > 0 && viewportPointA.y < -.7)\r\n                    || \r\n                    (offset < 0 && viewportPointB.y > .8)\r\n                ){\r\n                    dragOffset += offset;\r\n                    min += offset;\r\n                    max += offset;\r\n                    clv.templatesView.position.y += offset;\r\n                }\r\n            }\r\n        }\r\n        input.onDrag.push(onDrag);\r\n\r\n        this.sceneSetup.cameraController.orbitControls.ignoredAreas.push(\r\n            clvRectIgnore\r\n        );\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').IScreen} screen \r\n         */\r\n        function onScreenResize(screen){\r\n\r\n            cargoListViewRect.bottom = screen.height;\r\n            clvRectIgnore.Copy(cargoListViewRect);\r\n            clvRectIgnore.Offset(screen.left, screen.top);\r\n\r\n            var bottomLeft = scope.params.cargoListView.bottomLeft; // offset in pixels\r\n            tempVec.set(bottomLeft.x, bottomLeft.y); // viewport point in pixels\r\n\r\n            Utils3D.ToNDC(tempVec, screen); // NDC point\r\n            Utils3D.Unproject(tempVec, hud.cameraController.camera, tempVec, 'z'); // worldPos on z plane\r\n            tempVec.y += dragOffset;\r\n            clv.templatesView.position.copy(tempVec); // set view position\r\n\r\n            clv.templatesView.updateMatrixWorld(true);\r\n\r\n            clv.Sort();\r\n        }\r\n        \r\n        input.onResize.push(onScreenResize);\r\n        onScreenResize(input.screen);\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            input.keyboard.on('s', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.templatesView);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","\r\n\r\n/**\r\n * @typedef {Object} Screen\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\n/**\r\n * @typedef {Object} IPoint\r\n * @property {Number} x\r\n * @property {Number} y\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass Utils3D {\r\n\r\n    /** Converts 'vec' to NDC, to supply 'vec' in the range [0, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToNDC(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        vec.x = vec.x * 2 - 1;\r\n        vec.y = vec.y * 2 - 1;\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts 'vec' to [0, 1] range, to supply 'vec' in NDC [-1, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToUnit(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        else{\r\n            vec.x = vec.x / 2 + .5;\r\n            vec.y = vec.y / 2 + .5;\r\n        }\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts a NDC to world plane (axis) position\r\n     * @param {THREE.Vector2|THREE.Vector3} viewportPoint - in NDC, can be safely used as 'result' if THREE.Vector3\r\n     * @param {THREE.Camera} camera \r\n     * @param {THREE.Vector3} [result]\r\n     * @param {string} [axis] - 'x', 'y' or 'z' (default='z')\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    static Unproject(viewportPoint, camera, result, axis){\r\n        // Ref: https://stackoverflow.com/a/13091694/1712403\r\n\r\n        result = result || new THREE.Vector3();\r\n        result.set(viewportPoint.x, viewportPoint.y, .5);\r\n        result.unproject(camera);\r\n        result.sub(camera.position).normalize();\r\n\r\n        axis = axis || 'z';\r\n        var distance = - camera.position[axis] / result[axis];\r\n        result.multiplyScalar(distance).add(camera.position);\r\n\r\n        return result;\r\n    }\r\n\r\n    /** Converts world position to NDC\r\n     * @param {THREE.Vector3} worldPoint \r\n     * @param {THREE.Camera} camera \r\n     * @param {Screen} screen \r\n     * @param {THREE.Vector2} result \r\n     */\r\n    static Project(worldPoint, camera, screen, result) {\r\n        // Ref: https://github.com/josdirksen/threejs-cookbook/blob/master/03-camera/03.07-convert-world-coordintate-to-screen-coordinates.html\r\n\r\n        tempVec.copy(worldPoint).project(camera);\r\n        result = result || new THREE.Vector2();\r\n        result.x  = tempVec.x;\r\n        result.y  = tempVec.y;\r\n        return result;\r\n    }\r\n}\r\n\r\nclass Rect {\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    constructor(left, top, right, bottom){\r\n        this.Set(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    Set(left, top, right, bottom){\r\n        this.left = left;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n    }\r\n\r\n    /**\r\n     * @param {IPoint|Number} point - {x, y} | x value\r\n     * @param {Number} y - y value\r\n     */\r\n    ContainsPoint(point, y){\r\n        let x = y ? point : point.x;\r\n        y = y ? y : point.y;\r\n        return x > this.left && x < this.right && y > this.top && y < this.bottom;\r\n    }\r\n\r\n    Offset(x, y){\r\n        this.left += x;\r\n        this.top += y;\r\n        this.right += x;\r\n        this.bottom += y;\r\n    }\r\n\r\n    Copy(rect){\r\n        this.Set(rect.left, rect.top, rect.right, rect.bottom);\r\n    }\r\n\r\n    Clone(){\r\n        return new Rect(this.left, this.top, this.right, this.bottom);\r\n    }\r\n}\r\n\r\nUtils3D.Rect = Rect;\r\n\r\nexport default Utils3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils3D.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Logger from '../utils/cik/Logger';\r\nimport Tween from '../utils/cik/Tween';\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    var packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nclass PackResultView{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {import('../packer/Packer').PackingResult} packingResult\r\n     */\r\n    DisplayPackingResult(packingResult){\r\n        var containingVolumeID = packingResult.Container.ID;\r\n        var containingVolume = this.packingSpaceView.FindContainingVolume(containingVolumeID);\r\n        var matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        var offset = new THREE.Vector3();\r\n        var orientation = new THREE.Quaternion();\r\n        var scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n\r\n        var animatingViews = this.animatingViews;\r\n        var view = this.view;\r\n        var onTweenCompleted = this.OnTweenCompleted.bind(this);\r\n\r\n        for(var i = 0, numPackedItems = packingResult.PackedItems.length; i < numPackedItems; i++){\r\n            let item = packingResult.PackedItems[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.ID);\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            let width = item.PackDimX,\r\n                length = item.PackDimZ,\r\n                height = item.PackDimY;\r\n\r\n            Logger.WarnOnce('PackResultView.DisplayPackingResult', 'packedCargoView should be rotated instead of re-scaling');\r\n            packedCargoView.SetScale(width, height, length);\r\n\r\n            let x = item.CoordX + width / 2 + offset.x,\r\n                y = item.CoordY + height / 2 + offset.y,\r\n                z = item.CoordZ + length / 2 + offset.z;\r\n            //packedCargoView.position.set(x, y, z);\r\n\r\n            let zEntry = containingVolume.dimensions.length;\r\n            setTimeout(function(){\r\n                let posTweenCombo = Tween.Combo.Request3(Tween.functions.linear,\r\n                    x, y, zEntry, \r\n                    0, 0, z - zEntry,\r\n                    .5\r\n                );\r\n                \r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenCompleted;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n    \r\n                view.add(packedCargoView.view);\r\n            }, 100 * i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Tween|Tween.Combo} tween \r\n     */\r\n    OnTweenCompleted(tween){\r\n        var index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff});\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 1;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => {\r\n            tween.Unhook();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, startValue0, startValue1, startValue2, delta0, delta1, delta2, duration){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.startTime = clock.getElapsedTime();\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js","import App from \"../App\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Packer from \"../packer/Packer\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass PackerInterface extends Signaler {\r\n    /**\r\n     * @param {App} app \r\n     */\r\n    constructor(app){\r\n        super();\r\n        \r\n        var scope = this;\r\n        function onPackUpdate(){\r\n            scope.Dispatch(signals.packUpdate);\r\n        }\r\n\r\n        app.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n        this[_app] = app;\r\n    }\r\n\r\n    Solve(){\r\n        /** @type {App} */\r\n        var app = this[_app];\r\n        app.packer.Solve();\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","import AFitTest from \"../packer/afit/AFitTest\";\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\nclass Debug {\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import Item from \"./components/Item\";\r\nimport AFit from \"./AFit\";\r\nimport Container from \"./components/Container\";\r\n\r\n/** @param {Array<Item>} items */\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n    constructor(){\r\n        this.aFitPacker = new AFit();\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    T1(container, items){\r\n\r\n        var startTime = performance.now();\r\n        var result = this.aFitPacker.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n\r\n        return result;\r\n    }\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js"],"sourceRoot":""}