{"version":3,"sources":["webpack:///webpack/bootstrap 98c78844680becda7335","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/main.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/App.js","webpack:///./src/api/view/View.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/view/Controller.js","webpack:///./src/api/view/Renderer.js","webpack:///./src/api/view/Camera.js","webpack:///./src/api/components/BoxInput.js","webpack:///./src/api/utils/cik/Signaler.js"],"names":["tracing","standard","warning","messages","Message","type","content","args","forEach","arg","push","json","JSON","parse","stringify","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","trace","groupEnd","warn","filter","undefined","output","ToString","value","active","_trimVariableRegex","RegExp","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","keys","key","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","Math","PI","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","twopi","r","g","z","set","global","FreightPacker","containerDiv","options","debug","toConsole","traceToConsole","boxInput","components","app","Capabilities","webgl","IsWebGLReady","Promise","resolve","reject","require","default","canvas","document","createElement","gl","getContext","WebGLRenderingContext","App","view","Init","then","Start","bind","On","Trace","View","domElement","quality","Common","units","controllerParams","sceneController","cameraParams","fov","aspect","near","far","id","cameraController","OrbitControls","rendererParams","clearColor","renderSizeMul","sceneRenderer","appendChild","renderer","UseCamera","camera","onResize","ReconfigureViewport","setupParams","fillLights","gridHelper","position","SetTarget","Vector3","DefaultLights","GridHelper","AddDefault","Update","scope","timestamp","animationFrameID","requestAnimationFrame","Render","scene","cancelAnimationFrame","Dispose","params","ambient","AmbientLight","directionalLight","DirectionalLight","ambientContainer","add","Input","domContainer","enabled","defineProperty","get","_camera","min","max","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","screen","ComputeScreen","raycaster","Raycaster","clock","Clock","start","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","update","interval","last","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","doubleClickTime","addEventListener","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","screenNeedsUpdate","OnScroll","cameraNeedsUpdate","OnResize","keyboard","keypress","Listener","on","simple_combo","defaultKeysListen","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","width","height","left","right","bottom","top","rectOffset","GetRectOffset","mouseEvent","button","UpdateScreenAndMouse","now","getElapsedTime","_dridMouseDown","AbortDelayedAction","DelayedAction","_mouseDownDelayed","UpdateRaycast","copy","ExecuteDelayedMD","distanceToSquared","noMouseDrag","clamp","clientX","clientY","event","preventDefault","delta","wheelDelta","detail","lerp","Number","isNaN","updateProjectionMatrix","eventType","callbacks","iCallback","splice","FireOnce","UpdateRaycaster","iUpdate","LerpZoom","action","delay","drid","setTimeout","clearTimeout","_repeats","setInterval","clearInterval","objects","recursive","intersects","Array","intersectObjects","intersectObject","groupID","group","log","updateMatrixWorld","setFromCamera","raycastGroupsKeys","numRaycastGroups","sort","reverse","iGroup","Raycast","_defaultKeysListen","split","concat","RaycastGroup","items","collectionQuery","updateProperty","continuous","raycastItems","GetRaycastItems","iItem","rItem","Cik","Log","raycastItemIndex","BubbleUpForIndex","child","collection","nestLimit","numCollection","parent","Quality","testCallback","composer","antialias","shadows","result","Boolean","OnTestComplete","Controller","itemsContainer","Object3D","name","miscContainer","defaults","Scene","objName","getObjectByName","remove","Renderer","WebGLRenderer","shadowMap","PCFSoftShadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","floor","Camera","PerspectiveCamera","container","fpsControls","Navigation","FirstPerson","Hold","Release","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","orbitControls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","rotation","Entry","Set","completed","BoxInput","entry","Dispatch","Signaler","signals"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AC5DA,IAAIA,UAAU,CAAd;AAAA,IACIC,WAAW,CADf;AAAA,IAEIC,UAAU,CAFd;;AAIA,IAAIC,WAAW,EAAf;;IAEMC,O;AACF,qBAAYC,IAAZ,EAA0B;AAAA;;AACtB,aAAKA,IAAL,GAAYA,IAAZ;AACA,YAAIC,UAAU,EAAd;;AAFsB,0CAALC,IAAK;AAALA,gBAAK;AAAA;;AAGtBA,aAAKC,OAAL,CAAa,eAAO;AAChB,gBAAG,OAAOC,GAAP,KAAe,QAAlB,EAA2B;AACvBH,wBAAQI,IAAR,CAAaD,GAAb;AACH,aAFD,MAGI;AACA,oBAAG;AACC,wBAAIE,OAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeL,GAAf,CAAX,CAAX;AACAH,4BAAQI,IAAR,CAAaC,IAAb;AACH,iBAHD,CAIA,OAAMI,GAAN,EAAU;AACNT,4BAAQI,IAAR,CAAaK,GAAb;AACH;AACJ;AACJ,SAbD;AAcH;;;;mCAES,CAET;;;;;;IAGCC,M;;;;;;;+BAcYC,O,EAAQ;AAClBd,qBAASO,IAAT,CAAcO,OAAd;AACH;;;gCAEoB;AACjB,gBAAG,KAAKC,OAAR,EAAgB;AAAA,mDADJX,IACI;AADJA,wBACI;AAAA;;AACZ,oBAAIU,6CAAcb,OAAd,iBAAsBJ,OAAtB,GAAkCO,IAAlC,KAAJ;AACA,qBAAKY,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAL,IAAmB,KAAKC,eAA3B,EAA2C;AAAA;;AACvC,yCAAQC,cAAR,iBAA0Bf,IAA1B;AACAgB,4BAAQC,KAAR,CAAc,OAAd;AACAD,4BAAQE,QAAR;AACH;AACJ;AACJ;;;8BAEkB;AACf,gBAAG,KAAKP,OAAR,EAAgB;AAAA,mDADNX,IACM;AADNA,wBACM;AAAA;;AACZ,oBAAIU,6CAAcb,OAAd,iBAAsBH,QAAtB,GAAmCM,IAAnC,KAAJ;AACA,qBAAKY,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAR,EAAmB;AAAA;;AACf,0CAAQE,cAAR,kBAA0Bf,IAA1B;AACAgB,4BAAQC,KAAR,CAAc,OAAd;AACAD,4BAAQE,QAAR;AACH;AACJ;AACJ;;;+BAEmB;AAChB,gBAAG,KAAKP,OAAR,EAAgB;AAAA;;AAAA,mDADLX,IACK;AADLA,wBACK;AAAA;;AACZ,oBAAIU,6CAAcb,OAAd,iBAAsBF,OAAtB,GAAkCK,IAAlC,KAAJ;AACA,qBAAKY,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAR,EAAoB,sBAAQM,IAAR,kBAAgBnB,IAAhB;AACvB;AACJ;;;8BAEYoB,M,EAAO;AAChB,gBAAGA,WAAWC,SAAd,EAAwB;AACpBD,yBAAS,EAAT;AACAA,uBAAO3B,OAAP,IAAkB2B,OAAO1B,QAAP,IAAmB0B,OAAOzB,OAAP,IAAkB,IAAvD;AACH;;AAED,gBAAI2B,SAAS,QAAb;AACA1B,qBAASK,OAAT,CAAiB,mBAAW;AACxB,oBAAGmB,OAAOV,QAAQZ,IAAf,CAAH,EAAwB;AACpBwB,8BAAUZ,QAAQa,QAAR,KAAqB,IAA/B;AACH;AACJ,aAJD;;AAMA,mBAAOD,MAAP;AACH;;;0BA9DiBE,K,EAAM;AACpB,iBAAKb,OAAL,GAAea,KAAf;AACH;;;0BAEoBA,K,EAAM;AACvB,iBAAKX,UAAL,GAAkBW,KAAlB;AACH;;;0BAEyBA,K,EAAM;AAC5B,iBAAKV,eAAL,GAAuBU,KAAvB;AACH;;;;;;AAuDLf,OAAOgB,MAAP,GAAgB,IAAhB;;AAEA,yDAAehB,MAAf,E;;;;;;;;;;;;ACpGA,IAAIiB,qBAAqB,IAAIC,MAAJ,CAAW,cAAX,CAAzB;;IAEMC,K;;;;;;;iCAEcC,M,EAAQC,W,EAAY;AAChC,gBAAIC,kBAAkBF,MAAtB;AACA,gBAAIG,qBAAqBH,OAAOI,SAAhC;;AAEA,gBAAIC,MAAMJ,YAAYE,kBAAZ,CAAV;;AAEAG,mBAAOC,MAAP,CAAcF,GAAd,EAAmBH,eAAnB;AACAI,mBAAOC,MAAP,CAAcF,IAAID,SAAlB,EAA6BD,kBAA7B;AACAG,mBAAOE,gBAAP,CAAwBH,GAAxB,EAA6BC,OAAOG,yBAAP,CAAiCP,eAAjC,CAA7B;AACAI,mBAAOE,gBAAP,CAAwBH,IAAID,SAA5B,EAAuCE,OAAOG,yBAAP,CAAiCN,kBAAjC,CAAvC;;AAEA,mBAAOE,GAAP;AACH;;;wCAEsBK,M,EAAQC,M,EAAO;AAClC,gBAAGD,WAAWlB,SAAd,EAAwB;AACpBkB,yBAAS,EAAT;AACAJ,uBAAOC,MAAP,CAAcG,MAAd,EAAsBC,MAAtB;AACA,uBAAOD,MAAP;AACH;;AAED,gBAAIE,OAAON,OAAOM,IAAP,CAAYD,MAAZ,CAAX;AACAC,iBAAKxC,OAAL,CAAa,eAAO;AAChB,oBAAGsC,OAAOG,GAAP,MAAgBrB,SAAnB,EAA8BkB,OAAOG,GAAP,IAAcF,OAAOE,GAAP,CAAd;AACjC,aAFD;AAGA,mBAAOH,MAAP;AACH;;;sCAEoBI,O,EAAQ;AACzB,gBAAIC,QAAQC,OAAOC,gBAAP,CAAwBH,OAAxB,CAAZ;AAAA,gBACII,aAAaC,WAAWJ,MAAMG,UAAjB,CADjB;AAAA,gBAEIE,YAAYD,WAAWJ,MAAMK,SAAjB,CAFhB;AAAA,gBAGIC,cAAcF,WAAWJ,MAAMM,WAAjB,CAHlB;AAAA,gBAIIC,aAAaH,WAAWJ,MAAMO,UAAjB,CAJjB;AAKA,mBAAO,EAACC,GAAGL,aAAaG,WAAjB,EAA8BG,GAAGJ,YAAYE,UAA7C,EAAP;AACH;;;qCAEmBG,K,EAAM;AACtB,mBAAOA,MAAMC,OAAN,CAAc7B,kBAAd,EAAkC,EAAlC,CAAP;AACH;;;oCAEkB8B,G,EAAKC,M,EAAO;AAC3B,gBAAGD,IAAIC,MAAJ,GAAaA,MAAhB,EAAwBD,MAAMA,IAAIE,SAAJ,CAAcF,IAAIC,MAAJ,GAAaA,MAA3B,CAAN;AACxB,mBAAOD,GAAP;AACH;;;kCAEgBG,C,EAAGC,G,EAAI;AACpBD,gBAAIA,IAAIC,GAAR;AACA,gBAAGD,IAAI,CAAP,EAAUA,IAAIC,MAAMD,CAAV;AACV,mBAAOA,CAAP;AACH;;;uCAEqBE,S,EAAWC,Q,EAAS;AACtC;AACA,gBAAIC,KAAK,IAAIC,KAAKC,EAAT,GAAcJ,SAAvB;AACA,gBAAIK,IAAIF,KAAKG,GAAL,CAASJ,EAAT,CAAR;AACA,gBAAIK,IAAIJ,KAAKK,GAAL,CAASN,EAAT,CAAR;AACA,gBAAII,MAAM,CAAV;AACA,gBAAIE,MAAM,CAAV;AACA,iBAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAIE,SAApB,EAA+BF,GAA/B,EACA;AACI,oBAAIW,KAAKJ,IAAEC,GAAF,GAAQC,IAAEC,GAAnB;AACA,oBAAIE,KAAKH,IAAED,GAAF,GAAQD,IAAEG,GAAnB;AACAF,sBAAMG,EAAN;AACAD,sBAAME,EAAN;AACAT,yBAASK,GAAT,EAAcE,GAAd;AACH;AACJ;;;2CAEyBG,C,EAAGN,C,EAAGE,C,EAAGK,C,EAAGC,C,EAAGC,K,EAAM;AAC3C;AACA;AACAA,oBAAQA,SAAS,IAAIC,MAAMC,KAAV,EAAjB;AACA,gBAAIC,QAAQ,IAAId,KAAKC,EAArB;AACA,gBAAIc,IAAIb,EAAEd,CAAF,GAAMgB,EAAEhB,CAAF,GAAMY,KAAKG,GAAL,CAAUW,SAASL,EAAErB,CAAF,GAAMoB,CAAN,GAAUE,EAAEtB,CAArB,CAAV,CAApB;AAAA,gBACI4B,IAAId,EAAEb,CAAF,GAAMe,EAAEf,CAAF,GAAMW,KAAKG,GAAL,CAAUW,SAASL,EAAEpB,CAAF,GAAMmB,CAAN,GAAUE,EAAErB,CAArB,CAAV,CADpB;AAAA,gBAEIe,IAAIF,EAAEe,CAAF,GAAMb,EAAEa,CAAF,GAAMjB,KAAKG,GAAL,CAAUW,SAASL,EAAEQ,CAAF,GAAMT,CAAN,GAAUE,EAAEO,CAArB,CAAV,CAFpB;AAGA,mBAAON,MAAMO,GAAN,CAAUH,CAAV,EAAaC,CAAb,EAAgBZ,CAAhB,CAAP;AACH;;;;;;AAGL,+DAAexC,KAAf,E;;;;;;;;;;;;;;;;ACtFA;AACAuD,OAAOC,aAAP,GAAuB,+DAAvB,C;;;;;;;ACDA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;;IAEMA,a;AACL;;;;;AAKA,wBAAaC,YAAb,EAA2BC,OAA3B,EAAqC;AAAA;;AAEpCA,YAAUA,WAAW,EAArB;AACA,MAAGA,QAAQC,KAAX,EAAkB;AACjB9E,GAAA,sEAAAA,CAAOgB,MAAP,GAAgB,IAAhB;AACAhB,GAAA,sEAAAA,CAAO+E,SAAP,GAAmB,IAAnB;AACA/E,GAAA,sEAAAA,CAAOgF,cAAP,GAAwB,IAAxB;AACA;;AAED,OAAKC,QAAL,GAAgB,IAAI,yEAAJ,EAAhB;;AAEA,MAAIC,aAAa;AAChBD,aAAU,KAAKA;AADC,GAAjB;AAGA,OAAKE,GAAL,GAAW,IAAI,yDAAJ,CAAQP,YAAR,EAAsBM,UAAtB,CAAX;AACA;;;;sBAEE,CAAE;;;sCAEuB;AAC3B9C,UAAOgD,YAAP,GAAsB,wEAAtB;AACA,OAAIC,QAAQ,wEAAAD,CAAaE,YAAb,EAAZ;;AAEA,UAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAGJ,KAAH,EAAS;AACRG;AACA,KAFD,MAGK;AACJ,SAAIvF,UAAU,sBAAd;AACAwF,YAAOxF,OAAP;AACA;AACD,IARM,CAAP;AASA;;;sBAEiB;AACjB,UAAO,mBAAAyF,CAAQ,CAAR,EAAiCC,OAAxC;AACA;;;;;;AAIF,yDAAehB,aAAf,E;;;;;;;;;;;ICnDMS,Y;AACF,0BAAc;AAAA;AAEb;;;;mCAEoB;AACjB,UAAIQ,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,UAAIC,KAAKH,OAAOI,UAAP,CAAkB,OAAlB,KAA8BJ,OAAOI,UAAP,CAAkB,oBAAlB,CAAvC;AACA,aAAOD,MAAMA,cAAcE,qBAA3B;AACH;;;;;;AAGL,yDAAeb,YAAf,E;;;;;;;;;;;;;ACZA;AACA;;IAEMc,G;AACF,iBAAYtB,YAAZ,EAA0BM,UAA1B,EAAsC;AAAA;;AAElC,aAAKA,UAAL,GAAkBA,UAAlB;;AAEA,aAAKiB,IAAL,GAAY,IAAI,2DAAJ,CAASvB,YAAT,CAAZ;AACA,aAAKuB,IAAL,CAAUC,IAAV,GAAiBC,IAAjB,CAAsB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAtB;AACH;;;;gCAEM;AACH,iBAAKJ,IAAL,CAAUG,KAAV;;AAEA,iBAAKpB,UAAL,CAAgBD,QAAhB,CAAyBuB,EAAzB,CAA4B,WAA5B,EAAyC,YAAU;AAC/CxG,gBAAA,kEAAAA,CAAOyG,KAAP,CAAa,YAAb;AACH,aAFD;AAGH;;;;;;AAIL,yDAAeP,GAAf,E;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;;IAEMQ,I;AACF,kBAAY9B,YAAZ,EAAyB;AAAA;;AACrB,aAAK+B,UAAL,GAAkB/B,YAAlB;AACH;;;;+BAEK;;AAEF,gBAAIgC,UAAU,IAAI,mEAAJ,GAAcC,MAAd,CAAqB,CAArB,CAAd;;AAEA,gBAAIC,QAAQ,CAAZ;AACA,gBAAIC,mBAAmB,EAACD,OAAOA,KAAR,EAAvB;AACA,iBAAKE,eAAL,GAAuB,IAAI,4DAAJ,CAAeD,gBAAf,CAAvB;;AAEA,gBAAIE,eAAe,EAACC,KAAK,EAAN,EAAUC,QAAQ,CAAlB,EAAqBC,MAAM,OAAON,KAAlC,EAAyCO,KAAK,OAAOP,KAArD,EAA4DQ,IAAI,KAAhE,EAAnB;AACA,iBAAKC,gBAAL,GAAwB,IAAI,wDAAJ,CAAWN,YAAX,CAAxB;AACA,iBAAKM,gBAAL,CAAsBC,aAAtB,CAAoC,KAAKb,UAAzC;;AAEA,gBAAIc,iBAAiB,EAACC,YAAY,QAAb,EAAuBC,eAAe,CAAtC,EAArB;AACAjG,mBAAOC,MAAP,CAAc8F,cAAd,EAA8Bb,OAA9B;AACA,iBAAKgB,aAAL,GAAqB,IAAI,0DAAJ,CAAaH,cAAb,CAArB;AACA,iBAAKd,UAAL,CAAgBkB,WAAhB,CAA4B,KAAKD,aAAL,CAAmBE,QAAnB,CAA4BnB,UAAxD;AACA,iBAAKiB,aAAL,CAAmBG,SAAnB,CAA6B,KAAKR,gBAAL,CAAsBS,MAAnD;;AAEA,iBAAKnF,KAAL,GAAa,IAAI,uEAAJ,CAAU,KAAK8D,UAAf,CAAb;AACA,iBAAK9D,KAAL,CAAWmF,MAAX,GAAoB,KAAKT,gBAAL,CAAsBS,MAA1C;AACA,iBAAKnF,KAAL,CAAWoF,QAAX,CAAoBvI,IAApB,CAAyB,KAAKkI,aAAL,CAAmBM,mBAAnB,CAAuC3B,IAAvC,CAA4C,KAAKqB,aAAjD,CAAzB;;AAEA;AACA,gBAAIO,cAAc;AACdC,4BAAY,IADE;AAEdC,4BAAY;;AAIhB;AANkB,aAAlB,CAON,KAAKd,gBAAL,CAAsBe,QAAtB,CAA+B3F,CAA/B,GAAmC,MAAMmE,KAAzC;AACA,iBAAKS,gBAAL,CAAsBe,QAAtB,CAA+B1F,CAA/B,GAAmC,KAAKkE,KAAxC;AACM,iBAAKS,gBAAL,CAAsBe,QAAtB,CAA+B9D,CAA/B,GAAmC,CAAC,GAAD,GAAOsC,KAA1C;AACA,iBAAKS,gBAAL,CAAsBgB,SAAtB,CAAgC,IAAIpE,MAAMqE,OAAV,EAAhC;;AAEA;AACA,gBAAGL,YAAYC,UAAf,EAA0B;AACtB,qBAAKK,aAAL,CAAmB,KAAKzB,eAAxB;AACH;;AAED;AACA,gBAAGmB,YAAYE,UAAf,EAA0B;AACtB,oBAAIA,aAAa,IAAIlE,MAAMuE,UAAV,CAAqB,MAAM5B,KAA3B,EAAkC,EAAlC,CAAjB;AACA,qBAAKE,eAAL,CAAqB2B,UAArB,CAAgCN,UAAhC;AACH;;AAED,mBAAO,IAAI9C,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCD;AACH,aAFM,CAAP;AAGH;;;gCAEM;AACH,gBAAG,KAAKoD,MAAL,KAAgBhI,SAAnB,EAA6B;AACzB,oBAAIiI,QAAQ,IAAZ;AACA,qBAAKD,MAAL,GAAc,UAASE,SAAT,EAAmB;AAC7BD,0BAAME,gBAAN,GAAyBC,sBAAsBH,MAAMD,MAA5B,CAAzB;;AAEAC,0BAAMhG,KAAN,CAAY+F,MAAZ;AACAC,0BAAMtB,gBAAN,CAAuBqB,MAAvB;AACAC,0BAAMjB,aAAN,CAAoBqB,MAApB,CAA2BJ,MAAM7B,eAAN,CAAsBkC,KAAjD;AAEH,iBAPD;AAQH;;AAED,iBAAKN,MAAL;AACH;;;gCAEM;AACH,gBAAG,KAAKG,gBAAR,EAAyB;AACrBI,qCAAqB,KAAKJ,gBAA1B;AACH;AACJ;;;+BAEK;AACF,gBAAG,KAAKA,gBAAR,EAAyB;AACrBI,qCAAqB,KAAKJ,gBAA1B;AACH;AACD,iBAAKlG,KAAL,CAAWuG,OAAX;AACA,iBAAKxB,aAAL,CAAmBwB,OAAnB;AACH;;;wCAEc;;AAEX,gBAAItC,QAAQ,KAAKE,eAAL,CAAqBqC,MAArB,CAA4BvC,KAAxC;;AAEA,gBAAIwC,UAAU,IAAInF,MAAMoF,YAAV,CAAwB,QAAxB,CAAd;;AAEA,gBAAIC,mBAAmB,IAAIrF,MAAMsF,gBAAV,CAA2B,QAA3B,CAAvB;AACAD,6BAAiBlB,QAAjB,CAA0B7D,GAA1B,CAA8B,IAAIqC,KAAlC,EAAyC,KAAKA,KAA9C,EAAqD,KAAKA,KAA1D;;AAEA,iBAAKE,eAAL,CAAqB0C,gBAArB,CAAsCC,GAAtC,CAA0CL,OAA1C;AACA,iBAAKtC,eAAL,CAAqB0C,gBAArB,CAAsCC,GAAtC,CAA0CH,gBAA1C;AACH;;;;;;AAGL,yDAAe9C,IAAf,E;;;;;;;;;;;;;AC1GA;AACA;;IAEMkD,K;AAEF,mBAAaC,YAAb,EAA0B;AAAA;;AACtB,aAAKC,OAAL,GAAe,IAAf;;AAEA,YAAIjB,QAAQ,IAAZ;AACAnH,eAAOqI,cAAP,CAAsB,IAAtB,EAA4B,QAA5B,EAAsC;AAClCC,iBAAK,eAAU;AACX,uBAAOnB,MAAMoB,OAAb;AACH,aAHiC;AAIlCxF,iBAAK,aAASuD,MAAT,EAAgB;AACjBa,sBAAMoB,OAAN,GAAgBjC,MAAhB;AACAa,sBAAM3B,GAAN,GAAY,EAACgD,KAAK,EAAN,EAAUC,KAAKnC,OAAOd,GAAtB,EAA2BpF,QAAQkG,OAAOd,GAA1C,EAAZ;AACH;AAPiC,SAAtC;;AAUA,aAAK2C,YAAL,GAAoBA,YAApB;;AAEA,aAAKO,MAAL,GAAc,EAACzH,GAAE,CAAH,EAAMC,GAAE,CAAR,EAAd;AACA,aAAKyH,WAAL,GAAmB,IAAIlG,MAAMmG,OAAV,EAAnB;AACA,aAAKC,aAAL,GAAqB,IAAIpG,MAAMmG,OAAV,EAArB;AACA,aAAKE,UAAL,GAAkB,IAAIrG,MAAMmG,OAAV,EAAlB;AACA,aAAKG,iBAAL,GAAyB,CAAzB;AACA,aAAKC,MAAL,GAAc,EAAd;AACA,aAAKC,aAAL;;AAEA,aAAKC,SAAL,GAAiB,IAAIzG,MAAM0G,SAAV,EAAjB;;AAEA,aAAKC,KAAL,GAAa,IAAI3G,MAAM4G,KAAV,EAAb;AACA,aAAKD,KAAL,CAAWE,KAAX;;AAEA,aAAKC,cAAL,GAAsB,EAACrC,QAAO,EAAR,EAAYsC,UAAS,EAArB,EAAyBC,UAAS,EAAlC,EAAsCC,aAAY,EAAlD,EAAsDC,eAAc,EAApE,EAAwEC,WAAU,EAAlF,EAAsFC,cAAa,EAAnG,EAAuGC,SAAQ,EAA/G,EAAtB;AACA,aAAKC,MAAL,GAAc,CACV,EAACC,UAAU,IAAE,EAAb,EAAkBC,MAAK,CAAvB,EAA0BtI,UAAU,KAAK6H,QAAL,CAAc3E,IAAd,CAAmB,IAAnB,CAApC,EADU,EAEV,EAACmF,UAAU,IAAE,EAAb,EAAkBC,MAAK,CAAvB,EAA0BtI,UAAU,KAAK8H,QAAL,CAAc5E,IAAd,CAAmB,IAAnB,CAApC,EAFU,CAAd;;AAKA,aAAKqF,QAAL,GAAgB,EAAhB;;AAEA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACA,aAAKC,YAAL,GAAoB,EAApB;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,OAAL,GAAe,EAAf;;AAEA,aAAKC,eAAL,GAAuB,EAAvB;;AAEA,aAAKrC,YAAL,CAAkBsC,gBAAlB,CAAmC,WAAnC,EAAgD,KAAKf,WAAL,CAAiB7E,IAAjB,CAAsB,IAAtB,CAAhD;AACA,aAAKsD,YAAL,CAAkBsC,gBAAlB,CAAmC,SAAnC,EAA8C,KAAKb,SAAL,CAAe/E,IAAf,CAAoB,IAApB,CAA9C;AACA,aAAKsD,YAAL,CAAkBsC,gBAAlB,CAAmC,aAAnC,EAAkD,KAAKZ,YAAL,CAAkBhF,IAAlB,CAAuB,IAAvB,CAAlD;AACA,aAAKsD,YAAL,CAAkBsC,gBAAlB,CAAmC,WAAnC,EAAgD,KAAKC,WAAL,CAAiB7F,IAAjB,CAAsB,IAAtB,CAAhD,EAA6E,KAA7E;;AAEA,YAAI8F,mBAAmB,KAAKC,YAAL,CAAkB/F,IAAlB,CAAuB,IAAvB,CAAvB;AACA,YAAI,KAAKsD,YAAL,CAAkBsC,gBAAtB,EAAwC;AACpC,iBAAKtC,YAAL,CAAkBsC,gBAAlB,CAAmC,YAAnC,EAAiDE,gBAAjD,EAAmE,KAAnE;AACA,iBAAKxC,YAAL,CAAkBsC,gBAAlB,CAAmC,gBAAnC,EAAqDE,gBAArD,EAAuE,KAAvE;AACH,SAHD,MAKI,KAAKxC,YAAL,CAAkB0C,WAAlB,CAA8B,cAA9B,EAA8CF,gBAA9C;;AAEJ,aAAKG,iBAAL,GAAyB,IAAzB;AACApK,eAAO+J,gBAAP,CAAwB,QAAxB,EAAkC,KAAKM,QAAL,CAAclG,IAAd,CAAmB,IAAnB,CAAlC;;AAEA,aAAKmG,iBAAL,GAAyB,IAAzB;AACA,aAAKzE,QAAL,GAAgB,EAAhB;AACA7F,eAAO+J,gBAAP,CAAwB,QAAxB,EAAkC,KAAKQ,QAAL,CAAcpG,IAAd,CAAmB,IAAnB,CAAlC;;AAEA,aAAKqG,QAAL,GAAgB,IAAIxK,OAAOyK,QAAP,CAAgBC,QAApB,EAAhB;AACA,aAAKF,QAAL,CAAcG,EAAd,GAAmB,KAAKH,QAAL,CAAcI,YAAjC;AACA,aAAKhL,IAAL,GAAY,EAAZ;;AAEA;AAEH;;;;kCAEQ;AACL;AACH;;;mCASUA,I,EAAK;AACZ,gBAAGA,SAASpB,SAAZ,EAAuB;AACnBoB,uBAAO,KAAKiL,iBAAZ;AACH,aAFD,MAGI;AACA;;;AAGH;;AAED,gBAAIpE,QAAQ,IAAZ;AACA7G,iBAAKxC,OAAL,CAAa,eAAO;AAChBqJ,sBAAM7G,IAAN,CAAWC,GAAX,IAAkB,KAAlB;AACA4G,sBAAM+D,QAAN,CAAeM,cAAf,CAA8B;AAC1BlL,0BAAMC,GADoB;AAE1BkL,oCAAgB,IAFU;AAG1BC,gCAAY,sBAAU;AAClBvE,8BAAM7G,IAAN,CAAWC,GAAX,IAAkB,IAAlB;AACH,qBALyB;AAM1BoL,8BAAU,oBAAU;AAChBxE,8BAAM7G,IAAN,CAAWC,GAAX,IAAkB,KAAlB;AACH;AARyB,iBAA9B;AAUH,aAZD;AAaH;;;wCAEc;AACX,gBAAIyI,SAAS,KAAKb,YAAL,CAAkByD,qBAAlB,EAAb;AACA,iBAAK5C,MAAL,CAAY/H,CAAZ,GAAgB+H,OAAO/H,CAAvB;AACA,iBAAK+H,MAAL,CAAY9H,CAAZ,GAAgB8H,OAAO9H,CAAvB;AACA,iBAAK8H,MAAL,CAAY6C,KAAZ,GAAoB7C,OAAO6C,KAA3B;AACA,iBAAK7C,MAAL,CAAY8C,MAAZ,GAAqB9C,OAAO8C,MAA5B;AACA,iBAAK9C,MAAL,CAAY+C,IAAZ,GAAmB/C,OAAO+C,IAA1B;AACA,iBAAK/C,MAAL,CAAYgD,KAAZ,GAAoBhD,OAAOgD,KAA3B;AACA,iBAAKhD,MAAL,CAAYiD,MAAZ,GAAqBjD,OAAOiD,MAA5B;AACA,iBAAKjD,MAAL,CAAYkD,GAAZ,GAAkBlD,OAAOkD,GAAzB;;AAEA,gBAAIC,aAAa,+CAAA1M,CAAM2M,aAAN,CAAoB,KAAKjE,YAAzB,CAAjB;AACA,iBAAKa,MAAL,CAAY/H,CAAZ,IAAiBkL,WAAWlL,CAA5B;AACA,iBAAK+H,MAAL,CAAY+C,IAAZ,IAAoBI,WAAWlL,CAA/B;AACA,iBAAK+H,MAAL,CAAY9H,CAAZ,IAAiBiL,WAAWjL,CAA5B;AACA,iBAAK8H,MAAL,CAAYkD,GAAZ,IAAmBC,WAAWjL,CAA9B;AACH;;;oCAEWmL,U,EAAW;AACnB,gBAAGA,WAAWC,MAAX,KAAsB,CAAzB,EAA2B;AACvB,qBAAKC,oBAAL,CAA0BF,UAA1B;AACA,oBAAIG,MAAM,KAAKpD,KAAL,CAAWqD,cAAX,EAAV;AACA,oBAAGD,MAAM,KAAKzD,iBAAX,GAA+B,KAAKyB,eAAvC,EAAuD;AACnD,wBAAG,KAAKkC,cAAL,KAAwBxN,SAA3B,EAAqC;AACjC,6BAAKyN,kBAAL,CAAwB,KAAKD,cAA7B;AACA,6BAAKA,cAAL,GAAsBxN,SAAtB;AACH;AACD,yBAAKyK,aAAL,CAAmB0C,UAAnB;AACA;AACH;;AAED,qBAAKtD,iBAAL,GAAyByD,GAAzB;;AAEA,oBAAIrF,QAAQ,IAAZ;AACA,qBAAKuF,cAAL,GAAsB,KAAKE,aAAL,CAClB,KAAKC,iBAAL,GAAyB,YAAU;AAC/B1F,0BAAMuF,cAAN,GAAuBxN,SAAvB;AACA,yBAAI,IAAIsC,IAAI,CAAZ,EAAeA,IAAI2F,MAAMgD,WAAN,CAAkB7I,MAArC,EAA6CE,GAA7C,EAAiD;AAC7C2F,8BAAMgD,WAAN,CAAkB3I,CAAlB,EAAqB6K,UAArB;AACH;AACDlF,0BAAM2F,aAAN,CAAoB,aAApB;AACA3F,0BAAM2B,UAAN,CAAiBiE,IAAjB,CAAsB5F,MAAMwB,WAA5B;AACH,iBARiB,EASlB,KAAK6B,eAAL,GAAuB,IATL,CAAtB;AAWH;AACJ;;;sCAEa6B,U,EAAW;AACrB,iBAAI,IAAI7K,IAAI,CAAZ,EAAeA,IAAI,KAAK8I,aAAL,CAAmBhJ,MAAtC,EAA8CE,GAA9C,EAAkD;AAC9C,qBAAK8I,aAAL,CAAmB9I,CAAnB,EAAsB6K,UAAtB;AACH;;AAED,iBAAKS,aAAL,CAAmB,eAAnB;AACH;;;yCAEgBT,U,EAAW;AACxB,gBAAG,KAAKK,cAAL,KAAwBxN,SAA3B,EAAqC;AACjC,qBAAKyN,kBAAL,CAAwB,KAAKD,cAA7B;AACA,qBAAKA,cAAL,GAAsBxN,SAAtB;AACA,qBAAK2N,iBAAL;AACH;AACJ;;;kCAESR,U,EAAW;AACjB,gBAAGA,WAAWC,MAAX,KAAsB,CAAzB,EAA2B;AACvB,oBAAIE,MAAM,KAAKpD,KAAL,CAAWqD,cAAX,EAAV;AACA,oBAAGD,MAAM,KAAKzD,iBAAX,GAA+B,KAAKyB,eAAvC,EAAuD;AACnD,yBAAKwC,gBAAL,CAAsBX,UAAtB;AACH;;AAED,qBAAKE,oBAAL,CAA0BF,UAA1B;AACA,qBAAI,IAAI7K,IAAI,CAAZ,EAAeA,IAAI,KAAK4I,SAAL,CAAe9I,MAAlC,EAA0CE,GAA1C,EAA8C;AAC1C,yBAAK4I,SAAL,CAAe5I,CAAf,EAAkB6K,UAAlB;AACH;;AAED,qBAAKS,aAAL,CAAmB,WAAnB;AACA,oBAAIvK,IAAI,KAAKuG,UAAL,CAAgBmE,iBAAhB,CAAkC,KAAKtE,WAAvC,CAAR;AACA,oBAAIuE,cAAc3K,IAAI,EAAtB,CAbuB,CAaG;AAC1B,oBAAG2K,WAAH,EAAe;AACX,yBAAKpD,OAAL,CAAauC,UAAb;AACH;AACJ;AACJ;;;gCAEOA,U,EAAW;AACf,iBAAI,IAAI7K,IAAI,CAAZ,EAAeA,IAAI,KAAK+I,OAAL,CAAajJ,MAAhC,EAAwCE,GAAxC,EAA4C;AACxC,qBAAK+I,OAAL,CAAa/I,CAAb,EAAgB6K,UAAhB;AACH;;AAED,iBAAKS,aAAL,CAAmB,SAAnB;AACH;;;qCAEYT,U,EAAW;AACpB;AACA,iBAAKE,oBAAL,CAA0BF,UAA1B;AACA,iBAAI,IAAI7K,IAAI,CAAZ,EAAeA,IAAI,KAAK6I,YAAL,CAAkB/I,MAArC,EAA6CE,GAA7C,EAAiD;AAC7C,qBAAK6I,YAAL,CAAkB7I,CAAlB,EAAqB6K,UAArB;AACH;;AAED,iBAAKS,aAAL,CAAmB,cAAnB;AACH;;;oCAEWT,U,EAAW;AACnB,iBAAK3D,MAAL,CAAYzH,CAAZ,GAAgBwB,MAAMZ,IAAN,CAAWsL,KAAX,CAAiBd,WAAWe,OAAX,GAAqB,KAAKpE,MAAL,CAAY+C,IAAlD,EAAwD,CAAxD,EAA2D,KAAK/C,MAAL,CAAY6C,KAAvE,CAAhB;AACA,iBAAKnD,MAAL,CAAYxH,CAAZ,GAAgBuB,MAAMZ,IAAN,CAAWsL,KAAX,CAAiBd,WAAWgB,OAAX,GAAqB,KAAKrE,MAAL,CAAYkD,GAAlD,EAAuD,CAAvD,EAA0D,KAAKlD,MAAL,CAAY8C,MAAtE,CAAhB;AACA,iBAAKkB,gBAAL,CAAsBX,UAAtB;AACH;;;iCAEQiB,K,EAAM;AACX,iBAAKxC,iBAAL,GAAyB,IAAzB;AACH;;;qCAEYuB,U,EAAW;AACpBA,uBAAWkB,cAAX;AACA,gBAAIC,QAAQ/K,MAAMZ,IAAN,CAAWsL,KAAX,CAAiBd,WAAWoB,UAAX,IAAyB,CAACpB,WAAWqB,MAAtD,EAA8D,CAAC,CAA/D,EAAkE,CAAlE,CAAZ;AACA,iBAAKlI,GAAL,CAASpF,MAAT,GAAkBqC,MAAMZ,IAAN,CAAWsL,KAAX,CAAiB,KAAK3H,GAAL,CAASpF,MAAT,GAAkBoN,QAAQ,EAA3C,EAA+C,KAAKhI,GAAL,CAASgD,GAAxD,EAA6D,KAAKhD,GAAL,CAASiD,GAAtE,CAAlB;AACA,iBAAKjD,GAAL,CAASmI,IAAT,GAAgB,CAAhB;AACH;;;mCAES;AACN,iBAAKnI,GAAL,CAASmI,IAAT,IAAiB,EAAjB;AACA,gBAAG,KAAKnI,GAAL,CAASmI,IAAT,IAAiB,CAAjB,IAAsBC,OAAOC,KAAP,CAAa,KAAKrI,GAAL,CAASmI,IAAtB,CAAzB,EAAqD;AACjD;AACH;AACD,iBAAKrH,MAAL,CAAYd,GAAZ,IAAmB,CAAC,KAAKA,GAAL,CAASpF,MAAT,GAAkB,KAAKkG,MAAL,CAAYd,GAA/B,IAAsC,KAAKA,GAAL,CAASmI,IAAlE;AACA,iBAAKrH,MAAL,CAAYwH,sBAAZ;AACH;;;iCAEQR,K,EAAO;AACZ,iBAAKxC,iBAAL,GAAyB,IAAzB;AACA,iBAAKE,iBAAL,GAAyB,IAAzB;AACH;;;4CAEmB+C,S,EAAWpM,Q,EAAS;AACpC,gBAAIqM,YAAY,KAAKD,SAAL,CAAhB;AACA,iBAAI,IAAIE,YAAY,CAApB,EAAuBA,YAAYD,UAAU1M,MAA7C,EAAqD2M,WAArD,EAAiE;AAC7D,oBAAGD,UAAUC,SAAV,MAAyBtM,QAA5B,EAAqC;AACjCqM,8BAAUE,MAAV,CAAiBD,SAAjB,EAA4B,CAA5B;AACH;AACJ;AACJ;;;iCAEO;AACJ,iBAAK1B,oBAAL;;AAEA,iBAAK4B,QAAL;;AAEA;AACA,iBAAKC,eAAL;AACA,iBAAKtB,aAAL,CAAmB,QAAnB;;AAEA,gBAAIN,MAAM,KAAKpD,KAAL,CAAWqD,cAAX,EAAV;AACA,iBAAI,IAAI4B,UAAU,CAAlB,EAAqBA,UAAU,KAAKtE,MAAL,CAAYzI,MAA3C,EAAmD+M,SAAnD,EAA6D;AACzD,oBAAItE,SAAS,KAAKA,MAAL,CAAYsE,OAAZ,CAAb;AACA,oBAAGtE,OAAOpI,QAAP,KAAoBzC,SAAvB,EAAiC;AAC7B6K;AACH,iBAFD,MAGK,IAAGyC,MAAMzC,OAAOE,IAAb,GAAoBF,OAAOC,QAA9B,EAAuC;AACxCD,2BAAOpI,QAAP;AACAoI,2BAAOE,IAAP,GAAcuC,GAAd;AACH;AACJ;AACJ;;;mCAES;AACN,iBAAK8B,QAAL;AACA,iBAAKxB,aAAL,CAAmB,UAAnB;AACH;;;mCAES;AACN,iBAAKA,aAAL,CAAmB,UAAnB;AACH;;;mCAES;AACN,iBAAI,IAAImB,YAAY,KAAK/D,QAAL,CAAc5I,MAAlC,EAA0C2M,cAAc,CAAxD,GAA2D;AACvD,qBAAK/D,QAAL,CAAc+D,SAAd;AACH;AACD,iBAAK/D,QAAL,CAAc5I,MAAd,GAAuB,CAAvB;AACH;;;sCAEaiN,M,EAAQC,K,EAAM;AACxB,gBAAIC,OAAO/N,OAAOgO,UAAP,CAAkB,YAAU;AACnCH;AACH,aAFU,EAERC,KAFQ,CAAX;AAGA,mBAAOC,IAAP;AACH;;;2CAEkBA,I,EAAK;AACpB/N,mBAAOiO,YAAP,CAAoBF,IAApB;AACA;AACH;;;+BAEMF,M,EAAQvE,Q,EAAS;AACpB,gBAAG,KAAK4E,QAAL,KAAkB1P,SAArB,EAAgC,KAAK0P,QAAL,GAAgB,EAAhB;AAChC,gBAAIH,OAAO/N,OAAOmO,WAAP,CAAmB,YAAU;AACpCN;AACH,aAFU,EAERvE,QAFQ,CAAX;AAGA,iBAAK4E,QAAL,CAAc5Q,IAAd,CAAmB,EAACuQ,QAAOA,MAAR,EAAgBE,MAAKA,IAArB,EAAnB;AACA,mBAAOA,IAAP;AACH;;;mCAEUF,M,EAAO;AACd,gBAAG,KAAKK,QAAL,KAAkB1P,SAArB,EAAgC;AAChC,gBAAG,OAAOqP,MAAP,KAAkB,QAArB,EAA8B;AAC1B7N,uBAAOoO,aAAP,CAAqBP,MAArB;AACA;AACH;AACD,iBAAI,IAAI/M,IAAI,CAAZ,EAAeA,IAAI,KAAKoN,QAAL,CAActN,MAAjC,EAAyCE,GAAzC,EAA6C;AACzC,oBAAG,KAAKoN,QAAL,CAAcpN,CAAd,EAAiB+M,MAAjB,KAA4BA,MAA/B,EAAsC;AAClC7N,2BAAOoO,aAAP,CAAqB,KAAKF,QAAL,CAAcpN,CAAd,EAAiBiN,IAAtC;AACA,yBAAKG,QAAL,CAAcV,MAAd,CAAqB1M,CAArB,EAAwB,CAAxB;AACA;AACH;AACJ;AACJ;;;6CAEoB6K,U,EAAW;AAC5B,gBAAG,KAAKvB,iBAAR,EAA2B;AACvB,qBAAK7B,aAAL;AACA,qBAAK6B,iBAAL,GAAyB,KAAzB;AACH;AACD,gBAAG,KAAKE,iBAAR,EAA2B;AACvB,qBAAI,IAAIxJ,IAAI,CAAZ,EAAeA,IAAI,KAAK+E,QAAL,CAAcjF,MAAjC,EAAyCE,GAAzC,EAA6C;AACzC,yBAAK+E,QAAL,CAAc/E,CAAd,EAAiB,KAAKwH,MAAtB;AACH;AACD,qBAAKgC,iBAAL,GAAyB,KAAzB;AACH;;AAED,gBAAGqB,eAAenN,SAAlB,EAA4B;AACxB,qBAAKwJ,MAAL,CAAYzH,CAAZ,GAAgBwB,MAAMZ,IAAN,CAAWsL,KAAX,CAAiBd,WAAWe,OAAX,GAAqB,KAAKpE,MAAL,CAAY+C,IAAlD,EAAwD,CAAxD,EAA2D,KAAK/C,MAAL,CAAY6C,KAAvE,CAAhB;AACA,qBAAKnD,MAAL,CAAYxH,CAAZ,GAAgBuB,MAAMZ,IAAN,CAAWsL,KAAX,CAAiBd,WAAWgB,OAAX,GAAqB,KAAKrE,MAAL,CAAYkD,GAAlD,EAAuD,CAAvD,EAA0D,KAAKlD,MAAL,CAAY8C,MAAtE,CAAhB;AACH;;AAED,iBAAKnD,WAAL,CAAiB1H,CAAjB,GAAqB,KAAKyH,MAAL,CAAYzH,CAAjC;AACA,iBAAK0H,WAAL,CAAiBzH,CAAjB,GAAqB,KAAKwH,MAAL,CAAYxH,CAAjC;;AAEA,iBAAK2H,aAAL,CAAmB5H,CAAnB,GAAuB,KAAKyH,MAAL,CAAYzH,CAAZ,GAAgB,KAAK+H,MAAL,CAAY6C,KAA5B,GAAoC,CAApC,GAAwC,CAA/D;AACA,iBAAKhD,aAAL,CAAmB3H,CAAnB,GAAuB,CAAC,KAAKwH,MAAL,CAAYxH,CAAb,GAAiB,KAAK8H,MAAL,CAAY8C,MAA7B,GAAsC,CAAtC,GAA0C,CAAjE;AACH;;;oCAEWiD,O,EAASC,S,EAAU;AAC3B,iBAAKZ,eAAL;AACAY,wBAAYA,cAAc9P,SAAd,GAA0B8P,SAA1B,GAAsC,KAAlD;AACA,gBAAIC,aAAaF,mBAAmBG,KAAnB,GAA2B,KAAKhG,SAAL,CAAeiG,gBAAf,CAAgCJ,OAAhC,EAAyCC,SAAzC,CAA3B,GAAiF,KAAK9F,SAAL,CAAekG,eAAf,CAA+BL,OAA/B,EAAwCC,SAAxC,CAAlG;AACA,gBAAIC,WAAW3N,MAAX,GAAoB,CAAxB,EAA2B;AACvB,uBAAO2N,WAAW,CAAX,CAAP;AACH;AACD,mBAAO/P,SAAP;AACH;;;wCAEeoO,K,EAAO+B,O,EAASC,K,EAAM;AAClC,gBAAG,KAAK/F,cAAL,CAAoB+D,KAApB,EAA2B+B,OAA3B,MAAwCnQ,SAA3C,EAAsDL,QAAQ0Q,GAAR,CAAY,kBAAkBF,OAAlB,GAA4B,wBAAxC;AACtD,iBAAK9F,cAAL,CAAoB+D,KAApB,EAA2B+B,OAA3B,IAAsCC,KAAtC;AACH;;;2CAEkBhC,K,EAAO+B,O,EAAQ;AAC9B,mBAAO,KAAK9F,cAAL,CAAoB+D,KAApB,EAA2B+B,OAA3B,CAAP;AACH;;;0CAEgB;AACb,iBAAK/I,MAAL,CAAYkJ,iBAAZ;AACA,iBAAKtG,SAAL,CAAeuG,aAAf,CAA6B,KAAK5G,aAAlC,EAAiD,KAAKvC,MAAtD;AACH;;;sCAEagH,K,EAAM;AAChB,gBAAIoC,oBAAoB1P,OAAOM,IAAP,CAAY,KAAKiJ,cAAL,CAAoB+D,KAApB,CAAZ,CAAxB;AACA,gBAAIqC,mBAAmBD,kBAAkBpO,MAAzC;AACA,gBAAGqO,mBAAmB,CAAtB,EAAwB;AACpBD,kCAAkBE,IAAlB,GAAyBC,OAAzB;AACA,qBAAI,IAAIC,SAAS,CAAjB,EAAoBA,SAASH,gBAA7B,EAA+CG,QAA/C,EAAwD;AACpD,wBAAIvP,MAAMmP,kBAAkBI,MAAlB,CAAV;AACA,yBAAKvG,cAAL,CAAoB+D,KAApB,EAA2B/M,GAA3B,EAAgCwP,OAAhC,CAAwC,KAAK7G,SAA7C;AACH;AACJ;AACJ;;;4BApT6B;AAC1B,gBAAGhB,MAAM8H,kBAAN,KAA6B9Q,SAAhC,EAA0C;AACtCgJ,sBAAM8H,kBAAN,GAA2B,6BAA6BC,KAA7B,CAAmC,EAAnC,EAAuCC,MAAvC,CAA8C,CAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,CAA9C,CAA3B;AACH;AACD,mBAAOhI,MAAM8H,kBAAb;AACH;;;;;;AAkTL,yDAAe9H,KAAf,E;;;;;;;;;;;ICzYMiI,Y;AACF,0BAAaC,KAAb,EAAoBzO,QAApB,EAA8B0O,eAA9B,EAA+CC,cAA/C,EAA+DtB,SAA/D,EAA0EuB,UAA1E,EAAqF;AAAA;;AACjF,aAAKnI,OAAL,GAAe,IAAf;;AAEA,aAAKgI,KAAL,GAAaA,KAAb;AACA,aAAKzO,QAAL,GAAgBA,QAAhB;AACA,aAAK2O,cAAL,GAAsBA,mBAAmBpR,SAAnB,GAA+BoR,cAA/B,GAAgD,KAAtE;AACA,aAAKtB,SAAL,GAAiBA,cAAc9P,SAAd,GAA0B8P,SAA1B,GAAsC,KAAvD;AACA,aAAKuB,UAAL,GAAkBA,eAAerR,SAAf,GAA2BqR,UAA3B,GAAwC,KAA1D;;AAEA,YAAGF,oBAAoBnR,SAAvB,EAAiC;AAC7B,iBAAKsR,YAAL,GAAoB,KAAKJ,KAAzB;AACH,SAFD,MAGI;AACA,iBAAKI,YAAL,GAAoB,EAApB;AACA,iBAAKH,eAAL,GAAuBA,eAAvB;AACA,iBAAKI,eAAL,CAAqB,KAAKJ,eAA1B;AACH;AACJ;;;;wCAEeA,e,EAAgB;AAC5B,iBAAI,IAAIK,QAAQ,CAAhB,EAAmBA,QAAQ,KAAKN,KAAL,CAAW9O,MAAtC,EAA8CoP,OAA9C,EAAsD;AAClD,oBAAIC,QAAQN,gBAAgB,KAAKD,KAAL,CAAWM,KAAX,CAAhB,CAAZ;AACA,oBAAGC,UAAUzR,SAAb,EAAuB;AACnB,yBAAKsR,YAAL,CAAkBxS,IAAlB,CAAuB2S,KAAvB;AACH,iBAFD,MAGI;AACA,yBAAKP,KAAL,CAAWlC,MAAX,CAAkBwC,KAAlB,EAAyB,CAAzB;AACAE,wBAAIC,GAAJ,CAAQ,2DAAR;AACH;AACJ;AACJ;;;oCAEWT,K,EAAOC,e,EAAgB;AAC/B,iBAAKD,KAAL,GAAaA,KAAb;AACA,gBAAGC,oBAAoBnR,SAAvB,EAAkCmR,kBAAkB,KAAKA,eAAvB;;AAElC,gBAAGA,oBAAoBnR,SAAvB,EAAiC;AAC7B,qBAAKsR,YAAL,GAAoB,KAAKJ,KAAzB;AACH,aAFD,MAGI;AACA,qBAAKI,YAAL,CAAkBlP,MAAlB,GAA2B,CAA3B;AACA,qBAAK+O,eAAL,GAAuBA,eAAvB;AACA,qBAAKI,eAAL,CAAqB,KAAKJ,eAA1B;AACH;AACJ;;;gCAEOnH,S,EAAU;AACd,gBAAG,KAAKd,OAAL,KAAiB,KAApB,EAA2B;;AAE3B,gBAAIoI,YAAJ;AACA,gBAAG,KAAKF,cAAR,EAAuB;AACnBE,+BAAe,EAAf;AACA,qBAAI,IAAIhP,IAAI,CAAZ,EAAeA,IAAI,KAAKgP,YAAL,CAAkBlP,MAArC,EAA6CE,GAA7C;AAAkDgP,iCAAahP,CAAb,IAAkB,KAAK6O,eAAL,CAAqB,KAAKD,KAAL,CAAW5O,CAAX,CAArB,CAAlB;AAAlD;AACH,aAHD,MAII;AACAgP,+BAAe,KAAKA,YAApB;AACH;AACD;AACA,gBAAIvB,aAAa/F,UAAUiG,gBAAV,CAA2BqB,YAA3B,EAAyC,KAAKxB,SAA9C,CAAjB;AACA,gBAAIC,WAAW3N,MAAX,GAAoB,CAAxB,EAA2B;AACvB,oBAAIwP,mBAAmB,KAAKC,gBAAL,CAAsB9B,WAAW,CAAX,EAAcvP,MAApC,EAA4C8Q,YAA5C,CAAvB;AACA,oBAAGM,qBAAqB,CAAC,CAAzB,EAA4B,KAAKnP,QAAL,CAAc,KAAKyO,KAAL,CAAWU,gBAAX,CAAd,EAA4C7B,WAAW,CAAX,CAA5C;AAC/B,aAHD,MAIK,IAAG,KAAKsB,UAAR,EAAoB;AACrB,qBAAK5O,QAAL,CAAc,KAAd;AACH;AACJ;;;yCAEgBqP,K,EAAOC,U,EAAW;AAC/B,gBAAIC,YAAY,GAAhB;AACA,gBAAIC,gBAAgBF,WAAW3P,MAA/B;AACA,mBAAM0P,UAAU,IAAV,IAAkBE,cAAc,CAAtC,EAAwC;AACpC,qBAAI,IAAI1P,IAAI,CAAZ,EAAeA,IAAI2P,aAAnB,EAAkC3P,GAAlC;AAAuC,wBAAGyP,WAAWzP,CAAX,MAAkBwP,KAArB,EAA4B,OAAOxP,CAAP;AAAnE,iBACAwP,QAAQA,MAAMI,MAAd;AACH;AACD,mBAAO,CAAC,CAAR;AACH;;;;;;AAGL,0EAAejB,YAAf,E;;;;;;;;;;;ICjFMkB,O;AACF,qBAAY1P,QAAZ,EAAqB;AAAA;;AACjB,aAAK2P,YAAL,GAAoB3P,QAApB;AACH;;;;+BAEMuD,O,EAAQ;AACX;AACA,gBAAIqM,WAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIC,YAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIC,UAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIxL,gBAAkB,CAAE,EAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;;AAEA,gBAAIyL,SAAS;AACTH,0BAAUI,QAAQJ,SAASrM,OAAT,CAAR,CADD;AAETsM,2BAAWG,QAAQH,UAAUtM,OAAV,CAAR,CAFF;AAGTuM,yBAASE,QAAQF,QAAQvM,OAAR,CAAR,CAHA;AAITe,+BAAeA,cAAcf,OAAd;AAJN,aAAb;AAMA,mBAAOwM,MAAP;AACH;;;uCAEcxM,O,EAAQ;AACnB,gBAAIwM,SAAS,KAAKvM,MAAL,CAAYD,OAAZ,CAAb;AACA,iBAAKoM,YAAL,CAAkBI,MAAlB;AACH;;;2CAEiB;AACd,gBAAIxM,UAAU,CAAd;AACA;AACA,iBAAK0M,cAAL,CAAoB1M,OAApB;AACH;;;;;;AAIL,yDAAemM,OAAf,E;;;;;;;;;;;ICjCMQ,U;AACF,wBAAYlK,MAAZ,EAAmB;AAAA;;AAEf,aAAKA,MAAL,GAAcA,MAAd;;AAEA;AACA,aAAKmK,cAAL,GAAsB,IAAIrP,MAAMsP,QAAV,EAAtB;AACA,aAAKD,cAAL,CAAoBE,IAApB,GAA2B,gBAA3B;AACA,aAAKC,aAAL,GAAqB,IAAIxP,MAAMsP,QAAV,EAArB;AACA,aAAKE,aAAL,CAAmBD,IAAnB,GAA0B,eAA1B;AACA,aAAKhK,gBAAL,GAAwB,IAAIvF,MAAMsP,QAAV,EAAxB;AACA,aAAK/J,gBAAL,CAAsBgK,IAAtB,GAA6B,kBAA7B;AACA,aAAKE,QAAL,GAAgB,IAAIzP,MAAMsP,QAAV,EAAhB;AACA,aAAKG,QAAL,CAAcF,IAAd,GAAqB,UAArB;;AAEA;AACA,aAAKxK,KAAL,GAAa,IAAI/E,MAAM0P,KAAV,EAAb;;AAEA;AACA,aAAK3K,KAAL,CAAWS,GAAX,CAAe,KAAK6J,cAApB;AACA,aAAKtK,KAAL,CAAWS,GAAX,CAAe,KAAKgK,aAApB;AACA,aAAKzK,KAAL,CAAWS,GAAX,CAAe,KAAKD,gBAApB;AACA,aAAKR,KAAL,CAAWS,GAAX,CAAe,KAAKiK,QAApB;AACH;;;;4BAEGxS,M,EAAO;AACP;;;;;;;;;;;;AAYA,iBAAKuS,aAAL,CAAmBhK,GAAnB,CAAuBvI,MAAvB;AACH;;;mCAEUA,M,EAAO;AACd,iBAAKwS,QAAL,CAAcjK,GAAd,CAAkBvI,MAAlB;AACH;;;+BAEMA,M,EAAO;AACV,gBAAG,OAAOA,MAAP,KAAkB,QAArB,EAA8B;AAC1B,oBAAI0S,UAAU1S,MAAd;AACAA,yBAAS,KAAKoS,cAAL,CAAoBO,eAApB,CAAoCD,OAApC,CAAT;AACA,oBAAG1S,WAAWR,SAAd,EAAyBQ,SAAS,KAAKuS,aAAL,CAAmBI,eAAnB,CAAmCD,OAAnC,CAAT;AACzB,oBAAG1S,WAAWR,SAAd,EAAyB;AAC5B;AACD,iBAAK4S,cAAL,CAAoBQ,MAApB,CAA2B5S,MAA3B;AACA,iBAAKuS,aAAL,CAAmBK,MAAnB,CAA0B5S,MAA1B;AACH;;;;;;AAGL,yDAAemS,UAAf,E;;;;;;;;;;;ICzDMU,Q;AACF,sBAAY5K,MAAZ,EAAoB;AAAA;;AAEhB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKvB,QAAL,GAAgB,IAAI3D,MAAM+P,aAAV,CAAwB,EAAChB,WAAW,KAAK7J,MAAL,CAAY6J,SAAxB,EAAxB,CAAhB;;AAEA,YAAG,KAAK7J,MAAL,CAAY8J,OAAf,EAAuB;AACnB,iBAAKrL,QAAL,CAAcqM,SAAd,CAAwBrK,OAAxB,GAAkC,IAAlC;AACA,iBAAKhC,QAAL,CAAcqM,SAAd,CAAwB9U,IAAxB,GAA+B8E,MAAMiQ,gBAArC;AACA,iBAAKtM,QAAL,CAAcqM,SAAd,CAAwBE,UAAxB,GAAqC,KAArC;AACH;;AAED,aAAKvM,QAAL,CAAcwM,uBAAd,GAAwC,IAAxC;AACA,aAAKxM,QAAL,CAAcyM,UAAd,GAA2B,IAA3B;AACA,aAAKzM,QAAL,CAAc0M,WAAd,GAA4B,IAA5B;AACA,aAAK1M,QAAL,CAAc2M,WAAd,GAA4BtQ,MAAMuQ,mBAAlC;AACA;;AAEA,aAAKC,cAAL,GAAsB,KAAK7M,QAAL,CAAc8M,OAAd,CAAsBC,YAAtB,CAAmC,KAAK/M,QAAL,CAAc8M,OAAd,CAAsBE,gBAAzD,CAAtB;AACA,aAAKC,UAAL,GAAkB3S,OAAO4S,gBAAP,KAA4BpU,SAA5B,GAAwCwB,OAAO4S,gBAA/C,GAAkE,CAApF;AACA,aAAKlN,QAAL,CAAcmN,aAAd,CAA4B,KAAKF,UAAjC;AACA,aAAKjN,QAAL,CAAcoN,aAAd,CAA4B,IAAI/Q,MAAMC,KAAV,CAAgB,KAAKiF,MAAL,CAAY3B,UAA5B,CAA5B,EAAqE,CAArE;;AAEA,aAAKK,SAAL,GAAiB,UAASC,MAAT,EAAgB;AAC7B,iBAAKA,MAAL,GAAcA,MAAd;AACH,SAFD;;AAIA,aAAKmN,cAAL,GAAsB,UAASzK,MAAT,EAAgB;AAClC,gBAAI0K,WAAW1K,OAAO6C,KAAP,GAAe,KAAKlE,MAAL,CAAY1B,aAA1C;AACA,gBAAI0N,YAAY3K,OAAO8C,MAAP,GAAgB,KAAKnE,MAAL,CAAY1B,aAA5C;AACA,iBAAKG,QAAL,CAAcwN,OAAd,CAAsBF,QAAtB,EAAgCC,SAAhC;AACH,SAJD;;AAMA,aAAKpM,MAAL,GAAc,UAASC,KAAT,EAAe;AACzB,iBAAKpB,QAAL,CAAcyN,MAAd,CAAqBrM,KAArB,EAA4B,KAAKlB,MAAjC;AACH,SAFD;;AAIA,aAAKwN,gBAAL,GAAwB,YAAU;AAC9B,iBAAK1N,QAAL,CAAcqM,SAAd,CAAwBsB,WAAxB,GAAsC,IAAtC;AACH,SAFD;;AAIA,aAAKC,gBAAL,GAAwB,UAAShL,MAAT,EAAgB;AACpC,iBAAK5C,QAAL,CAAcnB,UAAd,CAAyBxE,KAAzB,CAA+BoL,KAA/B,GAAuC7C,OAAO6C,KAAP,GAAe,IAAtD;AACA,iBAAKzF,QAAL,CAAcnB,UAAd,CAAyBxE,KAAzB,CAA+BqL,MAA/B,GAAwC9C,OAAO8C,MAAP,GAAgB,IAAxD;AACH,SAHD;;AAKA,aAAKtF,mBAAL,GAA2B,UAASwC,MAAT,EAAgB;AACvC,iBAAK1C,MAAL,CAAYb,MAAZ,GAAqBuD,OAAO6C,KAAP,GAAe7C,OAAO8C,MAA3C;AACA,iBAAKxF,MAAL,CAAYwH,sBAAZ;;AAEA,iBAAK2F,cAAL,CAAoBzK,MAApB;AACA,iBAAKgL,gBAAL,CAAsBhL,MAAtB;AACH,SAND;;AAQA,YAAG,KAAKrB,MAAL,CAAY4J,QAAf,EAAwB;AACpBgB,qBAAS0B,WAAT,CAAqB,IAArB;AACH;AACJ;;;;kCAEQ;AACL,iBAAK7N,QAAL,CAAc8N,OAAd;AACH;;;oCAEmBhO,a,EAAc;AAC9BA,0BAAcqL,QAAd,GAAyB,IAAI9O,MAAM0R,cAAV,CAAyBjO,cAAcE,QAAvC,CAAzB;AACAF,0BAAckO,UAAd,GAA2B,IAAI3R,MAAM4R,UAAV,CAAqBnV,SAArB,EAAgCA,SAAhC,CAA3B;AACAgH,0BAAckO,UAAd,CAAyBE,cAAzB,GAA0C,IAA1C;AACApO,0BAAcqL,QAAd,CAAuBgD,OAAvB,CAA+BrO,cAAckO,UAA7C;AACAlO,0BAAcsO,YAAd,GAA6B,CAACtO,cAAckO,UAAf,CAA7B;;AAEAlO,0BAAcG,SAAd,GAA0B,UAASC,MAAT,EAAgB;AACtCJ,8BAAcI,MAAd,GAAuBA,MAAvB;AACAJ,8BAAckO,UAAd,CAAyB9N,MAAzB,GAAkCA,MAAlC;AACH,aAHD;;AAKAJ,0BAAcuN,cAAd,GAA+B,UAASzK,MAAT,EAAgB;AAC3C,oBAAI0K,WAAW1K,OAAO6C,KAAP,GAAe3F,cAAcyB,MAAd,CAAqB1B,aAAnD;AACA,oBAAI0N,YAAY3K,OAAO8C,MAAP,GAAgB5F,cAAcyB,MAAd,CAAqB1B,aAArD;AACAC,8BAAcE,QAAd,CAAuBwN,OAAvB,CAA+BF,QAA/B,EAAyCC,SAAzC;;AAEAD,2BAAY7R,KAAK4S,KAAL,CAAYf,WAAWxN,cAAcmN,UAArC,KAAqD,CAAjE;AACTM,4BAAY9R,KAAK4S,KAAL,CAAYf,WAAWxN,cAAcmN,UAArC,KAAqD,CAAjE;AACAnN,8BAAcqL,QAAd,CAAuBqC,OAAvB,CAAgCF,QAAhC,EAA0CC,SAA1C;AACM,aARD;;AAUAzN,0BAAcqB,MAAd,GAAuB,UAASC,KAAT,EAAe;AAClCtB,8BAAckO,UAAd,CAAyB5M,KAAzB,GAAiCA,KAAjC;AACAtB,8BAAcqL,QAAd,CAAuBsC,MAAvB;AACH,aAHD;AAIH;;;;;;AAGL,yDAAetB,QAAf,E;;;;;;;;;;;IC5FMmC,M;AACF,oBAAY/M,MAAZ,EAAmB;AAAA;;AACf,aAAKA,MAAL,GAAcA,MAAd;;AAEA,aAAKrB,MAAL,GAAc,IAAI7D,MAAMkS,iBAAV,CAA4B,KAAKhN,MAAL,CAAYnC,GAAxC,EAA6C,KAAKmC,MAAL,CAAYlC,MAAzD,EAAiE,KAAKkC,MAAL,CAAYjC,IAA7E,EAAmF,KAAKiC,MAAL,CAAYhC,GAA/F,CAAd;AACA,aAAKW,MAAL,CAAY0L,IAAZ,GAAmB,YAAnB;AACH;;;;4CAOmB4C,S,EAAWjN,M,EAAO;AAClC,gBAAG,KAAKkN,WAAL,KAAqB3V,SAArB,IAAkC0V,cAAc1V,SAAnD,EAA6D;AACzD,qBAAK2V,WAAL,GAAmB,IAAIrQ,IAAIsQ,UAAJ,CAAeC,WAAnB,CAA+B,KAAKzO,MAApC,EAA4CsO,SAA5C,CAAnB;;AAEA,qBAAKC,WAAL,CAAiBG,IAAjB,GAAwB,YAAU;AAC9B,yBAAK5M,OAAL,GAAe,KAAf;AACH,iBAFD;AAGA,qBAAKyM,WAAL,CAAiBI,OAAjB,GAA2B,YAAU;AACjC,yBAAK7M,OAAL,GAAe,IAAf;AACH,iBAFD;AAGH;;AAED,gBAAG,KAAKyM,WAAL,KAAqB3V,SAAxB,EAAkC;AAC9B,oBAAGyI,WAAWzI,SAAd,EAAwB;AACpB,yBAAK2V,WAAL,CAAiBK,KAAjB,CAAuBnS,GAAvB,CAA2B4E,OAAOwN,MAAlC,EAA0CxN,OAAOyN,MAAjD;AACA,yBAAKP,WAAL,CAAiBQ,OAAjB,GAA2B1N,OAAO0N,OAAlC;AACA,yBAAKR,WAAL,CAAiBS,QAAjB,GAA4B3N,OAAO2N,QAAnC;AACA,yBAAKT,WAAL,CAAiBU,QAAjB,GAA4B5N,OAAO4N,QAAnC;AACA,yBAAKV,WAAL,CAAiBW,SAAjB,GAA6B7N,OAAO6N,SAApC;AACA,yBAAKX,WAAL,CAAiBY,WAAjB,GAA+B,IAA/B;AACH;;AAED,qBAAKC,QAAL,GAAgB,KAAKb,WAArB;AACH;AACJ;;;sCAEaD,S,EAAWjN,M,EAAO;AAC5B,gBAAG,KAAKgO,aAAL,KAAuBzW,SAAvB,IAAoC0V,cAAc1V,SAArD,EAA+D;;AAE3D,oBAAI0W,aAAa,IAAInT,MAAMqE,OAAV,EAAjB;AACA,qBAAKR,MAAL,CAAYuP,iBAAZ,CAA8BD,UAA9B;AACAA,2BAAWE,cAAX,CAA0B,GAA1B,EAA+B7N,GAA/B,CAAmC,KAAK3B,MAAL,CAAYM,QAA/C;;AAEA,qBAAK+O,aAAL,GAAqB,IAAIlT,MAAMqD,aAAV,CAAwB,KAAKQ,MAA7B,EAAqCsO,SAArC,CAArB;AACA,qBAAKe,aAAL,CAAmBvV,MAAnB,GAA4BwV,UAA5B;;AAEA,oBAAIzO,QAAQ,IAAZ;AACA,qBAAKwO,aAAL,CAAmBzO,MAAnB,GAA4B,YAAU;AAClC,wBAAG,KAAKkB,OAAR,EAAgB;AACZ,4BAAG,KAAK1I,MAAL,CAAYkH,QAAZ,CAAqBmP,UAArB,CAAgC,KAAK3V,MAArC,IAA+C,EAAlD,EAAqD;AACjD,gCAAI4V,IAAI,IAAIvT,MAAMqE,OAAV,GAAoBmP,UAApB,CAA+B,KAAK7V,MAApC,EAA4C,KAAKV,MAAL,CAAYkH,QAAxD,EAAkEkP,cAAlE,CAAiF,EAAjF,CAAR;AACA,iCAAK1V,MAAL,CAAY6H,GAAZ,CAAgB+N,CAAhB;AACH;AACD,6BAAKjM,MAAL;AACH;AACJ,iBARD;AASA,qBAAK4L,aAAL,CAAmBX,IAAnB,GAA0B,YAAU;AAChC,yBAAK5M,OAAL,GAAe,KAAf;AACH,iBAFD;AAGA,qBAAKuN,aAAL,CAAmBV,OAAnB,GAA6B,YAAU;AACnC,yBAAK7M,OAAL,GAAe,IAAf;AACH,iBAFD;AAGH;;AAGDT,qBAASA,UAAU;AACfuO,6BAAa,SAAS,SAAS,CADhB;AAEfC,+BAAetU,KAAKC,EAAL,GAAU;AAFV,aAAnB;AAIA,gBAAG6F,WAAWzI,SAAd,EAAwB;AACpB,qBAAKyW,aAAL,CAAmBO,WAAnB,GAAiCvO,OAAOuO,WAAxC;AACA,qBAAKP,aAAL,CAAmBQ,aAAnB,GAAmCxO,OAAOwO,aAA1C;AACA,qBAAKR,aAAL,CAAmBS,UAAnB,GAAgC,KAAhC;AACH;;AAED,iBAAKV,QAAL,GAAgB,KAAKC,aAArB;AACH;;;yCAEe;AACZ,iBAAKX,IAAL;;AAEA,gBAAG,KAAKU,QAAL,KAAkB,KAAKC,aAA1B,EAAwC;AACpC,oBAAG,KAAKd,WAAR,EAAoB;AAChB,yBAAKA,WAAL,CAAiBwB,YAAjB,CAA8B,KAAK/P,MAAnC,EAA2C,CAA3C;AACA,yBAAKgQ,mBAAL;AACH;AACJ,aALD,MAMI;AACA,oBAAG,KAAKX,aAAR,EAAsB;AAClB,yBAAK7P,aAAL;;AAEA;AACA,wBAAIoQ,cAAc,GAAlB;;AAEA,wBAAIK,QAAQ,IAAI9T,MAAMqE,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAC,CAAzB,CAAZ;AACA,wBAAI0P,OAAO,IAAI/T,MAAMgU,UAAV,EAAX;AACAF,0BAAMG,eAAN,CAAsB,KAAKpQ,MAAL,CAAYqQ,kBAAZ,CAA+BH,IAA/B,CAAtB,EAA4DI,SAA5D,GAAwEd,cAAxE,CAAuFI,cAAc,EAArG,EAAyGjO,GAAzG,CAA6G,KAAK3B,MAAL,CAAYM,QAAzH;;AAEA,yBAAKC,SAAL,CAAe0P,KAAf;AACH;AACJ;;AAED,iBAAKtB,OAAL;AACH;;;kCAESrO,Q,EAAS;AACf,gBAAG,KAAK8O,QAAL,YAAyBjT,MAAMqD,aAAlC,EAAgD;AAC5C,qBAAK4P,QAAL,CAActV,MAAd,CAAqB2M,IAArB,CAA0BnG,QAA1B;AACH,aAFD,MAGK;AACD/H,wBAAQG,IAAR,CAAa,6CAAb,EAA4D,KAAK0W,QAAjE;AACH;AACJ;;;iCAEO;AACJ,gBAAG,KAAKA,QAAL,KAAkBxW,SAArB,EAA+B;AAC3B,qBAAKwW,QAAL,CAAcxO,MAAd;AACH;AACJ;;;+BAEK;AACF,gBAAG,KAAKwO,QAAL,KAAkBxW,SAAlB,IAA+B,KAAKwW,QAAL,CAAcV,IAAhD,EAAqD;AACjD,qBAAKU,QAAL,CAAcV,IAAd;AACH;AACJ;;;kCAEQ;AACL,gBAAG,KAAKU,QAAL,KAAkBxW,SAAlB,IAA+B,KAAKwW,QAAL,CAAcT,OAAhD,EAAwD;AACpD,qBAAKS,QAAL,CAAcT,OAAd;AACH;AACJ;;;4BA7Ha;AAAE,mBAAO,KAAK3O,MAAL,CAAYM,QAAnB;AAA8B,S;0BACjCvH,K,EAAM;AAAE,iBAAKiH,MAAL,CAAYM,QAAZ,CAAqBmG,IAArB,CAA0B1N,KAA1B;AAAmC;;;4BAC1C;AAAE,mBAAO,KAAKiH,MAAL,CAAYuQ,QAAnB;AAA8B,S;0BACjCxX,K,EAAM;AAAE,iBAAKiH,MAAL,CAAYuQ,QAAZ,CAAqB9J,IAArB,CAA0B1N,KAA1B;AAAmC;;;;;;AA6H5D,yDAAeqV,MAAf,E;;;;;;;;;;;;;;;;;ACxIA;AACA;;IAEMoC,K;AACF,mBAAYjL,KAAZ,EAAmBvK,MAAnB,EAA2BwK,MAA3B,EAAkC;AAAA;;AAC9B,aAAKiL,GAAL,CAASlL,KAAT,EAAgBvK,MAAhB,EAAwBwK,MAAxB;AACA,aAAKxM,MAAL,GAAc,KAAd;AACH;;;;4BAEGuM,K,EAAOvK,M,EAAQwK,M,EAAO;AACtB,iBAAKD,KAAL,GAAaA,KAAb;AACA,iBAAKvK,MAAL,GAAcA,MAAd;AACA,iBAAKwK,MAAL,GAAcA,MAAd;AACH;;;;;;AAGL,IAAIkL,YAAY,WAAhB;;IAEMC,Q;;;AAEF,wBAAa;AAAA;;AAAA;;AAGT,cAAKC,KAAL,GAAa,IAAIJ,KAAJ,EAAb;AAHS;AAIZ;;;;+BAEMjL,K,EAAOvK,M,EAAQwK,M,EAAO;AACzB,iBAAKoL,KAAL,CAAWH,GAAX,CAAelL,KAAf,EAAsBvK,MAAtB,EAA8BwK,MAA9B;AACA,iBAAKoL,KAAL,CAAW5X,MAAX,GAAoB,IAApB;AACAhB,YAAA,kEAAAA,CAAOyG,KAAP,CAAa,eAAb,EAA8B,KAAKmS,KAAnC;AACH;;;gCAEM;AACH,iBAAKA,KAAL,CAAW5X,MAAX,GAAoB,KAApB;AACAhB,YAAA,kEAAAA,CAAOyG,KAAP,CAAa,eAAb;AACH;;;mCAES;AACN,gBAAI,KAAKmS,KAAL,CAAW5X,MAAf,EAAuB;AACnB,qBAAK6X,QAAL,CAAcH,SAAd,EAAyB,KAAKE,KAA9B;AACA,qBAAKA,KAAL,CAAW5X,MAAX,GAAoB,KAApB;AACH;AACD,mBAAO,KAAK4X,KAAZ;AACH;;;;EAzBkB,oE;;AA4BvB,yDAAeD,QAAf,E;;;;;;;;;;;IC9CMG,Q;AACF,wBAAa;AAAA;;AACT,aAAKC,OAAL,GAAe,EAAf;AACH;;;;2BAEE/J,K,EAAO3L,Q,EAAS;AACf,gBAAG,KAAK0V,OAAL,CAAa/J,KAAb,MAAwBpO,SAA3B,EAAqC;AACjC,qBAAKmY,OAAL,CAAa/J,KAAb,IAAsB,EAAtB;AACH;AACD,iBAAK+J,OAAL,CAAa/J,KAAb,EAAoBtP,IAApB,CAAyB2D,QAAzB;AACH;;;iCAEQ2L,K,EAAe;AACpB,gBAAIU,YAAY,KAAKqJ,OAAL,CAAa/J,KAAb,CAAhB;AACA,gBAAGU,SAAH,EAAa;AAAA,kDAFEnQ,IAEF;AAFEA,wBAEF;AAAA;;AACT,qBAAI,IAAI2D,IAAI,CAAR,EAAWC,MAAMuM,UAAU1M,MAA/B,EAAuCE,IAAIC,GAA3C,EAAgDD,GAAhD,EAAoD;AAChDwM,8BAAUxM,CAAV,mBAAgB3D,IAAhB;AACH;AACJ;AACJ;;;;;;AAIL,yDAAeuZ,QAAf,E","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 98c78844680becda7335","\r\nvar tracing = 0,\r\n    standard = 1,\r\n    warning = 2;\r\n\r\nvar messages = [];\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        var content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.parse(JSON.stringify(arg));\r\n                    content.push(json);\r\n                }\r\n                catch(err){\r\n                    content.push(err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(tracing, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(standard, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(warning, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        if(filter === undefined){\r\n            filter = {};\r\n            filter[tracing] = filter[standard] = filter[warning] = true;\r\n        }\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","\r\nvar _trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(_trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = 2 * Math.PI / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var twopi = 2 * Math.PI;\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 4\n// module chunks = 0","//const THREE = require('./lib/three-91');\r\nimport Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport BoxInput from './api/components/BoxInput';\r\nimport Logger from './api/utils/cik/Logger';\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Constructor\r\n\t * @param {HTMLElement} containerDiv\r\n\t * @param {Object} options\r\n\t */\r\n\tconstructor( containerDiv, options ) {\r\n\r\n\t\toptions = options || {};\r\n\t\tif(options.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\t\t\r\n\t\tthis.boxInput = new BoxInput();\r\n\r\n\t\tvar components = {\r\n\t\t\tboxInput: this.boxInput\r\n\t\t};\r\n\t\tthis.app = new App(containerDiv, components);\r\n\t}\r\n\r\n\tf(){}\r\n\r\n\tstatic CheckRequirements () {\r\n\t\twindow.Capabilities = Capabilities;\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get Utils(){\r\n\t\treturn require('./api/utils/cik/Utils').default;\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","\r\nimport View from './view/View';\r\nimport Logger from './utils/cik/Logger';\r\n\r\nclass App {\r\n    constructor(containerDiv, components) {\r\n        \r\n        this.components = components;\r\n\r\n        this.view = new View(containerDiv);\r\n        this.view.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        this.view.Start();\r\n\r\n        this.components.boxInput.On('completed', function(){\r\n            Logger.Trace('insert box');\r\n        });\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from './Controller';\r\nimport Renderer from './Renderer';\r\nimport Camera from './Camera';\r\n\r\nclass View {\r\n    constructor(containerDiv){\r\n        this.domElement = containerDiv;\r\n    }\r\n\r\n    Init(){\r\n\r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = 1;\r\n        var controllerParams = {units: units};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        var cameraParams = {fov: 65, aspect: 1, near: 0.01 * units, far: 1000 * units, id: 'app'};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.domElement);\r\n\r\n        var rendererParams = {clearColor: 0xafafaf, renderSizeMul: 1};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n        this.sceneRenderer.UseCamera(this.cameraController.camera);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n        this.input.onResize.push(this.sceneRenderer.ReconfigureViewport.bind(this.sceneRenderer));\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            fillLights: true,\r\n            gridHelper: true,\r\n\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = -100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Fill lights\r\n        if(setupParams.fillLights){\r\n            this.DefaultLights(this.sceneController);\r\n        }\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            var scope = this;\r\n            this.Update = function(timestamp){\r\n                scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                scope.input.Update();\r\n                scope.cameraController.Update();\r\n                scope.sceneRenderer.Render(scope.sceneController.scene);\r\n\r\n            };\r\n        }\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n    }\r\n\r\n    DefaultLights(){\r\n\r\n        var units = this.sceneController.params.units;\r\n\r\n        var ambient = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(7 * units, 15 * units, 30 * units);\r\n        \r\n        this.sceneController.ambientContainer.add(ambient);\r\n        this.sceneController.ambientContainer.add(directionalLight);\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","\r\nimport RaycastGroup from './RaycastGroup';\r\nimport Utils from '../Utils';\r\n\r\nclass Input {\r\n\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.update = [\r\n            {interval:(1/25), last:0, callback: this.Update25.bind(this)},\r\n            {interval:(1/10), last:0, callback: this.Update10.bind(this)}\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    static get defaultKeysListen(){\r\n        if(Input._defaultKeysListen === undefined){\r\n            Input._defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n        }\r\n        return Input._defaultKeysListen;\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = this.defaultKeysListen;\r\n        }\r\n        else{\r\n            /*this.defaultKeysListen.forEach(key => {\r\n                if(keys.indexOf(key) === -1) keys.push(key);\r\n            });*/\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.update.length; iUpdate++){\r\n            var update = this.update[iUpdate];\r\n            if(update.callback === undefined){\r\n                update();\r\n            }\r\n            else if(now - update.last > update.interval){\r\n                update.callback();\r\n                update.last = now;\r\n            }\r\n        }\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            raycastGroupsKeys.sort().reverse();\r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","\r\nclass RaycastGroup {\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive, continuous){\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n        this.continuous = continuous !== undefined ? continuous : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        var raycastItems;\r\n        if(this.updateProperty){\r\n            raycastItems = [];\r\n            for(var i = 0; i < this.raycastItems.length; i++) raycastItems[i] = this.collectionQuery(this.items[i]);\r\n        }\r\n        else{\r\n            raycastItems = this.raycastItems;\r\n        }\r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n            if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n        }\r\n        else if(this.continuous) {\r\n            this.callback(false);\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object){\r\n        /*if(object instanceof App.Scene.Item){\r\n            this.itemsContainer.add(object.view);\r\n        }\r\n        else if(object instanceof App.Library.Light){\r\n            this.ambientContainer.add(object.lightObject);\r\n        }\r\n        else if(object instanceof App.Library.CubeCameraController){\r\n            this.ambientContainer.add(object.cubeCamera);\r\n        }\r\n        else {\r\n            this.miscContainer.add(object);\r\n        }*/\r\n        this.miscContainer.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/Controller.js","\r\nclass Renderer {\r\n    constructor(params) {\r\n\r\n        this.params = params;\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            this.renderer.shadowMap.autoUpdate = false;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.UseCamera = function(camera){\r\n            this.camera = camera;\r\n        };\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene){\r\n            this.renderer.render(scene, this.camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = screen.width + 'px';\r\n            this.renderer.domElement.style.height = screen.height + 'px';\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen){\r\n            this.camera.aspect = screen.width / screen.height;\r\n            this.camera.updateProjectionMatrix();\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/Renderer.js","\r\nclass Camera {\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target = lookTarget;\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/Camera.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nclass Entry {\r\n    constructor(width, length, height){\r\n        this.Set(width, length, height);\r\n        this.active = false;\r\n    }\r\n\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n}\r\n\r\nvar completed = 'completed';\r\n\r\nclass BoxInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        this.entry = new Entry();\r\n    }\r\n\r\n    Update(width, length, height){\r\n        this.entry.Set(width, length, height);\r\n        this.entry.active = true;\r\n        Logger.Trace('entry updated', this.entry);\r\n    }\r\n\r\n    Abort(){\r\n        this.entry.active = false;\r\n        Logger.Trace('entry deleted');\r\n    }\r\n\r\n    Complete(){\r\n        if( this.entry.active ){\r\n            this.Dispatch(completed, this.entry);\r\n            this.entry.active = false;\r\n        }\r\n        return this.entry;\r\n    }\r\n}\r\n\r\nexport default BoxInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/BoxInput.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js"],"sourceRoot":""}