{"version":3,"sources":["webpack:///webpack/bootstrap 8101f7f209b4a419f963","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/UX.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/cub/Components.js","webpack:///./src/api/view/CargoView.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/App.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/packer/afit/AFit.js","webpack:///./src/api/packer/clp/Workbook.js","webpack:///./src/api/packer/clp/CLPSolver.js","webpack:///./src/api/packer/sim/Bin.js","webpack:///./src/api/packer/sim/Item.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/clp/CLPTest.js","webpack:///./src/api/packer/cub/CUB.js","webpack:///./src/api/packer/aas/AASOrientation.js","webpack:///./src/api/packer/sim/Packer.js","webpack:///./src/api/packer/brb/BRB.js","webpack:///./src/api/view/View.js","webpack:///./src/api/utils/cik/Utils3D.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/utils/cik/Tween.js","webpack:///./src/api/components/PackerInterface.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","undefined","keys","forEach","key","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","AssignUndefined","push","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","index","indexOf","splice","Signaler","signals","dispatches","event","args","callbacks","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","serializeModes","none","property","min","max","properties","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","reduce","setKey","val","endKey","isColor","setHex","download","filename","file","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","Map","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","Number","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","has","category","shortcut","Add","_weight","Symbol","CargoEntry","quantity","uid","descriptions","generateUUID","entry","Container","volumes","WarnOnce","volume","numVolumes","container","containingVolume","ContainingVolume","FromJSON","almost","n1","n2","abs","PackedCargo","position","orientation","PackingResult","numTotalItems","packed","sumOfVolumes","items","sum","Volume","defaultParams","packUpdate","Packer","packingSpace","PackingSpace","cargoList","CargoList","SolveSim","SolveBRB","SolveCUB","SolveAFit","Item","current","dimensions","width","height","weightCapacity","entries","groups","values","group","item","weight","CUB","pack","packingResult","packedItems","packedItem","ref","Vector3","packedWidth","packedHeight","packedLength","ResolveOrientation","packedCargo","Dispatch","AFit","afit","startTime","performance","Solve","PackTimeInMilliseconds","ceil","containerVolume","Length","Width","Height","itemVolumePacked","PackedItems","itemVolumeUnpacked","UnpackedItems","PercentContainerVolumePacked","floor","PercentItemVolumePacked","IsPacked","ID","CoordX","PackDimX","CoordY","PackDimY","CoordZ","PackDimZ","CLPSolver","mandatory","cost","itemType","xyRotatable","yzRotatable","profit","findEntry","l","h","matches","matched","onSolution","solution","item_type","opposite_x","origin_x","opposite_y","origin_y","opposite_z","origin_z","ContainerItem","rotation","solverOptions","itemSortCriterion","showProgress","cpuTimeLimit","signaler","On","Execute","depth","AASOrientation","resolve","Bin","SimPacker","bin","iQtt","simPacker","bins","name","getDimension","getRotationTypeString","BRB","app","matrix","view","packingSpaceView","GetMatrix","setDebugMatrix","failed","iPackings","collectPlacements","placement","containerOffset","p","packedDimensions","ed","resolveOrientation","collectPackings","packing","placements","packings","SetUID","_vec3","epsilon","pow","numberType","Dimensions","Set","Assert","numEntries","getDefaultLabel","BoxEntry","stacking","SupportsStacking","RotationConstraint","translation","TranslationConstraint","TextField","Reset","defaultContent","clear","Copy","field","own","Clone","delay","time","debugGeometry","BoxBufferGeometry","debugMaterial","MeshStandardMaterial","transparent","opacity","map","TextureLoader","load","wrapS","wrapT","RepeatWrapping","debugBox","Mesh","tempVec","DebugBox","center","size","box","clone","copy","scale","box3","getCenter","getSize","alphaHexMask","debugObjects","tVec3","tPos","tScale","DebugViz","parent","Object3D","renderOrder","MAX_SAFE_INTEGER","duration","wireframe","checkered","material","repeat","RemoveObjectByUID","remove","visible","AFitTest","Box","Viz","api","init","started","paused","stopped","SceneSetup","containerDiv","ux","quality","Quality","Common","units","controllerParams","sceneController","rendererParams","sceneRenderer","Renderer","renderer","cameraParams","fov","aspect","near","far","cameraController","Camera","OrbitControls","Input","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hud","hudParams","hudCameraParams","HUDView","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","Promise","reject","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","directionalLightComplem","onGUIChanged","dl","shadow","updateProjectionMatrix","dlHelper","update","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","UX","onFocus","onFocusLost","draggable","Draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","spaces","world","local","modes","translate","rotate","defaultControls","TransformControls","addEventListener","bind","traverse","child","attach","detach","Detach","space","setMode","CargoGroup","cargoes","template","Cargo","currentQuantity","containerAdded","_currentIndex","containers","currentIndex","dim1","dim2","dim3","Dim1","Dim2","Dim3","Quantity","orientations","xyz","zyx","yxz","yzx","zxy","xzy","dummyGeometry","SphereBufferGeometry","dummyMaterial","_entry","CargoView","mesh","cargoView","App","components","packerParams","packer","sceneSetup","Init","then","Start","viewParams","View","cargoInput","CargoInput","completed","boxEntry","packingSpaceInput","PackingSpaceInput","containerLoaded","AddContainer","onPackUpdate","UpdateComponent","interval","lastUpdateTime","itemsContainer","miscContainer","defaults","Scene","objName","getObjectByName","tempVec3","tempVec3_b","PerspectiveCamera","fpsControls","Navigation","FirstPerson","enabled","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","distanceMultiplier","extent","frameSize","distance","stopPropagation","e","stylesheet","createCSS","css","getElementsByTagName","Array","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","text","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","title","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","parentNode","divTop","divLeft","cursor","stopMoving","random","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","blockEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","stringType","groupAdded","groupRemoved","delete","ScrapPad","CumX","CumZ","Post","Pre","Layer","layerEval","LayerDim","LayerEval","l1","l2","IsCompletePack","itemsToPack","itemsPackedInOrder","layers","scrapfirst","smallestZ","trash","evened","hundredPercentPacked","layerDone","packingBest","quit","bboxi","bestIteration","bestVariant","boxi","cboxi","layerListLen","packedItemCount","bbfx","bbfy","bbfz","bboxx","bboxy","bboxz","bfx","bfy","bfz","boxx","boxy","boxz","cboxx","cboxy","cboxz","layerinlayer","layerThickness","lilz","packedVolume","packedy","prelayer","prepackedy","preremainpy","px","py","pz","remainpy","remainpz","itemsToPackCount","totalItemVolume","totalContainerVolume","Initialize","ExecuteIterations","Report","hmx","hy","hmy","hz","hmz","itelayer","layersIndex","bestVolume","containerOrientationVariant","ListCanditLayers","sort","SortByEval","PackLayer","FindLayer","MAX_VALUE","AnalyzeBox","thickness","exdim","dimdif","dimen2","dimen3","layereval","maxEvaluations","scrapmemb","iItems","numItems","newItem","same","k","packCoordX","packCoordY","packCoordZ","packDimX","packDimY","packDimZ","lenx","lenz","lpz","FindSmallestZ","FindBox","CheckFound","VolumeCheck","OutputBoxList","typeofString","colLabels","updated","CellEntry","Value","col","row","calculate","_value","Cells","Worksheet","toLowerCase","cellsFN","cell1","cell2","cells","Range","total","cell","isNaN","newEntry","rows","rowData","rowResult","colData","Workbook","worksheets","worksheet","Print","solverSheet","itemsSheet","containersSheet","solutionSheet","ThisWorkbook","CheckWorksheetExistence","Worksheets","CellsRange","Clear","_range","minCol","maxCol","minRow","maxRow","Application","msg","defaultValue","item_type_data","xy_rotatable","yz_rotatable","number_requested","sort_criterion","item_list_data","num_item_types","total_number_of_items","item_types","item_list","container_type_data","type_id","volume_capacity","weight_capacity","number_available","container_list_data","num_container_types","container_types","container_list","compatibility_data","item_to_item","container_to_item","index2","compatibility_list","item_location","next_to_item_type","item_in_container","rotationNum","orientations_base1","container_data","item_cnt","addition_point_count","volume_packed","weight_packed","addition_points","repack_item_count","solution_data","feasible","num_containers","net_profit","total_volume","total_weight","total_distance","total_x_moment","total_yz_moment","rotation_order","item_type_order","unpacked_item_count","instance_data","front_side_support","item_item_compatibility_worksheet","container_item_compatibility_worksheet","instance","solver_option_data","CPU_time_limit","item_sort_criterion","show_progress","solver_options","SortContainers","random_reorder_probability","j","candidate_index","max_mandatory","max_volume_packed","min_ratio","swap_container","containerGet","container2","PerturbSolution","container_id","percent_time_left","swap_long","operator_selection","container_emptying_probability","item_removal_probability","repack_flag","continue_flag","max_z","jType","itemsGet","unpacked_item_countGet","item_typesGet","jItem","repack_item_countGet","item_type_orderGet","AddItemToContainer","container_index","item_type_index","add_type","item_cohesion","rotation_index","min_x","min_y","min_z","candidate_position","current_rotation","candidate_rotation","area_supported","area_required","intersection_right","intersection_left","intersection_top","intersection_bottom","support_flag","GoTo","container_to_itemGet","item_to_itemGet","addition_pointsGet","next_iteration","GetSolverOptions","options","Activate","GetItemData","itemsData","numItemTypes","max_volume","max_weight","unshift","GetContainerData","containersData","numContainerTypes","container_typesGet","GetCompatibilityData","InitializeSolution","GetInstanceData","WriteSolution","offset","ClearContents","CLP_Solver","WorksheetExists","reply","Alert","Confirm","SortItems","incumbent","best_known","iteration","nonempty_container_cnt","start_time","end_time","selected_rotation","fcData","FeasibilityCheckData","infeasibility_count","infeasibility_string","ScreenUpdating","StatusBar","CalculateDispersion","CalculateDistance","selected_item_index","swap_item","feasibility_flag","volume_capacity_required","volume_capacity_available","weight_capacity_required","weight_capacity_available","max_width","max_heigth","max_length","swap_item_type","item_flag","container_count","SolutionData","mw","maxWeight","getWidth","getHeight","getDepth","getWeight","getMaxWeight","getPackedWeight","fit","rotationType","_j","intersect","RotationType_WHD","RotationType_HWD","RotationType_HDW","RotationType_DHW","RotationType_DWH","RotationType_WDH","WidthAxis","HeightAxis","DepthAxis","StartPosition","RotationTypeStrings","wg","getRotationType","i2","rectIntersect","i1","d1","d2","cx1","cy1","cx2","cy2","ix","iy","tempBox","Box3","CargoListView","templatesView","cargoTemplateViews","templateCargoView","CargoBoxView","Dummy","Sort","cargoGroup","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","padding","start","next","done","setFromObject","applyMatrix4","halfSize","Compare","unitCubeGeometry","materialTemplate","brightnessRange","hueBase","nextColor","setHSL","GoldenSeries","vec3","s","SetScale","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","Request","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","createContainerBoxes","meshes","Asset","CreateMesh","cv","side","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","StandardSceneObject","containerBoxes","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","geometry","texturePath","castShadow","receiveShadow","_new","_reset","Pool","fnNew","fnReset","objects","aborted","error","IsVolume","Abs","commitedEntry","jsonObject","model","global","FreightPacker","utils","DevSetup","PackerInterface","Auto","webgl","Capabilities","IsWebGLReady","domain","fp","toConsole","traceToConsole","BackListen","SetViewParent","canvas","gl","getContext","WebGLRenderingContext","defaultKeysListen","concat","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","raycaster","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","dx","dy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","keypress","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","button","UpdateScreenAndMouse","getElapsedTime","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","vx","vy","clamp","preventDefault","delta","wheelDelta","detail","lerp","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","drid","clearTimeout","_repeats","setInterval","clearInterval","recursive","intersects","intersectObjects","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","testCallback","composer","antialias","shadows","renderSizeMul","Boolean","OnTestComplete","PCFSoftShadowMap","shadowsAutoUpdate","clearColor","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","defaultCamTRS","Transform","Euler","cameraTransform","Apply","_position","_rotation","transform","PackingItem","cargo","_box3","setFromCenterAndSize","_enabled","PackingProperty","prop","Constraint","toItems","o","TestData","aFitPacker","containerData","Name","noYes","sortCriterion","packPriority","fillPriority","containersDataSrc","itemsDataSrc","itemData","numContainers","Sum","itemName","Find","test1Data","Test1","sleep","running","debugUser","SetPackingSpaceVisibility","assistant","PackingAssistant","packedContainer","PackedContainer","iItem","unpackItem","SetUnpacked","packItem","SetPacked","weightPass","WeightPass","debugLog","Fit","PackedItem","DepthSort","debugClear","debugging","ListenKeys","ms","execute","tid","debugRegion","region","solid","debugUID","DrawVolume","uids","ClearAll","smallValue","Wall","axis","Region","preferredX","tempCorners","subRegion","rx","ry","rz","rw","rh","rl","other","tempRegion","minRegionAxis","newRegions","debugUIDs","east","west","over","tempRegion2","unpackedItems","firstRegion","regions","cumulatedWeight","Subtract","regionIndex","numRegions","numPackedItems","iOrient","GetOrientedDimensions","iRegion","regionFitTest","FitTest","iPacked","packedRegion","Intersects","regionRemains","Occupy","ProcessRegions","volumeRegion","volumePacked","ContainsRegion","regionA","volumeA","jRegion","regionB","volumeB","ProcessRegionsForZeroRegions","ProcessRegionsForPackedItems","ProcessRegionsEnclosed","SortDeepestSmallest","workingArray","VolumeSort","smallestItem","minItemSize","dw","dh","unfitItems","_i","weighItem","putItem","getVolume","b2","unpacked","getBiggerBinThan","packToBin","fitted","lookup","_pt","pv","ib","findFittedBin","unfitItem","volumeSort","iPacking","debugAs","iSpace","place","breakUpSpace","rnsort","decompose","debugPacking","debugSpace","debugPlacement","debugPacked","placePermutations","sd","spaceDim","spacePos","placementDim","av","bv","itemDimensions","pw","ph","cargoListView","bottomLeft","packResultView","lights","DefaultLights","light","dlData","Load","onContainerAdded","union","Frame","onCargoGroupAdded","onCargoRemoved","Remove","HUDSetup","PackResultView","DisplayPackingResult","clv","cargoListViewRect","Utils3D","Rect","clvRectIgnore","Offset","viewportPointA","viewportPointB","dragOffset","onSort","sortResult","Project","sub","ratio","dragEvent","ContainsPoint","clvMin","clvMax","ignoredAreas","onScreenResize","ToNDC","Unproject","Toggle","vec","viewportPoint","unproject","worldPoint","project","rect","poolNewFN","packedCargoView","PackedCargoBoxView","Extend","poolResetFN","getOrientationAngles","getOrientationEuler","rad","pool","animatingViews","onTweenComplete","OnTweenComplete","cargoViewTemplate","GetTemplate","SetRotationAngles","zEntry","posTweenCombo","Tween","Combo","Request3","functions","linear","Hook","onComplete","tween","Unhook","Return","animatingView","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","LineBasicMaterial","meshMaterial","wireMesh","LineSegments","TweenCallback","startValue","TweenCompletedCallback","ease","easeOutElastic","ts","tc","TweenComboCompletedCallback","TweenCombo","tweens","startValue0","startValue1","startValue2","delta0","delta1","delta2","tween0","tween1","tween2","combo","endValue","_app"],"mappings":"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","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 44);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8101f7f209b4a419f963","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n        this.dispatches = {};\r\n    }\r\n\r\n    BackListen(event, callback){\r\n        var args = this.dispatches[event];\r\n        if(args){\r\n            callback(...args);\r\n        }\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        this.dispatches[event] = args;\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import Utils from \"../Utils\";\r\n\r\nconst serializeModes = {\r\n    none: 'none',\r\n    json: 'json'\r\n};\r\n\r\n/**\r\n * @typedef ConfigParams\r\n * @property {Boolean} debug\r\n * @property {Boolean} save\r\n * @property {serializeModes} serializeMode\r\n */\r\n\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    var propertyPath = key;\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0],\r\n        propertyPath: propertyPath\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    var endKey = key.shift();\r\n    if(obj[endKey].isColor){\r\n        obj[endKey].setHex(val);\r\n    }\r\n    else{\r\n        obj[endKey] = val;\r\n    }\r\n    return obj[endKey];\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\n/** \r\n * @typedef GUI\r\n * @property {HTMLElement} domElement\r\n */\r\n\r\nclass Shortcut{\r\n    /**\r\n     * @param {string} label \r\n     */\r\n    constructor(label){\r\n        this.label = label;\r\n\r\n        ///** @type {Map<string, GUI>} */\r\n        //this.folders = new Map();\r\n\r\n        this.controller = {};\r\n    }\r\n\r\n    Add(label, target){\r\n        label = label.replace(new RegExp(' ', 'g'), '_');\r\n        this.controller[label] = target;\r\n        Config.shortcutsGUI.add(this.controller, label);\r\n        console.log('added ' + label + ' shortcut to ' + this.label);\r\n    }\r\n}\r\n\r\n/** @type {GUI} */\r\nvar shortcutsGUI;\r\n\r\n/** @type {Map<string, Shortcut>} */\r\nvar shortcuts = new Map();\r\n\r\n/** @type {Map<Object, Config>} */\r\nvar instances = new Map();\r\n\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = instances;\r\n        instances.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Serialize(){\r\n        var data = {};\r\n        this.keys.forEach(key => {\r\n            let isController = key instanceof Controller;\r\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\r\n            let keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\r\n                data[keyInfo.propertyPath] = saveValue;\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Function} guiChanged \r\n     * @param {string} label \r\n     * @param {string} gui - or a dat.GUI object\r\n     * @param {ConfigParams} params \r\n     */\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            },\r\n\r\n            Serialize: function(){\r\n                if(scope.Update){\r\n                    scope.Update();\r\n                    var data = scope.Serialize();\r\n                    var json = JSON.stringify(data);\r\n                    console.log(data, json);\r\n                }\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        switch(params.serializeMode){\r\n            default: break;\r\n            case serializeModes.json:\r\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n                if(this.editing['editor.Serialize'] !== true){\r\n                    this.defaultsFolder.add(editor, 'Serialize');\r\n                    this.editing['editor.Serialize'] = true;\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    static get shortcuts(){\r\n        return shortcuts;\r\n    }\r\n\r\n    static get shortcutsGUI(){\r\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n            autoPlace: false\r\n        });\r\n        return shortcutsGUI;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} property - #property marks a folder\r\n     * @param {Array<string>} subProperties \r\n     * @returns returns the subProperties full paths\r\n     */\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    /**\r\n     * @param {*} target \r\n     * @param {*} data \r\n     */\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n\r\n        if(instances.has(target) && instances.get(target).Update)\r\n            instances.get(target).Update();\r\n    }\r\n\r\n    /**\r\n     * @param {string} category\r\n     * @param {string} label \r\n     * @param {Function} target \r\n     */\r\n    static MakeShortcut(category, label, target){\r\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\r\n        var shortcut = shortcuts.get(category);\r\n        shortcut.Add(label, target);\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _weight = Symbol('weight');\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n        this[_weight] = 0;\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /** @returns {Number} */\r\n    get weight(){ return this[_weight]; }\r\n    set weight(value){ this[_weight] = value; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'weight, label not implemented');\r\n    }\r\n\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"./container/ContainingVolume\";\r\nimport Dimensions from \"../components/box/Dimensions\";\r\nimport Debug from \"../debug/Debug\";\r\n\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\nclass PackedCargo{\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {ContainingVolume} containingVolume \r\n     * @param {THREE.Vector3} position \r\n     */\r\n    constructor(entry, containingVolume, position, orientation){\r\n        this.entry = entry;\r\n        this.containingVolume = containingVolume;\r\n        this.position = position;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    constructor(numTotalItems){\r\n        /** @type {Array<PackedCargo>} */\r\n        this.packed = [];\r\n        this.numTotalItems = numTotalItems || 0;\r\n    }\r\n}\r\n\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass Packer extends Signaler {\r\n    /**\r\n     * @param {PackerParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n    }\r\n\r\n    Solve(arg){\r\n        if(arg === 'sim')\r\n            this.SolveSim();\r\n        else if(arg === 'brb')\r\n            this.SolveBRB();\r\n        else if(arg === 'cub')\r\n            this.SolveCUB();\r\n        else\r\n            this.SolveAFit();\r\n    }\r\n\r\n    async SolveCUB(){\r\n        const Container = require('./cub/Components').Container;\r\n        const Item = require('./cub/Components').Item;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n\r\n        var numTotalItems = 0;\r\n\r\n         /** @type {Array<Item>} */\r\n         var items = [];\r\n         var entries = {};\r\n         for(let group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight, entry.quantity);\r\n            items.push(item);\r\n            numTotalItems += entry.quantity;\r\n        }\r\n \r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        const CUB = require('./cub/CUB');\r\n        var result = await CUB.pack(container, items);\r\n        console.log(result);\r\n\r\n        var packingResult = new PackingResult(numTotalItems);\r\n        result.packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.ref.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.x + packedItem.packedWidth / 2,\r\n                packedItem.y + packedItem.packedHeight / 2,\r\n                packedItem.z + packedItem.packedLength / 2\r\n            );\r\n            let orientation = Item.ResolveOrientation(packedItem.orientation);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n\r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveAFit(){\r\n        const AFit = require('./afit/AFit').default;\r\n\r\n        var afit = new AFit();\r\n\r\n        var Container = require('./afit/components/Container').default;\r\n        var Item = require('./afit/components/Item').default;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.length, d.height);\r\n\r\n        var numTotalItems = 0;\r\n\r\n        /** @type {Array<Box>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let item = new Item(entry.uid, d.width, d.length, d.height, entry.quantity);\r\n            numTotalItems += entry.quantity;\r\n            items.push(item);\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var startTime = performance.now();\r\n        var result = afit.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n\r\n        var packingResult = new PackingResult(numTotalItems);\r\n        result.PackedItems.forEach(packedItem => {\r\n            if(packedItem.IsPacked){\r\n                let entry = entries[packedItem.ID];\r\n                let position = new THREE.Vector3(\r\n                    packedItem.CoordX + packedItem.PackDimX / 2,\r\n                    packedItem.CoordY + packedItem.PackDimY / 2,\r\n                    packedItem.CoordZ + packedItem.PackDimZ / 2\r\n                );\r\n                let orientation = Item.ResolveOrientation(packedItem);\r\n                let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n                packingResult.packed.push(packedCargo);\r\n            }\r\n        });\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveCLP(){\r\n\r\n        const CLPSolver = require('./clp/CLPSolver');\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        /** @type {CLPSolver.ContainerData} */\r\n        var container = {\r\n            length: d.length, width: d.width, height: d.height,\r\n            mandatory: 0, weightCapacity: d.volume / 1000, cost: 1,\r\n            quantity: 1\r\n        };\r\n\r\n        /** @type {Array<CLPSolver.ItemData>} */\r\n        var items = [];\r\n        var entries = {};\r\n        /** @type {Array<Dimensions>} */\r\n        var dimensions = [];\r\n        var itemType = 1;\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[itemType++] = entry;\r\n            dimensions.push(entry.dimensions);\r\n            d = entry.dimensions;\r\n\r\n            /** @type {CLPSolver.ItemData} */\r\n            let item = {\r\n                length: d.length, width: d.width, height: d.height,\r\n                xyRotatable: true, yzRotatable: true, mandatory: 1, profit: 0, weight: d.volume / 1000,\r\n                quantity: entry.quantity\r\n            };\r\n            items.push(item);\r\n        }\r\n\r\n        console.log('entries:', entries);\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var scope = this;\r\n\r\n        function findEntry(w, l, h){\r\n            var matches = 0, matched = -1;\r\n            var volume = w * l * h;\r\n            for(var i = 0; i < dimensions.length; i++){\r\n                if(almost(volume, dimensions[i].volume)){\r\n                    matched = i;\r\n                    matches++;\r\n                }\r\n            }\r\n\r\n            if(matches === 1){\r\n                return entries[matched + 1];\r\n            }\r\n\r\n            return undefined;\r\n        }\r\n\r\n        /** @param {CLPSolver.SolutionData} solution */\r\n        function onSolution(solution){\r\n            console.log(solution);\r\n            let packedItems = solution.container.filter(container => container !== null)[0].items;\r\n            var packingResult = new PackingResult();\r\n            packedItems.forEach(packedItem => {\r\n                if(packedItem && packedItem.item_type !== 0){\r\n                    let w = packedItem.opposite_x - packedItem.origin_x,\r\n                        h = packedItem.opposite_y - packedItem.origin_y,\r\n                        l = packedItem.opposite_z - packedItem.origin_z;\r\n                    let entry = entries[packedItem.item_type];\r\n                    let position = new THREE.Vector3(\r\n                        packedItem.origin_x + w / 2,\r\n                        packedItem.origin_y + h / 2,\r\n                        packedItem.origin_z + l / 2\r\n                    );\r\n                    let orientation = CLPSolver.ContainerItem.ResolveOrientation(packedItem.rotation);\r\n                    let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n                    packedCargo.solution = packedItem;\r\n                    packingResult.packed.push(packedCargo);\r\n                }\r\n            });\r\n            scope.Dispatch(signals.packUpdate, packingResult);\r\n        }\r\n\r\n        /** @type {CLPSolver.SolverOptions} */\r\n        const solverOptions = {\r\n            itemSortCriterion: 1,\r\n            showProgress: false,\r\n            cpuTimeLimit: 10\r\n        };\r\n\r\n        CLPSolver.signaler.On(CLPSolver.signals.solution, onSolution);\r\n        CLPSolver.Execute(solverOptions, items, [container]);\r\n    }\r\n\r\n    SolveAAS(){\r\n        const packedItems = [\r\n            { id:\"1003\", position: { x:0, y:0, z:0 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1004\", position: { x:60, y:0, z:0 }, dimensions: { width:30, depth:20, height:40 } },\r\n            { id:\"1004\", position: { x:60, y:20, z:60 }, dimensions: { width:20, depth:30, height:40 } },\r\n            { id:\"1004\", position: { x:80, y:20, z:60 }, dimensions: { width:20, depth:30, height:40 } },\r\n            { id:\"1003\", position: { x:0, y:60, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1004\", position: { x:60, y:60, z:60 }, dimensions: { width:30, depth:20, height:40 } },\r\n            { id:\"1005\", position: { x:60, y:80, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:80, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:120, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:120, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:150, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:120, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:150, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:180, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:180, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:200, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:200, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:240, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:240, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:270, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:240, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:270, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:300, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:300, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:320, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:320, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:360, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:440, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:470, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:500, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:530, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:550, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:420, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:440, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:470, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:500, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:530, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:550, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:360, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:390, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:420, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:450, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:480, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:510, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:540, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:360, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:390, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:420, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:450, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:480, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:510, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:540, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:30, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:30, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:30, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:30, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } }\r\n        ];\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.label] = entry;\r\n        }\r\n\r\n        const AASOrientation = require('./aas/AASOrientation');\r\n\r\n        console.log('entries:', entries);\r\n        \r\n        var scope = this;\r\n        var packingResult = new PackingResult();\r\n        packedItems.forEach(packedItem => {\r\n            let w = packedItem.dimensions.width,\r\n                h = packedItem.dimensions.height,\r\n                l = packedItem.dimensions.depth;\r\n            /** @type {BoxEntry} */\r\n            let entry = entries[packedItem.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.position.x + w / 2,\r\n                packedItem.position.z + h / 2,\r\n                packedItem.position.y + l / 2\r\n            );\r\n            let orientation = AASOrientation.resolve(w, l, h, entry.dimensions);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packedCargo.solution = packedItem;\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n        scope.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveSim(){\r\n        const Bin = require('./sim/Bin').default;\r\n        const Item = require('./sim/Item').default;\r\n        const SimPacker = require('./sim/Packer').default;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        var bin = new Bin(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n\r\n        /** @type {Array<Box>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            for(var iQtt = 0; iQtt < entry.quantity; iQtt++){\r\n                let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight);\r\n                items.push(item);\r\n            }\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', bin);\r\n\r\n        var startTime = performance.now();\r\n        var simPacker = new SimPacker([bin], items).pack();\r\n        /** @type {Array<Box>} */\r\n        var packedItems = simPacker.bins[0].items;\r\n        Logger.Log('Solved in ' + Math.ceil(performance.now() - startTime) + ':', packedItems);\r\n\r\n        var packingResult = new PackingResult();\r\n        packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.name];\r\n\r\n            let d = packedItem.getDimension();\r\n            let position = new THREE.Vector3(\r\n                packedItem.position[0] + d[0] / 2,\r\n                packedItem.position[1] + d[1] / 2,\r\n                packedItem.position[2] + d[2] / 2\r\n            );\r\n\r\n            let orientation = packedItem.getRotationTypeString();\r\n\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    async SolveBRB(){\r\n\r\n        const BRB = require('./brb/BRB');\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n\r\n        /** @type {import('./brb/BRB').Container} */\r\n        var container = {\r\n            dimensions: [d.width, d.height, d.length],\r\n            weight: containingVolume.weightCapacity\r\n        };\r\n\r\n        /** @type {Array<import('./brb/BRB').Item>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            for(var iQtt = 0; iQtt < entry.quantity; iQtt++){\r\n                /** @type {import('./brb/BRB').Item} */\r\n                let item = {\r\n                    id: entry.uid,\r\n                    dimensions: [d.width, d.height, d.length],\r\n                    weight: entry.weight\r\n                };\r\n                items.push(item);\r\n            }\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        /** @type {import('../App').default} */\r\n        var app = Debug.app;\r\n        var matrix = app.view.packingSpaceView.GetMatrix(containingVolume);\r\n        BRB.setDebugMatrix(matrix);\r\n\r\n        var startTime = performance.now();\r\n        var result = await BRB.pack(container, items);\r\n\r\n        if( result.failed ){\r\n            console.log('BRB packing failed: ' + result.failed);\r\n            return;\r\n        }\r\n        \r\n        Logger.Log('Solved in ' + Math.ceil(performance.now() - startTime) + ':', result);\r\n\r\n        var packingResult = new PackingResult();\r\n        var iPackings = 0;\r\n        /** @param {import('./brb/BRB').Placement} placement */\r\n        function collectPlacements(placement) {\r\n            /** @type {BoxEntry} */\r\n            let entry = entries[placement.id];\r\n\r\n            let containerOffset = iPackings * containingVolume.dimensions.width;\r\n            let p = placement.position;\r\n            let d = placement.dimensions;\r\n            let position = new THREE.Vector3(\r\n                p[0] + d[0] / 2,\r\n                p[1] + d[1] / 2,\r\n                p[2] + d[2] / 2\r\n            );\r\n            position.set(position.z, position.y, position.x);\r\n            position.x += containerOffset;\r\n            let packedDimensions = d;\r\n            packedDimensions = [d[2], d[1], d[0]];\r\n\r\n            let ed = entry.dimensions;\r\n            let orientation = BRB.resolveOrientation(packedDimensions, [ed.width, ed.height, ed.length]);\r\n\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        }\r\n\r\n        /** @param {import('./brb/BRB').Packing} packing */\r\n        function collectPackings(packing) {\r\n            packing.placements.forEach(collectPlacements);\r\n            iPackings++;\r\n        }\r\n        result.packings.forEach(collectPackings);\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nPacker.PackingResult = PackingResult;\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\r\n\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    constructor(){\r\n        super();\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    get weightCapacity(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height);\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {SupportsStacking} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    set weight(value){ return super.weight; }\r\n    get weight(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && SupportsStacking.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","import AFitTest from \"../packer/afit/AFitTest\";\r\n\r\nfunction delay(time, callback){\r\n    setTimeout(callback, time);\r\n}\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35, map: new THREE.TextureLoader().load('../resources/textures/checkers.jpg', function(map){\r\n    map.wrapS = map.wrapT = THREE.RepeatWrapping; \r\n})});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nconst alphaHexMask = 256 * 256 * 256;\r\n\r\n/** @type {THREE.Object3D} */\r\nvar view;\r\n\r\n/** @type {Map<string, *>} */\r\nvar debugObjects = new Map();\r\n\r\nvar tVec3 = new THREE.Vector3(),\r\n    tPos = new THREE.Vector3(),\r\n    tScale = new THREE.Vector3();\r\n\r\nclass DebugViz {\r\n\r\n    /**\r\n     * @param {THREE.Object3D} parent\r\n     */\r\n    static SetViewParent(parent){\r\n        view = new THREE.Object3D();\r\n        view.name = 'DebugViz view';\r\n        console.log(view.name + ' created...');\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        parent.add(view);\r\n    }\r\n\r\n    static get view(){ return view; }\r\n\r\n    /**\r\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\r\n     * @param {Number} [color] hex color\r\n     * @param {Number} [duration] in milliseconds\r\n     * @param {Boolean} [checkered] checkers map\r\n     */\r\n    static DrawVolume(x, y, z, w, h, l, color, duration, wireframe, checkered){\r\n        tPos.set(x, y, z);\r\n        tScale.set(w, h, l);\r\n\r\n        /** @type {THREE.Mesh} */\r\n        var volume = debugBox.clone();\r\n        view.add(volume);\r\n\r\n        volume.position.copy(tPos);\r\n        volume.scale.copy(tScale);\r\n\r\n        if(color){\r\n            /** @type {THREE.MeshStandardMaterial} */\r\n            let material = volume.material.clone();\r\n            volume.material = material;\r\n            material.color.setHex(color && 0xffffff);\r\n            if(wireframe === true){\r\n                material.wireframe = true;\r\n            }\r\n            else{\r\n                material.opacity = Math.floor(color / alphaHexMask) / 256;\r\n                material.transparent = material.opacity > 0 && material.opacity < .99;\r\n            }\r\n\r\n            if(!checkered){\r\n                material.map = null;\r\n            }\r\n            else{\r\n                material.map.repeat.set(10, 10);\r\n            }\r\n        }\r\n\r\n        let uid = THREE.Math.generateUUID();\r\n        debugObjects.set(uid, volume);\r\n\r\n        if(duration > 0){\r\n            delay(duration, function(){\r\n                DebugViz.RemoveObjectByUID(uid);\r\n            });\r\n        }\r\n\r\n        return uid;\r\n    }\r\n\r\n    /**\r\n     * @param {string} uid \r\n     */\r\n    static RemoveObjectByUID(uid){\r\n        var object = debugObjects.get(uid);\r\n        if(object instanceof THREE.Object3D && object.parent){\r\n            object.parent.remove(object);\r\n        }\r\n    }\r\n\r\n    static ClearAll(){\r\n        for(var uid of debugObjects.keys()){\r\n            DebugViz.RemoveObjectByUID(uid);\r\n        }\r\n    }\r\n\r\n    /** @param {Boolean} visible */\r\n    static SetPackingSpaceVisibility(visible){\r\n        Debug.app.view.packingSpaceView.view.visible = visible;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nclass Debug {\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n\r\n    static get CLPTest(){\r\n        return require('../packer/clp/CLPTest');\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\nDebug.Viz = DebugViz;\r\n\r\n/** @type {import('../../FreightPacker').default} */\r\nDebug.api;\r\n/** @type {import('../App').default} */\r\nDebug.app;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nconst signals = {\r\n    init: 'init',\r\n    started: 'started',\r\n    paused: 'paused',\r\n    stopped: 'stopped'\r\n};\r\n\r\nclass SceneSetup extends Signaler {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        /** @type {import('../scene/Renderer').RendererParams} */\r\n        var rendererParams = {};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: 30, aspect: 1, near: 1 * units, far: 3000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            gridHelper: true,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        var scope = this;\r\n        return new Promise((resolve, reject) => {\r\n            scope.Dispatch(signals.init);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.cameraController.Update();\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n\r\n        this.Dispatch(signals.started);\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n\r\n        this.Dispatch(signals.paused);\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n\r\n        this.Dispatch(signals.stopped);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    DefaultLights(controller, configure, helpers){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(300 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(ambientLight);\r\n        controller.ambientContainer.add(directionalLight);\r\n\r\n        var directionalLightComplem = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLightComplem.position.set(-300 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(directionalLightComplem);\r\n\r\n        if(this.ux.params.configure && configure){\r\n            let Smart = require('../utils/cik/config/Smart').default;\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            let Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n            let dl = directionalLight;\r\n            let smart = new Smart(dl, 'Directional light');\r\n            smart.MakeShortcut('Configure');\r\n            \r\n            let lightController = ['color', 'intensity', 'castShadow'];\r\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\r\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\r\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\r\n\r\n            let dlHelper, dlCameraHelper;\r\n            if(helpers){\r\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\r\n                this.sceneController.AddDefault(dlHelper);\r\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\r\n                this.sceneController.AddDefault(dlCameraHelper);\r\n            }\r\n\r\n            function onGUIChanged(){\r\n                dl.shadow.camera.updateProjectionMatrix();\r\n\r\n                if(helpers){\r\n                    dlHelper.update();\r\n                    dlCameraHelper.update();\r\n                }\r\n            }\r\n\r\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\r\n                ...lightController,\r\n                ...shadowControllers,\r\n                ...shadowCameraControllers\r\n            );\r\n        }\r\n\r\n        return [ambientLight, directionalLight];\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            function onGUIChanged(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            smart.MakeShortcut('Configure');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","import Utils from \"./utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud - Create a hud controller (Scene, camera, loop, etc.)\r\n * @property {Boolean} configure - Execute helpers that allow configuration\r\n * @property {Number} units - Conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n}\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\nconst serializeModes = Config.serializeModes;\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\nclass Smart {\r\n    /**\r\n     * @param {*} target \r\n     * @param {string} label \r\n     */\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.visible = false;\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.visible = true;\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {string} folderName \r\n     * @param {*} target \r\n     * @param {Function} guiChanged \r\n     * @param {serializeModes} serializeMode\r\n     * @param {Array<string|Config.Controller>} args \r\n     */\r\n    Config(folderName, target, guiChanged, serializeMode, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     */\r\n    MakeShortcut(category){\r\n        Smart.MakeShortcut(category, this);\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Smart} target \r\n     */\r\n    static MakeShortcut(category, target){\r\n        Config.MakeShortcut(category, target.label, function(){\r\n            if(target.visible){\r\n                target.Hide();\r\n            }\r\n            else{\r\n                target.Show();\r\n            }\r\n        });\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /**\r\n     * @returns {Container}\r\n     */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex != -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n\r\n    /** \r\n     * @param {Item} item\r\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n     */\r\n    static ResolveOrientation(item){\r\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\r\n\r\n        if(almost(item.PackDimX, w)){ // x\r\n            if(almost(item.PackDimY, h)){ // y\r\n                return 'xyz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'xzy';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, h)){ // y\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'yxz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'yzx';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, l)){ // z\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'zxy';\r\n            }\r\n            else if(almost(item.PackDimY, h)){ // y\r\n                return 'zyx';\r\n            }\r\n        }\r\n\r\n        return 'xyz';\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","\r\nconst orientations = [ 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy' ];\r\nvar dimensions = [0, 0, 0];\r\n\r\nclass Item{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weight \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, width, height, length, weight, quantity){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weight = weight;\r\n        this.volume = width * height * length;\r\n        this.quantity = quantity;\r\n    }\r\n\r\n    get xyz(){ dimensions[0] = this.width; dimensions[1] = this.height; dimensions[2] = this.length; return dimensions; }\r\n    get zyx(){ dimensions[0] = this.length; dimensions[1] = this.height; dimensions[2] = this.width; return dimensions; }\r\n    get yxz(){ dimensions[0] = this.height; dimensions[1] = this.width; dimensions[2] = this.length; return dimensions; }\r\n    get yzx(){ dimensions[0] = this.height; dimensions[1] = this.length; dimensions[2] = this.width; return dimensions; }\r\n    get zxy(){ dimensions[0] = this.length; dimensions[1] = this.width; dimensions[2] = this.height; return dimensions; }\r\n    get xzy(){ dimensions[0] = this.width; dimensions[1] = this.length; dimensions[2] = this.height; return dimensions; }\r\n\r\n    /** @param {Number} orientation */\r\n    GetOrientedDimensions(orientation){\r\n        switch(orientation){\r\n            case 0: return this.xyz;\r\n            case 1: return this.zyx;\r\n            case 2: return this.yxz;\r\n            case 3: return this.yzx;\r\n            case 4: return this.zxy;\r\n            case 5: return this.xzy;\r\n        }\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    Copy(item){\r\n        this.id = item.id;\r\n        this.width = item.width;\r\n        this.height = item.height;\r\n        this.length = item.length;\r\n        this.weight = item.weight;\r\n        this.volume = item.volume;\r\n        this.quantity = item.quantity;\r\n        \r\n        return this;\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    static ResolveOrientation(orientation){\r\n        return orientations[orientation];\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static VolumeSort(a, b){\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass Container{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weightCapacity \r\n     */\r\n    constructor(id, width, height, length, weightCapacity){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weightCapacity = weightCapacity;\r\n    }\r\n}\r\n\r\nexport {\r\n    Item,\r\n    Container\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/Components.js","import CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new THREE.MeshStandardMaterial({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /**\r\n         * @type {THREE.Mesh}\r\n         */\r\n        this.mesh;\r\n\r\n        /**\r\n         * @type {THREE.Object3D}\r\n         */\r\n        this.view;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 22\n// module chunks = 0","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\n\r\n/**\r\n * @typedef AppComponents\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n */\r\n\r\nclass App {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {UX} ux\r\n     * @param {AppComponents} components \r\n     */\r\n    constructor(containerDiv, ux, components) {\r\n        this.ux = ux;\r\n        this.components = components;\r\n\r\n        /** @type {import('./packer/Packer').PackerParams} */\r\n        var packerParams = {ux: this.ux};\r\n        this.packer = new Packer(packerParams);\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        var packer = this.packer;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        var viewParams = { ux: this.ux };\r\n        this.view = new View(packer, this.sceneSetup, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.components.cargoInput.On(CargoInput.signals.completed, function(boxEntry){\r\n            packer.cargoList.Add(boxEntry);\r\n        });\r\n\r\n        this.components.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, function(container){\r\n            packer.packingSpace.AddContainer(container);\r\n        });\r\n\r\n        /** @param {import('./packer/Packer').PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            Logger.Log('Packing result:', packingResult);\r\n        }\r\n\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nvar tempVec3 = new THREE.Vector3(),\r\n    tempVec3_b = new THREE.Vector3();\r\n\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\nclass Camera {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target.copy(lookTarget);\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    Frame(box3, distanceMultiplier){\r\n        if(distanceMultiplier === undefined) distanceMultiplier = .75;\r\n\r\n        var fov = this.camera.fov * (Math.PI / 180);\r\n\r\n        var extent = tempVec3;\r\n        box3.getSize(extent);\r\n        var frameSize = Math.max(extent.x, extent.y, extent.z);\r\n        var distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\r\n        \r\n        var center = tempVec3_b;\r\n        box3.getCenter(center);\r\n        \r\n        var position = tempVec3;\r\n        position.subVectors(this.camera.position, center).normalize().multiplyScalar(distance).add(center);\r\n\r\n        this.camera.position.copy(position);\r\n        this.SetTarget(center);\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls.enabled;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","import { Element } from \"./UIUtils\";\r\n\r\nElement.CreateCSS([\r\n    '.tooltip .tooltiptext {',\r\n    '    visibility: hidden;',\r\n    '    position: absolute;',\r\n    '    width: 120px;',\r\n    '    background-color: #111;',\r\n    '    color: #fff;',\r\n    '    text-align: center;',\r\n    '    padding: 2px 0;',\r\n    '    border-radius: 2px;',\r\n    '    z-index: 1;',\r\n    '    opacity: 0;',\r\n    '    transition: opacity .6s;',\r\n    '}',\r\n\r\n    '.tooltip-top {',\r\n    '    bottom: 125%;',\r\n    '    left: 50%;',\r\n    '    margin-left: -60px;',\r\n    '}',\r\n    \r\n    '.tooltip:hover .tooltiptext {',\r\n    '    visibility: visible;',\r\n    '    opacity: 1;',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n};\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n    get: function(){\r\n        if(!this._onGUIEvent)\r\n            this._onGUIEvent = [];\r\n        return this._onGUIEvent;\r\n    }\r\n});\r\n\r\n// update all\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n    var gui = this;\r\n    for (var i in gui.__controllers) {\r\n        var controller = gui.__controllers[i];\r\n        controller.updateDisplay();\r\n    }\r\n\r\n    var folders = Object.values(gui.__folders);\r\n    for(i = 0; i < folders.length; i++){\r\n        folders[i].updateAll();\r\n    }\r\n};\r\n\r\n// find\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n    var gui = this, controller, i;\r\n\r\n    if(property){ // 2 arguments\r\n        for (i = 0; i < gui.__controllers.length; i++){\r\n            controller = gui.__controllers[i];\r\n            if (controller.object == object && controller.property == property)\r\n                return controller;\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            controller = folders[i].find(object, property);\r\n            if(controller) return controller;\r\n        }\r\n    }\r\n    else{\r\n        property = object; // 1 argument\r\n\r\n        var folderKeys = Object.keys(gui.__folders);\r\n        for(i = 0; i < folderKeys.length; i++){\r\n            var folderName = folderKeys[i];\r\n            var folder = gui.__folders[folderName];\r\n            if(folderName === property)\r\n                return folder;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n// On open event\r\n//if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n    get: function(){\r\n        return !this.closed;\r\n    },\r\n\r\n    set: function(value){\r\n        for(var i = 0; i < this.onGUIEvent.length; i++){\r\n            this.onGUIEvent[i](value ? 'open' : 'close');\r\n        }\r\n    }\r\n});\r\n\r\n// Disabled\r\nfunction blockEvent(event){\r\n    event.stopPropagation();\r\n}\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n    get: function(){\r\n        return this.domElement.hasAttribute(\"disabled\");\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n            this.domElement.addEventListener(\"click\", blockEvent, true);\r\n            Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n        else{\r\n            this.domElement.removeAttribute(\"disabled\");\r\n            this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n            Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.disabled = !value;\r\n};\r\n\r\n// Tooltip\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n    get: function(){\r\n        return this._tooltip.innerHTML;\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            if(this._tooltip === undefined) {\r\n                this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                /**\r\n                 * @type {HTMLElement}\r\n                 */\r\n                var container = this.domElement.parentElement.parentElement;\r\n                container.classList.add('tooltip');\r\n                container.appendChild(this._tooltip);\r\n            }\r\n            this._tooltip.innerHTML = value;\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.tooltip = value;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Container from \"./components/Container\";\r\nimport Item from \"./components/Item\";\r\n\r\nconst epsilon = Math.pow(2, -52);\r\n\r\n/**\r\n * From the master's thesis:\r\n * \"The double linked list we use keeps the topology of the edge of the \r\n * current layer under construction. We keep the x and z coordinates of \r\n * each gap's right corner. The program looks at those gaps and tries to \r\n * fill them with boxes one at a time while trying to keep the edge of the\r\n * layer even\" (p. 3-7).\r\n */\r\nclass ScrapPad{\r\n    constructor(){\r\n        /** The x coordinate of the gap's right corner. */\r\n        this.CumX = 0;\r\n        /** The z coordinate of the gap's right corner. */\r\n        this.CumZ = 0;\r\n        \r\n        /** The following entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Post;\r\n\r\n        /** The previous entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Pre;\r\n    }\r\n}\r\n\r\n/**\r\n * A list that stores all the different lengths of all item dimensions.\r\n * From the master's thesis:\r\n * \"Each Layerdim value in this array represents a different layer thickness\r\n * value with which each iteration can start packing. Before starting iterations,\r\n * all different lengths of all box dimensions along with evaluation values are\r\n * stored in this array\" (p. 3-6).\r\n */\r\nclass Layer {\r\n    constructor(layerEval){\r\n        this.LayerDim = 0;\r\n        this.LayerEval = layerEval !== undefined ? layerEval : 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Layer} l1 \r\n     * @param {Layer} l2 \r\n     */\r\n    static SortByEval(l1, l2){\r\n        return l1.LayerEval - l2.LayerEval;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef PackingResult\r\n * @property {Container} Container\r\n * @property {Boolean} IsCompletePack\r\n * @property {Array<Item>} PackedItems\r\n * @property {Number} PercentContainerVolumePacked\r\n * @property {Number} PercentItemVolumePacked\r\n * @property {Array<Item>} UnpackedItems\r\n * @property {Number} PackTimeInMilliseconds\r\n */\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n\t\t/** @type {Container} */\r\n\t\tthis.Container;\r\n        this.IsCompletePack = false;\r\n        /** @type {Array<Item>} */\r\n        this.PackedItems = [];\r\n        this.PercentContainerVolumePacked = 0;\r\n        this.PercentItemVolumePacked = 0;\r\n        /** @type {Array<Item>} */\r\n        this.UnpackedItems = [];\r\n        this.PackTimeInMilliseconds = Number.MAX_SAFE_INTEGER;\r\n    }\r\n}\r\n\r\n\r\n/** @type {Array<Item>} */\r\nvar itemsToPack = [];\r\n/** @type {Array<Item>} */\r\nvar itemsPackedInOrder;\r\n/** @type {Array<Layer>} */\r\nvar layers;\r\n\r\n/** @type {ScrapPad} */\r\nvar scrapfirst;\r\n/** @type {ScrapPad} */\r\nvar smallestZ;\r\n/** @type {ScrapPad} */\r\nvar trash;\r\n\r\nvar evened = false;\r\nvar hundredPercentPacked = false\r\nvar layerDone = false;\r\nvar packing = false;\r\nvar packingBest = false;\r\nvar quit = false;\r\n\r\nvar bboxi = 0;\r\nvar bestIteration = 0;\r\nvar bestVariant = 0;\r\nvar boxi = 0;\r\nvar cboxi = 0;\r\nvar layerListLen = 0;\r\nvar packedItemCount = 0;\r\nvar x = 0;\r\n\r\nvar bbfx = 0;\r\nvar bbfy = 0;\r\nvar bbfz = 0;\r\nvar bboxx = 0;\r\nvar bboxy = 0;\r\nvar bboxz = 0;\r\nvar bfx = 0;\r\nvar bfy = 0;\r\nvar bfz = 0;\r\nvar boxx = 0;\r\nvar boxy = 0;\r\nvar boxz = 0;\r\nvar cboxx = 0;\r\nvar cboxy = 0;\r\nvar cboxz = 0;\r\nvar layerinlayer = 0;\r\nvar layerThickness = 0;\r\nvar lilz = 0;\r\nvar packedVolume = 0;\r\nvar packedy = 0;\r\nvar prelayer = 0;\r\nvar prepackedy = 0;\r\nvar preremainpy = 0;\r\nvar px = 0;\r\nvar py = 0;\r\nvar pz = 0;\r\nvar remainpy = 0;\r\nvar remainpz = 0;\r\nvar itemsToPackCount = 0;\r\nvar totalItemVolume = 0;\r\nvar totalContainerVolume = 0;\r\n\r\n/**\r\n * Current port by chadiik (2018)\r\n * A 3D bin packing algorithm originally ported from https://github.com/davidmchapman/3DContainerPacking\r\n * which itself was ported from https://github.com/keremdemirer/3dbinpackingjs,\r\n * which itself was a JavaScript port of https://github.com/wknechtel/3d-bin-pack/, which is a C reconstruction \r\n * of a novel algorithm developed in a U.S. Air Force master's thesis by Erhan Baltacioglu in 2001.\r\n */\r\nclass AFit {\r\n    constructor(){\r\n\r\n    }\r\n    \r\n    /**\r\n     * Runs the algorithm\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     * @returns {PackingResult}\r\n     */\r\n    Solve(container, items)\r\n    {\r\n        this.Initialize(container, items);\r\n        this.ExecuteIterations(container);\r\n        this.Report(container);\r\n\r\n\t\tvar result = new PackingResult();\r\n\t\tresult.Container = container;\r\n\r\n        for (var i = 1; i <= itemsToPackCount; i++)\r\n        {\r\n            itemsToPack[i].Quantity = 1;\r\n\r\n            if (!itemsToPack[i].IsPacked)\r\n            {\r\n                result.UnpackedItems.push(itemsToPack[i]);\r\n            }\r\n        }\r\n\r\n        result.PackedItems = itemsPackedInOrder;\r\n        \r\n\r\n\r\n        if (result.UnpackedItems.length == 0)\r\n        {\r\n            result.IsCompletePack = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Analyzes each unpacked box to find the best fitting one to the empty space given.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     */\r\n    AnalyzeBox(hmx, hy, hmy, hz, hmz, dim1, dim2, dim3)\r\n\t{\r\n\t\tif (dim1 <= hmx && dim2 <= hmy && dim3 <= hmz)\r\n\t\t{\r\n\t\t\tif (dim2 <= hy)\r\n\t\t\t{\r\n\t\t\t\tif (hy - dim2 < bfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 < bfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 == bfx && Math.abs(hz - dim3) < bfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (dim2 - hy < bbfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 < bbfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 == bbfx && Math.abs(hz - dim3) < bbfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * After finding each box, the candidate boxes and the condition of the layer are examined.\r\n     */\r\n\tCheckFound()\r\n\t{\r\n\t\tevened = false;\r\n\r\n\t\tif (boxi != 0)\r\n\t\t{\r\n\t\t\tcboxi = boxi;\r\n\t\t\tcboxx = boxx;\r\n\t\t\tcboxy = boxy;\r\n\t\t\tcboxz = boxz;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ((bboxi > 0) && (layerinlayer != 0 || (!smallestZ.Pre && !smallestZ.Post)))\r\n\t\t\t{\r\n\t\t\t\tif (layerinlayer == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tprelayer = layerThickness;\r\n\t\t\t\t\tlilz = smallestZ.CumZ;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcboxi = bboxi;\r\n\t\t\t\tcboxx = bboxx;\r\n\t\t\t\tcboxy = bboxy;\r\n\t\t\t\tcboxz = bboxz;\r\n\t\t\t\tlayerinlayer = layerinlayer + bboxy - layerThickness;\r\n\t\t\t\tlayerThickness = bboxy;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (!smallestZ.Pre && !smallestZ.Post)\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerDone = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tevened = true;\r\n\r\n\t\t\t\t\tif (!smallestZ.Pre)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!smallestZ.Post)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Pre.CumZ < smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Executes the packing algorithm variants.\r\n     * @param {Container} container \r\n     */\r\n\tExecuteIterations(container)\r\n\t{\r\n\t\tvar itelayer = 0;\r\n\t\tvar layersIndex = 0;\r\n\t\tvar bestVolume = 0;\r\n\r\n\t\tfor (var containerOrientationVariant = 1; (containerOrientationVariant <= 6) && !quit; containerOrientationVariant++)\r\n\t\t{\r\n\t\t\tswitch (containerOrientationVariant)\r\n\t\t\t{\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlayers.push(new Layer(-1));\r\n\t\t\tthis.ListCanditLayers();\r\n            //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n            layers.sort(Layer.SortByEval);\r\n\r\n\t\t\tfor (layersIndex = 1; (layersIndex <= layerListLen) && !quit; layersIndex++)\r\n\t\t\t{\r\n\t\t\t\tpackedVolume = 0;\r\n\t\t\t\tpackedy = 0;\r\n\t\t\t\tpacking = true;\r\n\t\t\t\tlayerThickness = layers[layersIndex].LayerDim;\r\n\t\t\t\titelayer = layersIndex;\r\n\t\t\t\tremainpy = py;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t\tpackedItemCount = 0;\r\n\r\n\t\t\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdo\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerinlayer = 0;\r\n\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\t\t\tif (layerinlayer != 0 && !quit)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprepackedy = packedy;\r\n\t\t\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\t\t\tremainpz = lilz;\r\n\t\t\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\t\t\tremainpz = pz;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t\t} while (packing && !quit);\r\n\r\n\t\t\t\tif ((packedVolume > bestVolume) && !quit)\r\n\t\t\t\t{\r\n\t\t\t\t\tbestVolume = packedVolume;\r\n\t\t\t\t\tbestVariant = containerOrientationVariant;\r\n\t\t\t\t\tbestIteration = itelayer;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hundredPercentPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (hundredPercentPacked) break;\r\n\r\n\t\t\tif ((container.Length == container.Height) && (container.Height == container.Width)) containerOrientationVariant = 6;\r\n\r\n\t\t\tlayers = [];\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper boxes by looking at all six possible orientations,\r\n\t * empty space given, adjacent boxes, and pallet limits.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     */\r\n\tFindBox(hmx, hy, hmy, hz, hmz)\r\n\t{\r\n        var y = 0;\r\n        \r\n\t\tbfx = Number.MAX_VALUE;\r\n\t\tbfy = Number.MAX_VALUE;\r\n\t\tbfz = Number.MAX_VALUE;\r\n\t\tbbfx = Number.MAX_VALUE;\r\n\t\tbbfy = Number.MAX_VALUE;\r\n\t\tbbfz = Number.MAX_VALUE;\r\n\t\tboxi = 0;\r\n\t\tbboxi = 0;\r\n\r\n\t\tfor (y = 1; y <= itemsToPackCount; y = y + itemsToPack[y].Quantity)\r\n\t\t{\r\n\t\t\tfor (x = y; x < x + itemsToPack[y].Quantity - 1; x++)\r\n\t\t\t{\r\n\t\t\t\tif (!itemsToPack[x].IsPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tif (x > itemsToPackCount) return;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim2, itemsToPack[x].Dim3);\r\n\r\n\t\t\tif ((itemsToPack[x].Dim1 == itemsToPack[x].Dim3) && (itemsToPack[x].Dim3 == itemsToPack[x].Dim2)) continue;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim3, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim1, itemsToPack[x].Dim3);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim3, itemsToPack[x].Dim1);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim1, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim2, itemsToPack[x].Dim1);\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper layer height by looking at the unpacked boxes and the remaining empty space available.\r\n     * @param {Number} thickness \r\n     */\r\n\tFindLayer(thickness)\r\n\t{\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar layereval = 0;\r\n        var maxEvaluations = 1000000;\r\n        \r\n\t\tlayerThickness = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tif ((exdim <= thickness) && (((dimen2 <= px) && (dimen3 <= pz)) || ((dimen3 <= px) && (dimen2 <= pz))))\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!(x == z) && !(itemsToPack[z].IsPacked))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (layereval < maxEvaluations)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmaxEvaluations = layereval;\r\n\t\t\t\t\t\tlayerThickness = exdim;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layerThickness == 0 || layerThickness > remainpy) packing = false;\r\n\t}\r\n\r\n    /**\r\n     * Finds the first to be packed gap in the layer edge.\r\n     */\r\n\tFindSmallestZ()\r\n\t{\r\n\t\tvar scrapmemb = scrapfirst;\r\n\t\tsmallestZ = scrapmemb;\r\n\r\n\t\twhile (scrapmemb.Post)\r\n\t\t{\r\n\t\t\tif (scrapmemb.Post.CumZ < smallestZ.CumZ)\r\n\t\t\t{\r\n\t\t\t\tsmallestZ = scrapmemb.Post;\r\n\t\t\t}\r\n\r\n\t\t\tscrapmemb = scrapmemb.Post;\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Initializes everything.\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n\tInitialize(container, items)\r\n\t{\r\n\t\titemsToPack = [];\r\n\t\titemsPackedInOrder = [];\r\n\r\n\t\t// The original code uses 1-based indexing everywhere. This fake entry is added to the beginning\r\n\t\t// of the list to make that possible.\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0, 0));\r\n\r\n\t\tlayers = [];\r\n\t\titemsToPackCount = 0;\r\n\r\n\t\tfor(var iItems = 0, numItems = items.length; iItems < numItems; iItems++)\r\n\t\t{\r\n            let item = items[iItems];\r\n\t\t\tfor (var i = 1; i <= item.Quantity; i++)\r\n\t\t\t{\r\n\t\t\t\tlet newItem = new Item(item.ID, item.Dim1, item.Dim2, item.Dim3, item.Quantity);\r\n\t\t\t\titemsToPack.push(newItem);\r\n\t\t\t}\r\n\r\n\t\t\titemsToPackCount += item.Quantity;\r\n\t\t}\r\n\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0));\r\n\r\n\t\ttotalContainerVolume = container.Length * container.Height * container.Width;\r\n\t\ttotalItemVolume = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\ttotalItemVolume = totalItemVolume + itemsToPack[x].Volume;\r\n\t\t}\r\n\r\n\t\tscrapfirst = new ScrapPad();\r\n\r\n\t\tscrapfirst.Pre = undefined;\r\n\t\tscrapfirst.Post = undefined;\r\n\t\tpackingBest = false;\r\n\t\thundredPercentPacked = false;\r\n\t\tquit = false;\r\n\t}\r\n\r\n    /**\r\n     * Lists all possible layer heights by giving a weight value to each of them.\r\n     */\r\n\tListCanditLayers()\r\n\t{\r\n\t\tvar same = false;\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar k = 0;\r\n\t\tvar layereval = 0;\r\n\r\n\t\tlayerListLen = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((exdim > py) || (((dimen2 > px) || (dimen3 > pz)) && ((dimen3 > px) || (dimen2 > pz)))) continue;\r\n\r\n\t\t\t\tsame = false;\r\n\r\n\t\t\t\tfor (k = 1; k <= layerListLen; k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (exdim == layers[k].LayerDim)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsame = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (same) continue;\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!(x == z))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayerListLen++;\r\n\r\n\t\t\t\tlayers.push(new Layer());\r\n\t\t\t\tlayers[layerListLen].LayerEval = layereval;\r\n\t\t\t\tlayers[layerListLen].LayerDim = exdim;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Transforms the found coordinate system to the one entered by the user and writes them to the report file.\r\n     */\r\n\tOutputBoxList()\r\n\t{\r\n\t\tvar packCoordX = 0;\r\n\t\tvar packCoordY = 0;\r\n\t\tvar packCoordZ = 0;\r\n\t\tvar packDimX = 0;\r\n\t\tvar packDimY = 0;\r\n\t\tvar packDimZ = 0;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\titemsToPack[cboxi].CoordX = packCoordX;\r\n\t\titemsToPack[cboxi].CoordY = packCoordY;\r\n\t\titemsToPack[cboxi].CoordZ = packCoordZ;\r\n\t\titemsToPack[cboxi].PackDimX = packDimX;\r\n\t\titemsToPack[cboxi].PackDimY = packDimY;\r\n\t\titemsToPack[cboxi].PackDimZ = packDimZ;\r\n\r\n\t\titemsPackedInOrder.push(itemsToPack[cboxi]);\r\n\t}\r\n\r\n    /**\r\n     * Packs the boxes found and arranges all variables and records properly.\r\n     */\r\n\tPackLayer()\r\n\t{\r\n\t\tvar lenx = 0;\r\n\t\tvar lenz = 0;\r\n\t\tvar lpz = 0;\r\n\r\n\t\tif (layerThickness == 0)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tscrapfirst.CumX = px;\r\n\t\tscrapfirst.CumZ = 0;\r\n\r\n        //for (; !quit;)\r\n        while(!quit)\r\n\t\t{\r\n\t\t\tthis.FindSmallestZ();\r\n\r\n\t\t\tif ((!smallestZ.Pre) && (!smallestZ.Post))\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-1: NO BOXES ON THE RIGHT AND LEFT SIDES ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lpz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.Post = new ScrapPad();\r\n\r\n\t\t\t\t\tsmallestZ.Post.Post = undefined;\r\n\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ;\r\n\t\t\t\t\tsmallestZ.CumX = cboxx;\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Pre)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-2: NO BOXES ON THE LEFT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlenz = smallestZ.Post.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Post)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-3: NO BOXES ON THE RIGHT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-4: THERE ARE BOXES ON BOTH OF THE SIDES ***\r\n\r\n\t\t\t\t//*** SUBSITUATION-4A: SIDES ARE EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (smallestZ.Pre.CumX < px - smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//*** SUBSITUATION-4B: SIDES ARE NOT EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == (smallestZ.CumX - smallestZ.Pre.CumX))\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.VolumeCheck();\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Using the parameters found, packs the best solution found and reports to the console.\r\n     * @param {Container} container \r\n     */\r\n\tReport(container)\r\n\t{\r\n\t\tquit = false;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tpackingBest = true;\r\n\r\n\t\t//Print(\"BEST SOLUTION FOUND AT ITERATION                      :\", bestIteration, \"OF VARIANT\", bestVariant);\r\n\t\t//Print(\"TOTAL ITEMS TO PACK                                   :\", itemsToPackCount);\r\n\t\t//Print(\"TOTAL VOLUME OF ALL ITEMS                             :\", totalItemVolume);\r\n\t\t//Print(\"WHILE CONTAINER ORIENTATION X - Y - Z                 :\", px, py, pz);\r\n\r\n\t\tlayers.length = 0;\r\n\t\tlayers[0] = new Layer(-1);\r\n\t\tthis.ListCanditLayers();\r\n        //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n        layers.sort(Layer.SortByEval);\r\n\t\tpackedVolume = 0;\r\n\t\tpackedy = 0;\r\n\t\tpacking = true;\r\n\t\tlayerThickness = layers[bestIteration].LayerDim;\r\n\t\tremainpy = py;\r\n\t\tremainpz = pz;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t}\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\tlayerinlayer = 0;\r\n\t\t\tlayerDone = false;\r\n\t\t\tthis.PackLayer();\r\n\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\tif (layerinlayer > epsilon)\r\n\t\t\t{\r\n\t\t\t\tprepackedy = packedy;\r\n\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\tremainpz = lilz;\r\n\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\tlayerDone = false;\r\n\t\t\t\tthis.PackLayer();\r\n\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t}\r\n\r\n\t\t\tif (!quit)\r\n\t\t\t{\r\n\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t}\r\n\t\t} while (packing && !quit);\r\n\t}\r\n\r\n    /**\r\n     * After packing of each item, the 100% packing condition is checked.\r\n     */\r\n\tVolumeCheck()\r\n\t{\r\n\t\titemsToPack[cboxi].IsPacked = true;\r\n\t\titemsToPack[cboxi].PackDimX = cboxx;\r\n\t\titemsToPack[cboxi].PackDimY = cboxy;\r\n\t\titemsToPack[cboxi].PackDimZ = cboxz;\r\n\t\tpackedVolume = packedVolume + itemsToPack[cboxi].Volume;\r\n\t\tpackedItemCount++;\r\n\r\n\t\tif (packingBest)\r\n\t\t{\r\n\t\t\tthis.OutputBoxList();\r\n\t\t}\r\n\t\telse if (packedVolume == totalContainerVolume || packedVolume == totalItemVolume)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\thundredPercentPacked = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default AFit;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFit.js","import Signaler from \"../../utils/cik/Signaler\";\r\n\r\nconst typeofString = 'string';\r\nvar colLabels = '0ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\r\n\r\nconst signals = {\r\n    updated: 'u'\r\n};\r\n\r\nclass CellEntry /*extends Signaler*/{\r\n    constructor(value){\r\n        this.Value = value;\r\n        this.col = 0;\r\n        this.row = 0;\r\n\r\n        /** @type {Function} */\r\n        this.calculate = undefined;\r\n    }\r\n\r\n    get Value(){\r\n        if(this.calculate)\r\n            this._value = this.calculate();\r\n        return this._value;\r\n    }\r\n    set Value(value){\r\n        this._value = value;\r\n        //this.Dispatch(signals.updated, this);\r\n    }\r\n\r\n    get Select(){\r\n        console.log('Select: ', this.Value);\r\n    }\r\n\r\n    toString(){\r\n        return this.Value.toString();\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} row \r\n * @param {Number} col \r\n * @param {*} [value]\r\n */\r\nfunction Cells(row, col, value){\r\n    return new CellEntry('default');\r\n}\r\n\r\n/** @type {Worksheet} */\r\nvar active;\r\n\r\nclass Worksheet{\r\n    /** @param {string} label */\r\n    constructor(label){\r\n        this.label = label.toLowerCase();\r\n        /** @type {Map<Number, Map<Number, CellEntry>>} */\r\n        this.data = new Map();\r\n\r\n        this.cellsFN = this.Cells.bind(this);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CellEntry} cell1 \r\n     * @param {CellEntry} cell2 \r\n     */\r\n    Sum(cell1, cell2){\r\n        var cells = Range(cell1, cell2).cells;\r\n        var total = 0;\r\n        cells.forEach(cell => {\r\n            let value = Number.parseFloat(cell.Value);\r\n            if(!isNaN(value))\r\n                total += value;\r\n        });\r\n        return total;\r\n    }\r\n\r\n    get Activate(){\r\n        active = this;\r\n        Cells = this.cellsFN;\r\n    }\r\n\r\n    Cells(row, col, value){\r\n        if(typeof col === typeofString) col = colLabels.indexOf(col);\r\n\r\n        if(!this.data.has(row) || !this.data.get(row).has(col)){\r\n            if(!this.data.has(row))\r\n                this.data.set(row, new Map());\r\n            \r\n            let newEntry = new CellEntry(0);\r\n            newEntry.row = row;\r\n            newEntry.col = col;\r\n            this.data.get(row).set(col, newEntry);\r\n        }\r\n        \r\n        if(value)\r\n            this.data.get(row).get(col).Value = value;\r\n        \r\n        return this.data.get(row).get(col);\r\n    }\r\n\r\n    Find(value){\r\n        for(var row of this.data.values()){\r\n            for(var cell of row.values()){\r\n                if(cell.Value === value){\r\n                    return cell;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    Print(){\r\n        console.group(this.label);\r\n        var rows = [];\r\n        for(var [row, rowData] of this.data){\r\n            let rowResult = [row + ':'];\r\n            for(var [col, colData] of rowData){\r\n                rowResult.push(colData.Value);\r\n            }\r\n            rows[row] = rowResult;\r\n        }\r\n        \r\n        rows.forEach(row => {\r\n            console.log(...row);\r\n        });\r\n        console.groupEnd();\r\n    }\r\n}\r\n\r\nclass Workbook{\r\n    constructor(){\r\n        /** @type {Map<string, Worksheet>} */\r\n        this.worksheets = new Map();\r\n    }\r\n\r\n    /** @param {Worksheet} worksheet */\r\n    Add(worksheet){\r\n        this.worksheets.set(worksheet.label.toLowerCase(), worksheet);\r\n    }\r\n\r\n    /** @param {string} label */\r\n    Worksheets(label){\r\n        return this.worksheets.get(label.toLowerCase());\r\n    }\r\n\r\n    Print(){\r\n        for(var worksheet of this.worksheets.values()){\r\n            worksheet.Print();\r\n        }\r\n    }\r\n\r\n    get print(){\r\n        this.Print();\r\n    }\r\n}\r\n\r\nvar solverSheet = new Worksheet('CLP Solver Console');\r\nvar itemsSheet = new Worksheet('1.Items');\r\nvar containersSheet = new Worksheet('2.Containers');\r\nvar solutionSheet = new Worksheet('3.Solution');\r\n\r\nvar ThisWorkbook = new Workbook();\r\nThisWorkbook.Add(solverSheet);\r\nThisWorkbook.Add(itemsSheet);\r\nThisWorkbook.Add(containersSheet);\r\nThisWorkbook.Add(solutionSheet);\r\n\r\n/**\r\n * @param {string} label \r\n * @returns {Boolean}\r\n */\r\nfunction CheckWorksheetExistence(label){\r\n    return ThisWorkbook.Worksheets(label) !== undefined;\r\n}\r\n\r\nclass CellsRange{\r\n    constructor(){\r\n        /** @type {Array<CellEntry>} */\r\n        this.cells = [];        \r\n    }\r\n\r\n    set Value(value){\r\n        this.cells.forEach(cell => {\r\n            cell.Value = value;\r\n        });\r\n    }\r\n\r\n    get Clear(){\r\n        this.cells.forEach(cell => {\r\n            cell.Value = null;\r\n        });\r\n    }\r\n\r\n    get ClearContents(){\r\n        this.Clear;\r\n    }\r\n}\r\n\r\nvar _range = new CellsRange();\r\n\r\n/**\r\n * @param {CellEntry} cell1 \r\n * @param {CellEntry} cell2 \r\n */\r\nfunction Range(cell1, cell2){\r\n    var minCol = Math.min(cell1.col, cell2.col);\r\n    var maxCol = Math.max(cell1.col, cell2.col);\r\n    var minRow = Math.min(cell1.row, cell2.row);\r\n    var maxRow = Math.max(cell1.row, cell2.row);\r\n\r\n    _range.cells.length = 0;\r\n    for(var c = minCol; c < maxCol; c++){\r\n        for(var r = minRow; r < maxRow; r++){\r\n            _range.cells.push(Cells(r, c));\r\n        }\r\n    }\r\n\r\n    return _range;\r\n}\r\n\r\nclass Application{\r\n\r\n    static set StatusBar(value){\r\n        console.log(value);\r\n    }\r\n\r\n    static set ScreenUpdating(value){\r\n\r\n    }\r\n\r\n    static Alert(msg){\r\n        console.log('CLP alert:', msg);\r\n    }\r\n\r\n    static Confirm(msg, defaultValue){\r\n        console.log('CLP confirm (' + defaultValue + '):', msg);\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport {\r\n    ThisWorkbook, Cells, CheckWorksheetExistence, Range, Application\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/Workbook.js","import { ThisWorkbook, Cells, CheckWorksheetExistence, Range, Application } from \"./Workbook\";\r\nimport Signaler from \"../../utils/cik/Signaler\";\r\n\r\n/** Javascript port by chadiik 2018\r\n * \r\n * CLP Spreadsheet Solver v1.1\r\n * Open source, developed by Dr. Gunes Erdogan\r\n * http://people.bath.ac.uk/ge277/index.php/clp-spreadsheet-solver/\r\n * 'This work is licensed under the Creative Commons Attribution 4.0 International License.; <=view a copy of this license, visit http://creativecommons.org/licenses/by/4.0/.\r\n */\r\n\r\nconst epsilon = 0.0001;\r\n\r\n//data declarations\r\n\r\nclass item_type_data{\r\n    /**\r\n     * @param {Number} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     */\r\n    constructor(id, width, height, length){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length\r\n        this.volume = width * height * length;\r\n        this.weight = 0;\r\n        this.xy_rotatable = true;\r\n        this.yz_rotatable = true;\r\n        this.mandatory = 0;\r\n        this.profit = 0;\r\n        this.number_requested = 1;\r\n        this.sort_criterion = 0;\r\n    }\r\n}\r\n\r\nclass item_list_data{\r\n    constructor(){\r\n        this.num_item_types = 0;\r\n        this.total_number_of_items = 0;\r\n        /** @type {Array<item_type_data>} */\r\n        this.item_types;\r\n    }\r\n\r\n    item_typesGet(index){ if(index === 0){ console.warn('0 index'); } return this.item_types[index]; }\r\n}\r\n\r\nvar item_list = new item_list_data();\r\n\r\nclass container_type_data{\r\n    constructor(){\r\n        this.type_id = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.length = 0;\r\n        this.volume_capacity = 0;\r\n        this.weight_capacity = 0;\r\n        this.mandatory = 0;\r\n        this.cost = 0;\r\n        this.number_available = 0;\r\n    }\r\n}\r\n\r\nclass container_list_data{\r\n    constructor(){\r\n        this.num_container_types = 0;\r\n        /** @type {Array<container_type_data>} */\r\n        this.container_types;\r\n    }\r\n\r\n    container_typesGet(index){ if(index === 0){ console.warn('0 index'); } return this.container_types[index]; }\r\n}\r\n\r\nvar container_list = new container_list_data();\r\n\r\nclass compatibility_data{\r\n    constructor(){\r\n        /** @type {Array<Boolean>} */\r\n        this.item_to_item;\r\n        /** @type {Array<Array<Boolean>>} */\r\n        this.container_to_item;\r\n    }\r\n\r\n    item_to_itemGet(index, index2){ if(index === 0 || index2 === 0){ console.warn('0 index'); } return this.item_to_item[index][index2]; }\r\n    container_to_itemGet(index, index2){ if(index === 0 || index2 === 0){ console.warn('0 index'); } return this.container_to_item[index][index2]; }\r\n}\r\n\r\nvar compatibility_list = new compatibility_data();\r\n\r\nclass item_location{\r\n    constructor(){\r\n        this.origin_x = 0;\r\n        this.origin_y = 0;\r\n        this.origin_z = 0;\r\n        this.next_to_item_type = 0;\r\n    }\r\n}\r\n\r\nclass item_in_container{\r\n    constructor(){\r\n        this.item_type = 0;\r\n        this.rotation = 0; //1 to 6\r\n        this.mandatory = 0;\r\n        this.origin_x = 0;\r\n        this.origin_y = 0;\r\n        this.origin_z = 0;\r\n        this.opposite_x = 0;\r\n        this.opposite_y = 0;\r\n        this.opposite_z = 0;\r\n    }\r\n\r\n    static ResolveOrientation(rotationNum){\r\n        const orientations_base1 = ['xyz', 'xyz', 'zyx', 'xzy', 'yzx', 'yxz', 'zxy'];\r\n        return orientations_base1[rotationNum];\r\n    }\r\n}\r\n\r\nclass container_data{\r\n    constructor(){\r\n        this.type_id = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.length = 0;\r\n        this.volume_capacity = 0;\r\n        this.weight_capacity = 0;\r\n        this.cost = 0;\r\n        this.item_cnt = 0;\r\n        this.mandatory = 0;\r\n        this.addition_point_count = 0;\r\n        this.volume_packed = 0;\r\n        this.weight_packed = 0;\r\n\r\n        /** @type {Array<item_in_container>} */\r\n        this.items;\r\n        /** @type {Array<item_location>} */\r\n        this.addition_points;\r\n        /** @type {Array<Number>} */\r\n        this.repack_item_count;\r\n    }\r\n\r\n    itemsGet(index){ if(index === 0){ console.warn('0 index'); } return this.items[index]; }\r\n    addition_pointsGet(index){ if(index === 0){ console.warn('0 index'); } return this.addition_points[index]; }\r\n    repack_item_countGet(index){ if(index === 0){ console.warn('0 index'); } return this.repack_item_count[index]; }\r\n}\r\n\r\nclass solution_data{\r\n    constructor(){\r\n        this.feasible = false;\r\n\r\n        this.num_containers = 0;\r\n        this.net_profit = 0;\r\n        this.total_volume = 0;\r\n        this.total_weight = 0;\r\n        this.total_distance = 0;\r\n        this.total_x_moment = 0;\r\n        this.total_yz_moment = 0;\r\n\r\n        /** @type {Array<container_data>} */\r\n        this.container;\r\n        /** @type {Array<Array<Number>>} */\r\n        this.rotation_order;\r\n        /** @type {Array<Number>} */\r\n        this.item_type_order;\r\n        /** @type {Array<Number>} */\r\n        this.unpacked_item_count;\r\n    }\r\n\r\n    containerGet(index){ if(index === 0){ console.warn('0 index'); } return this.container[index]; }\r\n    item_type_orderGet(index){ if(index === 0){ console.warn('0 index'); } return this.item_type_order[index]; }\r\n    unpacked_item_countGet(index){ if(index === 0){ console.warn('0 index'); } return this.unpacked_item_count[index]; }\r\n}\r\n\r\nclass instance_data{\r\n    constructor(){\r\n        this.front_side_support = false;\r\n        this.item_item_compatibility_worksheet = false; // true if the data exists\r\n        this.container_item_compatibility_worksheet = false; // true if the data exists\r\n    }\r\n}\r\n\r\nvar instance = new instance_data();\r\n\r\nclass solver_option_data{\r\n    constructor(){\r\n        this.CPU_time_limit = 0;\r\n        this.item_sort_criterion = 0;\r\n        this.show_progress = false;\r\n    }\r\n}\r\n\r\nvar solver_options = new solver_option_data();\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} random_reorder_probability \r\n */\r\nfunction SortContainers(solution, random_reorder_probability){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var candidate_index = 0;\r\n    var max_mandatory = 0;\r\n    var max_volume_packed = 0;\r\n    var min_ratio = 0;\r\n\r\n    /** @type {container_data} */\r\n    var swap_container;\r\n        \r\n    // insertion sort\r\n\r\n    if( Math.random() < (1 - random_reorder_probability) ){\r\n        // insertion sort\r\n        for( i = 1; i <= solution.num_containers; i++ ){\r\n            let container = solution.containerGet(i);\r\n            candidate_index = i;\r\n            max_mandatory = container.mandatory;\r\n            max_volume_packed = container.volume_packed;\r\n            min_ratio = container.cost / container.volume_capacity;\r\n    \r\n            for( j = i + 1; j <= solution.num_containers; j++ ){\r\n                let container2 = solution.containerGet(j);\r\n                if (\r\n                    (container2.mandatory > max_mandatory)\r\n                    || ((container2.mandatory === max_mandatory) && (container2.volume_packed > max_volume_packed + epsilon)) \r\n                    || ((container2.mandatory === 0) && (max_mandatory === 0) && (container2.volume_packed > max_volume_packed - epsilon) && ((container2.cost / container2.volume_capacity) < min_ratio))\r\n                ){\r\n                    candidate_index = j;\r\n                    max_mandatory = container2.mandatory;\r\n                    max_volume_packed = container2.volume_packed;\r\n                    min_ratio = container2.cost / container2.volume_capacity;\r\n                }\r\n    \r\n            }\r\n    \r\n            if( candidate_index != i ){\r\n                swap_container = solution.containerGet(candidate_index);\r\n                solution.container[candidate_index] = solution.containerGet(i);\r\n                solution.container[i] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for( i = 1; i <= solution.num_containers; i++){\r\n            candidate_index = Math.floor((solution.num_containers - i + 1) * Math.random() + i);\r\n\r\n            if( candidate_index != i ){\r\n                swap_container = solution.containerGet(candidate_index);\r\n                solution.container[candidate_index] = solution.containerGet(i);\r\n                solution.container[i] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} container_id \r\n * @param {Number} percent_time_left \r\n */\r\nfunction PerturbSolution(solution, container_id, percent_time_left){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var swap_long = 0;\r\n    var operator_selection = 0;\r\n    var container_emptying_probability = 0;\r\n    var item_removal_probability = 0;\r\n    var repack_flag = false;\r\n    var continue_flag = false;\r\n    \r\n    var max_z = 0;\r\n    \r\n    //With solution.containerGet(container_id)\r\n    let container = solution.containerGet(container_id);\r\n    \r\n    // test\r\n    \r\n    container_emptying_probability = 0.05 + 0.15 * percent_time_left\r\n    item_removal_probability = 0.05 + 0.15 * percent_time_left\r\n    \r\n    if( container.item_cnt > 0 ){\r\n\r\n        if (Math.random() < container_emptying_probability ){\r\n            \r\n            // empty the container\r\n            for( j = 1; j <= container.item_cnt; j++ ){\r\n                let jType = container.itemsGet(j).item_type;\r\n                solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n            }\r\n            \r\n            solution.net_profit = solution.net_profit + container.cost;\r\n            solution.total_volume = solution.total_volume - container.volume_packed;\r\n            solution.total_weight = solution.total_weight - container.weight_packed;\r\n            \r\n            container.item_cnt = 0;\r\n            container.volume_packed = 0;\r\n            container.weight_packed = 0;\r\n            container.addition_point_count = 1;\r\n            container.addition_points[1].origin_x = 0;\r\n            container.addition_points[1].origin_y = 0;\r\n            container.addition_points[1].origin_z = 0;\r\n        }\r\n        else{\r\n            repack_flag = false;\r\n            operator_selection = Math.random();\r\n            \r\n            if ( operator_selection < 0.3 ){\r\n\r\n                for( j = 1; j < container.item_cnt; j++ ){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if ( (solution.feasible === false && jItem.mandatory === 0) || (Math.random() < item_removal_probability) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n               \r\n            }\r\n            else if( operator_selection < 0.3 ){ // ???\r\n                max_z = 0;\r\n                for( j = 1 ; j <= container.item_cnt; j++){\r\n                    if( max_z < container.itemsGet(j).opposite_z ) max_z = container.itemsGet(j).opposite_z;\r\n                }\r\n                \r\n                max_z = max_z * (0.1 + 0.5 * percent_time_left * Math.random());\r\n                \r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if ( ((solution.feasible === false) && (jItem.mandatory === 0)) || (jItem.opposite_z < max_z) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                \r\n                max_z = 0;\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    if( max_z < container.itemsGet(j).opposite_z ) max_z = container.itemsGet(j).opposite_z;\r\n                }\r\n                \r\n                max_z = max_z * (0.6 - 0.5 * percent_time_left * Math.random());\r\n                \r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if( ((solution.feasible === false) && (jItem.mandatory === 0)) || (jItem.opposite_z > max_z) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if( repack_flag ){\r\n\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    if( container.itemsGet(j).item_type > 0 )\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(container.itemsGet(j).item_type).profit;\r\n                }\r\n                \r\n                solution.net_profit = solution.net_profit + container.cost;\r\n                solution.total_volume = solution.total_volume - container.volume_packed;\r\n                solution.total_weight = solution.total_weight - container.weight_packed;\r\n\r\n                for( j = 1;  j <= item_list.num_item_types; j++ ){\r\n                    container.repack_item_count[j] = 0;\r\n                }\r\n\r\n                for( j = 1 ; j <= container.item_cnt; j++ ){\r\n                    if( container.itemsGet(j).item_type > 0 )\r\n                        container.repack_item_count[container.itemsGet(j).item_type] = container.repack_item_countGet(container.itemsGet(j).item_type) + 1;\r\n                }\r\n\r\n                container.volume_packed = 0;\r\n                container.weight_packed = 0;\r\n                container.item_cnt = 0;\r\n                container.addition_point_count = 1;\r\n                container.addition_points[1].origin_x = 0;\r\n                container.addition_points[1].origin_y = 0;\r\n                container.addition_points[1].origin_z = 0;\r\n\r\n                // repack now\r\n\r\n                for( j = 1; j <= item_list.num_item_types; j++ ){\r\n                    continue_flag = true;\r\n                    while( (container.repack_item_countGet(solution.item_type_orderGet(j)) > 0) && continue_flag )\r\n                        continue_flag = AddItemToContainer(solution, container_id, solution.item_type_orderGet(j), 2, true);\r\n\r\n                    // put the remaining items in the unpacked items list\r\n\r\n                    solution.unpacked_item_count[solution.item_type_orderGet(j)] = solution.unpacked_item_countGet(solution.item_type_orderGet(j)) + container.repack_item_countGet(solution.item_type_orderGet(j));\r\n                    container.repack_item_count[solution.item_type_orderGet(j)] = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    // change the preferred rotation order randomly\r\n    \r\n    for( i = 1; i <= item_list.num_item_types; i++ ){\r\n        \r\n        for( j = 1; j <= 6; j++ ){\r\n            k = Math.floor((6 - j + 1) * Math.random() + j); // the order to swap with\r\n            \r\n            swap_long = solution.rotation_order[i][j];\r\n            solution.rotation_order[i][j] = solution.rotation_order[i][k];\r\n            solution.rotation_order[i][k] = swap_long;\r\n        }\r\n        // MsgBox (\"Item type \" + i + \" rotation order: \" + solution.rotation_order(i, 1) + solution.rotation_order(i, 2) + solution.rotation_order(i, 3) + solution.rotation_order(i, 4) + solution.rotation_order(i, 5) + solution.rotation_order(i, 6))\r\n    }\r\n    \r\n    // change the item order randomly - test\r\n\r\n    for( i = 1; i<= item_list.num_item_types; i++){\r\n        j = Math.floor((item_list.num_item_types - i + 1) * Math.random() + i) // the order to swap with\r\n\r\n        swap_long = solution.item_type_orderGet(i);\r\n        solution.item_type_order[i] = solution.item_type_orderGet(j);\r\n        solution.item_type_order[j] = swap_long;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} container_index \r\n * @param {Number} item_type_index \r\n * @param {Number} add_type \r\n * @param {Boolean} item_cohesion \r\n */\r\nfunction AddItemToContainer(solution, container_index, item_type_index, add_type, item_cohesion){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n\r\n    var rotation_index = 0;\r\n\r\n    var origin_x = 0;\r\n    var origin_y = 0;\r\n    var origin_z = 0;\r\n    var opposite_x = 0;\r\n    var opposite_y = 0;\r\n    var opposite_z = 0;\r\n\r\n    var min_x = 0;\r\n    var min_y = 0;\r\n    var min_z = 0;\r\n    var next_to_item_type = 0;\r\n\r\n    var candidate_position = 0;\r\n    var current_rotation = 0;\r\n    var candidate_rotation = 0;\r\n\r\n    var area_supported = 0;\r\n    var area_required = 0;\r\n    var intersection_right = 0;\r\n    var intersection_left = 0;\r\n    var intersection_top = 0;\r\n    var intersection_bottom = 0;\r\n    var support_flag = false;\r\n    \r\n    //With solution.containerGet(container_index)\r\n    var container = solution.containerGet(container_index);\r\n    \r\n    min_x = container.width + 1;\r\n    min_y = container.height + 1;\r\n    min_z = container.length + 1;\r\n    next_to_item_type = 0;\r\n    \r\n    candidate_position = 0;\r\n\r\n    var GoTo = false;\r\n    // compatibility check\r\n    if( !GoTo && instance.container_item_compatibility_worksheet === true ){\r\n        if( compatibility_list.container_to_itemGet(container.type_id, item_list.item_typesGet(item_type_index).id) === false )\r\n            GoTo = true; //'AddItemToContainer_Finish';\r\n    }\r\n    \r\n    // volume size check\r\n    if( !GoTo && container.volume_packed + item_list.item_typesGet(item_type_index).volume > container.volume_capacity )\r\n        GoTo = true; //'AddItemToContainer_Finish';\r\n    \r\n    // weight capacity check\r\n    if( !GoTo && container.weight_packed + item_list.item_typesGet(item_type_index).weight > container.weight_capacity )\r\n        GoTo = true; //'AddItemToContainer_Finish';\r\n    \r\n    // item to item compatibility check\r\n    if( !GoTo && instance.item_item_compatibility_worksheet === true ){\r\n        for( i = 1; i <= container.item_cnt; i++ ){\r\n            if( compatibility_list.item_to_itemGet(item_list.item_typesGet(item_type_index).id, item_list.item_typesGet(container.itemsGet(i).item_type).id) === false ){\r\n                GoTo = true; //'AddItemToContainer_Finish';\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if( !GoTo ){\r\n        for( rotation_index = 1; rotation_index <= 6; rotation_index++ ){\r\n            current_rotation = solution.rotation_order[item_type_index][rotation_index];\r\n\r\n            // forbidden rotations\r\n            if( ((current_rotation === 3) || (current_rotation === 4)) && (item_list.item_typesGet(item_type_index).xy_rotatable === false) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( ((current_rotation === 5) || (current_rotation === 6)) && (item_list.item_typesGet(item_type_index).yz_rotatable === false) ){\r\n                //GoTo  = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            // symmetry breaking\r\n\r\n            if( (current_rotation === 2) && (Math.abs(item_list.item_typesGet(item_type_index).width - item_list.item_typesGet(item_type_index).length) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( (current_rotation === 4) && (Math.abs(item_list.item_typesGet(item_type_index).width - item_list.item_typesGet(item_type_index).height) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( (current_rotation === 6) && (Math.abs(item_list.item_typesGet(item_type_index).height - item_list.item_typesGet(item_type_index).length) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            for( i = 1; i <= container.addition_point_count; i++ ){\r\n\r\n                if( (item_cohesion === true) && (candidate_position != 0) && (next_to_item_type === item_type_index) && (container.addition_pointsGet(i).next_to_item_type != item_type_index) ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                origin_x = container.addition_pointsGet(i).origin_x;\r\n                origin_y = container.addition_pointsGet(i).origin_y;\r\n                origin_z = container.addition_pointsGet(i).origin_z;\r\n                \r\n                if( current_rotation === 1 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).length;\r\n                } else if ( current_rotation === 2 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).width;\r\n                } else if ( current_rotation === 3 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).height;\r\n                } else if ( current_rotation === 4 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).width;\r\n                } else if ( current_rotation === 5 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).length;\r\n                } else if ( current_rotation === 6 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).height;\r\n                }\r\n\r\n                // check the feasibility of all four corners, w.r.t to the other items\r\n\r\n                if( (opposite_x > container.width + epsilon) || (opposite_y > container.height + epsilon) || (opposite_z > container.length + epsilon) ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                } \r\n                \r\n                let next_iteration = false;\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n\r\n                    if( (opposite_x < container.itemsGet(j).origin_x + epsilon) ||\r\n                        (container.itemsGet(j).opposite_x < origin_x + epsilon) ||\r\n                        (opposite_y < container.itemsGet(j).origin_y + epsilon) ||\r\n                        (container.itemsGet(j).opposite_y < origin_y + epsilon) ||\r\n                        (opposite_z < container.itemsGet(j).origin_z + epsilon) ||\r\n                        (container.itemsGet(j).opposite_z < origin_z + epsilon) ){\r\n                        // no conflict\r\n                    } else {\r\n                        // conflict\r\n                        //GoTo = 'next_iteration';\r\n                        next_iteration = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if( next_iteration ){\r\n                    continue;\r\n                }\r\n\r\n                // vertical support\r\n\r\n                if( origin_y < epsilon ){\r\n                    support_flag = true;\r\n                } else {\r\n                    area_supported = 0;\r\n                    area_required = ((opposite_x - origin_x) * (opposite_z - origin_z));\r\n                    support_flag = false;\r\n                    for( j = container.item_cnt; j >= 1; j-- ){\r\n                        if( (Math.abs(origin_y - container.itemsGet(j).opposite_y) < epsilon) ){\r\n                            // check for intersection\r\n\r\n                            intersection_right = opposite_x;\r\n                            if( intersection_right > container.itemsGet(j).opposite_x ) intersection_right = container.itemsGet(j).opposite_x;\r\n                            \r\n                            intersection_left = origin_x;\r\n                            if( intersection_left < container.itemsGet(j).origin_x ) intersection_left = container.itemsGet(j).origin_x;\r\n                            \r\n                            intersection_top = opposite_z;\r\n                            if( intersection_top > container.itemsGet(j).opposite_z ) intersection_top = container.itemsGet(j).opposite_z;\r\n                            \r\n                            intersection_bottom = origin_z;\r\n                            if( intersection_bottom < container.itemsGet(j).origin_z ) intersection_bottom = container.itemsGet(j).origin_z;\r\n                            \r\n                            if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                if( area_supported > area_required - epsilon ){\r\n                                    support_flag = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                if( support_flag === false ){ \r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                // side support\r\n\r\n                if( instance.front_side_support === true ){\r\n                    if( origin_z < epsilon ){\r\n                        support_flag = true;\r\n                    } else {\r\n                        area_supported = 0;\r\n                        area_required = ((opposite_x - origin_x) * (opposite_y - origin_y));\r\n                        support_flag = false;\r\n                        for( j = container.item_cnt; j >= 1; j-- ){\r\n                            if( (Math.abs(origin_z - container.itemsGet(j).opposite_z) < epsilon) ){\r\n                                // check for intersection\r\n                            \r\n                                intersection_right = opposite_x;\r\n                                if( intersection_right > container.itemsGet(j).opposite_x ) intersection_right = container.itemsGet(j).opposite_x;\r\n                                \r\n                                intersection_left = origin_x;\r\n                                if( intersection_left < container.itemsGet(j).origin_x ) intersection_left = container.itemsGet(j).origin_x;\r\n                                \r\n                                intersection_top = opposite_y;\r\n                                if( intersection_top > container.itemsGet(j).opposite_y ) intersection_top = container.itemsGet(j).opposite_y;\r\n                                \r\n                                intersection_bottom = origin_y;\r\n                                if( intersection_bottom < container.itemsGet(j).origin_y ) intersection_bottom = container.itemsGet(j).origin_y;\r\n                                \r\n                                if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                    area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                    if( area_supported > area_required - epsilon ){\r\n                                        support_flag = true;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            \r\n                            }\r\n                        }\r\n                    \r\n                    }\r\n                }\r\n\r\n                if( support_flag === false ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                // no conflicts at this point\r\n                \r\n                if( (item_cohesion === true) && (next_to_item_type != item_type_index) && (container.addition_pointsGet(i).next_to_item_type === item_type_index) ){\r\n                   min_x = origin_x;\r\n                   min_y = origin_y;\r\n                   min_z = origin_z;\r\n                   candidate_position = i;\r\n                   candidate_rotation = current_rotation;\r\n                   next_to_item_type = container.addition_pointsGet(i).next_to_item_type;\r\n                } else {\r\n                    if( (origin_z < min_z) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y < min_y)) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y <= min_y + epsilon) && (origin_x < min_x)) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y <= min_y + epsilon) && (origin_x <= min_x + epsilon) && ((opposite_x > container.width + epsilon) || (opposite_y > container.height + epsilon))) ){\r\n                       min_x = origin_x;\r\n                       min_y = origin_y;\r\n                       min_z = origin_z;\r\n                       candidate_position = i;\r\n                       candidate_rotation = current_rotation;\r\n                       next_to_item_type = container.addition_pointsGet(i).next_to_item_type;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n// next_iteration: Next i\r\n// next_rotation_iteration: Next rotation_index\r\n    \r\n// AddItemToContainer_Finish:\r\n\r\n    if( candidate_position === 0 ){\r\n        return false;\r\n    } else {\r\n        //With solution.containerGet(container_index)\r\n        let container = solution.containerGet(container_index);\r\n            container.item_cnt = container.item_cnt + 1;\r\n            container.itemsGet(container.item_cnt).item_type = item_type_index;\r\n            container.itemsGet(container.item_cnt).origin_x = container.addition_pointsGet(candidate_position).origin_x;\r\n            container.itemsGet(container.item_cnt).origin_y = container.addition_pointsGet(candidate_position).origin_y;\r\n            container.itemsGet(container.item_cnt).origin_z = container.addition_pointsGet(candidate_position).origin_z;\r\n            container.itemsGet(container.item_cnt).rotation = candidate_rotation;\r\n            container.itemsGet(container.item_cnt).mandatory = item_list.item_typesGet(item_type_index).mandatory;\r\n            \r\n            if( candidate_rotation === 1 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).length;\r\n            } else if ( candidate_rotation === 2 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).width;\r\n            } else if ( candidate_rotation === 3 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).height;\r\n            } else if ( candidate_rotation === 4 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).width;\r\n            } else if ( candidate_rotation === 5 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).length;\r\n            } else if ( candidate_rotation === 6 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).height;\r\n            }\r\n            \r\n            container.volume_packed = container.volume_packed + item_list.item_typesGet(item_type_index).volume;\r\n            container.weight_packed = container.weight_packed + item_list.item_typesGet(item_type_index).weight;\r\n\r\n            if( add_type === 2 ){\r\n                container.repack_item_count[item_type_index] = container.repack_item_countGet(item_type_index) - 1;\r\n            }\r\n            \r\n            // update the addition points\r\n            \r\n            for( i = candidate_position; i <= container.addition_point_count - 1; i++){\r\n                container.addition_points[i] = container.addition_pointsGet(i + 1);\r\n            }\r\n            \r\n            container.addition_point_count = container.addition_point_count - 1;\r\n            \r\n            if( (container.itemsGet(container.item_cnt).opposite_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).origin_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).origin_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).opposite_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).origin_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).origin_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index;\r\n            }\r\n            \r\n            if( (container.itemsGet(container.item_cnt).origin_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).opposite_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).origin_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).origin_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).opposite_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).origin_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index;\r\n            }\r\n            \r\n            if( (container.itemsGet(container.item_cnt).origin_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).origin_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).opposite_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).origin_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).origin_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).opposite_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index     ;    \r\n            }\r\n            \r\n        \r\n        //With solution\r\n            // update the profit\r\n            \r\n            if( solution.containerGet(container_index).item_cnt === 1 ){\r\n                solution.net_profit = solution.net_profit + item_list.item_typesGet(item_type_index).profit - solution.containerGet(container_index).cost;\r\n            } else {\r\n                solution.net_profit = solution.net_profit + item_list.item_typesGet(item_type_index).profit;\r\n            }\r\n            \r\n            // update the volume per container and the total volume\r\n            \r\n            solution.total_volume = solution.total_volume + item_list.item_typesGet(item_type_index).volume;\r\n            solution.total_weight = solution.total_weight + item_list.item_typesGet(item_type_index).weight;\r\n            \r\n            // update the unpacked items\r\n            \r\n            if( add_type === 1 ){\r\n                solution.unpacked_item_count[item_type_index] = solution.unpacked_item_countGet(item_type_index) - 1;\r\n            }\r\n        \r\n        return true;\r\n    }\r\n\r\n    return false;\r\n    \r\n}\r\n\r\n/**\r\n * @typedef SolverOptions\r\n * @property {Number} itemSortCriterion - 1:Volume, 2:Weight, 3:MaxDim\r\n * @property {Boolean} showProgress\r\n * @property {Number} cpuTimeLimit - in seconds\r\n * \r\n * @param {SolverOptions} options \r\n */\r\nfunction GetSolverOptions(options){\r\n    if(options){\r\n        solver_options.item_sort_criterion = options.itemSortCriterion;\r\n        solver_options.show_progress = options.showProgress;\r\n        solver_options.CPU_time_limit = options.cpuTimeLimit;\r\n    }\r\n    else{\r\n        ThisWorkbook.Worksheets(\"CLP Solver Console\").Activate;\r\n        \r\n        //With solver_options\r\n            \r\n        if( Cells(12, 3).Value === \"Volume\" ){\r\n            solver_options.item_sort_criterion = 1;\r\n        } else if ( Cells(12, 3).Value === \"Weight\" ){\r\n            solver_options.item_sort_criterion = 2;\r\n        } else {\r\n            solver_options.item_sort_criterion = 3;\r\n        }\r\n        \r\n        if( Cells(13, 3).Value === \"Yes\" ){\r\n            solver_options.show_progress = true;\r\n        } else {\r\n            solver_options.show_progress = false;\r\n        }\r\n        \r\n        solver_options.CPU_time_limit = Cells(14, 3).Value;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef ItemData\r\n * @property {Number} length\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Boolean} xyRotatable\r\n * @property {Boolean} yzRotatable\r\n * @property {Number} weight\r\n * @property {Number} mandatory\r\n * @property {Number} profit\r\n * @property {Number} quantity\r\n * \r\n * @param {Array<ItemData>} itemsData \r\n */\r\nfunction GetItemData(itemsData){\r\n\r\n    var numItemTypes;\r\n\r\n    if(itemsData){\r\n        numItemTypes = itemsData.length;\r\n    }\r\n    else{\r\n        numItemTypes = ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(2, 3).Value;\r\n        ThisWorkbook.Worksheets(\"1.Items\").Activate;\r\n    }\r\n    item_list.num_item_types = numItemTypes;\r\n    item_list.total_number_of_items = 0;\r\n    \r\n    item_list.item_types = [null];\r\n    var i = 0;\r\n    for(i = 1; i <= item_list.num_item_types; i++){\r\n        item_list.item_types.push(new item_type_data());\r\n    }\r\n    \r\n    var max_volume = 0;\r\n    var max_weight = 0;\r\n    \r\n    if(itemsData){\r\n        if(itemsData[0] !== null) itemsData.unshift(null);\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            let item = itemsData[i];\r\n            item_list.item_typesGet(i).id = i;\r\n            \r\n            item_list.item_typesGet(i).width = item.width;\r\n            item_list.item_typesGet(i).height = item.height;\r\n            item_list.item_typesGet(i).length = item.length;\r\n            \r\n            item_list.item_typesGet(i).volume = item.width * item.height * item.length;\r\n            \r\n            if( max_volume < item_list.item_typesGet(i).volume ){\r\n                max_volume = item_list.item_typesGet(i).volume;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).xy_rotatable = item.xyRotatable;\r\n            item_list.item_typesGet(i).yz_rotatable = item.yzRotatable;\r\n            \r\n            if( (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).height) < epsilon) && (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).length) < epsilon) ){\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).weight = item.weight;\r\n            \r\n            if( max_weight < item_list.item_typesGet(i).weight ){\r\n                max_weight = item_list.item_typesGet(i).weight;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).mandatory = item.mandatory;\r\n            \r\n            item_list.item_typesGet(i).profit = item.profit;\r\n            \r\n            item_list.item_typesGet(i).number_requested = item.quantity;\r\n            \r\n            item_list.total_number_of_items = item_list.total_number_of_items + item_list.item_typesGet(i).number_requested;\r\n        \r\n        }\r\n    }\r\n    else{\r\n        //With item_list\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            item_list.item_typesGet(i).id = i;\r\n            \r\n            item_list.item_typesGet(i).width = Cells(2 + i, 4).Value;\r\n            item_list.item_typesGet(i).height = Cells(2 + i, 5).Value;\r\n            item_list.item_typesGet(i).length = Cells(2 + i, 6).Value;\r\n            \r\n            item_list.item_typesGet(i).volume = Cells(2 + i, 7).Value;\r\n            \r\n            if( max_volume < item_list.item_typesGet(i).volume ){\r\n                max_volume = item_list.item_typesGet(i).volume;\r\n            }\r\n            \r\n            if( Cells(2 + i, 9).Value === \"Yes\" ){\r\n                item_list.item_typesGet(i).xy_rotatable = true;\r\n            } else {\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n            }\r\n            \r\n            if( Cells(2 + i, 10).Value === \"Yes\" ){\r\n                item_list.item_typesGet(i).yz_rotatable = true;\r\n            } else {\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            if( (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).height) < epsilon) && (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).length) < epsilon) ){\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).weight = Cells(2 + i, 11).Value;\r\n            \r\n            if( max_weight < item_list.item_typesGet(i).weight ){\r\n                max_weight = item_list.item_typesGet(i).weight;\r\n            }\r\n            \r\n            if( Cells(2 + i, 12).Value === \"Must be packed\" ){\r\n                item_list.item_typesGet(i).mandatory = 1;\r\n            } else if ( Cells(2 + i, 12).Value === \"May be packed\" ){\r\n                item_list.item_typesGet(i).mandatory = 0;\r\n            } else if ( Cells(2 + i, 12).Value === \"Don't pack\" ){\r\n                item_list.item_typesGet(i).mandatory = -1;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).profit = Cells(2 + i, 13).Value;\r\n            \r\n            item_list.item_typesGet(i).number_requested = Cells(2 + i, 14).Value;\r\n            \r\n            item_list.total_number_of_items = item_list.total_number_of_items + item_list.item_typesGet(i).number_requested;\r\n        \r\n        }\r\n    }\r\n    \r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n    \r\n        if( solver_options.item_sort_criterion === 1 ){\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).volume * (max_weight + 1) + item_list.item_typesGet(i).weight;\r\n        } else if ( solver_options.item_sort_criterion === 2 ){\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).weight * (max_volume + 1) + item_list.item_typesGet(i).volume;\r\n        } else {\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).width;\r\n            if( item_list.item_typesGet(i).sort_criterion < item_list.item_typesGet(i).height ){\r\n                item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).height;\r\n            }\r\n            if( item_list.item_typesGet(i).sort_criterion < item_list.item_typesGet(i).length ){\r\n                item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).length;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).sort_criterion * (max_volume + 1) + item_list.item_typesGet(i).volume;\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n/**\r\n * @typedef ContainerData\r\n * @property {Number} length\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} weightCapacity\r\n * @property {Number} mandatory\r\n * @property {Number} cost\r\n * @property {Number} quantity\r\n * \r\n * @param {Array<ContainerData>} containersData \r\n */\r\nfunction GetContainerData(containersData){\r\n\r\n    var numContainerTypes;\r\n    if(containersData){\r\n        numContainerTypes = containersData.length;\r\n    }\r\n    else{\r\n        numContainerTypes = ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(4, 3).Value;\r\n        ThisWorkbook.Worksheets(\"2.Containers\").Activate;\r\n    }\r\n\r\n    container_list.num_container_types = numContainerTypes;\r\n    \r\n    container_list.container_types = [null];\r\n    var i = 0;\r\n    for(i = 1; i <= container_list.num_container_types; i++){\r\n        container_list.container_types.push(new container_type_data());\r\n    }\r\n    \r\n    if(containersData){\r\n        containersData.unshift(null);\r\n        for( i = 1; i <= container_list.num_container_types; i++){\r\n            let container = containersData[i];\r\n            \r\n            container_list.container_typesGet(i).type_id = i;\r\n            \r\n            container_list.container_typesGet(i).width = container.width;\r\n            container_list.container_typesGet(i).height = container.height;\r\n            container_list.container_typesGet(i).length = container.length;\r\n            \r\n            container_list.container_typesGet(i).volume_capacity = container.width * container.height * container.length;\r\n            container_list.container_typesGet(i).weight_capacity = container.weightCapacity;\r\n            \r\n            container_list.container_typesGet(i).mandatory = container.mandatory;\r\n            \r\n            container_list.container_typesGet(i).cost = container.cost;\r\n            \r\n            container_list.container_typesGet(i).number_available = container.quantity;\r\n        }\r\n    }\r\n    else{\r\n        //With container_list\r\n        for( i = 1; i <= container_list.num_container_types; i++){\r\n            \r\n            container_list.container_typesGet(i).type_id = i;\r\n            \r\n            container_list.container_typesGet(i).width = Cells(1 + i, 3).Value;\r\n            container_list.container_typesGet(i).height = Cells(1 + i, 4).Value;\r\n            container_list.container_typesGet(i).length = Cells(1 + i, 5).Value;\r\n            \r\n            container_list.container_typesGet(i).volume_capacity = Cells(1 + i, 6).Value;\r\n            container_list.container_typesGet(i).weight_capacity = Cells(1 + i, 7).Value;\r\n            \r\n            if( Cells(1 + i, 8).Value === \"Must be used\" ){\r\n                container_list.container_typesGet(i).mandatory = 1;\r\n            } else if ( Cells(1 + i, 8).Value === \"May be used\" ){\r\n                container_list.container_typesGet(i).mandatory = 0;\r\n            } else if ( Cells(1 + i, 8).Value === \"Do not use\" ){\r\n                container_list.container_typesGet(i).mandatory = -1;\r\n            }\r\n            \r\n            container_list.container_typesGet(i).cost = Cells(1 + i, 9).Value;\r\n            \r\n            container_list.container_typesGet(i).number_available = Cells(1 + i, 10).Value;\r\n        \r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction GetCompatibilityData(){\r\n\r\n    /*\r\n    \r\n    //With compatibility_list\r\n        \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n\r\n    if( instance.item_item_compatibility_worksheet === true ){\r\n    \r\n        compatibility_list.item_to_item = [[]];\r\n        \r\n        for( i = 1; i <= item_list.num_item_types; i++) {\r\n            for( j = 1; j <= item_list.num_item_types; j++ ){\r\n                item_list.item_to_item[i][j] = true;\r\n            }\r\n        }\r\n        \r\n        k = 3;\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            for( j = i + 1; j <= item_list.num_item_types; j++){\r\n                if( ThisWorkbook.Worksheets(\"1.3.Item-Item Compatibility\").Cells(k, 3) === \"No\" ){\r\n                    item_list.item_to_item[i][j] = false;\r\n                    item_list.item_to_item[j][i] = false;\r\n                }\r\n                k = k + 1;\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n    if( instance.container_item_compatibility_worksheet = true ){\r\n    \r\n        Re var .container_to_itemGet(1; <=container_list.num_container_types, 1; <=item_list.num_item_types)\r\n        \r\n        for( i = 1; <=container_list.num_container_types\r\n            for( j = 1; <=item_list.num_item_types\r\n            \r\n                .container_to_itemGet(i, j) = true\r\n                \r\n            }\r\n        }\r\n        \r\n        k = 3\r\n        for( i = 1; <=container_list.num_container_types\r\n            for( j = 1; <=item_list.num_item_types\r\n            \r\n                if( ThisWorkbook.Worksheets(\"2.3.Container-ItemCompatibility\").Cells(k, 3) = \"No\" ){\r\n                    .container_to_itemGet(i, j) = false\r\n                }\r\n                    \r\n                k = k + 1\r\n            }\r\n        }\r\n        \r\n    }\r\n    */\r\n}\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n */\r\nfunction InitializeSolution(solution){\r\n    \r\n     var i = 0;\r\n     var j = 0;\r\n     var k = 0;\r\n     var l = 0;\r\n    \r\n    //With solution\r\n    solution.feasible = false;\r\n    solution.net_profit = 0;\r\n    solution.total_volume = 0;\r\n    solution.total_weight = 0;\r\n    solution.total_distance = 0;\r\n    solution.total_x_moment = 0;\r\n    solution.total_yz_moment = 0;\r\n    \r\n    solution.num_containers = 0;\r\n    for( i = 1; i <= container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            solution.num_containers = solution.num_containers + container_list.container_typesGet(i).number_available;\r\n        }\r\n    }\r\n    \r\n    solution.rotation_order = [null];\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        solution.rotation_order[i] = [null];\r\n        for( j = 1; j<=6; j++){\r\n           solution.rotation_order[i][j] = j;\r\n        }\r\n    }\r\n    \r\n    solution.item_type_order = [null];\r\n    for( i = 1; i<=item_list.num_item_types; i++){\r\n       solution.item_type_order[i] = i;\r\n    }\r\n    \r\n    solution.container = [null];\r\n    for( i = 1; i <= solution.num_containers; i++){\r\n        solution.container[i] = new container_data();\r\n\r\n        solution.containerGet(i).items = [null];\r\n        for(j = 1; j <= item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).items.push(new item_in_container());\r\n\r\n        solution.containerGet(i).addition_points = [null];\r\n        for(j = 1; j <= 3 * item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).addition_points.push(new item_location());\r\n\r\n        solution.containerGet(i).repack_item_count = [null];\r\n        for(j = 1; j <= item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).repack_item_count.push(0);\r\n    }\r\n    \r\n    solution.unpacked_item_count = [null];\r\n    \r\n    l = 1;\r\n    for( i = 1; i<=container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            for( j = 1; j<=container_list.container_typesGet(i).number_available; j++){\r\n                \r\n               solution.containerGet(l).width = container_list.container_typesGet(i).width;\r\n               solution.containerGet(l).height = container_list.container_typesGet(i).height;\r\n               solution.containerGet(l).length = container_list.container_typesGet(i).length;\r\n               solution.containerGet(l).volume_capacity = container_list.container_typesGet(i).volume_capacity;\r\n               solution.containerGet(l).weight_capacity = container_list.container_typesGet(i).weight_capacity;\r\n               solution.containerGet(l).cost = container_list.container_typesGet(i).cost;\r\n               solution.containerGet(l).mandatory = container_list.container_typesGet(i).mandatory;\r\n               solution.containerGet(l).type_id = i;\r\n               solution.containerGet(l).volume_packed = 0;\r\n               solution.containerGet(l).weight_packed = 0;\r\n               solution.containerGet(l).item_cnt = 0;\r\n                \r\n               solution.containerGet(l).addition_point_count = 1;\r\n                \r\n                for( k = 1; k<=item_list.total_number_of_items; k++){\r\n                   solution.containerGet(l).itemsGet(k).item_type = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_x = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_y = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_z = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).next_to_item_type = 0;\r\n                }\r\n                \r\n                for( k = 1; k<=item_list.total_number_of_items; k++){\r\n                   solution.containerGet(l).repack_item_count[k] = 0;\r\n                }\r\n                \r\n                l = l + 1;\r\n            }\r\n        }\r\n    }\r\n    \r\n    for( i = 1; i<=item_list.num_item_types; i++){\r\n       solution.unpacked_item_count[i] = item_list.item_typesGet(i).number_requested;\r\n    }\r\n        \r\n}\r\n\r\nfunction GetInstanceData(){\r\n    \r\n    if( ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(6, 3).Value === \"Yes\" ){\r\n        instance.front_side_support = true;\r\n    } else {\r\n        instance.front_side_support = false;\r\n    }\r\n    \r\n    if( CheckWorksheetExistence(\"1.3.Item-Item Compatibility\") === true ){\r\n        instance.item_item_compatibility_worksheet = true;\r\n    } else {\r\n        instance.item_item_compatibility_worksheet = false;\r\n    }\r\n        \r\n    if( CheckWorksheetExistence(\"2.3.Container-ItemCompatibility\") === true ){\r\n        instance.container_item_compatibility_worksheet = true;\r\n    } else {\r\n        instance.container_item_compatibility_worksheet = false;\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction WriteSolution(solution){\r\n\r\n    //Application.ScreenUpdating = False\r\n    //Application.Calculation = xlCalculationManual\r\n            \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n\r\n    var container_index = 0;\r\n\r\n    /** @type {container_data} */\r\n    var swap_container;\r\n    \r\n    // sort the containers\r\n    \r\n    for( i = 1; i<=solution.num_containers; i++){\r\n        for( j = solution.num_containers; j >= 2; j--){\r\n            if( (solution.containerGet(j).type_id < solution.containerGet(j - 1).type_id) ||\r\n                ((solution.containerGet(j).type_id === solution.containerGet(j - 1).type_id) && (solution.containerGet(j).volume_packed > solution.containerGet(j - 1).volume_packed)) ){\r\n                swap_container = solution.containerGet(j);\r\n                solution.container[j] = solution.containerGet(j - 1);\r\n                solution.container[j - 1] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    \r\n    ThisWorkbook.Worksheets(\"3.Solution\").Activate;\r\n\r\n    if( solution.feasible === false ){\r\n        Cells(2, 1).Value = \"Warning: Last solution returned by the solver does not satisfy all constraints.\";\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.ColorIndex = 45;\r\n    } else {\r\n        Cells(2, 1).Value = 0;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.Pattern = xlNone;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.TintAndShade = 0;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.PatternTintAndShade = 0;\r\n    }\r\n    \r\n    var offset = 0;\r\n    \r\n    offset = 0;\r\n    container_index = 1;\r\n    \r\n    //With solution\r\n    \r\n    for( i = 1; i<=container_list.num_container_types; i++){\r\n    \r\n        for( j = 1; j<=container_list.container_typesGet(i).number_available; j++){\r\n\r\n            Range(Cells(6, offset + 2), Cells(5 + 2 * item_list.total_number_of_items, offset + 2)).Value = 0;\r\n            Range(Cells(6, offset + 3), Cells(5 + 2 * item_list.total_number_of_items, offset + 5)).ClearContents;\r\n            Range(Cells(6, offset + 6), Cells(5 + 2 * item_list.total_number_of_items, offset + 6)).Value = 0;\r\n            \r\n            if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n                Cells(3, 'B', solution.containerGet(container_index).item_cnt);\r\n                for( k = 1; k <= solution.containerGet(container_index).item_cnt; k++){\r\n                    Cells(5 + k, offset + 2).Value = ThisWorkbook.Worksheets(\"1.Items\").Cells(2 + item_list.item_typesGet(solution.containerGet(container_index).itemsGet(k).item_type).id, 2).Value;\r\n                    Cells(5 + k, offset + 3).Value = solution.containerGet(container_index).itemsGet(k).origin_x;\r\n                    Cells(5 + k, offset + 4).Value = solution.containerGet(container_index).itemsGet(k).origin_y;\r\n                    Cells(5 + k, offset + 5).Value = solution.containerGet(container_index).itemsGet(k).origin_z;\r\n                    if(solution.containerGet(container_index).itemsGet(k).rotation === 1 ){\r\n                        Cells(5 + k, offset + 6).Value = \"xyz\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 2 ){\r\n                        Cells(5 + k, offset + 6).Value = \"zyx\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 3 ){\r\n                        Cells(5 + k, offset + 6).Value = \"xzy\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 4 ){\r\n                        Cells(5 + k, offset + 6).Value = \"yzx\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 5 ){\r\n                        Cells(5 + k, offset + 6).Value = \"yxz\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 6 ){\r\n                        Cells(5 + k, offset + 6).Value = \"zxy\";\r\n                    }\r\n                }\r\n                    \r\n                container_index = container_index + 1;\r\n            }\r\n            \r\n            offset = offset + 11;\r\n        }\r\n    }\r\n\r\n    signaler.Dispatch(signals.solution, solution);\r\n    \r\n    //Application.ScreenUpdating = true\r\n    //Application.Calculation = xlCalculationAutomatic\r\n}\r\n\r\n/**\r\n * \r\n * @param {Array<SolverOptions>} solverOptions \r\n * @param {Array<ItemData>} itemsData \r\n * @param {Array<ContainerData>} containersData \r\n */\r\nfunction CLP_Solver(solverOptions, itemsData, containersData){\r\n\r\n    //Application.ScreenUpdating = false\r\n    //Application.Calculation = xlCalculationManual\r\n    \r\n    var WorksheetExists = false;\r\n    var reply = 0;\r\n\r\n    GetSolverOptions(solverOptions);\r\n    \r\n    WorksheetExists = CheckWorksheetExistence(\"1.Items\") && CheckWorksheetExistence(\"2.Containers\") && CheckWorksheetExistence(\"3.Solution\");\r\n    if( (!solverOptions || !itemsData || !containersData) && WorksheetExists === false ){\r\n        Application.Alert(\"Worksheets 1.Items, 2.Containers, and 3.Solution must exist for the CLP Spreadsheet Solver to function.\");\r\n        //Application.ScreenUpdating = true\r\n        //Application.Calculation = xlCalculationAutomatic\r\n        return;\r\n    } else {\r\n        reply = Application.Confirm(\"This will take \" + solver_options.CPU_time_limit + \" seconds. Do you want to continue?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply === false ){\r\n            //Application.ScreenUpdating = true\r\n            //Application.Calculation = xlCalculationAutomatic\r\n            return;\r\n        }\r\n    }\r\n    \r\n    //Application.EnableCancelKey = xlErrorHandler\r\n    //On Error GoTo CLP_Solver_Finish\r\n    \r\n    // Allocate memory and get the data\r\n    \r\n    GetItemData(itemsData);\r\n    GetContainerData(containersData);\r\n    //GetInstanceData();\r\n    //GetCompatibilityData();\r\n    SortItems();\r\n    \r\n    var incumbent = new solution_data();\r\n    InitializeSolution(incumbent);\r\n    \r\n    var best_known = new solution_data();\r\n    InitializeSolution(best_known);\r\n    best_known = incumbent;\r\n    \r\n    var iteration = 0;\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var l = 0;\r\n\r\n    var nonempty_container_cnt = 0;\r\n    var container_id = 0;\r\n\r\n    var start_time = 0;\r\n    var end_time = 0;\r\n\r\n    var continue_flag = false;\r\n    var sort_criterion = 0;\r\n    var selected_rotation = 0;\r\n    \r\n    // infeasibility check    \r\n\r\n    var fcData = FeasibilityCheckData();\r\n    var infeasibility_count = fcData.infeasibility_count;\r\n    var infeasibility_string = fcData.infeasibility_string;\r\n\r\n    if( infeasibility_count > 0 ){\r\n        reply = Application.Confirm(\"Infeasibilities detected. \" + infeasibility_string + \" Do you want to continue?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply === false ){\r\n            //Application.ScreenUpdating = true\r\n            //Application.Calculation = xlCalculationAutomatic\r\n            return;\r\n        }\r\n    }\r\n    \r\n    start_time = performance.now() / 1000.0;\r\n    end_time = start_time;\r\n        \r\n    // constructive phase\r\n    \r\n    if( solver_options.show_progress === true ){\r\n        Application.ScreenUpdating = true\r\n        Application.StatusBar = \"Constructive phase...\"\r\n        Application.ScreenUpdating = false\r\n    } else {\r\n        Application.ScreenUpdating = true\r\n        Application.StatusBar = \"LNS algorithm running...\"\r\n        Application.ScreenUpdating = false\r\n    }\r\n    \r\n    SortContainers(incumbent, 0);\r\n    \r\n    for( i = 1; i <= incumbent.num_containers; i++){\r\n        // sort the rotation order for this container\r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n            sort_criterion = 0;\r\n            selected_rotation = 0;\r\n            \r\n            if( sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height);\r\n                selected_rotation = 1;\r\n            }\r\n            \r\n            if( sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height);\r\n                selected_rotation = 2;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).xy_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length);\r\n                selected_rotation = 3;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).xy_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length)) ){\r\n                sort_criterion = sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length);\r\n                selected_rotation = 4;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).yz_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width);\r\n                selected_rotation = 5;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).yz_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width);\r\n                selected_rotation = 6;\r\n            }\r\n            \r\n            if( selected_rotation === 0 ){\r\n                selected_rotation = 1;\r\n            }\r\n            \r\n            incumbent.rotation_order[j][1] = selected_rotation;\r\n            incumbent.rotation_order[j][selected_rotation] = 1;\r\n        }\r\n        \r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n        \r\n            continue_flag = true;\r\n            while ( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && continue_flag ){\r\n                continue_flag = AddItemToContainer(incumbent, i, incumbent.item_type_orderGet(j), 1, false);\r\n            }\r\n        }\r\n        \r\n        incumbent.feasible = true;\r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n            if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                incumbent.feasible = false;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        CalculateDispersion(incumbent);\r\n\r\n        if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n           ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n           ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n           ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ){\r\n\r\n            best_known = incumbent;\r\n            \r\n        }\r\n        \r\n    }\r\n    \r\n    // GoTo CLP_Solver_Finish\r\n\r\n    // end_time = Timer\r\n    // MsgBox \"Constructive phase result: \" + best_known.net_profit + \" time: \" + end_time - start_time\r\n\r\n    // improvement phase\r\n\r\n    iteration = 0;\r\n\r\n    //Do\r\n    do {\r\n        //DoEvents\r\n        if( (solver_options.show_progress === true) && (iteration % 100 === 0) ){\r\n            //Application.ScreenUpdating = true\r\n            if( best_known.feasible === true ){\r\n                Application.StatusBar = \"Starting iteration \" + iteration + \". Best net profit found so far: \" + best_known.net_profit + \" Dispersion: \" + best_known.total_distance;\r\n            } else {\r\n                Application.StatusBar = \"Starting iteration \" + iteration + \". Best net profit found so far: N/A\" + \" Dispersion: \" + best_known.total_distance;\r\n            }\r\n            Application.ScreenUpdating = false\r\n        }\r\n\r\n        if( Math.random() < 0.5 ){ // < ((end_time - start_time) / solver_options.CPU_time_limit) ^ 2 ){\r\n\r\n            incumbent = best_known;\r\n\r\n        }\r\n        \r\n        //With incumbent\r\n        for( i = 1; i <= incumbent.num_containers; i++){\r\n            PerturbSolution(incumbent, i, 1 - ((end_time - start_time) / solver_options.CPU_time_limit));\r\n        } \r\n        \r\n        SortContainers(incumbent, 0.2);\r\n\r\n        //With incumbent\r\n        for( i = 1; i <= incumbent.num_containers; i++){\r\n            for( j = 1; j <= item_list.num_item_types; j++){\r\n                continue_flag = true;\r\n                while ( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && (continue_flag === true) ){\r\n                    continue_flag = AddItemToContainer(incumbent, i, incumbent.item_type_orderGet(j), 1, false);\r\n                    //DoEvents\r\n                }\r\n            }\r\n    \r\n            incumbent.feasible = true;\r\n            for( j = 1; j <= item_list.num_item_types; j++){\r\n                if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                    incumbent.feasible = false;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            CalculateDispersion(incumbent);\r\n            \r\n            if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n               ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance - epsilon) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment - epsilon) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment + epsilon) && (incumbent.total_yz_moment < best_known.total_yz_moment - epsilon) ){\r\n    \r\n                best_known = incumbent;\r\n            }\r\n        }\r\n\r\n        iteration = iteration + 1;\r\n        \r\n        end_time = performance.now() / 1000.0;\r\n        \r\n        /* WILL NEVER HAPPEN ? chadik\r\n        if( end_time < start_time - 0.01 ){\r\n            solver_options.CPU_time_limit = solver_options.CPU_time_limit - (86400 - start_time)\r\n            start_time = end_time\r\n        }\r\n        */\r\n        \r\n    }\r\n    while( end_time - start_time < solver_options.CPU_time_limit / 3 );\r\n    \r\n    // reorganize now\r\n\r\n    CalculateDistance(best_known);\r\n\r\n    nonempty_container_cnt = 0;\r\n    //With best_known\r\n    for( i = 1; i <= best_known.num_containers; i++){\r\n        if( best_known.containerGet(i).item_cnt > 0 ){\r\n            nonempty_container_cnt = nonempty_container_cnt + 1;\r\n        }\r\n    }\r\n\r\n    for( container_id = 1; container_id <= best_known.num_containers; container_id++){\r\n        Application.ScreenUpdating = true;\r\n        if( best_known.feasible === true ){\r\n            Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: \" + best_known.net_profit + \" Distance: \" + best_known.total_distance;\r\n        } else {\r\n            Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: N/A\" + \" Distance: \" + best_known.total_distance;\r\n        }\r\n        Application.ScreenUpdating = false;\r\n\r\n        if( best_known.containerGet(container_id).item_cnt > 0 ){\r\n\r\n            incumbent = best_known;\r\n\r\n            start_time = performance.now() / 1000.0;\r\n            end_time = start_time;\r\n\r\n            //Do\r\n            do{\r\n                //DoEvents\r\n\r\n                PerturbSolution(incumbent, container_id, 0.1 + 0.2 * ((end_time - start_time) / ((solver_options.CPU_time_limit * 0.666) / nonempty_container_cnt)));\r\n\r\n                //With incumbent\r\n\r\n                    for( j = 1; j <= item_list.num_item_types; j++){\r\n                        continue_flag = true;\r\n                        while( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && (continue_flag === true) ){\r\n                            continue_flag = AddItemToContainer(incumbent, container_id, incumbent.item_type_orderGet(j), 1, true);\r\n                            //DoEvents\r\n                        }\r\n                    }\r\n\r\n                incumbent.feasible = true\r\n                for( j = 1; j <= item_list.num_item_types; j++){\r\n                    if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                        incumbent.feasible = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                CalculateDistance(incumbent);\r\n\r\n                if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n                   ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance - epsilon) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment - epsilon) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment + epsilon) && (incumbent.total_yz_moment < best_known.total_yz_moment - epsilon) ){\r\n            \r\n                    best_known = incumbent;\r\n                    \r\n                    // if( best_known.feasible = true ){\r\n                    //     Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: \" + best_known.net_profit + \" Distance: \" + best_known.total_distance\r\n                    // } else {\r\n                    //     Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: N/A\" + \" Distance: \" + best_known.total_distance\r\n                    // }\r\n                    \r\n                }\r\n\r\n                end_time = performance.now() / 1000.0;\r\n                \r\n                /* WILL NEVER HAPPEN? chadiik\r\n                if( end_time < start_time - 0.01 ){\r\n                    solver_options.CPU_time_limit = solver_options.CPU_time_limit - (86400 - start_time)\r\n                    start_time = end_time\r\n                }\r\n                */\r\n\r\n            }\r\n            while ( end_time - start_time < (solver_options.CPU_time_limit * 0.666) / nonempty_container_cnt );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // MsgBox \"Iterations performed: \" + iteration\r\n    \r\n//CLP_Solver_Finish:\r\n    \r\n    // ensure loadability\r\n\r\n    var min_x = 0;\r\n    var min_y = 0;\r\n    var min_z = 0;\r\n\r\n    var intersection_right = 0;\r\n    var intersection_left = 0;\r\n    var intersection_top = 0;\r\n    var intersection_bottom = 0;\r\n\r\n    var selected_item_index = 0;\r\n\r\n    /** @type {item_in_container} */\r\n    var swap_item;\r\n\r\n    var area_supported = 0;\r\n    var area_required = 0;\r\n    var support_flag = false;\r\n\r\n    for( i = 1; i <= best_known.num_containers; i++){\r\n        //With best_known.containerGet(i)\r\n        let container = best_known.containerGet(i);\r\n\r\n            for( j = 1; j <= container.item_cnt; j++ ){\r\n\r\n                selected_item_index = 0;\r\n                min_x = container.width;\r\n                min_y = container.height;\r\n                min_z = container.length;\r\n                \r\n                for( k = j; k <= container.item_cnt; k++ ){\r\n\r\n                    if( (container.itemsGet(k).origin_z < min_z - epsilon) ||\r\n                        ((container.itemsGet(k).origin_z < min_z + epsilon) && (container.itemsGet(k).origin_y < min_y - epsilon)) ||\r\n                        ((container.itemsGet(k).origin_z < min_z + epsilon) && (container.itemsGet(k).origin_y < min_y + epsilon) && (container.itemsGet(k).origin_x < min_x - epsilon)) ){\r\n\r\n                        // check for support\r\n                    \r\n                        if( container.itemsGet(k).origin_y < epsilon ){\r\n                            support_flag = true;\r\n                        } else {\r\n                            area_supported = 0;\r\n                            area_required = ((container.itemsGet(k).opposite_x - container.itemsGet(k).origin_x) * (container.itemsGet(k).opposite_z - container.itemsGet(k).origin_z));\r\n                            support_flag = false;\r\n                            for( l = j - 1; l >= 1; l--){\r\n                                        \r\n                                if( (Math.abs(container.itemsGet(k).origin_y - container.itemsGet(l).opposite_y) < epsilon) ){\r\n                                    \r\n                                    // check for intersection\r\n                                    \r\n                                    intersection_right = container.itemsGet(k).opposite_x;\r\n                                    if( intersection_right > container.itemsGet(l).opposite_x ) intersection_right = container.itemsGet(l).opposite_x;\r\n\r\n                                    intersection_left = container.itemsGet(k).origin_x;\r\n                                    if( intersection_left < container.itemsGet(l).origin_x ) intersection_left = container.itemsGet(l).origin_x;\r\n                                    \r\n                                    intersection_top = container.itemsGet(k).opposite_z;\r\n                                    if( intersection_top > container.itemsGet(l).opposite_z ) intersection_top = container.itemsGet(l).opposite_z;\r\n                                    \r\n                                    intersection_bottom = container.itemsGet(k).origin_z;\r\n                                    if( intersection_bottom < container.itemsGet(l).origin_z ) intersection_bottom = container.itemsGet(l).origin_z;\r\n                                    \r\n                                    if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                        area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                        if( area_supported > area_required - epsilon ){\r\n                                            support_flag = true;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                    \r\n                                }\r\n                            }\r\n                            \r\n                        }\r\n                        \r\n                        if( support_flag === true ){\r\n                            selected_item_index = k;\r\n\r\n                            min_x = container.itemsGet(k).origin_x;\r\n                            min_y = container.itemsGet(k).origin_y;\r\n                            min_z = container.itemsGet(k).origin_z;\r\n                        }\r\n                    }\r\n                \r\n                }\r\n\r\n                if( selected_item_index > 0 ){\r\n                    swap_item = container.itemsGet(selected_item_index);\r\n                    container.items[selected_item_index] = container.itemsGet(j);\r\n                    container.items[j] = swap_item;\r\n                } else {\r\n                    Application.Alert(\"Loading order could not be constructed.\");\r\n                }\r\n            }\r\n    }\r\n        \r\n    // write the solution\r\n    \r\n    // MsgBox best_known.total_distance\r\n    \r\n    if( best_known.feasible === true ){\r\n        reply = Application.Confirm(\"CLP Spreadsheet Solver performed \" + iteration + \" LNS iterations and found a solution with a net profit of \" + best_known.net_profit + \". Do you want to overwrite the current solution with the best found solution?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply ){\r\n            WriteSolution(best_known);\r\n        }\r\n    } else if ( infeasibility_count > 0 ){\r\n        WriteSolution(best_known);\r\n    } else {\r\n        reply = Application.Confirm(\"The best found solution after \" + iteration + \" LNS iterations does not satisfy all constraints. Do you want to overwrite the current solution with the best found solution?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply ){\r\n            WriteSolution(best_known);\r\n        }\r\n    }\r\n    \r\n    // Erase the data\r\n    /*\r\n    delete item_list.item_types;\r\n    delete container_list.container_types;\r\n    delete compatibility_list.item_to_item;\r\n    delete compatibility_list.container_to_item;\r\n\r\n    for( i = 1; i <= incumbent.num_containers; i++){\r\n        delete incumbent.containerGet(i).items;\r\n    }\r\n    delete incumbent.container;\r\n    delete incumbent.unpacked_item_count;\r\n    \r\n    if(best_known.container){\r\n        for( i = 1; i <= best_known.container.length; i++){\r\n            if(best_known.container[i])\r\n                delete best_known.containerGet(i).items;\r\n        }\r\n        delete best_known.container;\r\n    }\r\n    delete best_known.unpacked_item_count;\r\n    */\r\n    Application.StatusBar = false;\r\n    Application.ScreenUpdating = true;\r\n    //Application.Calculation = xlCalculationAutomatic\r\n    \r\n    //ThisWorkbook.Worksheets(\"3.Solution\").Activate;\r\n    //Cells(1, 1).Select;\r\n    \r\n}\r\n\r\nfunction FeasibilityCheckData(){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var feasibility_flag = false;\r\n    \r\n    var infeasibility_count = 0;\r\n    var infeasibility_string = '';\r\n    \r\n    Range(ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 9, 1), ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + (4 * item_list.total_number_of_items), 1)).Clear;\r\n    \r\n    var volume_capacity_required = 0;\r\n    var volume_capacity_available = 0;\r\n\r\n    var weight_capacity_required = 0;\r\n    var weight_capacity_available = 0;\r\n\r\n    var max_width = 0;\r\n    var max_heigth = 0;\r\n    var max_length = 0;\r\n    \r\n    //With item_list\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        if( item_list.item_typesGet(i).mandatory === 1 ){\r\n            volume_capacity_required = volume_capacity_required + (item_list.item_typesGet(i).volume * item_list.item_typesGet(i).number_requested);\r\n            weight_capacity_required = weight_capacity_required + (item_list.item_typesGet(i).weight * item_list.item_typesGet(i).number_requested);\r\n        }\r\n    }\r\n    \r\n    \r\n    //With container_list\r\n    for( i = 1; i <= container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            volume_capacity_available = volume_capacity_available + (container_list.container_typesGet(i).volume_capacity * container_list.container_typesGet(i).number_available);\r\n            weight_capacity_available = weight_capacity_available + (container_list.container_typesGet(i).weight_capacity * container_list.container_typesGet(i).number_available);\r\n            \r\n            if( container_list.container_typesGet(i).width > max_width ) max_width = container_list.container_typesGet(i).width;\r\n            if( container_list.container_typesGet(i).height > max_heigth ) max_heigth = container_list.container_typesGet(i).height;\r\n            if( container_list.container_typesGet(i).length > max_length ) max_length = container_list.container_typesGet(i).length;\r\n            \r\n        }\r\n    }\r\n    \r\n    if( volume_capacity_required > volume_capacity_available + epsilon ){\r\n        infeasibility_count = infeasibility_count + 1;\r\n        infeasibility_string = infeasibility_string + \"The amount of available volume is not enough to pack the mandatory items.\\n\";\r\n        ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"The amount of available volume is not enough to pack the mandatory items.\";\r\n    }\r\n    \r\n    if( weight_capacity_required > weight_capacity_available + epsilon ){\r\n        infeasibility_count = infeasibility_count + 1;\r\n        infeasibility_string = infeasibility_string + \"The amount of available weight capacity is not enough to pack the mandatory items.\\n\";\r\n        ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"The amount of available weight capacity is not enough to pack the mandatory items.\";\r\n    }\r\n    \r\n    //With item_list\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        //With .item_typesGet(i)\r\n        let itemType = item_list.item_typesGet(i);\r\n        if( (itemType.mandatory === 1) && (itemType.xy_rotatable === false) && (itemType.yz_rotatable === false) && ((itemType.width > max_width + epsilon) || (itemType.height > max_heigth + epsilon) || (itemType.length > max_length + epsilon)) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too large to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too large to fit into any container.\";\r\n        }\r\n\r\n        if( (itemType.mandatory === 1) && (itemType.width > max_width + epsilon) && (itemType.width > max_heigth + epsilon) && (itemType.width > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too wide to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too wide to fit into any container.\";\r\n        }\r\n\r\n        if( (itemType.mandatory === 1) && (itemType.height > max_width + epsilon) && (itemType.height > max_heigth + epsilon) && (itemType.height > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too tall to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too tall to fit into any container.\";\r\n        }\r\n        \r\n        if( (itemType.mandatory === 1) && (itemType.length > max_width + epsilon) && (itemType.length > max_heigth + epsilon) && (itemType.length > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too long to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too long to fit into any container.\";\r\n        }\r\n        \r\n    }\r\n    \r\n    if( instance.container_item_compatibility_worksheet === true ){\r\n    \r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            \r\n            feasibility_flag = false;\r\n            \r\n            for( j = 1; j <= container_list.num_container_types; j++){\r\n                if( compatibility_list.container_to_itemGet(j, i) === true ){\r\n                    feasibility_flag = true;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            if( feasibility_flag === false ){\r\n                \r\n                infeasibility_count = infeasibility_count + 1;\r\n                if( infeasibility_count < 5 ){\r\n                    infeasibility_string = infeasibility_string + \"Item type \" + i + \" is not compatible with any container.\" + \"\\n\";\r\n                }\r\n                if( infeasibility_count === 5 ){\r\n                    infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n                }\r\n                ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is not compatible with any container.\";\r\n            }\r\n            \r\n        }\r\n    }\r\n    \r\n    return {\r\n        infeasibility_count: infeasibility_count,\r\n        infeasibility_string: infeasibility_string\r\n    };\r\n}\r\n\r\n\r\nfunction SortItems(){\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n\r\n    /** @type {item_type_data} */\r\n    var swap_item_type;\r\n    \r\n    if( item_list.num_item_types > 1 ){\r\n       for( i = 1; i <= item_list.num_item_types; i++){\r\n           for( j = item_list.num_item_types; j >= 2; j--){\r\n               if( (item_list.item_typesGet(j).mandatory > item_list.item_typesGet(j - 1).mandatory) ||\r\n                   ((item_list.item_typesGet(j).mandatory === 1) && (item_list.item_typesGet(j - 1).mandatory === 1) && (item_list.item_typesGet(j).sort_criterion > item_list.item_typesGet(j - 1).sort_criterion)) ||\r\n                   ((item_list.item_typesGet(j).mandatory === 0) && (item_list.item_typesGet(j - 1).mandatory === 0) && ((item_list.item_typesGet(j).profit / item_list.item_typesGet(j).volume) > (item_list.item_typesGet(j - 1).profit / item_list.item_typesGet(j - 1).volume))) ){\r\n                   \r\n                   swap_item_type = item_list.item_typesGet(j);\r\n                   item_list.item_types[j] = item_list.item_typesGet(j - 1);\r\n                   item_list.item_types[j - 1] = swap_item_type;\r\n                   \r\n               }\r\n           }\r\n       }\r\n    }\r\n    \r\n    // for( i = 1; <=item_list.num_item_types\r\n    //    MsgBox item_list.item_typesGet(i).id + \" \" + item_list.item_typesGet(i).weight + \" \" + item_list.item_typesGet(i).sort_criterion\r\n    // }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction CalculateDistance(solution){\r\n\r\n     var j = 0;\r\n     var k = 0;\r\n     var l = 0;\r\n     var max_z = 0;\r\n\r\n    //With solution\r\n    \r\n    solution.total_distance = 0;\r\n    solution.total_x_moment = 0;\r\n    solution.total_yz_moment = 0;\r\n    \r\n    for( j = 1; j <= solution.num_containers; j++){\r\n\r\n         //With .containerGet(j)\r\n        let container = solution.containerGet(j);\r\n        max_z = 0;\r\n        for( k = 1; k <= container.item_cnt; k++){\r\n               for( l = k + 1; l <= container.item_cnt; l++){\r\n                   if( container.itemsGet(k).item_type === container.itemsGet(l).item_type ){\r\n                       solution.total_distance = solution.total_distance + Math.abs(container.itemsGet(k).opposite_x + container.itemsGet(k).origin_x - container.itemsGet(l).opposite_x - container.itemsGet(l).origin_x) + Math.abs(container.itemsGet(k).opposite_y + container.itemsGet(k).origin_y - container.itemsGet(l).opposite_y - container.itemsGet(l).origin_y) + Math.abs(container.itemsGet(k).opposite_z + container.itemsGet(k).origin_z - container.itemsGet(l).opposite_z - container.itemsGet(l).origin_z);\r\n                   }\r\n\r\n                  // solution.total_distance = solution.total_distance + container.itemsGet(k).opposite_z\r\n               }\r\n\r\n            if( max_z < container.itemsGet(k).opposite_z ) max_z = container.itemsGet(k).opposite_z;\r\n\r\n           // solution.total_distance = solution.total_distance + penalty * max_z\r\n           solution.total_distance = solution.total_distance + container.itemsGet(k).opposite_z;\r\n\r\n          // solution.total_x_moment = solution.total_x_moment + (container.itemsGet(k).origin_y + container.itemsGet(k).opposite_y) * item_list.item_typesGet(container.itemsGet(k).item_type).weight\r\n\r\n        }\r\n\r\n        solution.total_distance = solution.total_distance + container.item_cnt * container.item_cnt * max_z;\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction CalculateDispersion(solution){\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var item_flag = false;\r\n    var container_count = 0;\r\n    \r\n    // With solution\r\n    \r\n    solution.total_distance = 0;\r\n\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        container_count = 0;\r\n        for( j = 1; j <= solution.num_containers; j++){\r\n\r\n            // With .containerGet(j)\r\n            let container = solution.containerGet(j);\r\n            item_flag = false\r\n            for( k = 1; k <= container.item_cnt; k++){\r\n               if( container.itemsGet(k).item_type === i ){\r\n                   item_flag = true;\r\n                   break;\r\n               }\r\n            }\r\n\r\n            if( item_flag === true ) container_count = container_count + 1;\r\n\r\n        }\r\n\r\n        solution.total_distance = solution.total_distance + container_count * container_count;\r\n    }\r\n}\r\n\r\nvar signaler = new Signaler();\r\nconst signals = {\r\n    solution: 'solution'\r\n};\r\n\r\nexport { \r\n    CLP_Solver as Execute,\r\n    solution_data as SolutionData,\r\n    item_in_container as ContainerItem,\r\n    signaler,\r\n    signals\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/CLPSolver.js","export default class Bin {\r\n\r\n  constructor(name, w, h, d, mw) {\r\n    this.name = name || '';\r\n    this.width = w || 0;\r\n    this.height = h || 0;\r\n    this.depth = d || 0;\r\n    this.maxWeight = mw || 0;\r\n    this.items = [];\r\n  }\r\n\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  getDepth() {\r\n    return this.depth;\r\n  }\r\n\r\n  getMaxWeight() {\r\n    return this.maxWeight;\r\n  }\r\n\r\n  getItems() {\r\n    return this.items;\r\n  }\r\n\r\n  getVolume() {\r\n    return this.getWidth() * this.getHeight() * this.getDepth();\r\n  }\r\n\r\n  getPackedWeight() {\r\n    return this.items.reduce( ( weight, item ) => weight + item.getWeight(), 0 );\r\n  }\r\n\r\n  weighItem(item) {\r\n    const maxWeight = this.getMaxWeight();\r\n    return ! maxWeight || item.getWeight() + this.getPackedWeight() <= maxWeight;\r\n  }\r\n\r\n  putItem(item, p) {\r\n    let box = this;\r\n    let fit = false;\r\n\r\n    item.position = p;\r\n    for (let i=0; i<6; i++) {\r\n      item.rotationType = i;\r\n      let d = item.getDimension();\r\n\r\n      if (box.getWidth() < p[0] + d[0] || box.getHeight() < p[1] + d[1] || box.getDepth() < p[2] + d[2]) {\r\n        continue;\r\n      }\r\n\r\n      fit = true;\r\n\r\n      for (let j=0; j<box.items.length; j++) {\r\n        let _j = box.items[j];\r\n        if (_j.intersect(item)) {\r\n          fit = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (fit) {\r\n        box.items.push(item);\r\n      }\r\n\r\n      return fit;\r\n    }\r\n\r\n    return fit;\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Bin.js","export const RotationType_WHD = 0;\r\nexport const RotationType_HWD = 1;\r\nexport const RotationType_HDW = 2;\r\nexport const RotationType_DHW = 3;\r\nexport const RotationType_DWH = 4;\r\nexport const RotationType_WDH = 5;\r\n\r\nexport const WidthAxis = 0;\r\nexport const HeightAxis = 1;\r\nexport const DepthAxis = 2;\r\n\r\nexport const StartPosition = [0, 0, 0];\r\n\r\nexport const RotationTypeStrings = {\r\n  [RotationType_WHD]: 'xyz',\r\n  [RotationType_HWD]: 'yxz',\r\n  [RotationType_HDW]: 'yzx',\r\n  [RotationType_DHW]: 'zyx',\r\n  [RotationType_DWH]: 'zxy',\r\n  [RotationType_WDH]: 'xzy',\r\n};\r\n\r\nexport default class Item {\r\n\r\n  constructor(name, w, h, d, wg) {\r\n    this.name = name || '';\r\n    this.width = w || 0;\r\n    this.height = h || 0;\r\n    this.depth = d || 0;\r\n    this.weight = wg || 0;\r\n    this.rotationType = RotationType_WHD;\r\n    this.position = []; // x, y, z\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  getDepth() {\r\n    return this.depth;\r\n  }\r\n\r\n  getWeight() {\r\n    return this.weight;\r\n  }\r\n\r\n  getRotationType() {\r\n    return this.rotationType;\r\n  }\r\n\r\n  getRotationTypeString() {\r\n    return RotationTypeStrings[this.getRotationType()];\r\n  }\r\n\r\n  getDimension() {\r\n    let d;\r\n    switch (this.rotationType) {\r\n      case RotationType_WHD:\r\n        d = [this.getWidth(), this.getHeight(), this.getDepth()];\r\n        break;\r\n      case RotationType_HWD:\r\n        d = [this.getHeight(), this.getWidth(), this.getDepth()];\r\n        break;\r\n      case RotationType_HDW:\r\n        d = [this.getHeight(), this.getDepth(), this.getWidth()];\r\n        break;\r\n      case RotationType_DHW:\r\n        d = [this.getDepth(), this.getHeight(), this.getWidth()];\r\n        break;\r\n      case RotationType_DWH:\r\n        d = [this.getDepth(), this.getWidth(), this.getHeight()];\r\n        break;\r\n      case RotationType_WDH:\r\n        d = [this.getWidth(), this.getDepth(), this.getHeight()];\r\n        break;\r\n    }\r\n    return d;\r\n  }\r\n\r\n  intersect(i2) {\r\n    return rectIntersect(this, i2, WidthAxis, HeightAxis) &&\r\n        rectIntersect(this, i2, HeightAxis, DepthAxis) &&\r\n        rectIntersect(this, i2, WidthAxis, DepthAxis);\r\n  }\r\n\r\n  getVolume() {\r\n    return this.getWidth() * this.getHeight() * this.getDepth();\r\n  }\r\n}\r\n\r\nexport const rectIntersect = (i1, i2, x, y) => {\r\n  let d1, d2, cx1, cy1, cx2, cy2, ix, iy;\r\n\r\n  d1 = i1.getDimension();\r\n  d2 = i2.getDimension();\r\n\r\n  cx1 = i1.position[x] + d1[x] / 2;\r\n  cy1 = i1.position[y] + d1[y] / 2;\r\n  cx2 = i2.position[x] + d2[x] / 2;\r\n  cy2 = i2.position[y] + d2[y] / 2;\r\n\r\n  ix = Math.max(cx1, cx2) - Math.min(cx1, cx2);\r\n  iy = Math.max(cy1, cy2) - Math.min(cy1, cy2);\r\n\r\n  return ix < (d1[x] + d2[x]) / 2 && iy < (d1[y] + d2[y]) / 2;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Item.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view;\r\n        this.templatesView = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Map<CargoGroup, CargoView>}\r\n         */\r\n        this.cargoTemplateViews = new Map();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        //Logger.Log('Adding cargo group #' + this.cargoTemplateViews.size + ': ' + group.ToString() + ' to view', group);\r\n        var templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.Sort();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.templatesView.scale.set(1, 1, 1);\r\n        this.templatesView.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 3 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(0, start, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.y / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(0, start + offset, 0);\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        //result.min = tempVec.set(0, result.min, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        //result.max = tempVec.set(0, offset, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n\r\n        //for(var [cargo, cargoView] of cargoViews){}\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n\r\n        this.cargoTemplateViews.clear();\r\n        list.forEach(entry => {\r\n            this.cargoTemplateViews.set(entry[0], entry[1]);\r\n        });\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new THREE.MeshStandardMaterial();\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\nfunction nextColor(){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n        material.color = nextColor();\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     */\r\n    Add(container){\r\n        Logger.Log('Adding container: ' + container.ToString() + ' to view', container);\r\n        var containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     */\r\n    Remove(container){\r\n\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(var iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(var iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, THREE.Mesh>}\r\n     */\r\n    var meshes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .2;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        meshes.set(cv, mesh);\r\n    });\r\n\r\n    return meshes;\r\n}\r\n\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        Asset.StandardSceneObject(this.view);\r\n\r\n        var containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, mesh] of containerBoxes){\r\n            mesh.position.add(cv.position);\r\n            this.view.add(mesh);\r\n        }\r\n\r\n        console.log(this);\r\n    }\r\n\r\n    /*\r\n    Set(object3d){\r\n        this.view = object3d;\r\n    }*/\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( ! view ){\r\n            let meshes = createContainerBoxes(container);\r\n            let view = new THREE.Object3D();\r\n            for(var [cv, mesh] of meshes){\r\n                mesh.position.add(cv.position);\r\n                view.add(mesh);\r\n            }\r\n\r\n            containerView = new ContainerView(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","\r\n\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new THREE.MeshStandardMaterial({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @param {THREE.Object3D} texturePath \r\n     */\r\n    static FromJSON(json, texturePath){\r\n        return objectLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} object \r\n     */\r\n    static StandardSceneObject(object){\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = true;\r\n                child.receiveShadow = true;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst signals = {\r\n    updated: 'updated',\r\n    aborted: 'aborted',\r\n    completed: 'completed'\r\n};\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        /** Do not modify directly, use CargoInput.Update instead\r\n         * @ignore\r\n         */\r\n        //this.entry = new BoxEntry();\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        return new BoxEntry();\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.updated, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.aborted);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('Cargo.Input.Add, entry rejected, dimensions != Volume:', entry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                var commitedEntry = entry.Clone();\r\n                var uid = commitedEntry.SetUID();\r\n\r\n                this.Dispatch(signals.completed, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {THREE.Geometry} jsonObject.geometry\r\n * @property {Container} jsonObject.container\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded'\r\n};\r\n\r\nclass PackingSpaceInput extends Signaler {\r\n    constructor(){\r\n        super();\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {PackingSpaceJSON} jsonObject \r\n     */\r\n    Load(jsonObject){\r\n        var data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        console.log(data);\r\n        if(data.container){\r\n            var container = Container.FromJSON(data.container);\r\n            \r\n            if(data.view){\r\n                var model = Asset.FromJSON(data.view);\r\n                //var model = Asset.CreateMesh(geometry);\r\n                var containerView = new ContainerView(container, model);\r\n            }\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport CargoInput from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput from './api/components/PackingSpaceInput';\r\nimport UX from './api/UX';\r\nimport PackerInterface from './api/components/PackerInterface';\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug\r\n * @property {import('./api/UX').UXParams} ux\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default,\r\n\tConfig: require('./api/utils/cik/config/Config').default\r\n};\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tFreightPacker.DevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.ux);\r\n\r\n\t\t/**\r\n\t\t * Handles input of: description fields (label, etc.), dimensions and constraints\r\n\t\t * @type {CargoInput}\r\n\t\t */\r\n\t\tthis.cargoInput = new CargoInput();\r\n\r\n\t\t/**\r\n\t\t * Handles input of: packing spaces configurations and assets\r\n\t\t * @type {PackingSpaceInput}\r\n\t\t */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput();\r\n\r\n\t\tvar app = new App(containerDiv, this.ux, {\r\n\t\t\tcargoInput: this.cargoInput,\r\n\t\t\tpackingSpaceInput: this.packingSpaceInput\r\n\t\t});\r\n\r\n\t\tFreightPacker.DevSetup(app);\r\n\r\n\t\t/**\r\n\t\t * Manual solving and notification\r\n\t\t * @type {PackerInterface}\r\n\t\t */\r\n\t\tthis.packer = new PackerInterface(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tFreightPacker.Auto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n\t/** @param {FreightPacker|App} domain */\r\n\tstatic DevSetup(domain){\r\n\t\tif(domain instanceof FreightPacker){\r\n\t\t\tlet fp = domain;\r\n\t\t\tglobal.fp = fp;\r\n\t\t\tFreightPacker.utils.Debug.api = fp;\r\n\t\t\tlet params = fp.params;\r\n\t\t\tif(params.debug) {\r\n\t\t\t\tLogger.active = true;\r\n\t\t\t\tLogger.toConsole = true;\r\n\t\t\t\tLogger.traceToConsole = true;\r\n\t\t\t}\r\n\r\n\t\t\t//require('./api/debug/Tester').testPool();\r\n\t\t\t//utils.Debug.CLPTest.Test1();\r\n\t\t}\r\n\r\n\t\tif(domain instanceof App){\r\n\t\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\r\n\t\t\tlet app = domain;\r\n\t\t\tFreightPacker.utils.Debug.app = app;\r\n\t\t\tapp.sceneSetup.BackListen(SceneSetup.signals.init, function(){\r\n\t\t\t\tFreightPacker.utils.Debug.Viz.SetViewParent(app.sceneSetup.sceneController.scene);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/** @param {FreightPacker} fp */\r\n\tstatic Auto(fp){\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef RendererParams\r\n * @property {Boolean} antialias\r\n * @property {Boolean} shadows\r\n * @property {Boolean} shadowsAutoUpdate\r\n * @property {Number} clearColor - hex color 0xff7f00\r\n * @property {Number} renderSizeMul\r\n * @property {Boolean} composer\r\n */\r\n\r\n/** @type {RendererParams} */\r\nconst defaultParams = {\r\n    antialias: true,\r\n    shadows: THREE.PCFSoftShadowMap,\r\n    shadowsAutoUpdate: true,\r\n    clearColor: 0xcfcfcf,\r\n    renderSizeMul: 1,\r\n    composer: false\r\n};\r\n\r\nclass Renderer {\r\n    /**\r\n     * @param {RendererParams} params \r\n     */\r\n    constructor(params) {\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = this.params.shadows;\r\n            this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 80, 400), new THREE.Euler(-0.1, 0, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nconst type = 'Volume';\r\nconst _box3 = Symbol('box3');\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n\r\n        this[_box3] = new THREE.Box3();\r\n    }\r\n\r\n    /** @returns {THREE.Box3} */\r\n    get box3(){\r\n        /** @type {THREE.Box3} */\r\n        let b = this[_box3];\r\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\r\n        return b;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Copy(){\r\n        Logger.Warn('PackingProperty.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        \r\n    }\r\n\r\n    /**\r\n     * @param {SupportsStacking} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new SupportsStacking();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        Logger.Warn('Constraint.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","import Item from \"./components/Item\";\r\nimport AFit from \"./AFit\";\r\nimport Container from \"./components/Container\";\r\n\r\n/** @param {Array<Item>} items */\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n    constructor(){\r\n        this.aFitPacker = new AFit();\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    T1(container, items){\r\n\r\n        var startTime = performance.now();\r\n        var result = this.aFitPacker.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n\r\n        return result;\r\n    }\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 },\r\n            { ID: 1005, Name: 'Item6', Length: 50,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","import { ThisWorkbook, Cells } from \"./Workbook\";\r\n\r\nvar solverSheet = ThisWorkbook.Worksheets('CLP Solver Console');\r\nvar itemsSheet = ThisWorkbook.Worksheets('1.Items');\r\nvar containersSheet = ThisWorkbook.Worksheets('2.Containers');\r\nvar solutionSheet = ThisWorkbook.Worksheets('3.Solution');\r\n\r\nconst noYes = ['No', 'Yes'];\r\nconst sortCriterion = [null, 'Volume', 'Weight', 'MaxDim'];\r\n\r\n/** @type {import('./CLPSolver').SolverOptions} */\r\nconst solverOptions = {\r\n    itemSortCriterion: 1,\r\n    showProgress: false,\r\n    cpuTimeLimit: 3\r\n};\r\n\r\n// First-Fit-Decreasing based on:\r\nsolverSheet.Cells(12, 3, sortCriterion[solverOptions.itemSortCriterion]);\r\n// Show progress on status bar?\r\nsolverSheet.Cells(13, 3, noYes[Number(solverOptions.showProgress)]);\r\n// CPU time limit (seconds)\r\nsolverSheet.Cells(14, 3, solverOptions.cpuTimeLimit);\r\n\r\n// Front side support required?\r\nsolverSheet.Cells(6, 3, noYes[0]);\r\n\r\nfunction packPriority(p){\r\n    switch(p){\r\n        case 1: return 'Must be packed';\r\n        case 0: return 'May be packed';\r\n        case -1: return 'Don\\'t pack';\r\n    }\r\n}\r\nfunction fillPriority(p){\r\n    switch(p){\r\n        case 1: return 'Must be used';\r\n        case 0: return 'May be used';\r\n        case -1: return 'Do not use';\r\n    }\r\n}\r\n\r\nvar containersDataSrc = [\r\n    { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 }\r\n];\r\nvar containersData = [];\r\nvar itemsDataSrc = [\r\n    { ID: 1001, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n    { ID: 1002, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n    { ID: 1003, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n    { ID: 1004, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n];\r\nvar itemsData = [];\r\n\r\nvar numItems = itemsDataSrc.length;\r\n// Number of types of items\r\nsolverSheet.Cells(2, 3, numItems);\r\n\r\nfor(var i = 1; i <= numItems; i++){\r\n    let item = itemsDataSrc[i - 1];\r\n\r\n    let volume = item.Length * item.Width * item.Height;\r\n\r\n    /** @type {import('./CLPSolver').ItemData} */\r\n    let itemData = {\r\n        length: item.Length,\r\n        width: item.Width,\r\n        height: item.Height,\r\n        xyRotatable: true,\r\n        yzRotatable: true,\r\n        mandatory: 1,\r\n        profit: 0,\r\n        weight: volume / 1000,\r\n        quantity: item.Quantity\r\n    };\r\n    itemsData.push(itemData);\r\n    continue;\r\n    // 1 id, 2 name, 4 width, 5 height, 6 length, 7 volume, 9 xy, 10 yz, 11 weight, 12 packPriority = MustBePacked, 13 profit = 0, 14 quantity\r\n\r\n    itemsSheet.Cells(2 + i, 1, i);\r\n    itemsSheet.Cells(2 + i, 2, item.ID);\r\n\r\n    itemsSheet.Cells(2 + i, 4, itemData.width);\r\n    itemsSheet.Cells(2 + i, 5, itemData.height);\r\n    itemsSheet.Cells(2 + i, 6, itemData.length);\r\n    itemsSheet.Cells(2 + i, 7, volume);\r\n\r\n    itemsSheet.Cells(2 + i, 9, noYes[Number(itemData.xyRotatable)]);\r\n    itemsSheet.Cells(2 + i, 10, noYes[Number(itemData.yzRotatable)]);\r\n\r\n    itemsSheet.Cells(2 + i, 11, itemData.weight);\r\n\r\n    itemsSheet.Cells(2 + i, 12, packPriority(itemData.mandatory));\r\n\r\n    itemsSheet.Cells(2 + i, 13, itemData.profit);\r\n    \r\n    itemsSheet.Cells(2 + i, 14, itemData.quantity);\r\n}\r\n\r\nvar numContainers = containersDataSrc.length;\r\n// Number of types of containers\r\nsolverSheet.Cells(4, 3, numContainers);\r\nfor(var i = 1; i <= numContainers; i++){\r\n    let container = containersDataSrc[i - 1];\r\n\r\n    let volume = container.Width * container.Height * container.Length;\r\n\r\n    /** @type {import('./CLPSolver').ContainerData} */\r\n    let containerData = {\r\n        length: container.Length,\r\n        width: container.Width,\r\n        height: container.Height,\r\n        quantity: 1,\r\n        mandatory: 1,\r\n        cost: 0,\r\n        weightCapacity: volume / 1000\r\n    };\r\n    containersData.push(containerData);\r\n    continue;\r\n    // 1 id, 2 name, 3 width, 4 height, 5, length, 6 volume_capacity, 7 weight_capacity, 8 fillPriority = 1, 9 cost = 1, 10 quantity\r\n\r\n    containersSheet.Cells(1 + i, 1, i);\r\n    containersSheet.Cells(1 + i, 2, container.ID);\r\n\r\n    containersSheet.Cells(1 + i, 3, containerData.width);\r\n    containersSheet.Cells(1 + i, 4, containerData.height);\r\n    containersSheet.Cells(1 + i, 5, containerData.length);\r\n    containersSheet.Cells(1 + i, 6, volume);\r\n\r\n    containersSheet.Cells(1 + i, 7, containerData.weightCapacity);\r\n\r\n    containersSheet.Cells(1 + i, 8, fillPriority(containerData.mandatory));\r\n\r\n    containersSheet.Cells(1 + i, 9, containerData.cost);\r\n\r\n    containersSheet.Cells(1 + i, 10, containerData.quantity);\r\n}\r\n\r\nsolutionSheet.Cells(1, 'B').calculate = () => { return Math.abs(solutionSheet.Cells(4, 'J').Value); }; // =+$J$4\r\nsolutionSheet.Cells(4, 'G').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'G'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'G')); }; // =SUM($G$6:$G$39)\r\nsolutionSheet.Cells(4, 'H').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'H'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'H')); }; // =SUM($H$6:$H$39)\r\nsolutionSheet.Cells(4, 'I').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'I'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'I')); }; // =SUM($I$6:$I$39)\r\nsolutionSheet.Cells(4, 'J').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'J'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'J')); }; // =SUM($J$6:$J$39)\r\n\r\nfor(var i = 1; i <= 100/*solutionSheet.Cells(3, 'B')*/; i++){\r\n    solutionSheet.Cells(5 + i, 'G').calculate = () => {\r\n        let itemName = solutionSheet.Cells(6, 'B').Value;\r\n        return itemsSheet.Cells(itemsSheet.Find(itemName).row, 1).Value;\r\n    }; // itemIndex\r\n    \r\n    solutionSheet.Cells(5 + i, 'H').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 7).Value }; // volume\r\n    solutionSheet.Cells(5 + i, 'I').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 11).Value }; // weight\r\n    solutionSheet.Cells(5 + i, 'J').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 13).Value }; // profit\r\n}\r\n\r\nconsole.log('CLP setup complete');\r\nconsole.log(ThisWorkbook);\r\n\r\nconst CLPSolver = require('./CLPSolver');\r\n\r\nconst test1Data = {\r\n    solverOptions: solverOptions,\r\n    items: itemsData,\r\n    container: containersData[0]\r\n};\r\n\r\nfunction Test1(){\r\n\r\n    /** @param {CLPSolver.SolutionData} solution */\r\n    function onSolution(solution){\r\n        console.log(solution);\r\n        let packedItems = solution.container.filter(container => container !== null)[0].items;\r\n        console.log(packedItems);\r\n    }\r\n    CLPSolver.signaler.On(CLPSolver.signals.solution, onSolution);\r\n    CLPSolver.Execute(test1Data.solverOptions, test1Data.items, [test1Data.container]);\r\n\r\n}\r\n\r\nexport {\r\n    Test1,\r\n    test1Data\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/CLPTest.js","import { Container, Item } from \"./Components\";\r\nimport Debug from \"../../debug/Debug\";\r\n\r\nconst debugging = true;\r\n\r\nvar running = true;\r\nif(debugging){\r\n    Debug.app.sceneSetup.input.ListenKeys(['right', 'space']);\r\n}\r\n\r\nasync function debugUser(){\r\n    await sleep(16);\r\n    var input = Debug.app.sceneSetup.input;\r\n    if(input.keys['right']) running = false;\r\n    if(input.keys['space']) running = true;\r\n    while(!running){\r\n        await sleep(200);\r\n        if(input.keys['right']) break;\r\n    }\r\n}\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => {\r\n        if(debugging) setTimeout(resolve, ms);\r\n        else resolve();\r\n    });\r\n}\r\n\r\nfunction click(ms) {\r\n    return new Promise(resolve => {\r\n        if(debugging){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('mouseup', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('mouseup', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\nfunction debugLog(...args){\r\n    console.log(...args);\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nfunction debugRegion(region, color, solid, duration, checkered){\r\n    var x = region.x, y = region.y, z = region.z, w = region.width, h = region.height, l = region.length;\r\n    var debugUID = Debug.Viz.DrawVolume(x + w/2, y + h/2, z + l/2, w, h, l, color || 0xaaffff, duration || -1, !Boolean(solid), checkered);\r\n    return debugUID;\r\n}\r\n\r\n/** @param {Array<string>} */\r\nfunction debugClear(uids){\r\n    if(uids){\r\n        uids.forEach(uid => {\r\n            Debug.Viz.RemoveObjectByUID(uid);\r\n        });\r\n    }\r\n    else{\r\n        Debug.Viz.ClearAll();\r\n    }\r\n}\r\n\r\nconst smallValue = .000001;\r\n\r\nclass Wall{\r\n    /**\r\n     * @param {Number} axis 0, 1 or 2 for x, y or z\r\n     * @param {Number} distance \r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     */\r\n    constructor(axis, distance, x, y, width, height){\r\n        this.axis = axis;\r\n        this.distance = distance;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n}\r\n\r\nclass Region{\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    constructor(x, y, z, width, height, length, preferredX){\r\n        this.Set(x, y, z, width, height, length, preferredX);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    Set(x, y, z, width, height, length, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.preferredX = preferredX;\r\n        return this;\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before calculating corners \r\n     */\r\n    GetCorners(offset){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n\r\n        tempCorners[0] = x;       tempCorners[1] = y;       tempCorners[2] = z;         // 0:\r\n        tempCorners[3] = x + w;   tempCorners[4] = y;       tempCorners[5] = z;         // 0:w\r\n        tempCorners[6] = x;       tempCorners[7] = y + h;   tempCorners[8] = z;         // 0:h\r\n        tempCorners[9] = x + w;   tempCorners[10] = y + h;  tempCorners[11] = z;        // 0:wh\r\n\r\n        tempCorners[12] = x;      tempCorners[13] = y;      tempCorners[14] = z + l;    // 1:\r\n        tempCorners[15] = x + w;  tempCorners[16] = y;      tempCorners[17] = z + l;    // 1:w\r\n        tempCorners[18] = x;      tempCorners[19] = y + h;  tempCorners[20] = z + l;    // 1:h\r\n        tempCorners[21] = x + w;  tempCorners[22] = y + h;  tempCorners[23] = z + l;    // 1:wh\r\n\r\n        tempCorners[24] = x + w/2;tempCorners[25] = y + h/2;tempCorners[26] = z + l/2;  // center\r\n\r\n        return tempCorners;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before checking * @param {Number} px * @param {Number} py * @param {Number} pz \r\n     */\r\n    ContainsPoint(offset, px, py, pz){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        return px > x && px < x + w\r\n            && py > y && py < y + h\r\n            && pz > z && pz < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\n    ContainsRegion(offset, subRegion){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        var rx = subRegion.x, ry = subRegion.y, rz = subRegion.z, rw = subRegion.width, rh = subRegion.height, rl = subRegion.length;\r\n        return rx > x && rx + rw < x + w\r\n            && ry > y && ry + rh < y + h\r\n            && rz > z && rz + rl < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} other */\r\n    Intersects(offset, other){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n    \r\n        return x <= other.x + other.width && x + w >= other.x\r\n                && y <= other.y + other.height && y + h >= other.y \r\n                && z <= other.z + other.length && z + l >= other.z;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Number} width * @param {Number} height * @param {Number} length */\r\n    FitTest(offset, width, height, length){\r\n        // Check that all dimensions fit\r\n        var fit = width < this.width + offset * 2 && height < this.height + offset * 2 && length < this.length + offset * 2;\r\n        if(fit){\r\n            // Calculate x based on preferred side\r\n            let x = this.preferredX !== 0 ? this.x + this.width - width : this.x;\r\n            tempRegion.Set(x, this.y, this.z, width, height, length, this.preferredX);\r\n            return tempRegion;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Number} minRegionAxis */\r\n    async Subtract(region, minRegionAxis){\r\n        var newRegions;\r\n\r\n        /**/var debugUIDs = [];\r\n        /**/debugUIDs.push(debugRegion(region, 0xff000000));\r\n        \r\n        // Calculate a new east region\r\n        let axis = region.x + region.width;\r\n        let size = this.x + this.width - axis;\r\n        if(size > minRegionAxis){\r\n            let east = new Region(axis, this.y, this.z, size, this.height, this.length, 0);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(east);\r\n\r\n            /**/debugUIDs.push(debugRegion(east, 0x7fff0000, true));\r\n        }\r\n\r\n        // Calculate a new west region\r\n        axis = this.x;\r\n        size = region.x - axis;\r\n        if(size > minRegionAxis){\r\n            let west = new Region(axis, this.y, this.z, size, this.height, this.length, 1);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(west);\r\n\r\n            /**/debugUIDs.push(debugRegion(west, 0x7f00ff00, true));\r\n        }\r\n\r\n        // Calculate a new over/up region\r\n        axis = region.y + region.height;\r\n        size = this.y + this.height - axis;\r\n        if(size > minRegionAxis){\r\n            let over = new Region(region.x, axis, region.z, region.width, size, region.length, 0); // add overhang var? // togglePreferredX based on pre-packed weight distribution?\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(over);\r\n\r\n            /**/debugUIDs.push(debugRegion(over, 0x7f0000ff, true));\r\n        }\r\n\r\n        /*\r\n        // Calculate a new south region\r\n        axis = this.z;\r\n        size = region.z - axis;\r\n        if(size > minRegionAxis){\r\n            let south = new Region(this.x, this.y, axis, this.width, this.height, size, 0); // togglePreferredX based on pre-packed weight distribution?\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(south);\r\n\r\n            /** /debugUIDs.push(debugRegion(south, 0x7f0000ff, true, 100));\r\n            /** /await sleep(200);\r\n            /** /debugUIDs.push(debugRegion(south, 0x7f0000ff, true, 100));\r\n            /** /await sleep(200);\r\n            /** /debugUIDs.push(debugRegion(south, 0x7f0000ff, true));\r\n            /** /debugLog('south region created');\r\n            /** /await click();\r\n        }\r\n        */\r\n\r\n        // Set this as new north/front region\r\n        axis = region.z + region.length;\r\n        size = this.z + this.length - axis;\r\n        this.z = axis;\r\n        this.length = size;\r\n\r\n        if(size > minRegionAxis){\r\n            /**/debugUIDs.push(debugRegion(this, 0x7faaffff, true));\r\n        }\r\n\r\n        //**/await click();\r\n\r\n        /**/debugClear(debugUIDs);\r\n\r\n        return newRegions;\r\n    }\r\n\r\n    /**\r\n     * Deepest to front, smallest to largest\r\n     * @param {Region} a * @param {Region} b \r\n     */\r\n    static SortDeepestSmallest(a, b){\r\n        if(a.z < b.z) return -1;\r\n        if(a.z > b.z)return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nvar tempRegion = new Region();\r\nvar tempRegion2 = new Region();\r\nvar tempCorners = [0, 0, 0];\r\n\r\nclass PackedItem{\r\n\r\n    /**\r\n     * @param {Item} ref \r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @param {Number} z\r\n     * @param {Number} packedWidth\r\n     * @param {Number} packedHeight\r\n     * @param {Number} packedLength\r\n     * @param {Number} orientation \r\n     */\r\n    constructor(ref, x, y, z, packedWidth, packedHeight, packedLength, orientation){\r\n        this.ref = ref;\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.packedWidth = packedWidth; this.packedHeight = packedHeight; this.packedLength = packedLength;\r\n        this.orientation = orientation;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static DepthSort(a, b){\r\n        if(a.z + smallValue < b.z) return -1;\r\n        if(a.z > b.z + smallValue) return 1;\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass PackedContainer{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {PackingAssistant} assistant\r\n     */\r\n    constructor(container, assistant){\r\n        this.container = container;\r\n        this.assistant = assistant;\r\n        \r\n        /** @type {Array<PackedItem>} */\r\n        this.packedItems = [];\r\n        /** @type {Array<Item>} */\r\n        this.unpackedItems = [];\r\n\r\n        var firstRegion = new Region(0, 0, 0, container.width, container.height, container.length, 0);\r\n        /** @type {Array<Region>} */\r\n        this.regions = [firstRegion];\r\n\r\n        this.cumulatedWeight = 0;\r\n    }\r\n\r\n    /** @param {PackedItem} item */\r\n    SetPacked(item){\r\n        this.cumulatedWeight += item.ref.weight;\r\n        this.packedItems.push(item);\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    SetUnpacked(item){\r\n        this.unpackedItems.push(item);\r\n    }\r\n\r\n    /** @param {Number} weight */\r\n    WeightPass(weight){\r\n        return this.cumulatedWeight + weight <= this.container.weightCapacity;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Region} fit * @returns {Boolean} false if region has been deleted */\r\n    async Occupy(region, fit){\r\n        // Subtracts fit from region and calculates new bounding regions\r\n        var newRegions = /**/await region.Subtract(fit, this.assistant.minRegionAxis);\r\n\r\n        // Add new bounding regions if any\r\n        if(newRegions) this.regions.push(...newRegions);\r\n\r\n        // Check that region is still valid, otherwise remove it\r\n        if(region.length < this.assistant.minRegionAxis){\r\n            let regionIndex = this.regions.indexOf(region);\r\n            this.regions.splice(regionIndex, 1);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    async Fit(item){\r\n        var numRegions = this.regions.length;\r\n        var numPackedItems = this.packedItems.length;\r\n\r\n        // Try orientations 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy'\r\n        for(let iOrient = 0; iOrient < 6; iOrient++){\r\n            let dimensions = item.GetOrientedDimensions(iOrient);\r\n\r\n            // Check if orientation is permitted\r\n            if(dimensions){\r\n\r\n                // Try to fit in sorted regions\r\n                for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n                    let region = this.regions[iRegion];\r\n\r\n                    // Fit test (success: Region, failure: false)\r\n                    let regionFitTest = region.FitTest(smallValue, dimensions[0], dimensions[1], dimensions[2]);\r\n                    if(regionFitTest !== false){\r\n\r\n                        for(let iPacked = 0; iPacked < numPackedItems; iPacked++){\r\n                            let packedItem = this.packedItems[iPacked];\r\n                            // Creates temporary region for following calculations\r\n                            let packedRegion = tempRegion2.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n                            \r\n                            let intersects = packedRegion.Intersects(-smallValue, regionFitTest);\r\n                            if(intersects){\r\n                                continue;\r\n                            }\r\n                        }\r\n\r\n                        //**/debugLog('regionFitTest:', regionFitTest);\r\n\r\n                        // Create a new packed item\r\n                        let packedItem = new PackedItem(item, regionFitTest.x, regionFitTest.y, regionFitTest.z, regionFitTest.width, regionFitTest.height, regionFitTest.length, iOrient);\r\n                        /**/let debugUID = debugRegion(regionFitTest, 0xffff0000, true);\r\n\r\n                        // Reserve the tested sub region: regionFitTest from the containing region: region\r\n                        let regionRemains = /**/await this.Occupy(region, regionFitTest);\r\n\r\n                        // Clean-up regions\r\n                        /**/await this.ProcessRegions();\r\n                        /**/debugClear([debugUID]);\r\n                        debugRegion(regionFitTest, 0xffffffff, false);\r\n\r\n                        return packedItem;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    async ProcessRegionsForZeroRegions(){\r\n        var regions = this.regions;\r\n        var minRegionAxis = this.assistant.minRegionAxis;\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            if(region.width < minRegionAxis || region.height < minRegionAxis || region.length < minRegionAxis){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n            }\r\n        }\r\n    }\r\n\r\n    async ProcessRegionsForPackedItems(){\r\n        var regions = this.regions;\r\n        var packedItems = this.packedItems;\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            let volumeRegion = region.volume;\r\n\r\n            for(let iPacked = 0; iPacked < packedItems.length; iPacked++){\r\n                let packedItem = packedItems[iPacked];\r\n\r\n                // Calculate preferred packing side based on center point relative to container\r\n                let preferredX = (packedItem.x + packedItem.packedWidth / 2) < (this.container.width / 2) ? 0 : 1;\r\n                // Creates temporary region for following calculations\r\n                let packedRegion = tempRegion.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, preferredX);\r\n                \r\n                let volumePacked = packedRegion.volume;\r\n                // Checks if packedRegion is larger then region, as it could be completely contained within\r\n                if(volumePacked > volumeRegion){\r\n                    // If the region is completely contained within the packed volume, remove the region\r\n                    if(packedRegion.ContainsRegion(smallValue, region)){\r\n                        /**/debugRegion(region, 0xff0000, true, 100);\r\n                        /**/await sleep(50);\r\n                        regions.splice(iRegion, 1);\r\n                        iRegion--;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Checks if the region and packedRegion intersects\r\n                /*let corners = packedRegion.GetCorners(-smallValue * 10);\r\n                let intersects = false, iCorner = 0;\r\n                while(iCorner < 27 && intersects === false){\r\n                    intersects = region.ContainsPoint(-smallValue, corners[iCorner], corners[iCorner + 1], corners[iCorner + 2]);\r\n                    iCorner += 3;\r\n                }\r\n                */\r\n\r\n                let intersects = packedRegion.Intersects(-smallValue, region);\r\n\r\n                if(intersects){\r\n                    /**/debugLog('intersects');\r\n                    /**/await click();\r\n\r\n                    regions.splice(iRegion, 1);\r\n                    iRegion--;\r\n                    break;\r\n                    \r\n                    // Reserve the packedRegion from the containing region\r\n                    let regionRemains = /**/await this.Occupy(region, packedRegion);\r\n\r\n                    iRegion--;\r\n                    // If the containing region: region, has been removed, then break\r\n                    if(regionRemains === false){\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // also merge walls?\r\n            }\r\n        }\r\n    }\r\n\r\n    async ProcessRegionsEnclosed(){\r\n        var regions = this.regions;\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let regionA = regions[iRegion];\r\n            let volumeA = regionA.volume;\r\n\r\n            for(let jRegion = iRegion + 1; jRegion < regions.length; jRegion++){\r\n                let regionB = regions[jRegion];\r\n                let volumeB = regionB.volume;\r\n\r\n                if(volumeA < volumeB){\r\n                    // If a A is completely contained within B, remove the A\r\n                    if(regionB.ContainsRegion(smallValue, regionA)){\r\n                        /**/debugRegion(regionA, 0xff0000, true, 100);\r\n                        /**/await sleep(50);\r\n                        regions.splice(iRegion, 1);\r\n                        iRegion--;\r\n                        break;\r\n                    }\r\n                }\r\n                else{\r\n                    // If a B is completely contained within A, remove the B\r\n                    if(regionA.ContainsRegion(smallValue, regionB)){\r\n                        /**/debugRegion(regionB, 0xff0000, true, 100);\r\n                        /**/await sleep(50);\r\n                        regions.splice(jRegion, 1);\r\n                        jRegion--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async ProcessRegions(){\r\n        console.log('>>> ProcessRegions()');\r\n        var regions = this.regions;\r\n\r\n        // Removes unuseable regions\r\n        /**/await this.ProcessRegionsForZeroRegions();\r\n\r\n        // Removes regions that are completely enclosed in packed volumes, and correct any intersecting ones\r\n        /**/await this.ProcessRegionsForPackedItems();\r\n\r\n        // Removes regions that are completely enclosed in larger regions\r\n        /**/await this.ProcessRegionsEnclosed();\r\n\r\n        // Sort by z (first) and volume (second)\r\n        regions.sort(Region.SortDeepestSmallest);\r\n\r\n        this.packedItems.sort(PackedItem.DepthSort);\r\n        /**/await this.ProcessRegionsForPackedItems();\r\n\r\n        /**/var debugUIDs = [];\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            /**/debugUIDs.push(debugRegion(region, 0xff0000, true, 100, true));\r\n            /**/await sleep(16);\r\n            /**/debugUIDs.push(debugRegion(region, 0xff0000, true, -1, true));\r\n        }\r\n\r\n        //**/await click();\r\n        /**/await debugUser();\r\n\r\n        /**/debugClear(debugUIDs);\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef CUBParams\r\n */\r\n\r\nclass PackingAssistant{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.workingArray = items;\r\n\r\n        this.minRegionAxis = smallValue;\r\n\r\n        // Sort items by volume ascending\r\n        this.workingArray.sort(Item.VolumeSort);\r\n\r\n        var smallestItem = this.workingArray[0];\r\n        this.minItemSize = Math.min(smallestItem.width, smallestItem.height, smallestItem.length); // Should take valid orientations into consideration\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n * @param {Array<Item>} items // this array (and content) will be changed/emptied\r\n * @param {CUBParams} params \r\n */\r\nasync function pack(container, items, params){\r\n\r\n    Debug.Viz.SetPackingSpaceVisibility(false);\r\n\r\n    var assistant = new PackingAssistant(container, items);\r\n    var packedContainer = new PackedContainer(container, assistant);\r\n\r\n    var iItem = items.length - 1;\r\n\r\n    // Helper function\r\n    function unpackItem(index){\r\n        let item = items[index];\r\n        packedContainer.SetUnpacked(item);\r\n        items.splice(index, 1);\r\n        iItem--;\r\n    }\r\n\r\n    // Helper function\r\n    /** @param {Number} index * @param {PackedItem} item */\r\n    function packItem(index, item){\r\n        packedContainer.SetPacked(item);\r\n        \r\n        item.ref.quantity--;\r\n        if(item.ref.quantity === 0){\r\n            items.splice(index, 1);\r\n            iItem--;\r\n        }\r\n    }\r\n\r\n    while(items.length > 0){\r\n        let item = items[iItem];\r\n\r\n        // Check if container supports this item's weight\r\n        let weightPass = packedContainer.WeightPass(item.weight);\r\n        if( weightPass === false ){\r\n\r\n            /**/debugLog('weight pass failed.');\r\n            /**/await sleep(200);\r\n            unpackItem(iItem);\r\n        }\r\n        else{\r\n\r\n            // Try to pack item\r\n            let packedItem = /**/await packedContainer.Fit(item);\r\n            if( packedItem === false ){\r\n\r\n                /**/debugLog('item fitting failed.');\r\n                /**/await sleep(200);\r\n                unpackItem(iItem);\r\n            }\r\n            else{\r\n\r\n                packItem(iItem, packedItem);\r\n            }\r\n        }\r\n\r\n        /**/await sleep(50);\r\n    }\r\n\r\n    packedContainer.packedItems.sort(PackedItem.DepthSort);\r\n\r\n    debugClear();\r\n    Debug.Viz.SetPackingSpaceVisibility(true);\r\n\r\n    return packedContainer;\r\n}\r\n\r\nexport {\r\n    pack\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/CUB.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nfunction resolve(w, l, h, dimensions){\r\n    var dw = dimensions.width, dl = dimensions.length, dh = dimensions.height;\r\n\r\n    if(almost(w, dw)){ // x\r\n        if(almost(h, dh)){ // y\r\n            return 'xyz';\r\n        }\r\n        else if(almost(h, dl)){ // z\r\n            return 'xzy';\r\n        }\r\n    }\r\n    else if(almost(w, dh)){ // y\r\n        if(almost(h, dw)){ // x\r\n            return 'yxz';\r\n        }\r\n        else if(almost(h, dl)){ // z\r\n            return 'yzx';\r\n        }\r\n    }\r\n    else if(almost(w, dl)){ // z\r\n        if(almost(h, dw)){ // x\r\n            return 'zxy';\r\n        }\r\n        else if(almost(h, dh)){ // y\r\n            return 'zyx';\r\n        }\r\n    }\r\n\r\n    console.warn('ResolveOrientation issue with:', item);\r\n    return 'xyz';\r\n}\r\n\r\nexport { resolve };\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/aas/AASOrientation.js","import Bin from './Bin';\r\nimport {\r\n  Item,\r\n  StartPosition,\r\n  WidthAxis,\r\n  HeightAxis,\r\n  DepthAxis\r\n} from './Item';\r\n\r\nexport default class Packer {\r\n\r\n  constructor(bins, items){\r\n    this.bins = bins || [];\r\n    this.items = items || [];\r\n    this.unfitItems = [];\r\n  }\r\n\r\n  addBin(bin) {\r\n    this.bins.push(bin);\r\n  }\r\n\r\n  addItem(item) {\r\n    this.items.push(item);\r\n  }\r\n\r\n  findFittedBin(i) {\r\n    for (let _i=0; _i<this.bins.length; _i++) {\r\n      let b = this.bins[_i];\r\n\r\n      if (!b.weighItem(i) || !b.putItem(i, StartPosition)) {\r\n        continue;\r\n      }\r\n\r\n      if (b.items.length === 1 && b.items[0] === i) {\r\n        b.items = [];\r\n      }\r\n\r\n      return b;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getBiggerBinThan(b) {\r\n    let v = b.getVolume();\r\n    for (let _i=0; _i<this.bins; _i++) {\r\n      let b2 = this.bins[_i];\r\n      if (b2.getVolume() > v) {\r\n        return b2;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  unfitItem() {\r\n    if (this.items.length === 0) {\r\n      return;\r\n    }\r\n    this.unfitItems.push(this.items[0]);\r\n    this.items.splice(0, 1);\r\n  }\r\n\r\n  packToBin(b, items) {\r\n    let b2 = null;\r\n    let unpacked = [];\r\n    let fit = b.weighItem(items[0]) && b.putItem(items[0], StartPosition);\r\n\r\n    if (!fit) {\r\n      let b2 = this.getBiggerBinThan(b);\r\n      if (b2) {\r\n        return this.packToBin(b2, items);\r\n      }\r\n      return this.items;\r\n    }\r\n\r\n    // Pack unpacked items.\r\n    for (let _i=1; _i < this.items.length; _i++) {\r\n      let fitted = false;\r\n      let item = this.items[_i];\r\n\r\n      if (b.weighItem(item)) {\r\n        // Try available pivots in current bin that are not intersect with\r\n        // existing items in current bin.\r\n        lookup:\r\n        for (let _pt=0; _pt < 3; _pt++) {\r\n          for (let _j=0; _j < b.items.length; _j++) {\r\n            let pv;\r\n            let ib = b.items[_j];\r\n            switch (_pt) {\r\n              case WidthAxis:\r\n                pv = [ib.position[0] + ib.getWidth(), ib.position[1], ib.position[2]];\r\n                break;\r\n              case HeightAxis:\r\n                pv = [ib.position[0], ib.position[1] + ib.getHeight(), ib.position[2]];\r\n                break;\r\n              case DepthAxis:\r\n                pv = [ib.position[0], ib.position[1], ib.position[2] + ib.getDepth()];\r\n                break;\r\n            }\r\n\r\n            if (b.putItem(item, pv)) {\r\n              fitted = true;\r\n              break lookup;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!fitted) {\r\n        while (b2 !== null) {\r\n          b2 = this.getBiggerBinThan(b);\r\n          if (b2) {\r\n            b2.items.push(item);\r\n            let left = this.packToBin(b2, b2.items);\r\n            if (left.length === 0) {\r\n              b = b2;\r\n              fitted = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!fitted) {\r\n          unpacked.push(item);\r\n        }\r\n      }\r\n    }\r\n\r\n    return unpacked;\r\n  }\r\n\r\n  pack() {\r\n\r\n    this.bins.sort((a, b) => {\r\n      return a.getVolume() > b.getVolume();\r\n    });\r\n\r\n    this.items.sort((a, b) => {\r\n      return a.getVolume() < b.getVolume();\r\n    });\r\n\r\n    while (this.items.length > 0) {\r\n      let bin = this.findFittedBin(this.items[0]);\r\n\r\n      if (bin === null) {\r\n        this.unfitItem();\r\n        continue;\r\n      }\r\n\r\n      this.items = this.packToBin(bin, this.items);\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Packer.js","import Debug from \"../../debug/Debug\";\r\n\r\nvar offset = new THREE.Vector3();\r\nvar orientation = new THREE.Quaternion();\r\nvar scale = new THREE.Vector3();\r\nfunction setDebugMatrix(matrix){\r\n    matrix.decompose(offset, orientation, scale);\r\n}\r\n\r\nconst debugging = false;\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => {\r\n        if(debugging) setTimeout(resolve, ms);\r\n        else resolve();\r\n    });\r\n}\r\n\r\nfunction str(obj){\r\n    var result;\r\n    if(obj instanceof Array){\r\n        result = '[';\r\n        let i;\r\n        for(i = 0; i < obj.length - 1; i++) result += obj[i] + ', ';\r\n        result += obj[i] + ']';\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction debugLog(...args){\r\n    console.log(...args);\r\n    return sleep(50);\r\n}\r\n\r\nfunction debugPacking(...args){\r\n    /** @type {Packing} */\r\n    var packing = args[0];\r\n    packing.spaces.forEach(space => {\r\n        var p = space.position;\r\n        var d = space.dimensions;\r\n        Debug.Viz.DrawVolume(p[0], p[1], p[2], d[0], d[1], d[2], args[1] || 0xaaffff, args[2] || 500);\r\n    });\r\n    return sleep(500);\r\n}\r\n\r\nfunction debugSpace(...args){\r\n    /** @type {Space} */\r\n    var space = args[0];\r\n    var p = space.position;\r\n    var d = space.dimensions;\r\n    Debug.Viz.DrawVolume(p[0], p[1], p[2], d[0], d[1], d[2], args[1] || 0xaaffff, args[2] || 500);\r\n    return sleep(300);\r\n}\r\n\r\nfunction debugPlacement(...args){\r\n    /** @type {Placement} */\r\n    var placement = args[0];\r\n    var p = placement.position;\r\n    var d = placement.dimensions;\r\n    Debug.Viz.DrawVolume(p[0], p[1], p[2], d[0], d[1], d[2], args[1] || 0xaaffaa, args[2] || 500);\r\n    return sleep(300);\r\n}\r\n\r\nfunction debugPacked(...args){\r\n    /** @type {Placement} */\r\n    var placement = args[0];\r\n\r\n    debugPlacement(placement, 0x8888ff, 100000);\r\n}\r\n\r\nfunction debugAs(type, ...args){\r\n    switch(type){\r\n        case 'Log': return debugLog(...args);\r\n        case 'Packing': return debugPacking(...args);\r\n        case 'Space': return debugSpace(...args);\r\n        case 'Placement': return debugPlacement(...args);\r\n        case 'Packed': return debugPacked(...args);\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * @typedef {Array<Number>} Dimensions\r\n * @typedef {Array<Number>} Position\r\n * \r\n * @typedef Item\r\n * @property {string} id \r\n * @property {Dimensions} dimensions\r\n * @property {Number} weight\r\n * \r\n * @typedef Container\r\n * @property {Dimensions} dimensions\r\n * @property {Number} weight\r\n * \r\n * @typedef Placement\r\n * @property {string} id\r\n * @property {Dimensions} dimensions\r\n * @property {Position} position\r\n * @property {Number} weight\r\n * \r\n * @typedef Space\r\n * @property {Dimensions} dimensions\r\n * @property {Position} position\r\n * \r\n * @typedef Packing\r\n * @property {Array<Space>} spaces\r\n * @property {Array<Placement>} placements\r\n * @property {Number} weight\r\n */\r\n\r\nconst placePermutations = [ [0, 1, 2], [0, 2, 1], [1, 0, 2], [1, 2, 0], [2, 0, 1], [2, 1, 0] ];\r\n\r\n/**\r\n * @param {Item} item \r\n * @param {Space} space\r\n * @returns {Placement}\r\n */\r\nfunction place(item, space){\r\n    var d = item.dimensions,\r\n        sd = space.dimensions;\r\n    \r\n    for(let i = 0; i < 6; i++){\r\n        let p = placePermutations[i];\r\n        if( d[p[0]] <= sd[0]\r\n            && d[p[1]] <= sd[1]\r\n            && d[p[2]] <= sd[2]\r\n        ){\r\n            return {\r\n                id: item.id,\r\n                dimensions: [d[p[0]], d[p[1]], d[p[2]]],\r\n                position: space.position,\r\n                weight: item.weight\r\n            };\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Space} space \r\n * @param {Placement} placement\r\n * @returns {Array<Space>} \r\n */\r\nfunction breakUpSpace(space, placement){\r\n    var spaceDim = space.dimensions,\r\n        spacePos = space.position,\r\n        placementDim = placement.dimensions;\r\n    return [\r\n        {  \r\n            dimensions: [ spaceDim[0] - placementDim[0]  , spaceDim[1]                      , spaceDim[2]                   ],  \r\n            position:   [ spacePos[0] + placementDim[0]  , spacePos[1]                      , spacePos[2]                   ]\r\n        },{  \r\n            dimensions: [ placementDim[0]                , spaceDim[1] - placementDim[1]    , spaceDim[2]                   ],  \r\n            position:   [ spacePos[0]                    , spacePos[1] + placementDim[1]    , spacePos[2]                   ]\r\n        },{  \r\n            dimensions: [ placementDim[0]                , placementDim[1]                  , spaceDim[2] - placementDim[2] ],  \r\n            position:   [ spacePos[0]                    , spacePos[1]                      , spacePos[2] + placementDim[2] ]\r\n        }\r\n    ];\r\n}\r\n\r\nfunction rnsort(a, b){\r\n    if(a < b) return 1;\r\n    if(a > b) return -1;\r\n    return 0;\r\n}\r\n\r\nfunction volumeSort(a, b){\r\n    var av = a.dimensions[0] * a.dimensions[1] * a.dimensions[2];\r\n    var bv = b.dimensions[0] * b.dimensions[1] * b.dimensions[2];\r\n\r\n    if(av > bv) return -1;\r\n    if(av < bv) return 1;\r\n    return 0;\r\n}\r\n\r\n/**\r\n * @param {Container} container \r\n * @param {Array<Item>} items \r\n */\r\nasync function pack(container, items){\r\n    /** @type {Array<Packing>} */\r\n    var packings = [];\r\n    /** @type {Array<Item>} */\r\n    var unpacked = [];\r\n\r\n    items.sort(volumeSort);\r\n\r\n    //for(let iItem = 0; iItem < items.length; iItem++){\r\n    const iItem = 0;\r\n    while(items.length > 0){\r\n        let item = items[iItem];\r\n\r\n        if(item.weight > container.weight){\r\n            return {failed: 'Item is too big'};\r\n        }\r\n        \r\n        let packed = false;\r\n\r\n        for(let iPacking = 0; iPacking < packings.length && !packed; iPacking++){\r\n            let packing = packings[iPacking];\r\n            await debugAs('Packing', packing);\r\n\r\n            // If this packing's going to be too big with this item as well then skip on to the next packing\r\n            if(packing.weight + item.weight > container.weight){\r\n                await debugAs('Log', 'Packing ' + iPacking + ' is overweight');\r\n                continue;\r\n            }\r\n\r\n            for(let iSpace = 0; iSpace < packing.spaces.length; iSpace++){\r\n                let space = packing.spaces[iSpace];\r\n                await debugAs('Space', space);\r\n                \r\n                // Try placing the item in this space, if it doesn't fit skip on the next space\r\n                let placement = place(item, space);\r\n                if( !placement ){\r\n                    await debugAs('Log', 'Placing item in Space ' + iSpace + ' of Packing ' + iPacking + ' failed');\r\n                    continue;\r\n                }\r\n\r\n                await debugAs('Placement', placement);\r\n\r\n                // Add the item to the packing and break up the surrounding spaces\r\n                packing.placements.push(placement);\r\n                packing.weight += item.weight;\r\n                packing.spaces.splice(iSpace, 1);\r\n                packing.spaces.push(...breakUpSpace(space, placement));\r\n\r\n                packed = true;\r\n                items.splice(iItem, 1);\r\n                await debugAs('Packed', placement);\r\n                await debugAs('Log', 'Item packed successfully in Space ' + iSpace + ' of Packing ' + iPacking);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if( packed ){\r\n            continue;\r\n        }\r\n\r\n        // Can't fit in any of the spaces for the current packings so lets try a new space the size of the container\r\n        /** @type {Space} */\r\n        let space = {\r\n            dimensions: container.dimensions.sort(rnsort),\r\n            position: [0, 0, 0]\r\n        };\r\n\r\n        let placement = place(item, space);\r\n\r\n        // If it can't be placed in this space, then it's just too big for the container and we should abandon hope\r\n        if( !placement ){\r\n            unpacked.push(...items.splice(iItem, 1));\r\n            await debugAs('Log', 'Placing item of dimensions' + str(item.dimensions) + ' abandoned');\r\n            continue;\r\n        }\r\n\r\n        // Otherwise lets put the item in a new packing and break up the remaing free space around it\r\n        /** @type {Packing} */\r\n        let packing = {\r\n            placements: [placement],\r\n            weight: item.weight,\r\n            spaces: breakUpSpace(space, placement)\r\n        };\r\n        packings.push(packing);\r\n        items.splice(iItem, 1);\r\n        await debugAs('Packed', placement);\r\n        await debugAs('Log', 'Item packed successfully in new Space.');\r\n    }\r\n\r\n    return {\r\n        packings,\r\n        unpacked\r\n    };\r\n}\r\n\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\n/** \r\n * @param {Array<Number>} packedDimensions\r\n * @param {Array<Number>} itemDimensions\r\n * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n */\r\nfunction resolveOrientation(packedDimensions, itemDimensions){\r\n    var pw = packedDimensions[0],\r\n        ph = packedDimensions[1],\r\n        w = itemDimensions[0],\r\n        h = itemDimensions[1],\r\n        l = itemDimensions[2];\r\n    if(almost(pw, w)){ // x\r\n        if(almost(ph, h)){ // y\r\n            return 'xyz';\r\n        }\r\n        else if(almost(ph, l)){ // z\r\n            return 'xzy';\r\n        }\r\n    }\r\n    else if(almost(pw, h)){ // y\r\n        if(almost(ph, w)){ // x\r\n            return 'yxz';\r\n        }\r\n        else if(almost(ph, l)){ // z\r\n            return 'yzx';\r\n        }\r\n    }\r\n    else if(almost(pw, l)){ // z\r\n        if(almost(ph, w)){ // x\r\n            return 'zxy';\r\n        }\r\n        else if(almost(ph, h)){ // y\r\n            return 'zyx';\r\n        }\r\n    }\r\n    return 'xyz';\r\n}\r\n\r\nexport {\r\n    pack,\r\n    resolveOrientation,\r\n    setDebugMatrix\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/brb/BRB.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils3D from \"../utils/cik/Utils3D\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\nimport Container from \"../packer/container/Container\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Object} cargoListView\r\n * @property {import('../utils/cik/Utils3D').IPoint} cargoListView.bottomLeft\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    cargoListView: {\r\n        bottomLeft: { x: 100, y: 100 },\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {}\r\n    }\r\n};\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, params){\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var scope = this;\r\n\r\n        // Fill lights\r\n        if(true){\r\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, false);\r\n\r\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\r\n            let dlData = {\"color\":\"0xfeeedd\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.001,\"shadow.radius\":1,\"shadow.mapSize.x\":2048,\"shadow.mapSize.y\":2048,\"shadow.camera.left\":-400,\"shadow.camera.top\":400,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-400,\"shadow.camera.near\":1,\"shadow.camera.far\":1000};\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            Config.Load(dl, dlData);\r\n\r\n            if(this.sceneSetup.ux.params.hud){\r\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\r\n            }\r\n        }\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        /** @param {Container} container */\r\n        function onContainerAdded(container){\r\n            /** @type {THREE.Box3} */\r\n            let box3;\r\n            container.volumes.forEach(volume => {\r\n                if(box3 === undefined)\r\n                    box3 = volume.box3;\r\n                else\r\n                    box3.union(volume.box3);\r\n            });\r\n            scope.sceneSetup.cameraController.Frame(box3, .7);\r\n            scope.packingSpaceView.Add(container);\r\n        }\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n        var onCargoGroupAdded = this.cargoListView.Add.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        var onCargoRemoved = this.cargoListView.Remove.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoRemoved);\r\n\r\n        // Cargo list display\r\n        if(this.params.ux.params.hud){    \r\n            this.sceneSetup.hud.Add(this.cargoListView.templatesView);\r\n            this.HUDSetup();\r\n        }\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        var onPackUpdate = this.packResultView.DisplayPackingResult.bind(this.packResultView);\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var clv = this.cargoListView;\r\n        var scope = this;\r\n\r\n        var cargoListViewRect = new Utils3D.Rect(0, 0, 150, input.screen.height);\r\n        var clvRectIgnore = cargoListViewRect.Clone();\r\n        clvRectIgnore.Offset(input.screen.left, input.screen.top);\r\n\r\n        var min = -1, max = 1;\r\n        var v = new THREE.Vector3(),\r\n            viewportPointA = new THREE.Vector2(),\r\n            viewportPointB = new THREE.Vector2();\r\n        var dragOffset = 0;\r\n\r\n        // \r\n        \r\n        /**\r\n         * @param {import('./CargoListView').SortResult} sortResult\r\n         */\r\n        function onSort(sortResult){\r\n            if(sortResult.cargoes > 0){\r\n                Utils3D.Project(v.set(0, sortResult.min, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, sortResult.max, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                \r\n                var distance = viewportPointA.sub(viewportPointB).length();\r\n                var ratio = .8 / distance;\r\n                var s = Math.max(.6, Math.pow(Math.min(1, clv.templatesView.scale.length() * ratio), .9));\r\n                clv.templatesView.scale.set(s, s, s);\r\n                clv.templatesView.updateMatrixWorld();\r\n            }\r\n\r\n            min = v.set(0, sortResult.min, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n            max = v.set(0, sortResult.max, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n        }\r\n        this.cargoListView.On(CargoListView.signals.sort, onSort);\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').DragEvent} dragEvent \r\n         */\r\n        function onDrag(dragEvent){\r\n            let start = cargoListViewRect.ContainsPoint(dragEvent.sx, dragEvent.sy);\r\n            let current = cargoListViewRect.ContainsPoint(dragEvent.x, dragEvent.y);\r\n            if(start && current){\r\n                let offset = dragEvent.dy * .5 * units;\r\n                let clvMin = min + offset,\r\n                    clvMax = max + offset;\r\n                Utils3D.Project(v.set(0, clvMin, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, clvMax, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                //console.log(viewportPointA, viewportPointB);\r\n                if( (offset > 0 && viewportPointA.y < -.7)\r\n                    || \r\n                    (offset < 0 && viewportPointB.y > .8)\r\n                ){\r\n                    dragOffset += offset;\r\n                    min += offset;\r\n                    max += offset;\r\n                    clv.templatesView.position.y += offset;\r\n                }\r\n            }\r\n        }\r\n        input.onDrag.push(onDrag);\r\n\r\n        this.sceneSetup.cameraController.orbitControls.ignoredAreas.push(\r\n            clvRectIgnore\r\n        );\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').IScreen} screen \r\n         */\r\n        function onScreenResize(screen){\r\n\r\n            cargoListViewRect.bottom = screen.height;\r\n            clvRectIgnore.Copy(cargoListViewRect);\r\n            clvRectIgnore.Offset(screen.left, screen.top);\r\n\r\n            var bottomLeft = scope.params.cargoListView.bottomLeft; // offset in pixels\r\n            tempVec.set(bottomLeft.x, bottomLeft.y); // viewport point in pixels\r\n\r\n            Utils3D.ToNDC(tempVec, screen); // NDC point\r\n            Utils3D.Unproject(tempVec, hud.cameraController.camera, tempVec, 'z'); // worldPos on z plane\r\n            tempVec.y += dragOffset;\r\n            clv.templatesView.position.copy(tempVec); // set view position\r\n\r\n            clv.templatesView.updateMatrixWorld(true);\r\n\r\n            clv.Sort();\r\n        }\r\n        \r\n        input.onResize.push(onScreenResize);\r\n        onScreenResize(input.screen);\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.templatesView);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","\r\n\r\n/**\r\n * @typedef {Object} Screen\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\n/**\r\n * @typedef {Object} IPoint\r\n * @property {Number} x\r\n * @property {Number} y\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass Utils3D {\r\n\r\n    /** Converts 'vec' to NDC, to supply 'vec' in the range [0, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToNDC(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        vec.x = vec.x * 2 - 1;\r\n        vec.y = vec.y * 2 - 1;\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts 'vec' to [0, 1] range, to supply 'vec' in NDC [-1, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToUnit(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        else{\r\n            vec.x = vec.x / 2 + .5;\r\n            vec.y = vec.y / 2 + .5;\r\n        }\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts a NDC to world plane (axis) position\r\n     * @param {THREE.Vector2|THREE.Vector3} viewportPoint - in NDC, can be safely used as 'result' if THREE.Vector3\r\n     * @param {THREE.Camera} camera \r\n     * @param {THREE.Vector3} [result]\r\n     * @param {string} [axis] - 'x', 'y' or 'z' (default='z')\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    static Unproject(viewportPoint, camera, result, axis){\r\n        // Ref: https://stackoverflow.com/a/13091694/1712403\r\n\r\n        result = result || new THREE.Vector3();\r\n        result.set(viewportPoint.x, viewportPoint.y, .5);\r\n        result.unproject(camera);\r\n        result.sub(camera.position).normalize();\r\n\r\n        axis = axis || 'z';\r\n        var distance = - camera.position[axis] / result[axis];\r\n        result.multiplyScalar(distance).add(camera.position);\r\n\r\n        return result;\r\n    }\r\n\r\n    /** Converts world position to NDC\r\n     * @param {THREE.Vector3} worldPoint \r\n     * @param {THREE.Camera} camera \r\n     * @param {Screen} screen \r\n     * @param {THREE.Vector2} result \r\n     */\r\n    static Project(worldPoint, camera, screen, result) {\r\n        // Ref: https://github.com/josdirksen/threejs-cookbook/blob/master/03-camera/03.07-convert-world-coordintate-to-screen-coordinates.html\r\n\r\n        tempVec.copy(worldPoint).project(camera);\r\n        result = result || new THREE.Vector2();\r\n        result.x  = tempVec.x;\r\n        result.y  = tempVec.y;\r\n        return result;\r\n    }\r\n}\r\n\r\nclass Rect {\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    constructor(left, top, right, bottom){\r\n        this.Set(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    Set(left, top, right, bottom){\r\n        this.left = left;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n    }\r\n\r\n    /**\r\n     * @param {IPoint|Number} point - {x, y} | x value\r\n     * @param {Number} y - y value\r\n     */\r\n    ContainsPoint(point, y){\r\n        let x = y ? point : point.x;\r\n        y = y ? y : point.y;\r\n        return x > this.left && x < this.right && y > this.top && y < this.bottom;\r\n    }\r\n\r\n    Offset(x, y){\r\n        this.left += x;\r\n        this.top += y;\r\n        this.right += x;\r\n        this.bottom += y;\r\n    }\r\n\r\n    Copy(rect){\r\n        this.Set(rect.left, rect.top, rect.right, rect.bottom);\r\n    }\r\n\r\n    Clone(){\r\n        return new Rect(this.left, this.top, this.right, this.bottom);\r\n    }\r\n}\r\n\r\nUtils3D.Rect = Rect;\r\n\r\nexport default Utils3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils3D.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Logger from '../utils/cik/Logger';\r\nimport Tween from '../utils/cik/Tween';\r\nimport Packer from '../packer/Packer';\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    var packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nfunction getOrientationAngles(orientation){\r\n    switch(orientation){\r\n        case 'xyz': return  [0,     0,      0];\r\n        case 'xzy': return  [90,    0,      0];\r\n        case 'yxz': return  [0,     0,      90];\r\n        case 'yzx': return  [90,    0,      90];\r\n        case 'zxy': return  [90,    -90,    0];\r\n        case 'zyx': return  [0,     -90,    0];\r\n    }\r\n}\r\n\r\n/**\r\n * @param {string} orientation \r\n */\r\nfunction getOrientationEuler(orientation){\r\n    const rad = Math.PI / 180.0;\r\n    var a = getOrientationAngles(orientation);\r\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\r\n}\r\n\r\nclass PackResultView{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Packer.PackingResult} packingResult\r\n     */\r\n    DisplayPackingResult(packingResult){\r\n        console.log(packingResult);\r\n        //var containingVolume = this.packingSpaceView.FindContainingVolume(containingVolumeID);\r\n        var containingVolume = packingResult.packed[0].containingVolume;\r\n        var matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        var offset = new THREE.Vector3();\r\n        var orientation = new THREE.Quaternion();\r\n        var scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n\r\n        var animatingViews = this.animatingViews;\r\n        var view = this.view;\r\n        var onTweenComplete = this.OnTweenComplete.bind(this);\r\n\r\n        for(var i = 0, numPackedItems = packingResult.packed.length; i < numPackedItems; i++){\r\n            let item = packingResult.packed[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            Logger.WarnOnce('PackResultView.DisplayPackingResult', 'packedCargoView should be rotated instead of re-scaling');\r\n            let rotation = getOrientationEuler(item.orientation);\r\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\r\n\r\n            let x = item.position.x + offset.x,\r\n                y = item.position.y + offset.y,\r\n                z = item.position.z + offset.z;\r\n\r\n            let zEntry = containingVolume.dimensions.length;\r\n            setTimeout(function(){\r\n                let posTweenCombo = Tween.Combo.Request3(Tween.functions.linear,\r\n                    x, y, zEntry, \r\n                    0, 0, z - zEntry,\r\n                    .75\r\n                );\r\n                \r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenComplete;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n    \r\n                view.add(packedCargoView.view);\r\n            }, 200 * i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Tween|Tween.Combo} tween \r\n     */\r\n    OnTweenComplete(tween){\r\n        var index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff});\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 1;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n\r\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n        this.wireMesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => {\r\n            tween.Unhook();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, startValue0, startValue1, startValue2, delta0, delta1, delta2, duration){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.startTime = clock.getElapsedTime();\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js","import App from \"../App\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Packer from \"../packer/Packer\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass PackerInterface extends Signaler {\r\n    /**\r\n     * @param {App} app \r\n     */\r\n    constructor(app){\r\n        super();\r\n        \r\n        var scope = this;\r\n        function onPackUpdate(){\r\n            scope.Dispatch(signals.packUpdate);\r\n        }\r\n\r\n        app.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n        this[_app] = app;\r\n    }\r\n\r\n    Solve(arg){\r\n        /** @type {App} */\r\n        var app = this[_app];\r\n        app.packer.Solve(arg);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js"],"sourceRoot":""}