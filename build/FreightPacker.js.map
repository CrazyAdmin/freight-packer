{"version":3,"sources":["webpack:///webpack/bootstrap 9ad1b16a33d6d696db24","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/main.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/App.js","webpack:///./src/api/scene/SceneSetup.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/components/common/TextField.js"],"names":["tracing","standard","warning","messages","Message","type","content","args","forEach","arg","push","json","JSON","parse","stringify","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","trace","groupEnd","warn","filter","undefined","output","ToString","value","active","CargoEntry","properties","descriptions","entry","trimVariableRegex","RegExp","twopi","Math","PI","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","keys","key","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","Packer","packingSpace","cargoList","cargoAdded","cargoRemoved","signals","CargoList","cargoes","cargo","Cargo","FromEntry","Log","Dispatch","index","indexOf","removedCargoes","splice","Signaler","event","callbacks","Dimensions","width","height","Set","_vec3","Vector3","dimensions","toFixed","global","FreightPacker","defaultOptions","debug","containerDiv","options","AssignUndefined","DevSetup","cargoInput","app","boxInput","webgl","Capabilities","IsWebGLReady","Promise","resolve","reject","toConsole","traceToConsole","canvas","document","createElement","gl","getContext","WebGLRenderingContext","App","components","packer","sceneSetup","Init","then","Start","bind","view","On","boxEntry","Trace","Add","Clone","SceneSetup","domElement","quality","Common","units","controllerParams","sceneController","cameraParams","fov","aspect","near","far","id","cameraController","OrbitControls","rendererParams","clearColor","renderSizeMul","sceneRenderer","appendChild","renderer","UseCamera","camera","onResize","ReconfigureViewport","setupParams","fillLights","gridHelper","position","SetTarget","DefaultLights","GridHelper","AddDefault","Update","scope","timestamp","animationFrameID","requestAnimationFrame","Render","scene","cancelAnimationFrame","Dispose","params","ambient","AmbientLight","directionalLight","DirectionalLight","ambientContainer","add","Input","domContainer","enabled","defineProperty","get","_camera","min","max","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","screen","ComputeScreen","raycaster","Raycaster","clock","Clock","start","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","update","interval","last","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","doubleClickTime","addEventListener","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","screenNeedsUpdate","OnScroll","cameraNeedsUpdate","OnResize","keyboard","keypress","Listener","on","simple_combo","defaultKeysListen","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","left","right","bottom","top","rectOffset","GetRectOffset","mouseEvent","button","UpdateScreenAndMouse","now","getElapsedTime","_dridMouseDown","AbortDelayedAction","DelayedAction","_mouseDownDelayed","UpdateRaycast","copy","ExecuteDelayedMD","distanceToSquared","noMouseDrag","clamp","clientX","clientY","preventDefault","delta","wheelDelta","detail","lerp","Number","isNaN","updateProjectionMatrix","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","LerpZoom","action","delay","drid","setTimeout","clearTimeout","_repeats","setInterval","clearInterval","objects","recursive","intersects","Array","intersectObjects","intersectObject","groupID","group","log","updateMatrixWorld","setFromCamera","raycastGroupsKeys","numRaycastGroups","sort","reverse","iGroup","Raycast","_defaultKeysListen","split","concat","RaycastGroup","items","collectionQuery","updateProperty","continuous","raycastItems","GetRaycastItems","iItem","rItem","Cik","raycastItemIndex","BubbleUpForIndex","child","collection","nestLimit","numCollection","parent","Quality","testCallback","composer","antialias","shadows","result","Boolean","OnTestComplete","Controller","itemsContainer","Object3D","name","miscContainer","defaults","Scene","container","objName","getObjectByName","remove","Renderer","WebGLRenderer","shadowMap","PCFSoftShadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","floor","Camera","PerspectiveCamera","fpsControls","Navigation","FirstPerson","Hold","Release","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","orbitControls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","rotation","PackingSpace","Container","volumes","ContainingVolume","Volume","View","Display","onCargoAdded","onCargoRemoved","Remove","CargoListView","updated","aborted","completed","CargoInput","Reset","BoxEntry","stacking","translation","TextField","defaultContent","statcking","PackingProperty","property","SupportsStacking","Constraint","RotationConstraint","TranslationConstraint","label","field"],"mappings":"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","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9ad1b16a33d6d696db24","\r\nvar tracing = 0,\r\n    standard = 1,\r\n    warning = 2;\r\n\r\nvar messages = [];\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        var content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.parse(JSON.stringify(arg));\r\n                    content.push(json);\r\n                }\r\n                catch(err){\r\n                    content.push(err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(tracing, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(standard, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(warning, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        if(filter === undefined){\r\n            filter = {};\r\n            filter[tracing] = filter[standard] = filter[warning] = true;\r\n        }\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","class CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.active = false;\r\n        this.properties = {};\r\n        this.descriptions = [];\r\n    }\r\n\r\n    Clone(entry){\r\n        if( entry === undefined) entry = new CargoEntry();\r\n        entry.active = this.active;\r\n        entry.properties = {};\r\n        entry.descriptions = [];\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\n\r\nclass Packer {\r\n    constructor(){\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Cargo from \"./Cargo\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nconst cargoAdded = 'cargoAdded',\r\n    cargoRemoved = 'cargoRemoved';\r\n\r\nconst signals = {\r\n    cargoAdded: cargoAdded,\r\n    cargoRemoved: cargoRemoved\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        this.cargoes = [];\r\n    }\r\n\r\n    Add(entry){\r\n        var cargo;\r\n        if(entry instanceof CargoEntry){\r\n            cargo = Cargo.FromEntry(entry);\r\n        }\r\n        else{\r\n            cargo = entry;\r\n            Logger.Log(entry, 'used as Cargo');\r\n        }\r\n\r\n        this.cargoes.push(cargo);\r\n        this.Dispatch(cargoAdded, cargo);\r\n    }\r\n\r\n    Remove(cargo){\r\n        var index = this.cargoes.indexOf(cargo);\r\n        if(index != -1){\r\n            var removedCargoes = this.cargoes.splice(index, 1);\r\n            this.Dispatch(cargoRemoved, removedCargoes[0]);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import CargoEntry from \"../components/common/CargoEntry\";\r\n\r\nclass Cargo {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n    static FromEntry(entry){\r\n        return new Cargo(entry);\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","class Dimensions {\r\n    constructor(width, length, height){\r\n        this.Set(width, length, height);\r\n        this._vec3 = new THREE.Vector3();\r\n    }\r\n\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: y=height, z=length and x=width\r\n     */\r\n    get vec3(){\r\n        return this._vec3.set(this.width, this.height, this.length);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 10\n// module chunks = 0","import Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport CargoInput from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\n\r\nconst defaultOptions = {\r\n\tdebug: false\r\n};\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Constructor\r\n\t * @param {HTMLElement} containerDiv\r\n\t * @param {Object} options\r\n\t */\r\n\tconstructor( containerDiv, options ) {\r\n\r\n\t\tthis.options = Utils.AssignUndefined(options, defaultOptions);\r\n\t\tFreightPacker.DevSetup(this.options);\r\n\r\n\t\t/**\r\n\t\t * Handles input of: description fields (label, etc.), dimensions and constraints\r\n\t\t * @type {CargoInput}\r\n\t\t */\r\n\t\tthis.cargoInput = new CargoInput();\r\n\r\n\t\tthis.app = new App(containerDiv, {\r\n\t\t\tboxInput: this.cargoInput\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic DevSetup(options){\r\n\t\tif(options.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","\r\nimport SceneSetup from './scene/SceneSetup';\r\nimport Logger from './utils/cik/Logger';\r\nimport Packer from './packer/Packer';\r\nimport View from './view/View';\r\n\r\nclass App {\r\n    constructor(containerDiv, components) {\r\n        \r\n        this.components = components;\r\n\r\n        this.packer = new Packer();\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        var packer = this.packer;\r\n        this.view = new View(packer, this.sceneSetup);\r\n        this.sceneSetup.Start();\r\n\r\n        this.components.boxInput.On('completed', function(boxEntry){\r\n            Logger.Trace('insert box');\r\n            packer.cargoList.Add(boxEntry.Clone());\r\n        });\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from './Controller';\r\nimport Renderer from './Renderer';\r\nimport Camera from './Camera';\r\n\r\nclass SceneSetup {\r\n    constructor(containerDiv){\r\n        this.domElement = containerDiv;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = 1;\r\n        var controllerParams = {units: units};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        var cameraParams = {fov: 65, aspect: 1, near: 0.01 * units, far: 1000 * units, id: 'app'};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.domElement);\r\n\r\n        var rendererParams = {clearColor: 0xafafaf, renderSizeMul: 1};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n        this.sceneRenderer.UseCamera(this.cameraController.camera);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n        this.input.onResize.push(this.sceneRenderer.ReconfigureViewport.bind(this.sceneRenderer));\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            fillLights: true,\r\n            gridHelper: true,\r\n\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = -100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Fill lights\r\n        if(setupParams.fillLights){\r\n            this.DefaultLights(this.sceneController);\r\n        }\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            var scope = this;\r\n            this.Update = function(timestamp){\r\n                scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                scope.input.Update();\r\n                scope.cameraController.Update();\r\n                scope.sceneRenderer.Render(scope.sceneController.scene);\r\n\r\n            };\r\n        }\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n    }\r\n\r\n    DefaultLights(){\r\n\r\n        var units = this.sceneController.params.units;\r\n\r\n        var ambient = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(7 * units, 15 * units, 30 * units);\r\n        \r\n        this.sceneController.ambientContainer.add(ambient);\r\n        this.sceneController.ambientContainer.add(directionalLight);\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/SceneSetup.js","\r\nimport RaycastGroup from './RaycastGroup';\r\nimport Utils from '../Utils';\r\n\r\nclass Input {\r\n\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.update = [\r\n            {interval:(1/25), last:0, callback: this.Update25.bind(this)},\r\n            {interval:(1/10), last:0, callback: this.Update10.bind(this)}\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    static get defaultKeysListen(){\r\n        if(Input._defaultKeysListen === undefined){\r\n            Input._defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n        }\r\n        return Input._defaultKeysListen;\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = this.defaultKeysListen;\r\n        }\r\n        else{\r\n            /*this.defaultKeysListen.forEach(key => {\r\n                if(keys.indexOf(key) === -1) keys.push(key);\r\n            });*/\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.update.length; iUpdate++){\r\n            var update = this.update[iUpdate];\r\n            if(update.callback === undefined){\r\n                update();\r\n            }\r\n            else if(now - update.last > update.interval){\r\n                update.callback();\r\n                update.last = now;\r\n            }\r\n        }\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            raycastGroupsKeys.sort().reverse();\r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","\r\nclass RaycastGroup {\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive, continuous){\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n        this.continuous = continuous !== undefined ? continuous : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        var raycastItems;\r\n        if(this.updateProperty){\r\n            raycastItems = [];\r\n            for(var i = 0; i < this.raycastItems.length; i++) raycastItems[i] = this.collectionQuery(this.items[i]);\r\n        }\r\n        else{\r\n            raycastItems = this.raycastItems;\r\n        }\r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n            if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n        }\r\n        else if(this.continuous) {\r\n            this.callback(false);\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nclass Renderer {\r\n    constructor(params) {\r\n\r\n        this.params = params;\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            this.renderer.shadowMap.autoUpdate = false;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.UseCamera = function(camera){\r\n            this.camera = camera;\r\n        };\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene){\r\n            this.renderer.render(scene, this.camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = screen.width + 'px';\r\n            this.renderer.domElement.style.height = screen.height + 'px';\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen){\r\n            this.camera.aspect = screen.width / screen.height;\r\n            this.camera.updateProjectionMatrix();\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","\r\nclass Camera {\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target = lookTarget;\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import Container from \"./container/Container\";\r\n\r\nclass PackingSpace {\r\n    constructor(){\r\n        this.container = new Container();\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","import ContainingVolume from \"./ContainingVolume\";\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type ContainingVolume\r\n         */\r\n        this.volumes = [];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","import Volume from \"./Volume\";\r\n\r\nclass ContainingVolume extends Volume {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nclass Volume {\r\n    constructor(){\r\n        this.position = new THREE.Vector3();\r\n        this.dimensions = new Dimensions();\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     */\r\n    constructor(packer, sceneSetup){\r\n        this.sceneSetup = sceneSetup;\r\n\r\n        this.cargoList = new CargoListView();\r\n        this.Display(this.cargoList);\r\n\r\n        var onCargoAdded = this.cargoList.Add.bind(this.cargoList);\r\n        packer.cargoList.On(CargoList.signals.cargoAdded, onCargoAdded);\r\n        var onCargoRemoved = this.cargoList.Remove.bind(this.cargoList);\r\n        packer.cargoList.On(CargoList.signals.cargoRemoved, onCargoRemoved);\r\n    }\r\n\r\n    Display(object){\r\n        var sceneController = this.sceneSetup.sceneController;\r\n        if(object instanceof CargoListView){\r\n            sceneController.AddDefault(object.view);\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import Cargo from \"../packer/Cargo\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nclass CargoListView {\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Cargo} cargo \r\n     */\r\n    Add(cargo){\r\n        Logger.Trace('Adding cargo: ' + cargo.ToString() + ' to view', cargo);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Cargo} cargo \r\n     */\r\n    Remove(cargo){\r\n\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\nimport BoxEntry from './box/BoxEntry';\r\n\r\nvar updated = 'updated',\r\n    aborted = 'aborted',\r\n    completed = 'completed';\r\n\r\nclass CargoInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        this.entry = new BoxEntry();\r\n    }\r\n\r\n    Update(width, length, height){\r\n        this.entry.dimensions.Set(width, length, height);\r\n        Logger.Trace('entry updated', this.entry);\r\n        this.entry.active = true;\r\n        this.Dispatch(updated, this.entry);\r\n    }\r\n\r\n    Abort(){\r\n        this.entry.active = false;\r\n        this.entry.Reset();\r\n        Logger.Trace('entry deleted');\r\n        this.Dispatch(aborted);\r\n    }\r\n\r\n    Complete(){\r\n        if( this.entry.active ){\r\n            this.Dispatch(completed, this.entry);\r\n            this.entry.Reset();\r\n        }\r\n        return this.entry;\r\n    }\r\n\r\n    get currentEntry(){\r\n        return this.entry;\r\n    }\r\n}\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n        \r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.push(new TextField('label', TextField.defaultContent));\r\n    }\r\n\r\n    Reset(){\r\n        this.active = false;\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n        this.descriptions.length = 1;\r\n        this.descriptions[0].content = TextField.defaultContent;\r\n    }\r\n\r\n    Clone(){\r\n        var entry = super.Clone(new BoxEntry());\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.properties.statcking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var i = 0; i < this.descriptions.length; i++){\r\n            entry.descriptions.push(this.descriptions[i].Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions[0].content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","class PackingProperty {\r\n    constructor(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Clone(){\r\n        var property = new PackingProperty();\r\n        property.enabled = this.enabled;\r\n        return property;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nexport {\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","class TextField {\r\n    constructor(label, content){\r\n        this.label = label;\r\n        this.content = content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js"],"sourceRoot":""}