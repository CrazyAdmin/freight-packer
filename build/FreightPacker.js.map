{"version":3,"sources":["webpack:///webpack/bootstrap 0432ff935bcf7822849d","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/components/LightDispatcher.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/App.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/UX.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/view/CargoView.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/cub/Components.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/view/components/TextLabelView.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/components/Visualization.js","webpack:///./src/api/components/User.js","webpack:///./src/api/components/assets/ColorTemplate.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/view/components/FloatingShelf.js","webpack:///./src/api/view/components/Outline.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/packer/cub/CUB.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/cub/Math2D.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/utils/cik/Tween.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","typeofObject","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","undefined","keys","forEach","key","AssignUndefined","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","push","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","index","indexOf","splice","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","args","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","numEntries","getDefaultLabel","epsilon","pow","numberType","BoxEntry","dimensions","Dimensions","weight","quantity","properties","stacking","SupportsStacking","rotation","RotationConstraint","translation","TranslationConstraint","descriptions","TextField","Reset","defaultContent","clear","entry","Copy","field","own","Clone","volume","Assert","CargoEntry","Signaler","signals","dispatches","event","On","callbacks","SolidMaterialType","MeshStandardMaterial","TransparentMaterialType","InvisibleMaterialType","MeshBasicMaterial","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","castShadow","receiveShadow","colorTemplates","Map","Asset","roughness","metalness","geometry","material","mesh","Mesh","modified","setHex","getHex","reduce","clamp","opacity","transparent","texturePath","CastReceiveShadow","traverse","child","colors","template","ColorTemplate","CreateColorTemplate","combinedVolume","ContainingVolume","Container","volumes","WarnOnce","uid","generateUUID","numVolumes","minX","Number","MAX_SAFE_INTEGER","minY","minZ","maxX","MIN_SAFE_INTEGER","maxY","maxZ","pos","position","dim","width","height","container","Set","containingVolume","FromJSON","Add","_signals","Symbol","_dispatches","LightDispatcher","_weight","serializeModes","none","property","min","max","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","setKey","val","endKey","download","filename","file","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","isColor","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","has","category","shortcut","start","App","containerDiv","ux","cargoInput","packingSpaceInput","packerInterface","packerParams","packer","Packer","CargoInput","insert","boxEntry","cargoList","modify","Modify","SolveAgain","remove","Remove","PackingSpaceInput","containerLoaded","packingSpace","AddContainer","PackerInterface","solveRequest","solverParams","Solve","sceneSetup","SceneSetup","Init","then","Start","bind","viewParams","view","View","_Bind","onPackUpdate","packingResult","_Notify","solved","packUpdate","onPackFailed","error","failed","packFailed","Dispatch","autoUpdatePack","solveAgain","ClearPackingResults","PackedCargo","orientation","UnpackedCargo","unpackedQuantity","PackingResult","numTotalItems","runtime","packed","unpacked","defaultParams","_solverParams","PackingSpace","CargoList","solverExecutionsCount","algorithm","algorithmParams","SolveCUB","ready","Item","current","weightCapacity","items","entries","groups","values","group","item","CUB","startTime","performance","pack","cubRuntime","cubRuntime2Dec","round","packedItems","packedItem","ref","Vector3","packedWidth","packedHeight","packedLength","ResolveOrientation","packedCargo","unpackedItems","unpackedItem","unpackedCargo","SetUID","Volume","init","started","paused","stopped","quality","Quality","Common","units","controllerParams","sceneController","rendererParams","clearColor","sceneRenderer","Renderer","renderer","toneMappingExposure","cameraParams","fov","aspect","near","far","cameraController","Camera","OrbitControls","Input","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hud","hudParams","hudCameraParams","HUDView","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","Promise","resolve","reject","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","directionalLightComplem","onGUIChanged","dl","shadow","updateProjectionMatrix","UpdateShadowMaps","map","mapSize","manhattanDistanceTo","copy","dispose","dlHelper","update","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","global","clone","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","UX","app","visualization","Visualization","user","User","typeofString","_selectedEntryUID","labels","tempBox","Box3","tempVec","sort","select","deselect","interact","outlineOffset","CargoListView","Object3D","templatesView","cargoTemplateViews","fsParams","padding","colorHex","ColorTemplates","Apply","floatingShelf","FloatingShelf","raycastGroupItems","raycastGroup","RaycastGroup","OnInteract","outline","Outline","offsetFactor","templateCargoView","CargoBoxView","ticketParams","floor","tlvParams","font","backColor","fontColor","textAlign","sidePadding","labelView","TextLabelView","rotateY","rotateX","scale","UpdateText","CargoView","Dummy","UpdateItems","Sort","ReflectEntry","SetOutline","raycastGroupIndex","delete","box","cargoView","intersection","entryUID","GetTemplate","CargoGroup","cargoGroup","textColor","textLabelView","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","offset","cargoes","next","done","setFromObject","applyMatrix4","getSize","halfSize","Compare","dummyGeometry","SphereBufferGeometry","dummyMaterial","_entry","_focus","ratioToX","_vec3","Cargo","currentQuantity","onFocus","onFocusLost","draggable","Draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","visible","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","spaces","world","local","modes","translate","rotate","defaultControls","TransformControls","addEventListener","renderOrder","attach","detach","Detach","space","setMode","stringType","groupAdded","groupRemoved","groupModified","size","containerAdded","_currentIndex","containers","currentIndex","typeofNumber","_maxHeight","_validOrientations","orientations","validOrientations","xyz","zyx","yxz","yzx","zxy","xzy","vo","toLowerCase","maxHeight","GetOrientedDimensions","UpdateComponent","interval","lastUpdateTime","collectionQuery","updateProperty","recursive","enabled","raycastItems","GetRaycastItems","iItem","rItem","Cik","raycastItem","raycaster","UpdateRaycastItems","intersects","intersectObjects","raycastItemIndex","BubbleUpForIndex","collection","nestLimit","numCollection","parent","itemsContainer","name","miscContainer","defaults","Scene","objName","getObjectByName","tempVec3","tempVec3_b","PerspectiveCamera","fpsControls","Navigation","FirstPerson","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","saveState","reset","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","box3","distanceMultiplier","extent","frameSize","distance","abs","center","getCenter","unitCubeGeometry","BoxBufferGeometry","materialTemplate","flatShading","brightnessRange","hueBase","random","nextColor","setHSL","GoldenSeries","_materialSettings","vec3","s","SetScale","RestoreMaterial","SetMaterialFocus","tlWatchTimer","tlWatchEntries","tlWatchUpdater","newValue","propertyName","savedValue","tl","addTLWatch","setInterval","_value","change","TextLabel","GetString","changed","PlaneGeometry","side","DoubleSide","textLabel","text","canvas2d","context2d","getContext","fillStyle","fillRect","textBaseline","fillText","CanvasTexture","minFilter","LinearFilter","anisotropy","image","needsUpdate","OnChange","Label","stopPropagation","e","stylesheet","createCSS","css","getElementsByTagName","Array","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","title","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","p","parentNode","divTop","divLeft","cursor","stopMoving","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","blockEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","delay","time","debugGeometry","debugMaterial","TextureLoader","load","wrapS","wrapT","RepeatWrapping","debugBox","DebugBox","alphaHexMask","debugObjects","tVec3","tPos","tScale","DebugViz","h","l","duration","wireframe","checkered","repeat","RemoveObjectByUID","packingSpaceView","objects","packResultView","cargoViews","o","AFitTest","Box","Viz","api","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","Request","cv","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","ContainerBox","createContainerBoxes","boxes","CreateMesh","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","initializationBox3","StandardSceneObject","containerBoxes","platformMesh","planeGeom","BoxGeometry","planeMaterial","CreateSolidMaterialMatte","ReceiveShadow","meshes","_new","_reset","Pool","fnNew","fnReset","_cargoList","abort","GetEntry","IsVolume","Abs","commitedEntry","existing","sliderValueChange","sliderValueStop","jsonObject","model","thickness","PlatformVisibility","ResultSpace","ResultEntry","packingSpaces","totalPacked","totalUnpacked","solveDuration","toInterfaceResults","getSpace","containerUID","ps","packEntry","resultEntry","isFirst","FreightPacker","utils","devSetup","domain","fp","toConsole","traceToConsole","OnIncludingPrior","SetViewParent","auto","uxParams","cargoInputParams","packingSpaceInputParams","appParams","webgl","Capabilities","IsWebGLReady","canvas","gl","WebGLRenderingContext","defaultKeysListen","concat","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","dx","dy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","keypress","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","button","UpdateScreenAndMouse","getElapsedTime","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","vx","vy","preventDefault","delta","wheelDelta","detail","lerp","isNaN","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","drid","clearTimeout","_repeats","clearInterval","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","testCallback","composer","antialias","shadows","renderSizeMul","Boolean","OnTestComplete","shadowMapType","PCFSoftShadowMap","shadowsAutoUpdate","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","Uncharted2ToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","ResizeDomElement","UseComposer","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","defaultCamTRS","Transform","Euler","cameraTransform","_position","_rotation","transform","_app","PackResults","Slice","animationDuration","visualizationSignals","packResults","highlightPackedInstances","cargoListView","Select","SelectEntry","boxEntryInteract","onCargoInteract","cargoEntry","findNearest","dMin","nearest","vz","tempColor","mapColor","Material","_enabled","PackingProperty","prop","Constraint","PackingItem","cargo","targetView","cubeGeometry","outlineMaterial","depthWrite","depthTest","boxOutlineMaterial","offsetUnits","tempBox3","outlines","Disable","children","oChild","outlineReady","boxMaterial","boxMesh","addScalar","inverse","applyMatrix","_box3","setFromCenterAndSize","region","solid","blinks","onDuration","offDuration","debugRegion","sleep","debugRegionBlink","SetPackingSpaceVisibility","packedContainer","PackedContainer","unpackItem","SetUnpacked","packItem","SetPacked","ProcessRegions","weightPass","WeightPass","debugLog","FitLessWaste","PackedItem","debugClear","debugging","running","ListenKeys","ms","force","execute","tid","debugUID","DrawVolume","uids","ClearAll","smallValue","smallValueSqrt","Region","preferredX","tempCorners","tempPoints","px","py","pz","subRegion","rx","ry","rz","rw","rh","rl","other","tempRegion","fit","minRegionAxis","skipTop","newRegions","axis","east","west","over","south","ptsA","GetFloorPoints","ptsB","tempPoints2","adjacent","intersections","iA","nextA","ax","az","nax","naz","iB","nextB","bx","bz","nbx","nbz","rectangles","rectA","p1","p2","p3","p4","rectB","tempRegion2","tempRegion3","firstRegion","regions","tops","cumulatedWeight","Subtract","assistant","regionIndex","debugUIDs","numRegions","volumeItem","regionScoreTable","orientationScoreTable","testSuccessfulRegions","iRegion","dummyRegion","iOrient","regionFitTest","FitTest","orientationScore","n","RateFit","SortByN","regionScore","pop","highestScore","GetPlacementWithHighestScore","FitRegular","CommitFit","firstFit","GetFirstFit","containingRegion","placement","numPackedItems","iPacked","packedRegion","Intersects","regionRemains","Occupy","containerWidth","toInt","coordID","levels","neighbours","regionA","jRegion","regionB","numNeighbours","iNeighbour","neighbourA","jNeighbour","neighbourB","ConnectFloorRects","yCat","levelsYCats","iYCat","numYCats","level","regionY","regionHeight","iRect","numRects","rect","newRegion","harsh","itemVolume","ContainsRegion","ProcessRegionsPerPackedItem","volumeA","volumeB","processRegionsCount","ProcessRegionsPreferredX","ProcessRegionsForPackedItems","ProcessRegionsMergeExpand","ProcessRegionsForZeroRegions","ProcessRegionsEnclosed","SortDeepestSmallest","PackingAssistant","minDimensionsNoWasteFactor","workingItems","workingRegions","workingItemsSortFunction","VolumeSort","minDimensionsSearchSet","minDimensions","GetMinDimensionsOverall","numItems","fittedItem","containerLength","minZScore","minWasteScore","scoreW","scoreH","scoreL","minZ_weight","minWaste_weight","score","toItems","TestData","containerData","ID","Name","Length","Width","Height","itemsData","Quantity","almost","n1","n2","dim1","dim2","dim3","IsPacked","Dim1","Dim2","Dim3","CoordX","CoordY","CoordZ","PackDimX","PackDimY","PackDimZ","segmentIntersect","x1","y1","x2","y2","x3","y3","x4","y4","denominator","ua","ub","linesIntersect","ay","by","cx","cy","a1","b1","c1","a2","b2","c2","determinant","rectangleContainsPoint","rectangleContainsRectangle","ox","oy","ow","oh","rectanglesFromPoints","points","xs","xCat","ys","iY","sortYCat","xsKeys","iX","intersectedXs","xCat1","ys1","iX2","xCat2","ys2","yIntersect","xIntersect","iY1","iY2","iIX","intersectedX","rectangle","reduceRectangles","ra","aw","ah","jRect","rb","bw","bh","segmentContainsPoint","vxa","vya","vxb","vyb","db","paddingZ","paddingY","DisplayPackingResult","lights","DefaultLights","light","dlData","Load","dlComp","onContainerAdded","Frame","containerSize","AddRaycastGroup","onCargoListViewChanged","listViewCenterX","getWorldPosition","offsetX","centerX","onCargoGroupAdded","onCargoGroupRemoved","onCargoGroupModified","PackResultView","HUDSetup","Clear","Toggle","poolNewFN","packedCargoView","PackedCargoBoxView","Extend","poolResetFN","getOrientationAngles","getOrientationEuler","rad","pool","animatingViews","matrix","GetMatrix","decompose","packedQuantities","onTweenComplete","OnCargoFirstTweenComplete","zEntry","delayPerItem","cargoViewTemplate","packedQuantity","totalQuantity","UpdateLabel","SetRotationAngles","posTweenCombo","Tween","Combo","Request3","functions","ease","easeOutQuad","extraData","Hook","onComplete","unpackedOffset","numUnpackedItems","j","tween","OnTweenComplete","scaleTweenCombo","special","pingPong","Unhook","Return","DisableHighlights","Highlight","numCargoViews","focus","cvEntry","halfHeight","low","high","animatingView","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","LineBasicMaterial","_wireMaterialSettings","meshMaterial","blending","NormalBlending","wireMesh","LineSegments","TweenCallback","startValue","TweenCompletedCallback","linear","easeOutElastic","ts","tc","easeOutCubic","TweenComboCompletedCallback","TweenCombo","tweens","completed","startValue0","startValue1","startValue2","delta0","delta1","delta2","tween0","tween1","tween2","combo","endValue"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AC5DA,IAAMA,oBAAoB,IAAIC,MAAJ,CAAW,cAAX,CAA1B;AACA,IAAMC,QAAQ,IAAIC,KAAKC,EAAvB;AACA,IAAMC,cAAc,CAAC,IAAIF,KAAKG,IAAL,CAAU,CAAV,CAAL,IAAqB,CAAzC;AACA,IAAMC,uBAAuBF,cAAc,CAA3C;;AAEA,IAAMG,eAAe,QAArB;;IAEMC,K;;;;;;;iCAEcC,M,EAAQC,W,EAAY;AAChC,gBAAIC,kBAAkBF,MAAtB;AACA,gBAAIG,qBAAqBH,OAAOI,SAAhC;;AAEA,gBAAIC,MAAMJ,YAAYE,kBAAZ,CAAV;;AAEAG,mBAAOC,MAAP,CAAcF,GAAd,EAAmBH,eAAnB;AACAI,mBAAOC,MAAP,CAAcF,IAAID,SAAlB,EAA6BD,kBAA7B;AACAG,mBAAOE,gBAAP,CAAwBH,GAAxB,EAA6BC,OAAOG,yBAAP,CAAiCP,eAAjC,CAA7B;AACAI,mBAAOE,gBAAP,CAAwBH,IAAID,SAA5B,EAAuCE,OAAOG,yBAAP,CAAiCN,kBAAjC,CAAvC;;AAEA,mBAAOE,GAAP;AACH;;AAED;;;;;;;;;wCAMuBK,M,EAAQC,M,EAAO;AAClC,gBAAGD,WAAWE,SAAd,EAAwB;AACpBF,yBAAS,EAAT;AACAJ,uBAAOC,MAAP,CAAcG,MAAd,EAAsBC,MAAtB;AACA,uBAAOD,MAAP;AACH;;AAED,gBAAIG,OAAOP,OAAOO,IAAP,CAAYF,MAAZ,CAAX;AACAE,iBAAKC,OAAL,CAAa,eAAO;AAChB,oBAAG,QAAOH,OAAOI,GAAP,CAAP,MAAuBjB,YAA1B,EAAwCC,MAAMiB,eAAN,CAAsBN,OAAOK,GAAP,CAAtB,EAAmCJ,OAAOI,GAAP,CAAnC;AACxC,oBAAGL,OAAOK,GAAP,MAAgBH,SAAnB,EAA8BF,OAAOK,GAAP,IAAcJ,OAAOI,GAAP,CAAd;AACjC,aAHD;AAIA,mBAAOL,MAAP;AACH;;;iCAEeO,G,EAAI;AAChB,mBAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAeH,GAAf,CAAX,CAAP;AACH;;;sCAEoBI,O,EAAQ;AACzB,gBAAIC,QAAQC,OAAOC,gBAAP,CAAwBH,OAAxB,CAAZ;AAAA,gBACII,aAAaC,WAAWJ,MAAMG,UAAjB,CADjB;AAAA,gBAEIE,YAAYD,WAAWJ,MAAMK,SAAjB,CAFhB;AAAA,gBAGIC,cAAcF,WAAWJ,MAAMM,WAAjB,CAHlB;AAAA,gBAIIC,aAAaH,WAAWJ,MAAMO,UAAjB,CAJjB;AAKA,mBAAO,EAACC,GAAGL,aAAaG,WAAjB,EAA8BG,GAAGJ,YAAYE,UAA7C,EAAP;AACH;;;qCAEmBG,K,EAAM;AACtB,mBAAOA,MAAMC,OAAN,CAAc3C,iBAAd,EAAiC,EAAjC,CAAP;AACH;;;oCAEkB4C,G,EAAKC,M,EAAO;AAC3B,gBAAGD,IAAIC,MAAJ,GAAaA,MAAhB,EAAwBD,MAAMA,IAAIE,SAAJ,CAAcF,IAAIC,MAAJ,GAAaA,MAA3B,CAAN;AACxB,mBAAOD,GAAP;AACH;;;kCAEgBG,C,EAAGC,G,EAAI;AACpBD,gBAAIA,IAAIC,GAAR;AACA,gBAAGD,IAAI,CAAP,EAAUA,IAAIC,MAAMD,CAAV;AACV,mBAAOA,CAAP;AACH;;;uCAEqBE,S,EAAWC,Q,EAAS;AACtC;AACA,gBAAIC,KAAKjD,QAAQ+C,SAAjB;AACA,gBAAIG,IAAIjD,KAAKkD,GAAL,CAASF,EAAT,CAAR;AACA,gBAAIG,IAAInD,KAAKoD,GAAL,CAASJ,EAAT,CAAR;AACA,gBAAIE,MAAM,CAAV;AACA,gBAAIE,MAAM,CAAV;AACA,iBAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIE,SAApB,EAA+BF,GAA/B,EACA;AACI,oBAAIS,KAAKJ,IAAEC,GAAF,GAAQC,IAAEC,GAAnB;AACA,oBAAIE,KAAKH,IAAED,GAAF,GAAQD,IAAEG,GAAnB;AACAF,sBAAMG,EAAN;AACAD,sBAAME,EAAN;AACAP,yBAASG,GAAT,EAAcE,GAAd;AACH;AACJ;;;2CAEyBG,C,EAAGN,C,EAAGE,C,EAAGK,C,EAAGC,C,EAAGC,K,EAAM;AAC3C;AACA;AACAA,oBAAQA,SAAS,IAAIC,MAAMC,KAAV,EAAjB;AACA,gBAAIC,IAAIZ,EAAEZ,CAAF,GAAMc,EAAEd,CAAF,GAAMrC,KAAKkD,GAAL,CAAUnD,SAASyD,EAAEnB,CAAF,GAAMkB,CAAN,GAAUE,EAAEpB,CAArB,CAAV,CAApB;AAAA,gBACIyB,IAAIb,EAAEX,CAAF,GAAMa,EAAEb,CAAF,GAAMtC,KAAKkD,GAAL,CAAUnD,SAASyD,EAAElB,CAAF,GAAMiB,CAAN,GAAUE,EAAEnB,CAArB,CAAV,CADpB;AAAA,gBAEIa,IAAIF,EAAEc,CAAF,GAAMZ,EAAEY,CAAF,GAAM/D,KAAKkD,GAAL,CAAUnD,SAASyD,EAAEO,CAAF,GAAMR,CAAN,GAAUE,EAAEM,CAArB,CAAV,CAFpB;AAGA,mBAAOL,MAAMM,GAAN,CAAUH,CAAV,EAAaC,CAAb,EAAgBX,CAAhB,CAAP;AACH;;AAED;;;;;;;qCAIoBc,I,EAAK;AAC3B,mBAAO,CAACA,OAAO7D,oBAAR,IAAgC,CAAvC;AACG;;;oCAEkB8D,M,EAAQC,K,EAAM;AAC7BA,oBAAQA,SAAS,CAAjB;AACA,mBAAOD,OAAO7B,CAAP,CAAS+B,OAAT,CAAiBD,KAAjB,IAA0B,IAA1B,GAAiCD,OAAO5B,CAAP,CAAS8B,OAAT,CAAiBD,KAAjB,CAAjC,IAA4DD,OAAOH,CAAP,KAAa5C,SAAb,GAAyB,OAAO+C,OAAOH,CAAP,CAASK,OAAT,CAAiBD,KAAjB,CAAP,IAAkCD,OAAOG,CAAP,KAAalD,SAAb,GAAyB,OAAO+C,OAAOG,CAAP,CAASD,OAAT,CAAiBD,KAAjB,CAAhC,GAA0D,EAA5F,CAAzB,GAA2H,EAAvL,CAAP;AACH;;;;;;kBAGU7D,K;;;;;;;;;;;;;AC9Gf;;;;;;AAEA,IAAIgE,mBAAmB,EAACC,SAAS,IAAV,EAAgBjD,KAAK,EAArB,EAAvB;AALA;AACA;;AAMA,IAAIkD,MAAM;AACNC,UAAM,EADA;;AAGNC,iBAAa;AACTC,oBAAY,oBAAS1D,MAAT,EAAiBK,GAAjB,EAAqB;;AAE7B,iBAAKsD,KAAL,GAAatD,GAAb;;AAEA,gBAAIuD,gBAAJ;AACA,iBAAKC,QAAL,GAAgB,UAAS/B,QAAT,EAAkB;AAC9B8B,mCAAmB9B,QAAnB;AACH,aAFD;;AAIA,gBAAIgC,YAAY;AACZC,qBAAK,eAAU;AACX,2BAAO/D,OAAOK,GAAP,CAAP;AACH,iBAHW;AAIZ0C,qBAAK,aAASiB,KAAT,EAAe;AAChBhE,2BAAOK,GAAP,IAAc2D,KAAd;AACA,wBAAGJ,gBAAH,EACIA;AACP;AARW,aAAhB;AAUAhE,mBAAOqE,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqCH,SAArC;;AAEAlE,mBAAOE,gBAAP,CAAwB,IAAxB,EAA8B;AAC1BoE,sBAAM;AACFH,yBAAM,YAAU;AACZ,4BAAII,aAAa,OAAOnE,OAAOK,GAAP,CAAP,KAAuB,UAAxC;AACA,4BAAG8D,UAAH,EAAc;AACV,mCAAO,YAAU;AACb,uCAAO;AACHJ,yCAAK,eAAU;AACX/D,+CAAOK,GAAP;AACA,+CAAOL,OAAOK,GAAP,CAAP;AACH;AAJE,iCAAP;AAMH,6BAPD;AAQH,yBATD,MAUI;AACA,mCAAO,YAAU;AACb,uCAAOyD,SAAP;AACH,6BAFD;AAGH;AACJ,qBAjBI;AADH;AADoB,aAA9B;;AAuBA,iBAAKM,IAAL,GAAY,YAAU;AAAC,uBAAO,IAAP;AAAa,aAApC;AACA,iBAAKC,MAAL,GAAc,YAAU;AAAC,uBAAO,IAAP;AAAa,aAAtC;AACA,iBAAKC,aAAL,GAAqB,YAAU;AAAC,uBAAO,IAAP;AAAa,aAA7C;AACH;AAhDQ,KAHP;;AAsDNC,SAAK,aAASC,MAAT,EAAgB;AACjB,aAAK7C,CAAL,GAAS,CAAT;AACA,aAAK8C,IAAL,GAAY,EAAZ;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,SAAL,GAAiB,EAAjB;;AAEAH,iBAASnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8BnB,gBAA9B,CAAT;;AAEA,aAAKM,KAAL,GAAaa,OAAOb,KAApB;;AAEA,YAAGa,OAAOlB,OAAV,EACIC,IAAIC,IAAJ,CAASoB,IAAT,CAAc,IAAd;;AAEJ,aAAKC,GAAL,GAAW,UAAS7E,MAAT,EAAiBK,GAAjB,EAAqB;AAC5B,gBAAIyE,aAAa,IAAIvB,IAAIE,WAAJ,CAAgBC,UAApB,CAA+B1D,MAA/B,EAAuCK,GAAvC,CAAjB;AACA,iBAAKqE,aAAL,CAAmBE,IAAnB,CAAwBE,UAAxB;AACA,gBAAIX,aAAa,OAAOnE,OAAOK,GAAP,CAAP,KAAuB,UAAxC;AACA,iBAAKoE,IAAL,CAAU,CAAC,KAAK9C,CAAL,EAAD,EAAWoD,QAAX,KAAwB,IAAxB,GAA+BD,WAAWnB,KAA1C,IAAmDQ,aAAa,IAAb,GAAoB,EAAvE,CAAV,IAAwFW,UAAxF;AACA,mBAAOA,UAAP;AACH,SAND;;AAQA,aAAKE,SAAL,GAAiB,UAASrB,KAAT,EAAe;AAC5B,gBAAIsB,SAAS,IAAI1B,IAAIgB,GAAR,CAAY,EAACjB,SAAS,KAAV,EAAiBjD,KAAKsD,KAAtB,EAAZ,CAAb;AACA,iBAAKgB,SAAL,CAAeC,IAAf,CAAoBK,MAApB;AACA,iBAAKR,IAAL,CAAU,CAAC,KAAK9C,CAAL,EAAD,EAAWoD,QAAX,KAAwB,OAAxB,GAAkCpB,KAA5C,IAAqDsB,MAArD;AACA,mBAAOA,MAAP;AACH,SALD;;AAOA,aAAKC,IAAL,GAAY,YAAU;AAAC,mBAAO,IAAP;AAAa,SAApC;;AAEAtF,eAAOE,gBAAP,CAAwB,IAAxB,EAA8B;AAC1BqF,wBAAY;AACRpB,qBAAK,eAAU;AACX,2BAAOqB,SAASC,aAAT,CAAuB,KAAvB,CAAP;AACH;AAHO,aADc;AAM1BnB,kBAAM;AACFH,qBAAK,eAAU;AACX,wBAAIuB,SAAS,EAAb;AACA,wBAAInF,OAAOP,OAAOO,IAAP,CAAY,KAAKsE,IAAjB,CAAX;AACA,wBAAIA,OAAO,KAAKA,IAAhB;;AAHW;AAKP,4BAAIpE,MAAMF,KAAKoF,IAAL,CAAV;AACA,4BAAIC,WAAWf,KAAKpE,GAAL,EAAU6D,IAAzB;AACAtE,+BAAOqE,cAAP,CAAsBqB,MAAtB,EAA8BjF,GAA9B,EAAmCmF,SAASzB,GAAT,GAC/ByB,QAD+B,GAE/B;AACIzB,iCAAK,eAAU;AACX,uCAAOyB,QAAP;AACH;AAHL,yBAFJ;AAPO;;AAIX,yBAAI,IAAID,OAAO,CAAf,EAAkBA,OAAOpF,KAAKsB,MAA9B,EAAsC8D,MAAtC,EAA6C;AAAA;AAW5C;AACD,2BAAOD,MAAP;AACH;AAlBC;AANoB,SAA9B;;AA4BA,aAAKG,OAAL,GAAe,YAAU;AACrB,gBAAIC,QAAQnC,IAAIC,IAAJ,CAASmC,OAAT,CAAiB,IAAjB,CAAZ;AACA,gBAAGD,UAAU,CAAC,CAAd,EACInC,IAAIC,IAAJ,CAASoC,MAAT,CAAgBF,KAAhB,EAAuB,CAAvB;AACP,SAJD;AAKH;AArHK,CAAV;;AAwHA9F,OAAOE,gBAAP,CAAwByD,GAAxB,EAA6B;AACzBW,UAAM;AACFH,aAAK,eAAU;AACX,gBAAIuB,SAAS,EAAb;AACA,iBAAI,IAAI3D,IAAI,CAAZ,EAAeA,IAAI,KAAK6B,IAAL,CAAU/B,MAA7B,EAAqCE,GAArC,EAAyC;AACrC2D,uBAAO3D,CAAP,IAAY,KAAK6B,IAAL,CAAU7B,CAAV,EAAauC,IAAzB;AACH;AACD,mBAAOoB,MAAP;AACH;AAPC;AADmB,CAA7B;;kBAYe/B,G;;;;;;;;;;;;;;;AC5If;;;;;;;;AAEA,IAAMsC,UAAU;AACZC,WAAO,CADK;AAEZC,YAAQ,CAFI;AAGZC,UAAM;AAHM,CAAhB;;AAMA,IAAMC,eAAe;AACjB,OAAG,OADc;AAEjB,OAAG,KAFc;AAGjB,OAAG;AAHc,CAArB;;AAMA,IAAMC,qBAAqB;AACvB,OAAG,IADoB;AAEvB,OAAG,IAFoB;AAGvB,OAAG;AAHoB,CAA3B;;AAMA,IAAIC,mBAAmBC,KAAKC,GAAL,EAAvB;AACA,IAAIC,WAAW,EAAf;AACA,IAAIC,WAAW,EAAf;;IAEMC,O;AACF,qBAAYC,IAAZ,EAA0B;AAAA;;AAAA;;AACtB,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKC,SAAL,GAAiBN,KAAKC,GAAL,EAAjB;AACA,aAAKM,OAAL,GAAe,EAAf;;AAHsB,0CAALC,IAAK;AAALA,gBAAK;AAAA;;AAItBA,aAAKxG,OAAL,CAAa,eAAO;AAChB,gBAAG,OAAOyG,GAAP,KAAe,QAAlB,EAA2B;AACvB,sBAAKF,OAAL,CAAa/B,IAAb,CAAkBiC,GAAlB;AACH,aAFD,MAGI;AACA,oBAAG;AACC,wBAAIC,OAAOtG,KAAKE,SAAL,CAAemG,GAAf,EAAoBE,MAApB,CAA2B,CAA3B,EAA8B,IAA9B,CAAX;AACA,0BAAKJ,OAAL,CAAa/B,IAAb,CAAkBkC,IAAlB;AACH,iBAHD,CAIA,OAAME,GAAN,EAAU;AACN,0BAAKL,OAAL,CAAa/B,IAAb,CAAkB,oBAAoBoC,GAAtC;AACH;AACJ;AACJ,SAbD;AAcH;;;;mCAES;AACN,mBAAO,CAAC,CAAC,KAAKN,SAAL,GAAiBP,gBAAlB,IAAsC,IAAvC,EAA6ChD,OAA7C,CAAqD,CAArD,IAA0D,GAA1D,GAAgE8C,aAAa,KAAKQ,IAAlB,CAAvE;AACH;;;;;;IAGCQ,M;;;;;;;+BAcYC,O,EAAQ;AAClBZ,qBAAS1B,IAAT,CAAcsC,OAAd;AACH;;;gCAEoB;AACjB,gBAAG,KAAKC,OAAR,EAAgB;AAAA,mDADJP,IACI;AADJA,wBACI;AAAA;;AACZ,oBAAIM,6CAAcV,OAAd,iBAAsBX,QAAQC,KAA9B,GAAwCc,IAAxC,KAAJ;AACA,qBAAKQ,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAL,IAAmB,KAAKC,eAA3B,EAA2C;AAAA;;AACvC,yCAAQC,cAAR,iBAA0BX,IAA1B;AACAY,4BAAQ1B,KAAR,CAAc,OAAd;AACA0B,4BAAQC,QAAR;AACH;AACJ;AACJ;;;8BAEkB;AACf,gBAAG,KAAKN,OAAR,EAAgB;AAAA,mDADNP,IACM;AADNA,wBACM;AAAA;;AACZ,oBAAIM,6CAAcV,OAAd,iBAAsBX,QAAQE,MAA9B,GAAyCa,IAAzC,KAAJ;AACA,qBAAKQ,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAR,EAAmB;AAAA;;AACf,0CAAQK,GAAR,kBAAed,IAAf;AACH;AACJ;AACJ;;;+BAEmB;AAChB,gBAAG,KAAKO,OAAR,EAAgB;AAAA;;AAAA,mDADLP,IACK;AADLA,wBACK;AAAA;;AACZ,oBAAIM,6CAAcV,OAAd,iBAAsBX,QAAQG,IAA9B,GAAuCY,IAAvC,KAAJ;AACA,qBAAKQ,MAAL,CAAYF,OAAZ;AACA,oBAAG,KAAKG,UAAR,EAAoB,sBAAQrB,IAAR,kBAAgBY,IAAhB;AACvB;AACJ;;;gCAEce,E,EAAY;AACvB,gBAAG,KAAKR,OAAL,IAAgB,CAACZ,SAASoB,EAAT,CAApB,EAAiC;AAC7BpB,yBAASoB,EAAT,IAAe,IAAf;;AAD6B,mDADff,IACe;AADfA,wBACe;AAAA;;AAE7BK,uBAAOW,GAAP,eAAchB,IAAd;AACH;AACJ;;;iCAEee,E,EAAY;AACxB,gBAAG,KAAKR,OAAL,IAAgB,CAACZ,SAASoB,EAAT,CAApB,EAAiC;AAC7BpB,yBAASoB,EAAT,IAAe,IAAf;;AAD6B,mDADdf,IACc;AADdA,wBACc;AAAA;;AAE7BK,uBAAOY,IAAP,eAAejB,IAAf;AACH;AACJ;;;8BAEYkB,M,EAAO;AAChBzI,4BAAMiB,eAAN,CAAsBwH,MAAtB,EAA8B5B,kBAA9B;;AAEA,gBAAI6B,SAAS,QAAb;AACAzB,qBAASlG,OAAT,CAAiB,mBAAW;AACxB,oBAAG0H,OAAOZ,QAAQT,IAAf,CAAH,EAAwB;AACpBsB,8BAAUb,QAAQc,QAAR,KAAqB,IAA/B;AACH;AACJ,aAJD;;AAMA,mBAAOD,MAAP;AACH;;;0BAvEiB/D,K,EAAM;AACpB,iBAAKmD,OAAL,GAAenD,KAAf;AACH;;;0BAEoBA,K,EAAM;AACvB,iBAAKqD,UAAL,GAAkBrD,KAAlB;AACH;;;0BAEyBA,K,EAAM;AAC5B,iBAAKsD,eAAL,GAAuBtD,KAAvB;AACH;;;;;;AAgELiD,OAAOgB,MAAP,GAAgB,IAAhB;;kBAEehB,M;;;;;;;;;;;;;;;;;;;;;AChIf;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;;;;;;AAOA,IAAIiB,aAAa,CAAjB;AACA,SAASC,eAAT,GAA0B;AACtB,WAAO,SAASD,WAAWnD,QAAX,EAAhB;AACH;;AAED,IAAMqD,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMC,aAAa,QAAnB;;IAEMC,Q;;;AACF,wBAAa;AAAA;;AACTL;;AADS;;AAIT,cAAKzB,IAAL,GAAY,UAAZ;;AAEA,cAAK+B,UAAL,GAAkB,IAAIC,oBAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAlB;;AAEA,cAAKC,MAAL,GAAc,CAAd;AACA,cAAKC,QAAL,GAAgB,CAAhB;;AAEA;;;AAGA,cAAKC,UAAL;;AAEA,cAAKA,UAAL,CAAgBC,QAAhB,GAA8B,IAAIC,iCAAJ,EAA9B;AACA,cAAKF,UAAL,CAAgBG,QAAhB,GAA8B,IAAIC,mCAAJ,EAA9B;AACA,cAAKJ,UAAL,CAAgBK,WAAhB,GAA8B,IAAIC,sCAAJ,EAA9B;;AAEA,cAAKC,YAAL,CAAkBpG,GAAlB,CAAsB,OAAtB,EAA+B,IAAIqG,mBAAJ,CAAc,OAAd,EAAuBjB,iBAAvB,CAA/B;AApBS;AAqBZ;;;;gCAuBM;AACH,iBAAKO,MAAL,GAAc,CAAd;AACA,iBAAKC,QAAL,GAAgB,CAAhB;;AAEA,iBAAKC,UAAL,CAAgBC,QAAhB,CAAyBQ,KAAzB;AACA,iBAAKT,UAAL,CAAgBG,QAAhB,CAAyBM,KAAzB;AACA,iBAAKT,UAAL,CAAgBK,WAAhB,CAA4BI,KAA5B;;AAEA,gBAAI1F,QAAQ,KAAKwF,YAAL,CAAkBpF,GAAlB,CAAsB,OAAtB,CAAZ;AACAJ,kBAAMgD,OAAN,GAAgByC,oBAAUE,cAA1B;AACA,iBAAKH,YAAL,CAAkBI,KAAlB;AACA,iBAAKJ,YAAL,CAAkBpG,GAAlB,CAAsB,OAAtB,EAA+BY,KAA/B;AACH;;AAED;;;;;;6BAGK6F,K,EAAM;AACP,iBAAKhB,UAAL,CAAgBiB,IAAhB,CAAqBD,MAAMhB,UAA3B;AACA,iBAAKE,MAAL,GAAcc,MAAMd,MAApB;AACA,iBAAKC,QAAL,GAAgBa,MAAMb,QAAtB;;AAEA,iBAAKC,UAAL,CAAgBC,QAAhB,CAAyBY,IAAzB,CAA8BD,MAAMZ,UAAN,CAAiBC,QAA/C;AACA,iBAAKD,UAAL,CAAgBG,QAAhB,CAAyBU,IAAzB,CAA8BD,MAAMZ,UAAN,CAAiBG,QAA/C;AACA,iBAAKH,UAAL,CAAgBK,WAAhB,CAA4BQ,IAA5B,CAAiCD,MAAMZ,UAAN,CAAiBK,WAAlD;;AAPO;AAAA;AAAA;;AAAA;AASP,qCAAwBO,MAAML,YAA9B,8HAA2C;AAAA;AAAA,wBAAlC9I,GAAkC;AAAA,wBAA7BqJ,KAA6B;;AACvC,wBAAIC,MAAM,KAAKR,YAAL,CAAkBpF,GAAlB,CAAsB1D,GAAtB,CAAV;AACA,wBAAGsJ,GAAH,EACIA,IAAIF,IAAJ,CAASC,KAAT,EADJ,KAGI,KAAKP,YAAL,CAAkBpG,GAAlB,CAAsB1C,GAAtB,EAA2BqJ,MAAME,KAAN,EAA3B;AACP;AAfM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBV;;;gCAEM;AACH,gBAAIJ,QAAQ,IAAIjB,QAAJ,EAAZ;;AAEAiB,kBAAMhB,UAAN,GAAmB,KAAKA,UAAL,CAAgBoB,KAAhB,EAAnB;;AAEAJ,kBAAMd,MAAN,GAAe,KAAKA,MAApB;AACAc,kBAAMb,QAAN,GAAiB,KAAKA,QAAtB;;AAEAa,kBAAMZ,UAAN,CAAiBC,QAAjB,GAAiC,KAAKD,UAAL,CAAgBC,QAAhB,CAAyBe,KAAzB,EAAjC;AACAJ,kBAAMZ,UAAN,CAAiBG,QAAjB,GAAkC,KAAKH,UAAL,CAAgBG,QAAhB,CAAyBa,KAAzB,EAAlC;AACAJ,kBAAMZ,UAAN,CAAiBK,WAAjB,GAAkC,KAAKL,UAAL,CAAgBK,WAAhB,CAA4BW,KAA5B,EAAlC;;AAVG;AAAA;AAAA;;AAAA;AAYH,sCAAwB,KAAKT,YAA7B,mIAA0C;AAAA;AAAA,wBAAjC9I,GAAiC;AAAA,wBAA5BqJ,KAA4B;;AACtCF,0BAAML,YAAN,CAAmBpG,GAAnB,CAAuB1C,GAAvB,EAA4BqJ,MAAME,KAAN,EAA5B;AACH;AAdE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgBH,mBAAOJ,KAAP;AACH;;;mCAES;AACN,mBAAO,OAAO,KAAKL,YAAL,CAAkBpF,GAAlB,CAAsB,OAAtB,EAA+B4C,OAAtC,GAAgD,MAAhD,GAAyD,KAAK6B,UAAL,CAAgBR,QAAhB,EAAhE;AACH;;AAED;;;;;;0BA/EWhE,K,EAAM;AAAE;AAAsB,S;4BAC7B;AACR,mBAAO,KAAKwE,UAAL,CAAgBqB,MAAhB,GAAyB,IAAhC;AACH;;AAED;;;;;;4BAGW;AACP,gBAAIH,QAAQ,KAAKP,YAAL,CAAkBpF,GAAlB,CAAsB,OAAtB,CAAZ;AACA,mBAAO2F,QAAQA,MAAM/C,OAAd,GAAwBzG,SAA/B;AACH,S;0BAES8D,K,EAAM;AACZ,gBAAI0F,QAAQ,KAAKP,YAAL,CAAkBpF,GAAlB,CAAsB,OAAtB,CAAZ;AACA,gBAAG2F,KAAH,EACIA,MAAM/C,OAAN,GAAgB3C,KAAhB,CADJ,KAGI,KAAKmF,YAAL,CAAkBpG,GAAlB,CAAsB,OAAtB,EAA+B,IAAIqG,mBAAJ,CAAc,OAAd,EAAuBpF,KAAvB,CAA/B;AACP;;;+BA+DawF,K,EAAM;AAChB,mBAAOA,iBAAiBjB,QAAjB,IACAE,qBAAWqB,MAAX,CAAkBN,MAAMhB,UAAxB,CADA,IAEAgB,MAAMZ,UAFN,IAGAY,MAAML,YAHN,IAIAK,MAAMd,MAAN,KAAiBxI,SAJjB,IAKAsJ,MAAMb,QAAN,KAAmBzI,SALnB,IAMI,QAAOsJ,MAAMd,MAAb,MAAwBJ,UAN5B,IAOI,QAAOkB,MAAMb,QAAb,MAA0BL,UAP9B,IAQIQ,kCAAiBgB,MAAjB,CAAwBN,MAAMZ,UAAN,CAAiBC,QAAzC,CARJ,IASIG,oCAAmBc,MAAnB,CAA0BN,MAAMZ,UAAN,CAAiBG,QAA3C,CATJ,IAUIG,uCAAsBY,MAAtB,CAA6BN,MAAMZ,UAAN,CAAiBK,WAA9C,CAVX;AAYH;;;;EAvHkBc,oB;;kBA0HRxB,Q;;;;;;;;;;;;;;;;;;;AC7If;;;;;IAKMyB,Q;AACF,wBAAa;AAAA;;AACT;AACA,aAAKC,OAAL,GAAe,EAAf;AACA;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACH;;AAED;;;;;yCACiBC,K,EAAOrI,Q,EAAS;AAC7B,gBAAI8E,OAAO,KAAKsD,UAAL,CAAgBC,KAAhB,CAAX;AACA,gBAAGvD,IAAH,EAAQ;AACJ9E,6DAAY8E,IAAZ;AACH,aAFD,MAGI;AACA,qBAAKwD,EAAL,CAAQD,KAAR,EAAerI,QAAf;AACH;AACJ;;AAED;;;;2BACGqI,K,EAAOrI,Q,EAAS;AACf,gBAAG,KAAKmI,OAAL,CAAaE,KAAb,MAAwBjK,SAA3B,EAAqC;AACjC,qBAAK+J,OAAL,CAAaE,KAAb,IAAsB,EAAtB;AACH;AACD,iBAAKF,OAAL,CAAaE,KAAb,EAAoBvF,IAApB,CAAyB9C,QAAzB;AACH;;AAED;;;;4BACIqI,K,EAAOrI,Q,EAAS;AAChB,gBAAIuI,YAAY,KAAKJ,OAAL,CAAaE,KAAb,CAAhB;AACA,gBAAGE,SAAH,EAAa;AACT,oBAAI3E,QAAQ2E,UAAU1E,OAAV,CAAkB7D,QAAlB,CAAZ;AACA,oBAAG4D,SAAS,CAAC,CAAb,EAAe;AACX2E,8BAAUzE,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACH;AACJ;AACJ;;AAED;;;;iCACSyE,K,EAAe;AAAA,8CAALvD,IAAK;AAALA,oBAAK;AAAA;;AACpB,iBAAKsD,UAAL,CAAgBC,KAAhB,IAAyBvD,IAAzB;AACA,gBAAIyD,YAAY,KAAKJ,OAAL,CAAaE,KAAb,CAAhB;AACA,gBAAGE,SAAH,EAAa;AACT,qBAAI,IAAI1I,IAAI,CAAR,EAAWC,MAAMyI,UAAU5I,MAA/B,EAAuCE,IAAIC,GAA3C,EAAgDD,GAAhD,EAAoD;AAChD0I,8BAAU1I,CAAV,mBAAgBiF,IAAhB;AACH;AACJ;AACJ;;;;;;kBAIUoD,Q;;;;;;;;;;;;;;;ACzDf;;;;;;;;AAEA,IAAMM,oBAAoB5H,MAAM6H,oBAAhC;AACA,IAAMC,0BAA0B9H,MAAM6H,oBAAtC;AACA,IAAME,wBAAwB/H,MAAMgI,iBAApC;;AAEA,IAAMC,kBAAkB,IAAIjI,MAAMkI,YAAV,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAxB;AACA,IAAMC,sBAAsB,IAAIP,iBAAJ,CAAsB,EAAC7H,OAAO,QAAR,EAAtB,CAA5B;;AAEA,IAAMqI,eAAe,IAAIpI,MAAMqI,YAAV,EAArB;AACA,IAAMC,aAAa,IAAItI,MAAMuI,UAAV,EAAnB;;AAEA,IAAMC,aAAa,IAAnB;AACA,IAAMC,gBAAgB,IAAtB;;AAEA;AACA,IAAIC,iBAAiB,IAAIC,GAAJ,EAArB;;IAEMC,K;AACF,qBAAa;AAAA;AAEZ;;AAED;;;;;;;iDAGgC7I,K,EAAM;AAClC,mBAAO,IAAI6I,MAAMhB,iBAAV,CAA4B,EAAC7H,OAAOA,KAAR,EAAe8I,WAAW,CAA1B,EAA6BC,WAAW,EAAxC,EAA5B,CAAP;AACH;;AAED;;;;;;;;mCAKkBC,Q,EAAUC,Q,EAAS;AACjCD,uBAAWA,YAAYd,eAAvB;AACAe,uBAAWA,YAAYb,mBAAvB;;AAEA,gBAAIc,OAAO,IAAIjJ,MAAMkJ,IAAV,CAAeH,QAAf,EAAyBC,QAAzB,CAAX;AACA,mBAAOC,IAAP;AACH;;;wCAEsBD,Q,EAAUG,Q,EAAS;AACtC,gBAAGA,aAAa3L,SAAhB,EAA2B;;AAE3B,gBAAIC,OAAOP,OAAOO,IAAP,CAAY0L,QAAZ,CAAX;AACA,iBAAI,IAAIlK,IAAI,CAAZ,EAAeA,IAAIxB,KAAKsB,MAAxB,EAAgCE,GAAhC,EAAoC;AAChC,oBAAItB,MAAMF,KAAKwB,CAAL,CAAV;AACA,oBAAG+J,SAASrL,GAAT,MAAkBH,SAArB,EAA+B;AAC3B,wBAAGwL,SAASrL,GAAT,EAAcyL,MAAjB,EAAwB;AACpB;AACA,4BAAIrJ,QAAQiJ,SAASjJ,KAArB;AACAA,8BAAMqJ,MAAN,CAAaD,SAASxL,GAAT,CAAb;AACH,qBAJD,MAKI;AACAqL,iCAASrL,GAAT,IAAgBwL,SAASxL,GAAT,CAAhB;AACH;AACJ;AACJ;AACJ;;;yCAEuBqL,Q,EAAU1H,K,EAAO6H,Q,EAAS;;AAE9C;AACA,gBAAIpJ,QAAQiJ,SAASjJ,KAArB;AACA,gBAAGA,UAAUvC,SAAb,EAAuB;AACnB,oBAAG2L,QAAH,EAAaA,SAASpJ,KAAT,GAAiBA,MAAMsJ,MAAN,EAAjB;;AAEb,oBAAIC,SAAS,CAAChI,QAAQ,CAAT,IAAc,CAA3B;AACAvB,sBAAMG,CAAN,GAAUF,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBxJ,MAAMG,CAAN,GAAUoJ,MAA3B,EAAmC,CAAnC,EAAsC,CAAtC,CAAV;AACAvJ,sBAAMI,CAAN,GAAUH,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBxJ,MAAMI,CAAN,GAAUmJ,MAA3B,EAAmC,CAAnC,EAAsC,CAAtC,CAAV;AACAvJ,sBAAMP,CAAN,GAAUQ,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBxJ,MAAMP,CAAN,GAAU8J,MAA3B,EAAmC,CAAnC,EAAsC,CAAtC,CAAV;AACH;;AAED;AACA,gBAAIE,UAAUR,SAASQ,OAAvB;AACA,gBAAGA,YAAYhM,SAAf,EAAyB;AACrB,oBAAG2L,QAAH,EAAY;AACRA,6BAASK,OAAT,GAAmBA,OAAnB;AACAL,6BAASM,WAAT,GAAuBT,SAASS,WAAhC;AACH;;AAEDT,yBAASQ,OAAT,GAAmBxJ,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBP,SAASQ,OAAT,GAAmBlI,KAApC,EAA2C,CAA3C,EAA8C,CAA9C,CAAnB,CAAoE;AACpE0H,yBAASS,WAAT,GAAuBT,SAASQ,OAAT,GAAmB,CAA1C;AACH;AACJ;;AAED;;;;;;;;;;;;yCASwBpF,I,EAAMsF,W,EAAY;AACtC,mBAAOpB,WAAWvK,KAAX,CAAiBqG,IAAjB,EAAuBsF,WAAvB,CAAP;AACH;;AAED;;;;;;;iCAIgBtF,I,EAAMsF,W,EAAY;AAC9B,mBAAOtB,aAAarK,KAAb,CAAmBqG,IAAnB,EAAyBsF,WAAzB,CAAP;AACH;;AAED;;;;4CAC2B9M,M,EAAO;AAC9BgM,kBAAMe,iBAAN,CAAwB/M,MAAxB;AACH;;AAED;;;;0CACyBA,M,EAAQ0E,K,EAAM;AACnC1E,mBAAOgN,QAAP,CAAgB,UAASC,KAAT,EAAe;AAC3B,oBAAGA,iBAAiB7J,MAAMkJ,IAA1B,EAA+B;AAC3BW,0BAAMrB,UAAN,GAAmBlH,UAAU9D,SAAV,GAAsBgL,UAAtB,GAAmClH,KAAtD;AACAuI,0BAAMpB,aAAN,GAAsBnH,UAAU9D,SAAV,GAAsBiL,aAAtB,GAAsCnH,KAA5D;AACH;AACJ,aALD;AAMH;;AAED;;;;sCACqB1E,M,EAAQ0E,K,EAAM;AAC/B,gBAAGA,UAAU9D,SAAb,EAAwB8D,QAAQmH,aAAR;AACxB7L,mBAAOgN,QAAP,CAAgB,UAASC,KAAT,EAAe;AAC3B,oBAAGA,iBAAiB7J,MAAMkJ,IAA1B,EAA+B;AAC3BW,0BAAMpB,aAAN,GAAsBnH,KAAtB;AACH;AACJ,aAJD;AAKH;;AAED;;;;mCACkB1E,M,EAAQ0E,K,EAAM;AAC5B,gBAAGA,UAAU9D,SAAb,EAAwB8D,QAAQkH,UAAR;AACxB5L,mBAAOgN,QAAP,CAAgB,UAASC,KAAT,EAAe;AAC3B,oBAAGA,iBAAiB7J,MAAMkJ,IAA1B,EAA+B;AAC3BW,0BAAMrB,UAAN,GAAmBlH,KAAnB;AACH;AACJ,aAJD;AAKH;;AAED;;;;;;;4CAI2B3D,G,EAAe;AAAA,8CAAPmM,MAAO;AAAPA,sBAAO;AAAA;;AACtC,gBAAIC,8CAAeC,uBAAf,gBAAgCF,MAAhC,KAAJ;AACApB,2BAAerI,GAAf,CAAmB1C,GAAnB,EAAwBoM,QAAxB;AACH;;AAED;;;;;;uCAGsBpM,G,EAAI;AACtB,mBAAO+K,eAAerH,GAAf,CAAmB1D,GAAnB,CAAP;AACH;;;;;;AAILiL,MAAMhB,iBAAN,GAA0BA,iBAA1B;AACAgB,MAAMd,uBAAN,GAAgCA,uBAAhC;AACAc,MAAMb,qBAAN,GAA8BA,qBAA9B;;AAEAa,MAAMqB,mBAAN,CAA0B,YAA1B,EAAwC,QAAxC,EAAkD,QAAlD,EAA4D,QAA5D;;kBAEerB,K;;;;;;;;;;;;;;;ACxKf;;;;AACA;;;;;;;;AAEA,IAAM7E,OAAO,WAAb;;AAEA,IAAImG,iBAAiB,IAAIC,0BAAJ,EAArB;;IAEMC,S;AACF,yBAAa;AAAA;;AACT;;;;AAIA,aAAKC,OAAL,GAAe,EAAf;;AAEA9F,yBAAO+F,QAAP,CAAgB,uBAAhB,EAAyC,+BAAzC;AACH;;AAED;;;;;4BACInD,M,EAAO;AACP,iBAAKkD,OAAL,CAAanI,IAAb,CAAkBiF,MAAlB;AACH;;AAED;;;;;;+BAGOoD,G,EAAI;AACP,iBAAKA,GAAL,GAAWA,OAAOvK,MAAM3D,IAAN,CAAWmO,YAAX,EAAlB;AACA,mBAAO,KAAKD,GAAZ;AACH;;;iCA6BO;AACJ,mBAAO;AACHxG,sBAAMA,IADH;AAEHsG,yBAAS,KAAKA;AAFX,aAAP;AAIH;;;mCAES;AACN,gBAAIzH,SAASmB,OAAO,GAApB;AACA,iBAAI,IAAI9E,IAAI,CAAR,EAAWwL,aAAa,KAAKJ,OAAL,CAAatL,MAAzC,EAAiDE,IAAIwL,UAArD,EAAiExL,GAAjE,EAAqE;AACjE2D,0BAAU,KAAKyH,OAAL,CAAapL,CAAb,EAAgBqG,QAAhB,MAA8BrG,IAAIwL,aAAa,CAAjB,GAAqB,IAArB,GAA4B,GAA1D,CAAV;AACH;AACD,mBAAO7H,MAAP;AACH;;;4BAxCmB;AAChB,gBAAI8H,OAAOC,OAAOC,gBAAlB;AAAA,gBACIC,OAAOF,OAAOC,gBADlB;AAAA,gBAEIE,OAAOH,OAAOC,gBAFlB;;AAIA,gBAAIG,OAAOJ,OAAOK,gBAAlB;AAAA,gBACIC,OAAON,OAAOK,gBADlB;AAAA,gBAEIE,OAAOP,OAAOK,gBAFlB;;AAIA,iBAAKX,OAAL,CAAa3M,OAAb,CAAqB,kBAAU;AAC3B,oBAAIyN,MAAMhE,OAAOiE,QAAjB;AACA,oBAAIC,MAAMlE,OAAOrB,UAAjB;AACA,oBAAGqF,IAAIzM,CAAJ,GAAQgM,IAAX,EAAiBA,OAAOS,IAAIzM,CAAX;AACjB,oBAAGyM,IAAIxM,CAAJ,GAAQkM,IAAX,EAAiBA,OAAOM,IAAIxM,CAAX;AACjB,oBAAGwM,IAAI/K,CAAJ,GAAQ0K,IAAX,EAAiBA,OAAOK,IAAI/K,CAAX;AACjB,oBAAG+K,IAAIzM,CAAJ,GAAQ2M,IAAIC,KAAZ,GAAoBP,IAAvB,EAA6BA,OAAOI,IAAIzM,CAAJ,GAAQ2M,IAAIC,KAAnB;AAC7B,oBAAGH,IAAIxM,CAAJ,GAAQ0M,IAAIE,MAAZ,GAAqBN,IAAxB,EAA8BA,OAAOE,IAAIxM,CAAJ,GAAQ0M,IAAIE,MAAnB;AAC9B,oBAAGJ,IAAI/K,CAAJ,GAAQiL,IAAItM,MAAZ,GAAqBmM,IAAxB,EAA8BA,OAAOC,IAAI/K,CAAJ,GAAQiL,IAAItM,MAAnB;AACjC,aATD;;AAWAmL,2BAAesB,SAAf,GAA2B,IAA3B;AACAtB,2BAAepE,UAAf,CAA0B2F,GAA1B,CAA8BV,OAAOL,IAArC,EAA2CQ,OAAOJ,IAAlD,EAAwDG,OAAOJ,IAA/D;AACAX,2BAAekB,QAAf,CAAwB/K,GAAxB,CAA4B,CAAC0K,OAAOL,IAAR,IAAgB,CAA5C,EAA+C,CAACQ,OAAOJ,IAAR,IAAgB,CAA/D,EAAkE,CAACG,OAAOJ,IAAR,IAAgB,CAAlF;;AAEA,mBAAOX,cAAP;AACH;;;4BA8BW;AACR,gBAAIlH,QAAQ,KAAKqH,OAAL,CAAatL,MAAb,GAAsB,CAAlC;AACA,mBAAO,KAAKsL,OAAL,CAAarH,KAAb,CAAP;AACH;;;iCAhBejB,I,EAAK;AACjB,gBAAGA,KAAKgC,IAAL,KAAcA,IAAjB,EAAuB,MAAM,2BAA2BA,IAAjC;;AAEvB,gBAAIyH,YAAY,IAAIpB,SAAJ,EAAhB;AACA,iBAAI,IAAInL,IAAI,CAAR,EAAWwL,aAAa1I,KAAKsI,OAAL,CAAatL,MAAzC,EAAiDE,IAAIwL,UAArD,EAAiExL,GAAjE,EAAqE;AACjE,oBAAIyM,mBAAmBvB,2BAAiBwB,QAAjB,CAA0B5J,KAAKsI,OAAL,CAAapL,CAAb,CAA1B,CAAvB;AACAyM,iCAAiBF,SAAjB,GAA6BA,SAA7B;AACAA,0BAAUI,GAAV,CAAcF,gBAAd;AACH;;AAED,mBAAOF,SAAP;AACH;;;;;;kBAQUpB,S;;;;;;;;;;;;;;;;;AC3Ff;;;;;AAKA,IAAMyB,WAAWC,OAAO,SAAP,CAAjB;AACA,IAAMC,cAAcD,OAAO,YAAP,CAApB;;IAEME,e;AACF,+BAAa;AAAA;;AACT,aAAKH,QAAL,IAAiB,EAAjB;AACA,aAAKE,WAAL,IAAoB,EAApB;AACH;;AAED;;;;;2BACGtE,K,EAAOrI,Q,EAAS;AACf,gBAAG,KAAKyM,QAAL,EAAepE,KAAf,MAA0BjK,SAA7B,EAAuC;AACnC,qBAAKqO,QAAL,EAAepE,KAAf,IAAwB,EAAxB;AACH;AACD,iBAAKoE,QAAL,EAAepE,KAAf,EAAsBvF,IAAtB,CAA2B9C,QAA3B;AACH;;AAED;;;;4BACIqI,K,EAAOrI,Q,EAAS;AAChB,gBAAIuI,YAAY,KAAKkE,QAAL,EAAepE,KAAf,CAAhB;AACA,gBAAGE,SAAH,EAAa;AACT,oBAAI3E,QAAQ2E,UAAU1E,OAAV,CAAkB7D,QAAlB,CAAZ;AACA,oBAAG4D,SAAS,CAAC,CAAb,EAAe;AACX2E,8BAAUzE,MAAV,CAAiBF,KAAjB,EAAwB,CAAxB;AACH;AACJ;AACJ;;AAED;;;;iCACSyE,K,EAAe;AAAA,8CAALvD,IAAK;AAALA,oBAAK;AAAA;;AACpB,iBAAK6H,WAAL,EAAkBtE,KAAlB,IAA2BvD,IAA3B;AACA,gBAAIyD,YAAY,KAAKkE,QAAL,EAAepE,KAAf,CAAhB;AACA,gBAAGE,SAAH,EAAa;AACT,qBAAI,IAAI1I,IAAI,CAAR,EAAWC,MAAMyI,UAAU5I,MAA/B,EAAuCE,IAAIC,GAA3C,EAAgDD,GAAhD,EAAoD;AAChD0I,8BAAU1I,CAAV,mBAAgBiF,IAAhB;AACH;AACJ;AACJ;;;;;;kBAIU8H,e;;;;;;;;;;;;;;;AC/Cf;;;;AACA;;;;;;;;AAEA,IAAMC,UAAUH,OAAO,QAAP,CAAhB;;IAEMzE,U;AACF,0BAAa;AAAA;;AACT,aAAKtD,IAAL,GAAY,YAAZ;;AAEA,aAAKkC,QAAL,GAAgB,CAAhB;AACA,aAAKC,UAAL,GAAkB,EAAlB;AACA,aAAKqE,GAAL,GAAW,EAAX;AACA,aAAK0B,OAAL,IAAgB,CAAhB;;AAEA;;;AAGA,aAAKxF,YAAL,GAAoB,IAAIkC,GAAJ,EAApB;AACH;;AAED;;;;;;;AAIA;;;+BAGO4B,G,EAAI;AACP,iBAAKA,GAAL,GAAWA,OAAOvK,MAAM3D,IAAN,CAAWmO,YAAX,EAAlB;AACA,mBAAO,KAAKD,GAAZ;AACH;;;6BAEIzD,K,EAAM;AACPvC,6BAAOY,IAAP,CAAY,oCAAZ;AACH;;;gCAEM;AACHZ,6BAAOY,IAAP,CAAY,qCAAZ;AACH;;;mCAES,CAET;;;4BArBW;AAAE,mBAAO,KAAK8G,OAAL,CAAP;AAAuB,S;0BAC1B3K,K,EAAM;AAAE,iBAAK2K,OAAL,IAAgB3K,KAAhB;AAAwB;;;;;;kBAuBhC+F,U;;;;;;;;;;;;;;;AC7Cf;;;;;;;;AAEA,IAAM6E,iBAAiB;AACnBC,UAAM,MADa;AAEnB/H,UAAM;AAFa,CAAvB;;AAKA;;;;;;;IAQMpD,U;AACF,wBAAYoL,QAAZ,EAAsBC,GAAtB,EAA2BC,GAA3B,EAAgC5K,IAAhC,EAAsCP,QAAtC,EAA+C;AAAA;;AAC3C,aAAKiL,QAAL,GAAgBA,QAAhB;AACA,aAAKC,GAAL,GAAWA,GAAX;AACA,aAAKC,GAAL,GAAWA,GAAX;AACA,aAAK5K,IAAL,GAAYA,IAAZ;AACA,aAAKP,QAAL,GAAgBA,QAAhB;AACH;;AAED;;;;;;;iCAGgB+E,U,EAAYmG,G,EAAKC,G,EAAK5K,I,EAAMP,Q,EAAS;AACjD,gBAAIJ,cAAc,EAAlB;AACAmF,uBAAWxI,OAAX,CAAmB,oBAAY;AAC3BqD,4BAAYmB,IAAZ,CAAiB,IAAIlB,UAAJ,CAAeoL,QAAf,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmC5K,IAAnC,EAAyCP,QAAzC,CAAjB;AACH,aAFD;AAGA,mBAAOJ,WAAP;AACH;;;;;;AAGL,SAASwL,aAAT,CAAuB1O,GAAvB,EAA4BF,GAA5B,EAAgC;AAC5B,QAAI6O,kBAAkB7O,IAAI,CAAJ,KAAU,GAAhC;AACA,QAAG6O,eAAH,EACI7O,MAAMA,IAAI0G,MAAJ,CAAW,CAAX,CAAN;;AAEJ,QAAIoI,eAAe9O,GAAnB;;AAEAA,UAAMA,IAAI+O,KAAJ,CAAU,GAAV,CAAN;AACA,QAAInK,SAASiK,kBAAkB7O,IAAIgP,KAAJ,CAAU,CAAV,EAAahP,IAAIoB,MAAJ,GAAa,CAA1B,EAA6B6N,IAA7B,CAAkC,GAAlC,CAAlB,GAA2DpP,SAAxE;AACA,WAAOG,IAAIoB,MAAJ,GAAa,CAApB;AAAuBlB,cAAMA,IAAIF,IAAIkP,KAAJ,EAAJ,CAAN;AAAvB,KACA,OAAO;AACH5H,YAAI,CAAC1C,SAASA,SAAS,GAAlB,GAAwB,EAAzB,IAA+B5E,IAAI,CAAJ,CADhC;AAEH4E,gBAAQA,MAFL;AAGHuK,eAAOjP,GAHJ;AAIHF,aAAKA,IAAI,CAAJ,CAJF;AAKH8O,sBAAcA;AALX,KAAP;AAOH;;AAED,SAASM,MAAT,CAAgBlP,GAAhB,EAAqBF,GAArB,EAAyB;AACrB,WAAOA,IAAI+O,KAAJ,CAAU,GAAV,EAAepD,MAAf,CAAsB,UAAShK,CAAT,EAAYE,CAAZ,EAAc;AACvC,eAAOF,KAAKA,EAAEE,CAAF,CAAZ;AACH,KAFM,EAEJ3B,GAFI,CAAP;AAGH;;AAED,SAASmP,MAAT,CAAgBnP,GAAhB,EAAqBF,GAArB,EAA0BsP,GAA1B,EAA8B;AAC1BtP,UAAMA,IAAI+O,KAAJ,CAAU,GAAV,CAAN;AACA,WAAO/O,IAAIoB,MAAJ,GAAa,CAApB;AAAuBlB,cAAMA,IAAIF,IAAIkP,KAAJ,EAAJ,CAAN;AAAvB,KACA,IAAIK,SAASvP,IAAIkP,KAAJ,EAAb;AACA,QAAGhP,IAAIqP,MAAJ,EAAY9D,MAAf,EAAsB;AAClBvL,YAAIqP,MAAJ,EAAY9D,MAAZ,CAAmB6D,GAAnB;AACH,KAFD,MAGI;AACApP,YAAIqP,MAAJ,IAAcD,GAAd;AACH;AACD,WAAOpP,IAAIqP,MAAJ,CAAP;AACH;;AAED,SAASC,QAAT,CAAkBpL,IAAlB,EAAwBqL,QAAxB,EAAkCrJ,IAAlC,EAAwC;AACpC;AACA,QAAIsJ,OAAO,IAAIC,IAAJ,CAAS,CAACvL,IAAD,CAAT,EAAiB,EAACgC,MAAOA,QAAQ,YAAhB,EAAjB,CAAX;AACA,QAAI5F,OAAOoP,SAAP,CAAiBC,gBAArB,EAAuC;AACnCrP,eAAOoP,SAAP,CAAiBC,gBAAjB,CAAkCH,IAAlC,EAAwCD,QAAxC,EADJ,KAEK;AAAE;AACH,YAAI9N,IAAIoD,SAASC,aAAT,CAAuB,GAAvB,CAAR;AAAA,YACQ8K,MAAMC,IAAIC,eAAJ,CAAoBN,IAApB,CADd;AAEA/N,UAAEsO,IAAF,GAASH,GAAT;AACAnO,UAAE6N,QAAF,GAAaC,QAAb;AACA1K,iBAASmL,IAAT,CAAcC,WAAd,CAA0BxO,CAA1B;AACAA,UAAEyO,KAAF;AACAC,mBAAW,YAAW;AAClBtL,qBAASmL,IAAT,CAAcI,WAAd,CAA0B3O,CAA1B;AACAnB,mBAAOuP,GAAP,CAAWQ,eAAX,CAA2BT,GAA3B;AACH,SAHD,EAGG,CAHH;AAIH;AACJ;;AAED,IAAMU,oBAAoB;AACtBC,UAAM,IADgB,EACVC,OAAO;AADG,CAA1B;;AAIA;;;;;IAKMC,Q;AACF;;;AAGA,sBAAYrN,KAAZ,EAAkB;AAAA;;AACd,aAAKA,KAAL,GAAaA,KAAb;;AAEA;AACA;;AAEA,aAAKmB,UAAL,GAAkB,EAAlB;AACH;;;;4BAEGnB,K,EAAO3D,M,EAAO;AACd2D,oBAAQA,MAAMpC,OAAN,CAAc,IAAI1C,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAd,EAAoC,GAApC,CAAR;AACA,iBAAKiG,UAAL,CAAgBnB,KAAhB,IAAyB3D,MAAzB;AACAiR,mBAAOC,YAAP,CAAoBrM,GAApB,CAAwB,KAAKC,UAA7B,EAAyCnB,KAAzC;AACA6D,oBAAQE,GAAR,CAAY,WAAW/D,KAAX,GAAmB,eAAnB,GAAqC,KAAKA,KAAtD;AACH;;;;;;AAGL;;;AACA,IAAIuN,YAAJ;;AAEA;AACA,IAAIC,YAAY,IAAI9F,GAAJ,EAAhB;;AAEA;AACA,IAAI+F,YAAY,IAAI/F,GAAJ,EAAhB;;IAGM4F,M;AACF,oBAAYjR,MAAZ,EAAmB;AAAA;;AACf,YAAG,CAACiR,OAAOF,KAAX,EACIE,OAAOF,KAAP,GAAeK,SAAf;AACJA,kBAAUrO,GAAV,CAAc/C,MAAd,EAAsB,IAAtB;;AAEA,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKG,IAAL,GAAY,EAAZ;AACH;;;;gCAEa;AACV,gBAAIA,OAAO,KAAKA,IAAhB;;AADU,8CAALyG,IAAK;AAALA,oBAAK;AAAA;;AAEVA,iBAAKxG,OAAL,CAAa,eAAO;AAChBD,qBAAKyE,IAAL,CAAUvE,GAAV;AACH,aAFD;AAGH;;;iCAEQgR,U,EAAW;AAChB,gBAAI5M,OAAO,EAAX;AACA,gBAAIzE,SAAS,KAAKA,MAAlB;AACA,iBAAKG,IAAL,CAAUC,OAAV,CAAkB,eAAO;AACrB,oBAAIkR,eAAejR,eAAeqD,UAAlC;AACA,oBAAI6N,UAAUtC,cAAcjP,MAAd,EAAsBsR,eAAejR,IAAIyO,QAAnB,GAA8BzO,GAApD,CAAd;AACA,oBAAImR,WAAWD,QAAQ/B,KAAR,CAAc+B,QAAQlR,GAAtB,CAAf;AACA,oBAAG,OAAOmR,QAAP,KAAoB,UAAvB,EAAkC;AAC9B/M,yBAAK8M,QAAQ5J,EAAb,IAAmB6J,QAAnB;AACH,iBAFD,MAGK,IAAGH,eAAenR,SAAlB,EAA4B;AAC7B,wBAAI8F,OAAO,IAAX;AACAqL,+BAAWjR,OAAX,CAAmB,sBAAc;AAC7B,4BAAGqR,eAAeF,QAAQ5J,EAA1B,EAA6B;AACzB3B,mCAAO,KAAP;AACH;AACJ,qBAJD;AAKA,wBAAGA,IAAH,EAASwB,QAAQE,GAAR,CAAY,+BAA+B6J,QAAQ5J,EAAvC,GAA4C,wBAAxD;AACZ;AACJ,aAhBD;AAiBA,mBAAOlD,IAAP;AACH;;;oCAEU;AAAA;;AACP,gBAAIA,OAAO,EAAX;AACA,iBAAKtE,IAAL,CAAUC,OAAV,CAAkB,eAAO;AACrB,oBAAIkR,eAAejR,eAAeqD,UAAlC;AACA,oBAAI6N,UAAUtC,cAAc,MAAKjP,MAAnB,EAA2BsR,eAAejR,IAAIyO,QAAnB,GAA8BzO,GAAzD,CAAd;AACA,oBAAImR,WAAWD,QAAQ/B,KAAR,CAAc+B,QAAQlR,GAAtB,CAAf;AACA,oBAAG,OAAOmR,QAAP,KAAoB,UAAvB,EAAkC;AAC9B,wBAAIE,YAAYH,QAAQ/B,KAAR,CAAc+B,QAAQlR,GAAtB,EAA2BsR,OAA3B,GAAqC,OAAOtE,OAAOuE,QAAP,CAAgBJ,SAASK,MAAT,EAAhB,EAAmC9M,QAAnC,CAA4C,EAA5C,CAA5C,GAA8FyM,QAA9G;AACA/M,yBAAK8M,QAAQpC,YAAb,IAA6BuC,SAA7B;AACH;AACJ,aARD;AASA,mBAAOjN,IAAP;AACH;;;+BAEK;AACF,gBAAG,KAAKqN,MAAR,EAAe;AACX,qBAAKA,MAAL;AACA,qBAAKrN,IAAL,GAAY,KAAKsN,QAAL,EAAZ;AACH;AACJ;;AAED;;;;;;;;;;6BAOKC,U,EAAYrO,K,EAAOsO,G,EAAKzN,M,EAAO;AAAA;;AAEhCA,qBAASnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8BqM,iBAA9B,CAAT;;AAEA,gBAAIpN,cAAc,EAAlB;AACA,gBAAIzD,SAAS,KAAKA,MAAlB;AACA,gBAAGiS,QAAQ/R,SAAX,EAAsB;;AAElB+R,sBAAM,IAAI,CAACpR,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAvD,CAA2D;AAC7D6N,+BAAW;AADkD,iBAA3D,CAAN;AAGH,aALD,MAMK,IAAGzO,KAAH,EAAS;AACVsO,sBAAMA,IAAIjN,SAAJ,CAAcrB,KAAd,CAAN;AACH;;AAED,gBAAG,KAAK0O,OAAL,KAAiBnS,SAApB,EAA8B;AAC1B,qBAAKmS,OAAL,GAAe,EAAf;;AAEA,qBAAKP,MAAL,GAAc,YAAU;AACpBI,oBAAA,mBAAAA,CAAQ,EAAR;;AAEAD,wBAAIK,SAAJ;AACAN;AACH,iBALD;;AAOAC,oBAAIpN,GAAJ,CAAQ,IAAR,EAAc,QAAd;AACH;;AAED,iBAAK1E,IAAL,CAAUC,OAAV,CAAkB,eAAO;AACrB,oBAAIkR,eAAejR,eAAeqD,UAAlC;AACA,oBAAI6N,UAAUtC,cAAcjP,MAAd,EAAsBsR,eAAejR,IAAIyO,QAAnB,GAA8BzO,GAApD,CAAd;AACA,oBAAG,OAAKgS,OAAL,CAAad,QAAQ5J,EAArB,MAA6B,IAAhC,EAAqC;AACjC,wBAAI1C,SAASgN,GAAb;AACA,wBAAGV,QAAQtM,MAAX,EAAkB;AACdiN,wBAAA,mBAAAA,CAAQ,EAAR;;AAEA,4BAAGD,IAAIM,IAAP,EACItN,SAASgN,IAAIM,IAAJ,CAAShB,QAAQtM,MAAjB,CAAT,CADJ,KAGIuC,QAAQxB,IAAR,CAAa,2BAAb;;AAEJ,4BAAG,CAACf,MAAJ,EACIA,SAASgN,IAAIjN,SAAJ,CAAcuM,QAAQtM,MAAtB,CAAT;AACP;AACD,wBAAIuN,cAAcjB,QAAQ/B,KAAR,CAAc+B,QAAQlR,GAAtB,EAA2BsR,OAA3B,GAAqC1M,OAAOwN,QAA5C,GAAuDxN,OAAOJ,GAAhF;AACApB,gCAAYmB,IAAZ,CACI,CAAE0M,gBAAgBjR,IAAI0O,GAAJ,KAAY7O,SAA5B,GACEsS,YAAYE,IAAZ,CAAiBzN,MAAjB,EACIsM,QAAQ/B,KADZ,EACmB+B,QAAQlR,GAD3B,EACgCA,IAAI0O,GADpC,EACyC1O,IAAI2O,GAD7C,EACkD3O,IAAI+D,IADtD,CADF,GAIEoO,YAAYE,IAAZ,CAAiBzN,MAAjB,EACIsM,QAAQ/B,KADZ,EACmB+B,QAAQlR,GAD3B,CAJJ,EAOGwD,QAPH,CAOYxD,IAAIwD,QAAJ,KAAiB3D,SAAjB,GAA6B8R,UAA7B,GACP,YAAU;AACP3R,4BAAIwD,QAAJ,CAAa6O,IAAb,CAAkBnB,QAAQ/B,KAA1B;AACAwC;AACH,qBAXL,CADJ;AAeA,2BAAKK,OAAL,CAAad,QAAQ5J,EAArB,IAA2B,IAA3B;AACH;AACJ,aAlCD;;AAoCA,gBAAIgL,QAAQ,IAAZ;AACA,gBAAIC,SAAS;AACTC,sBAAM,gBAAU;AACZF,0BAAME,IAAN;AACA,wBAAI/C,WAAWnM,UAAUzD,SAAV,GAAuByD,SAASA,MAAMgC,OAAN,CAAc,OAAd,MAA2B,CAAC,CAA5B,GAAgC,OAAhC,GAA0C,EAAnD,CAAvB,GAAiF,aAAhG;AACAkK,6BAAS8C,MAAMlO,IAAf,EAAqBqL,QAArB;AACH,iBALQ;;AAOTgD,uBAAO,iBAAU;AACbtL,4BAAQE,GAAR,CAAYiL,MAAM3S,MAAlB;AACH,iBATQ;;AAWT+S,2BAAW,qBAAU;AACjB,wBAAGJ,MAAMb,MAAT,EAAgB;AACZa,8BAAMb,MAAN;AACA,4BAAIrN,OAAOkO,MAAMI,SAAN,EAAX;AACA,4BAAIjM,OAAOtG,KAAKE,SAAL,CAAe+D,IAAf,CAAX;AACA+C,gCAAQE,GAAR,CAAYjD,IAAZ,EAAkBqC,IAAlB;AACH;AACJ;AAlBQ,aAAb;AAoBA,gBAAGtC,OAAOsM,IAAV,EAAe;AACX,oBAAG,KAAKkC,cAAL,KAAwB9S,SAA3B,EAAsC,KAAK8S,cAAL,GAAsBf,IAAIjN,SAAJ,CAAc,KAAd,CAAtB;AACtC,oBAAG,KAAKqN,OAAL,CAAa,aAAb,MAAgC,IAAnC,EAAwC;AACpC,yBAAKW,cAAL,CAAoBnO,GAApB,CAAwB+N,MAAxB,EAAgC,MAAhC;AACA,yBAAKP,OAAL,CAAa,aAAb,IAA8B,IAA9B;AACH;AACJ;AACD,gBAAG7N,OAAOuM,KAAV,EAAgB;AACZ,oBAAG,KAAKiC,cAAL,KAAwB9S,SAA3B,EAAsC,KAAK8S,cAAL,GAAsBf,IAAIjN,SAAJ,CAAc,KAAd,CAAtB;AACtC,oBAAG,KAAKqN,OAAL,CAAa,cAAb,MAAiC,IAApC,EAAyC;AACrC,yBAAKW,cAAL,CAAoBnO,GAApB,CAAwB+N,MAAxB,EAAgC,OAAhC;AACA,yBAAKP,OAAL,CAAa,cAAb,IAA+B,IAA/B;AACH;AACJ;;AAED,oBAAO7N,OAAOyO,aAAd;AACI;AAAS;AACT,qBAAKrE,eAAe9H,IAApB;AACI,wBAAG,KAAKkM,cAAL,KAAwB9S,SAA3B,EAAsC,KAAK8S,cAAL,GAAsBf,IAAIjN,SAAJ,CAAc,KAAd,CAAtB;AACtC,wBAAG,KAAKqN,OAAL,CAAa,kBAAb,MAAqC,IAAxC,EAA6C;AACzC,6BAAKW,cAAL,CAAoBnO,GAApB,CAAwB+N,MAAxB,EAAgC,WAAhC;AACA,6BAAKP,OAAL,CAAa,kBAAb,IAAmC,IAAnC;AACH;AACD;AARR;;AAWA,iBAAKJ,GAAL,GAAWA,GAAX;AACH;;;iCAEO;AACJ,gBAAG,KAAKxN,IAAL,KAAcvE,SAAjB,EAA4BsH,QAAQxB,IAAR,CAAa,KAAKhG,MAAlB,EAA0B,qCAA1B;AAC5B,mBAAO,KAAKyE,IAAZ;AACH;;;;;AAiBD;;;;;;+BAMcqK,Q,EAA2B;AACrC,gBAAIoE,WAAW,EAAf;;AADqC,+CAAdC,aAAc;AAAdA,6BAAc;AAAA;;AAErCA,0BAAc/S,OAAd,CAAsB,uBAAe;AACjC8S,yBAAStO,IAAT,CAAckK,WAAW,GAAX,GAAiBsE,WAA/B;AACH,aAFD;AAGA,mBAAOF,QAAP;AACH;;AAED;;;;;;;6BAIYlT,M,EAAQyE,I,EAAK;AACrB,gBAAItE,OAAOP,OAAOO,IAAP,CAAYsE,IAAZ,CAAX;AACAtE,iBAAKC,OAAL,CAAa,eAAO;AAChBsP,uBAAO1P,MAAP,EAAeK,GAAf,EAAoBoE,KAAKpE,GAAL,CAApB;AACH,aAFD;;AAIA,gBAAG+Q,UAAUiC,GAAV,CAAcrT,MAAd,KAAyBoR,UAAUrN,GAAV,CAAc/D,MAAd,EAAsB8R,MAAlD,EACIV,UAAUrN,GAAV,CAAc/D,MAAd,EAAsB8R,MAAtB;AACP;;AAED;;;;;;;;qCAKoBwB,Q,EAAU3P,K,EAAO3D,M,EAAO;AACxC,gBAAGmR,UAAUkC,GAAV,CAAcC,QAAd,MAA4B,KAA/B,EAAsCnC,UAAUpO,GAAV,CAAcuQ,QAAd,EAAwB,IAAItC,QAAJ,CAAasC,QAAb,CAAxB;AACtC,gBAAIC,WAAWpC,UAAUpN,GAAV,CAAcuP,QAAd,CAAf;AACAC,qBAASjF,GAAT,CAAa3K,KAAb,EAAoB3D,MAApB;AACH;;;4BApD0B;AACvB,mBAAO4O,cAAP;AACH;;;4BAEqB;AAClB,mBAAOuC,SAAP;AACH;;;4BAEwB;AACrB,gBAAGD,iBAAiBhR,SAApB,EAA+BgR,eAAe,IAAI,CAACrQ,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAvD,CAA2D;AACrG6N,2BAAW;AAD0F,aAA3D,CAAf;AAG/B,mBAAOlB,YAAP;AACH;;;;;;AA0CLD,OAAOvN,UAAP,GAAoBA,UAApB;;kBAEeuN,M;;;;;;;;;;;;;;;ACzXf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMhH,UAAU;AACZuJ,WAAO;AADK,CAAhB;;AAIA;;;;;;;;IAQMC,G;;;AAEF;;;;;AAKA,iBAAYC,YAAZ,EAA0BlP,MAA1B,EAAkC;AAAA;;AAAA;;AAI9B,YAAImO,aAAJ;;AAEA,cAAKgB,EAAL,GAAUnP,OAAOmP,EAAjB;AACA,cAAKC,UAAL,GAAkBpP,OAAOoP,UAAzB;AACA,cAAKC,iBAAL,GAAyBrP,OAAOqP,iBAAhC;AACA,cAAKC,eAAL,GAAuBtP,OAAOsP,eAA9B;;AAEA;AACA,YAAIC,eAAe,EAACJ,IAAI,MAAKA,EAAV,EAAnB;AACA,cAAKK,MAAL,GAAc,IAAIC,gBAAJ,CAAWF,YAAX,CAAd;;AAEA,cAAKH,UAAL,CAAgBxJ,EAAhB,CAAmB8J,qBAAWjK,OAAX,CAAmBkK,MAAtC;AACI;AACA,kBAASC,QAAT,EAAkB;AACdzB,kBAAMqB,MAAN,CAAaK,SAAb,CAAuB/F,GAAvB,CAA2B8F,QAA3B;AACH,SAJL;;AAMA,cAAKR,UAAL,CAAgBxJ,EAAhB,CAAmB8J,qBAAWjK,OAAX,CAAmBqK,MAAtC;AACI;AACA,kBAASF,QAAT,EAAkB;AACdzB,kBAAMqB,MAAN,CAAaK,SAAb,CAAuBE,MAAvB,CAA8BH,QAA9B;AACAzB,kBAAM6B,UAAN;AACH,SALL;;AAOA,cAAKZ,UAAL,CAAgBxJ,EAAhB,CAAmB8J,qBAAWjK,OAAX,CAAmBwK,MAAtC;AACI;AACA,kBAASL,QAAT,EAAkB;AACdzB,kBAAMqB,MAAN,CAAaK,SAAb,CAAuBK,MAAvB,CAA8BN,SAASnH,GAAvC;AACA0F,kBAAM6B,UAAN;AACH,SALL;;AAOA,cAAKX,iBAAL,CAAuBzJ,EAAvB,CAA0BuK,4BAAkB1K,OAAlB,CAA0B2K,eAApD;AACI;AACA,kBAAS1G,SAAT,EAAmB;AACfyE,kBAAMqB,MAAN,CAAaa,YAAb,CAA0BC,YAA1B,CAAuC5G,SAAvC;AACH,SAJL;;AAMA,cAAK4F,eAAL,CAAqB1J,EAArB,CAAwB2K,0BAAgB9K,OAAhB,CAAwB+K,YAAhD;AACI;AACA,kBAASC,YAAT,EAAsB;AAClBtC,kBAAMuC,KAAN,CAAYD,YAAZ;AACH,SAJL;;AAMA,cAAKE,UAAL,GAAkB,IAAIC,oBAAJ,CAAe1B,YAAf,EAA6B,MAAKC,EAAlC,CAAlB;AACA,cAAKwB,UAAL,CAAgBE,IAAhB,GAAuBC,IAAvB,CAA4B,MAAKC,KAAL,CAAWC,IAAX,OAA5B;AAhD8B;AAiDjC;;;;gCAGM;AACH,gBAAI7C,QAAQ,IAAZ;AACA,gBAAImB,kBAAkB,KAAKA,eAA3B;;AAEA;AACA,gBAAI2B,aAAa,EAAE9B,IAAI,KAAKA,EAAX,EAAjB;AACA,iBAAK+B,IAAL,GAAY,IAAIC,cAAJ,CAAS,KAAK3B,MAAd,EAAsB,KAAKmB,UAA3B,EAAuCM,UAAvC,CAAZ;AACA,iBAAKN,UAAL,CAAgBI,KAAhB;;AAEA,iBAAK5B,EAAL,CAAQiC,KAAR,CAAc,IAAd;AACA,iBAAKhC,UAAL,CAAgBgC,KAAhB,CAAsB,IAAtB;AACA,iBAAK/B,iBAAL,CAAuB+B,KAAvB,CAA6B,IAA7B;;AAEA;AACA,qBAASC,YAAT,CAAsBC,aAAtB,EAAoC;AAChC7O,iCAAOW,GAAP,CAAW,iBAAX,EAA8BkO,aAA9B;AACAhC,gCAAgBiC,OAAhB,CAAwBhB,0BAAgB9K,OAAhB,CAAwB+L,MAAhD,EAAwDF,aAAxD;AACH;AACD,iBAAK9B,MAAL,CAAY5J,EAAZ,CAAe6J,iBAAOhK,OAAP,CAAegM,UAA9B,EAA0CJ,YAA1C;;AAEA;AACA,qBAASK,YAAT,CAAsBC,KAAtB,EAA4B;AACxBrC,gCAAgBiC,OAAhB,CAAwBhB,0BAAgB9K,OAAhB,CAAwBmM,MAAhD,EAAwDD,KAAxD;AACH;AACD,iBAAKnC,MAAL,CAAY5J,EAAZ,CAAe6J,iBAAOhK,OAAP,CAAeoM,UAA9B,EAA0CH,YAA1C;;AAEA,iBAAKI,QAAL,CAAcrM,QAAQuJ,KAAtB;AACH;;;qCAEW;AACR,gBAAG,KAAKG,EAAL,CAAQnP,MAAR,CAAe+R,cAAf,IAAiC,KAAKvC,MAAL,CAAYwC,UAAhD,EAA4D,KAAKtB,KAAL;AAC/D;;AAED;;;;8BACMD,Y,EAAa;AACf,iBAAKS,IAAL,CAAUe,mBAAV;AACA,iBAAKzC,MAAL,CAAYkB,KAAZ,CAAkBD,YAAlB;AACH;;;4BAEmB;AAChB,mBAAOhL,OAAP;AACH;;;;EApGaD,kB;;kBAwGHyJ,G;;;;;;ACjIf;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;ACpBA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA;;;;;AAKA;;;;;IAKMiD,W;AACF;;;;;;AAMA,qBAAYlN,KAAZ,EAAmB4E,gBAAnB,EAAqCN,QAArC,EAA+C6I,WAA/C,EAA2D;AAAA;;AACvD,SAAKnN,KAAL,GAAaA,KAAb;AACA,SAAK4E,gBAAL,GAAwBA,gBAAxB;AACA,SAAKN,QAAL,GAAgBA,QAAhB;AACA,SAAK6I,WAAL,GAAmBA,WAAnB;AACH,C;;IAGCC,a;AACF;;;;AAIA,uBAAYpN,KAAZ,EAAmBqN,gBAAnB,EAAoC;AAAA;;AAChC,SAAKrN,KAAL,GAAaA,KAAb;AACA,SAAKqN,gBAAL,GAAwBA,gBAAxB;AACH,C;;IAGCC,a;AACF;AACA,uBAAYC,aAAZ,EAA2BC,OAA3B,EAAmC;AAAA;;AAC/B;AACA,SAAKC,MAAL,GAAc,EAAd;;AAEA;AACA,SAAKC,QAAL,GAAgB,EAAhB;;AAEA,SAAKH,aAAL,GAAqBA,iBAAiB,CAAtC;;AAEA,SAAKC,OAAL,GAAeA,WAAW,CAAC,CAA3B;AACH,C;;AAGL,IAAMG,gBAAgB,EAAtB;AACA,IAAMlN,UAAU;AACZgM,gBAAY,YADA;AAEZI,gBAAY;AAFA,CAAhB;;AAKA,IAAMe,gBAAgB5I,OAAO,cAAP,CAAtB;;IAEMyF,M;;;AACF;;;AAGA,oBAAYzP,MAAZ,EAAmB;AAAA;;AAAA;;AAGf,cAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,cAAKtC,YAAL,GAAoB,IAAIwC,sBAAJ,EAApB;AACA,cAAKhD,SAAL,GAAiB,IAAIiD,mBAAJ,EAAjB;;AAEA,cAAKC,qBAAL,GAA6B,CAA7B;AARe;AASlB;;AAED;;;;;8BACM/S,M,EAAO;AACTA,qBAASA,UAAU,KAAK4S,aAAL,CAAnB;AACA,iBAAKA,aAAL,IAAsB5S,MAAtB;;AAEA,iBAAK+S,qBAAL;;AAEA,gBAAIC,YAAYhT,OAAOgT,SAAvB;AACA,gBAAIC,kBAAkBjT,OAAOiT,eAA7B;AACA,gBAAGD,cAAc,KAAjB,EACI,KAAKE,QAAL,CAAcD,eAAd;AACP;;AAED;;;;;oDACejT,M,EAAO;;AAElB,oBAAG,KAAKqQ,YAAL,CAAkB8C,KAAlB,KAA4B,KAA/B,EAAqC;AACjC,yBAAKrB,QAAL,CAAcrM,QAAQoM,UAAtB,EAAkC,yBAAlC;AACA;AACH;;AAED,oBAAG,KAAKhC,SAAL,CAAesD,KAAf,KAAyB,KAA5B,EAAkC;AAC9B,yBAAKrB,QAAL,CAAcrM,QAAQoM,UAAtB,EAAkC,sBAAlC;AACA;AACH;;AAED,oBAAMvJ,YAAY,mBAAAoF,CAAQ,EAAR,EAA4BpF,SAA9C;AACA,oBAAM8K,OAAO,mBAAA1F,CAAQ,EAAR,EAA4B0F,IAAzC;;AAEA,oBAAIxJ,mBAAmB,KAAKyG,YAAL,CAAkBgD,OAAlB,CAA0BhO,MAAjD;AACA,oBAAIrH,IAAI4L,iBAAiB5F,UAAzB;AACA,oBAAI0F,YAAY,IAAIpB,SAAJ,CAAcsB,iBAAiBnB,GAA/B,EAAoCzK,EAAEwL,KAAtC,EAA6CxL,EAAEyL,MAA/C,EAAuDzL,EAAEf,MAAzD,EAAiE2M,iBAAiB0J,cAAlF,CAAhB;;AAEA,oBAAIf,gBAAgB,CAApB;;AAEC;AACA,oBAAIgB,QAAQ,EAAZ;AACA,oBAAIC,UAAU,EAAd;AAvBiB;AAAA;AAAA;;AAAA;AAwBjB,yCAAiB,KAAK3D,SAAL,CAAe4D,MAAf,CAAsBC,MAAtB,EAAjB,8HAAgD;AAAA,4BAAxCC,KAAwC;;AAC7C;AACA,4BAAI3O,QAAQ2O,MAAM3O,KAAlB;AACAwO,gCAAQxO,MAAMyD,GAAd,IAAqBzD,KAArB;AACAhH,4BAAIgH,MAAMhB,UAAV;AACA,4BAAI4P,OAAO,IAAIR,IAAJ,CAASpO,MAAMyD,GAAf,EAAoBzK,EAAEwL,KAAtB,EAA6BxL,EAAEyL,MAA/B,EAAuCzL,EAAEf,MAAzC,EAAiD+H,MAAMd,MAAvD,EAA+Dc,MAAMb,QAArE,CAAX;AACAoP,8BAAMnT,IAAN,CAAWwT,IAAX;AACArB,yCAAiBvN,MAAMb,QAAvB;AACH;AAhCiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkClB1B,iCAAOW,GAAP,CAAW,SAAX,EAAsBmQ,KAAtB,EAA6B,MAA7B,EAAqC7J,SAArC;;AAEA,oBAAMmK,MAAM,mBAAAnG,CAAQ,EAAR,CAAZ;AACA,oBAAIoG,YAAYC,YAAYlS,GAAZ,EAAhB;AACA,oBAAIf,SAAS,MAAM+S,IAAIG,IAAJ,CAAStK,SAAT,EAAoB6J,KAApB,EAA2BvT,MAA3B,CAAnB;AACA,oBAAIiU,aAAaF,YAAYlS,GAAZ,KAAoBiS,SAArC;;AAEA,oBAAII,iBAAiB3Z,KAAK4Z,KAAL,CAAWF,aAAa,IAAb,GAAoB,GAA/B,IAAsC,GAA3D;AACA,oBAAI3C,gBAAgB,IAAIgB,aAAJ,CAAkBC,aAAlB,EAAiC2B,cAAjC,CAApB;AACApT,uBAAOsT,WAAP,CAAmBxY,OAAnB,CAA2B,sBAAc;AACrC,wBAAIoJ,QAAQwO,QAAQa,WAAWC,GAAX,CAAenR,EAAvB,CAAZ;AACA,wBAAImG,WAAW,IAAIpL,MAAMqW,OAAV,CACXF,WAAWzX,CAAX,GAAeyX,WAAWG,WAAX,GAAyB,CAD7B,EAEXH,WAAWxX,CAAX,GAAewX,WAAWI,YAAX,GAA0B,CAF9B,EAGXJ,WAAW/V,CAAX,GAAe+V,WAAWK,YAAX,GAA0B,CAH9B,CAAf;AAKA,wBAAIvC,cAAciB,KAAKuB,kBAAL,CAAwBN,WAAWlC,WAAnC,CAAlB;AACA,wBAAIyC,cAAc,IAAI1C,WAAJ,CAAgBlN,KAAhB,EAAuB4E,gBAAvB,EAAyCN,QAAzC,EAAmD6I,WAAnD,CAAlB;AACAb,kCAAcmB,MAAd,CAAqBrS,IAArB,CAA0BwU,WAA1B;AACH,iBAVD;;AAYA9T,uBAAO+T,aAAP,CAAqBjZ,OAArB,CAA6B,wBAAgB;AACzC,wBAAIoJ,QAAQwO,QAAQsB,aAAa3R,EAArB,CAAZ;AACA,wBAAIkP,mBAAmByC,aAAa3Q,QAApC;AACA,wBAAI4Q,gBAAgB,IAAI3C,aAAJ,CAAkBpN,KAAlB,EAAyBqN,gBAAzB,CAApB;AACAf,kCAAcoB,QAAd,CAAuBtS,IAAvB,CAA4B2U,aAA5B;AACH,iBALD;;AAOA,qBAAKjD,QAAL,CAAcrM,QAAQgM,UAAtB,EAAkCH,aAAlC;AACH,a;;;;;;;;;;4BAEe;AACZ,mBAAO,KAAKyB,qBAAL,GAA6B,CAApC;AACH;;;4BAEmB;AAChB,mBAAOtN,OAAP;AACH;;;;EApGgBD,kB;;AAwGrBiK,OAAO6C,aAAP,GAAuBA,aAAvB;;kBAEe7C,M;;;;;;;;;;;;;;;;;AC7Kf;;;;AACA;;;;;;;;;;;;AAEA,IAAMxN,OAAO,kBAAb;;IAEMoG,gB;;;AACF;AACA,8BAAYqB,SAAZ,EAAsB;AAAA;;AAAA;;AAGlB,cAAKA,SAAL,GAAiBA,SAAjB;;AAEA,cAAKsL,MAAL;AALkB;AAMrB;;;;;;AAMD;;;+BAGOvM,G,EAAI;AACP,iBAAKA,GAAL,GAAWA,OAAOvK,MAAM3D,IAAN,CAAWmO,YAAX,EAAlB;AACA,mBAAO,KAAKD,GAAZ;AACH;;;iCAEO;AACJ,gBAAInG,iIAAJ;AACAA,iBAAKL,IAAL,GAAYA,IAAZ;AACA,mBAAOK,IAAP;AACH;;;mCAES;AACN;AACH;;;4BApBmB;AAChB,mBAAO,KAAK0B,UAAL,CAAgBqB,MAAhB,GAAyB,IAAhC;AACH;;;iCAoBepF,I,EAAK;AACjB,gBAAGA,KAAKgC,IAAL,KAAcA,IAAjB,EAAuBe,QAAQxB,IAAR,CAAa,2BAA2BS,IAAxC;;AAEvB,gBAAI2H,mBAAmB,IAAIvB,gBAAJ,EAAvB;AACA4M,6BAAOpL,QAAP,CAAgB5J,IAAhB,EAAsB2J,gBAAtB;;AAEA,mBAAOA,gBAAP;AACH;;;;EAvC0BqL,gB;;kBA0ChB5M,gB;;;;;;;;;;;;;;;AC9Cf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA,IAAM5C,UAAU;AACZyP,UAAM,MADM;AAEZC,aAAS,SAFG;AAGZC,YAAQ,QAHI;AAIZC,aAAS;AAJG,CAAhB;;IAOMzE,U;;;AACF;;;;;AAKA,wBAAY1B,YAAZ,EAA0BC,EAA1B,EAA6B;AAAA;;AAAA;;AAGzB,cAAKxO,UAAL,GAAkBuO,YAAlB;AACA,cAAKC,EAAL,GAAUA,EAAV;AAJyB;AAK5B;;;;+BAEK;;AAEF,gBAAImG,UAAU,IAAIC,iBAAJ,GAAcC,MAAd,CAAqB,CAArB,CAAd;;AAEA,gBAAIC,QAAQ,KAAKtG,EAAL,CAAQnP,MAAR,CAAeyV,KAA3B;AACA,gBAAIC,mBAAmB,EAAvB;AACA,iBAAKC,eAAL,GAAuB,IAAIzW,oBAAJ,CAAewW,gBAAf,CAAvB;;AAEA;AACA,gBAAIE,iBAAiB,EAACC,YAAY,QAAb,EAArB;AACAza,mBAAOC,MAAP,CAAcua,cAAd,EAA8BN,OAA9B;AACA,iBAAKQ,aAAL,GAAqB,IAAIC,kBAAJ,CAAaH,cAAb,CAArB;AACA,iBAAKE,aAAL,CAAmBE,QAAnB,CAA4BC,mBAA5B,GAAkD,GAAlD;AACA,iBAAKtV,UAAL,CAAgBqL,WAAhB,CAA4B,KAAK8J,aAAL,CAAmBE,QAAnB,CAA4BrV,UAAxD;;AAEA;AACA,gBAAIuV,eAAe,EAACC,KAAK,EAAN,EAAUC,QAAQ,CAAlB,EAAqBC,MAAM,IAAIZ,KAA/B,EAAsCa,KAAK,OAAOb,KAAlD,EAAnB;AACA,iBAAKc,gBAAL,GAAwB,IAAIC,gBAAJ,CAAWN,YAAX,CAAxB;AACA,iBAAKK,gBAAL,CAAsBE,aAAtB,CAAoC,KAAKX,aAAL,CAAmBE,QAAnB,CAA4BrV,UAAhE;;AAEA,iBAAK7D,KAAL,GAAa,IAAI4Z,eAAJ,CAAU,KAAK/V,UAAf,CAAb;AACA,iBAAK7D,KAAL,CAAW6Z,MAAX,GAAoB,KAAKJ,gBAAL,CAAsBI,MAA1C;;AAEA,gBAAIC,mBAAmB,KAAKd,aAA5B;AACA,gBAAIe,eAAe,KAAKN,gBAAL,CAAsBI,MAAzC;AACA,iBAAK7Z,KAAL,CAAWga,QAAX,CAAoB1W,IAApB,CAAyB,UAAS2W,MAAT,EAAgB;AACrCH,iCAAiBI,mBAAjB,CAAqCD,MAArC,EAA6CF,YAA7C;AACH,aAFD;;AAIA;AACA,gBAAG,KAAK1H,EAAL,CAAQnP,MAAR,CAAeiX,GAAlB,EAAsB;AAClB;AACA,oBAAIC,YAAY,EAAC/H,IAAI,KAAKA,EAAV,EAAhB;AACA;AACA,oBAAIgI,kBAAkBtc,gBAAMiB,eAAN,CAAsB,EAACqa,KAAK,EAAN,EAAtB,EAAiCD,YAAjC,CAAtB;AACA,qBAAKe,GAAL,GAAW,IAAIG,iBAAJ,CAAYF,SAAZ,EAAuBC,eAAvB,CAAX;AACA,oBAAIE,eAAe,KAAKJ,GAAL,CAASV,gBAAT,CAA0BI,MAA7C;AACA,qBAAK7Z,KAAL,CAAWga,QAAX,CAAoB1W,IAApB,CAAyB,UAAS2W,MAAT,EAAgB;AACrCH,qCAAiBU,YAAjB,CAA8BP,MAA9B,EAAsCM,YAAtC;AACH,iBAFD;;AAIA,qBAAKvB,aAAL,CAAmBE,QAAnB,CAA4BuB,SAA5B,GAAwC,KAAxC;AACH;AACD;;AAEA;AACA,gBAAIC,cAAc;AACdC,4BAAY;;AAGhB;AAJkB,aAAlB,CAKN,KAAKlB,gBAAL,CAAsBjN,QAAtB,CAA+B1M,CAA/B,GAAmC,MAAM6Y,KAAzC;AACA,iBAAKc,gBAAL,CAAsBjN,QAAtB,CAA+BzM,CAA/B,GAAmC,MAAM4Y,KAAzC;AACM,iBAAKc,gBAAL,CAAsBjN,QAAtB,CAA+BhL,CAA/B,GAAmC,MAAMmX,KAAzC;AACA,iBAAKc,gBAAL,CAAsBmB,SAAtB,CAAgC,IAAIxZ,MAAMqW,OAAV,EAAhC;;AAEA;AACA,gBAAGiD,YAAYC,UAAf,EAA0B;AACtB,oBAAIA,aAAa,IAAIvZ,MAAMyZ,UAAV,CAAqB,MAAMlC,KAA3B,EAAkC,EAAlC,CAAjB;AACA,qBAAKE,eAAL,CAAqBiC,UAArB,CAAgCH,UAAhC;AACH;;AAED,gBAAG,KAAKtI,EAAL,CAAQnP,MAAR,CAAe6X,SAAlB,EAA4B;AACxB,qBAAKC,SAAL;AACH;;AAED,gBAAI3J,QAAQ,IAAZ;AACA,mBAAO,IAAI4J,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC9J,sBAAM2D,QAAN,CAAerM,QAAQyP,IAAvB;AACA8C;AACH,aAHM,CAAP;AAIH;;;gCAEM;AACH,gBAAG,KAAK1K,MAAL,KAAgB5R,SAAnB,EAA6B;AACzB,oBAAIyS,QAAQ,IAAZ;AACA,oBAAI2H,gBAAgB,KAAKA,aAAzB;AACA,oBAAIoC,SAAS,KAAKvC,eAAL,CAAqBwC,KAAlC;AAAA,oBACIC,UAAU,KAAK7B,gBAAL,CAAsBI,MADpC;;AAGA,oBAAG,KAAKxH,EAAL,CAAQnP,MAAR,CAAeiX,GAAlB,EAAsB;AAClB,wBAAIA,MAAM,KAAKA,GAAf;AACA,wBAAIoB,SAASpB,IAAIkB,KAAjB;AAAA,wBACIG,UAAUrB,IAAIV,gBAAJ,CAAqBI,MADnC;;AAGA,yBAAKrJ,MAAL,GAAc,UAASpL,SAAT,EAAmB;AAC7BiM,8BAAMoK,gBAAN,GAAyBC,sBAAsBrK,MAAMb,MAA5B,CAAzB;;AAEAa,8BAAMrR,KAAN,CAAYwQ,MAAZ;AACAa,8BAAMoI,gBAAN,CAAuBjJ,MAAvB;AACA2J,4BAAIV,gBAAJ,CAAqBjJ,MAArB;;AAEAwI,sCAAcE,QAAd,CAAuBjR,KAAvB;AACA+Q,sCAAc2C,MAAd,CAAqBP,MAArB,EAA6BE,OAA7B;AACAtC,sCAAcE,QAAd,CAAuB0C,UAAvB;AACA5C,sCAAc2C,MAAd,CAAqBJ,MAArB,EAA6BC,OAA7B;AACH,qBAXD;AAYH,iBAjBD,MAkBI;AACA,yBAAKhL,MAAL,GAAc,UAASpL,SAAT,EAAmB;AAC7BiM,8BAAMoK,gBAAN,GAAyBC,sBAAsBrK,MAAMb,MAA5B,CAAzB;;AAEAa,8BAAMrR,KAAN,CAAYwQ,MAAZ;AACAa,8BAAMoI,gBAAN,CAAuBjJ,MAAvB;;AAEAwI,sCAAc2C,MAAd,CAAqBP,MAArB,EAA6BE,OAA7B;AACH,qBAPD;AAQH;AACJ;;AAED,iBAAK9K,MAAL;AACA,iBAAKxQ,KAAL,CAAW6b,iBAAX,GAA+B,IAA/B;AACA,iBAAK7b,KAAL,CAAW8b,iBAAX,GAA+B,IAA/B;;AAEA,iBAAK9G,QAAL,CAAcrM,QAAQ0P,OAAtB;AACH;;;gCAEM;AACH,gBAAG,KAAKoD,gBAAR,EAAyB;AACrBM,qCAAqB,KAAKN,gBAA1B;AACH;;AAED,iBAAKzG,QAAL,CAAcrM,QAAQ2P,MAAtB;AACH;;;+BAEK;AACF,gBAAG,KAAKmD,gBAAR,EAAyB;AACrBM,qCAAqB,KAAKN,gBAA1B;AACH;AACD,iBAAKzb,KAAL,CAAWgc,OAAX;AACA,iBAAKhD,aAAL,CAAmBgD,OAAnB;;AAEA,iBAAKhH,QAAL,CAAcrM,QAAQ4P,OAAtB;AACH;;;sCAMa/U,U,EAAYuX,S,EAAWkB,O,EAAQ;;AAEzC,gBAAItD,QAAQ,KAAKtG,EAAL,CAAQnP,MAAR,CAAeyV,KAA3B;;AAEA,gBAAIuD,eAAe,IAAI9a,MAAM+a,YAAV,CAAwB,QAAxB,CAAnB;;AAEA,gBAAIC,mBAAmB,IAAIhb,MAAMib,gBAAV,CAA2B,QAA3B,CAAvB;AACAD,6BAAiB5P,QAAjB,CAA0B/K,GAA1B,CAA8B,MAAMkX,KAApC,EAA2C,MAAMA,KAAjD,EAAwD,MAAMA,KAA9D;;AAEAnV,uBAAW8Y,gBAAX,CAA4B/Y,GAA5B,CAAgC2Y,YAAhC;AACA1Y,uBAAW8Y,gBAAX,CAA4B/Y,GAA5B,CAAgC6Y,gBAAhC;;AAEA,gBAAIG,0BAA0B,IAAInb,MAAMib,gBAAV,CAA2B,QAA3B,CAA9B;AACAE,oCAAwB/P,QAAxB,CAAiC/K,GAAjC,CAAqC,CAAC,GAAD,GAAOkX,KAA5C,EAAmD,MAAMA,KAAzD,EAAgE,MAAMA,KAAtE;;AAEAnV,uBAAW8Y,gBAAX,CAA4B/Y,GAA5B,CAAgCgZ,uBAAhC;;AAEA,gBAAG,KAAKlK,EAAL,CAAQnP,MAAR,CAAe6X,SAAf,IAA4BA,SAA/B,EAAyC;AAAA,oBAyB5ByB,YAzB4B,GAyBrC,SAASA,YAAT,GAAuB;AACnBC,uBAAGC,MAAH,CAAU7C,MAAV,CAAiB8C,sBAAjB;AACA3D,kCAAc4D,gBAAd;AACA,wBAAGH,GAAGC,MAAH,CAAUG,GAAb,EAAiB;AACb,4BAAGJ,GAAGC,MAAH,CAAUI,OAAV,CAAkBC,mBAAlB,CAAsCD,OAAtC,IAAiD,MAApD,EAA2D;AACvDA,oCAAQE,IAAR,CAAaP,GAAGC,MAAH,CAAUI,OAAvB;AACAL,+BAAGC,MAAH,CAAUG,GAAV,CAAcI,OAAd;AACAR,+BAAGC,MAAH,CAAUG,GAAV,GAAgB,IAAhB;AACH;AACJ;;AAED,wBAAGZ,OAAH,EAAW;AACPiB,iCAASC,MAAT;AACAC,uCAAeD,MAAf;AACH;AACJ,iBAxCoC;;AACrC,oBAAIE,QAAQ,mBAAAzM,CAAQ,EAAR,EAAqCC,OAAjD;AACA,oBAAIlB,SAAS,mBAAAiB,CAAQ,CAAR,EAAsCC,OAAnD;AACA,oBAAIyM,YAAY,mBAAA1M,CAAQ,EAAR,EAAyCC,OAAzD;;AAEA,oBAAI4L,KAAKL,gBAAT;AACA,oBAAImB,SAAQ,IAAIF,KAAJ,CAAUZ,EAAV,EAAc,mBAAd,CAAZ;AACAc,uBAAMC,YAAN,CAAmB,WAAnB;;AAEA,oBAAIC,kBAAkB,CAAC,OAAD,EAAU,WAAV,EAAuB,YAAvB,CAAtB;AACA,oBAAIC,oBAAoB,CAAC,aAAD,EAAgB,eAAhB,EAAiC,kBAAjC,EAAqD,kBAArD,CAAxB;AACA;AACA,oBAAIC,0BAA0BhO,OAAOiO,MAAP,CAAc,gBAAd,EAAgC,MAAhC,EAAwC,KAAxC,EAA+C,OAA/C,EAAwD,QAAxD,EAAkE,MAAlE,EAA0E,KAA1E,CAA9B;;AAEA,oBAAIV,iBAAJ;AAAA,oBAAcE,uBAAd;AACA,oBAAGnB,OAAH,EAAW;AACPiB,+BAAW,IAAI9b,MAAMyc,sBAAV,CAAiCpB,EAAjC,EAAqC,CAArC,CAAX;AACA,yBAAK5D,eAAL,CAAqBiC,UAArB,CAAgCoC,QAAhC;AACAE,qCAAiB,IAAIhc,MAAM0c,YAAV,CAAuBrB,GAAGC,MAAH,CAAU7C,MAAjC,CAAjB;AACA,yBAAKhB,eAAL,CAAqBiC,UAArB,CAAgCsC,cAAhC;AACH;;AAED,oBAAIpE,gBAAgB,KAAKA,aAAzB;AACA+E,uBAAO/E,aAAP,GAAuBA,aAAvB;AACA,oBAAI8D,UAAUL,GAAGC,MAAH,CAAUI,OAAV,CAAkBkB,KAAlB,EAAd;;;AAkBAT,uBAAM5N,MAAN,gBAAa,4BAAb,EAA2C8M,EAA3C,EAA+CD,YAA/C,EAA6Da,MAAM/P,cAAN,CAAqB9H,IAAlF,SACOiY,eADP,EAEOC,iBAFP,qBAGOC,uBAHP;AAKH;;AAED,mBAAO,CAACzB,YAAD,EAAeE,gBAAf,EAAiCG,uBAAjC,CAAP;AACH;;;oCAEU;;AAEP,gBAAIc,QAAQ,mBAAAzM,CAAQ,EAAR,EAAqCC,OAAjD;AACA,gBAAIlB,SAAS,mBAAAiB,CAAQ,CAAR,EAAsCC,OAAnD;AACA,gBAAIyM,YAAY,mBAAA1M,CAAQ,EAAR,EAAyCC,OAAzD;;AAEA,gBAAIQ,QAAQ,IAAZ;;AAEA,gBAAI4M,eAAeX,UAAUtC,SAAV,CAAoB,KAApB,EAA2B,KAAKvB,gBAAL,CAAsBI,MAAjD,EAAyD,KAAKb,aAAL,CAAmBE,QAAnB,CAA4BrV,UAArF,CAAnB;AACA,iBAAKgV,eAAL,CAAqBiC,UAArB,CAAgCmD,aAAaC,OAA7C;;AAEA,gBAAG,KAAK7L,EAAL,CAAQnP,MAAR,CAAeiX,GAAlB,EAAsB;AAAA,oBAKTqC,YALS,GAKlB,SAASA,YAAT,GAAuB;AACnBtW,4BAAQE,GAAR,CAAY,gBAAZ;AACH,iBAPiB;;AAClB,oBAAI+X,eAAeb,UAAUtC,SAAV,CAAoB,KAApB,EAA2B,KAAKb,GAAL,CAASV,gBAAT,CAA0BI,MAArD,EAA6D,KAAKb,aAAL,CAAmBE,QAAnB,CAA4BrV,UAAzF,CAAnB;AACA,qBAAKsW,GAAL,CAASW,UAAT,CAAoBqD,aAAaD,OAAjC;;AAEA,oBAAI/D,MAAM,KAAKA,GAAf;;;AAKA,oBAAIiE,SAAS,KAAb;AACA,oBAAIF,UAAU;AACVG,sCAAkB,4BAAU;AACxB,4BAAGD,MAAH,EAAU;AACN,gCAAG,CAACjE,IAAIV,gBAAJ,CAAqB6E,aAAzB,EAAuC;AACnCnE,oCAAIV,gBAAJ,CAAqBE,aAArB,CAAmCtI,MAAM2H,aAAN,CAAoBE,QAApB,CAA6BrV,UAAhE;AACH;AACDwN,kCAAMoI,gBAAN,CAAuB8E,IAAvB;AACApE,gCAAIV,gBAAJ,CAAqB+E,OAArB;AACH,yBAND,MAOI;AACAnN,kCAAMoI,gBAAN,CAAuB+E,OAAvB;AACArE,gCAAIV,gBAAJ,CAAqB8E,IAArB;AACH;AACDH,iCAAS,CAACA,MAAV;AACH,qBAdS;AAeVK,4BAAQtE,IAAIV,gBAfF;AAgBViF,2BAAO,iBAAU;AACbnB,8BAAMoB,MAAN,CAAanO,MAAb;AACAtK,gCAAQ2Q,KAAR,CAAc,mBAAd;AACA3Q,gCAAQE,GAAR,CAAY,UAAZ,EAAwBrI,gBAAM6gB,WAAN,CAAkBzE,IAAIV,gBAAJ,CAAqBjN,QAAvC,EAAiD,CAAjD,CAAxB;AACAtG,gCAAQE,GAAR,CAAY,UAAZ,EAAwBrI,gBAAM6gB,WAAN,CAAkBzE,IAAIV,gBAAJ,CAAqBhS,QAAvC,EAAiD,CAAjD,CAAxB;AACAvB,gCAAQC,QAAR;AACH;AAtBS,iBAAd;;AAyBA+X,wBAAQG,gBAAR;;AAEA,oBAAId,QAAQ,IAAIF,KAAJ,CAAU,IAAV,EAAgB,SAAhB,CAAZ;AACAE,sBAAMC,YAAN,CAAmB,WAAnB;AACA,oBAAIqB,qBAAqBlP,OAAOiO,MAAP,CAAc,kBAAd,EAAkC,GAAlC,EAAuC,GAAvC,EAA4C,GAA5C,CAAzB;AACA,oBAAIkB,sBAAsBnP,OAAOvN,UAAP,CAAkB2c,QAAlB,CAA2BF,kBAA3B,EAA+C,CAA/C,EAAkD,IAAIphB,KAAKC,EAA3D,EAA+D,IAAID,KAAKC,EAAT,GAAc,GAA7E,CAA1B;AACA6f,sBAAM5N,MAAN,eAAa,IAAb,EAAmBuO,OAAnB,EAA4B1B,YAA5B,EAA0Ca,MAAM/P,cAAN,CAAqBC,IAA/D,EACI,kBADJ,EAEI,OAFJ,EAGI,mBAHJ,4BAIOoC,OAAOiO,MAAP,CAAc,kBAAd,EAAkC,GAAlC,EAAuC,GAAvC,EAA4C,GAA5C,CAJP,sBAKOkB,mBALP;;AAQA5Y,wBAAQE,GAAR,CAAY,gBAAZ,EAA8BmX,MAAMoB,MAAN,CAAahO,GAAb,CAAiB/N,IAAjB,IAAyB2a,KAAvD;AACH;AACJ;;;4BAvImB;AAChB,mBAAO5U,OAAP;AACH;;;;EAtJoBD,kB;;kBA8RVoL,U;;;;;;;;;;;;;;;;AChTf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA;;;;;;;AAOA,IAAM+B,gBAAgB;AAClBsE,SAAK,IADa;AAElBY,eAAW,KAFO;AAGlBpC,WAAO,CAHW;AAIlB1D,oBAAgB;AAJE,CAAtB;;IAOM+J,E;AACF;;;;AAIA,gBAAY9b,MAAZ,EAAmB;AAAA;;AAEf,aAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;AACH;;AAED;;;;;8BACMnT,K,EAAM;AACR;AACA,gBAAIuc,MAAMvc,KAAV;;AAEA;AACN,iBAAKwc,aAAL,GAAqB,IAAIC,uBAAJ,CAAkBF,GAAlB,CAArB;;AAEA;AACM,iBAAKG,IAAL,GAAY,IAAIC,cAAJ,CAASJ,GAAT,CAAZ;AACH;;;;;;AAILD,GAAGK,IAAH,GAAUA,cAAV;AACAL,GAAGG,aAAH,GAAmBA,uBAAnB;;kBAEeH,E;;;;;;;;;;;;;;;AC9Cf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA;;;;;;AAMA;;;;;;;AAOA,IAAMM,eAAe,QAArB;;AAEA,IAAMC,oBAAoBrS,OAAO,OAAP,CAA1B;;AAEA;AACA,IAAIsS,SAAS,IAAIzV,GAAJ,EAAb;;AAEA,IAAI0V,UAAU,IAAIre,MAAMse,IAAV,EAAd;AACA,IAAIC,UAAU,IAAIve,MAAMqW,OAAV,EAAd;;AAEA,IAAM9O,UAAU;AACZiX,UAAM,MADM;AAEZC,YAAQ,QAFI;AAGZC,cAAU,UAHE;AAIZC,cAAU;AAJE,CAAhB;;AAOA;AACA,IAAMlK,gBAAgB;AAClBmK,mBAAe;AADG,CAAtB;;IAIMC,a;;;AACF;;;AAGA,2BAAY/c,MAAZ,EAAmB;AAAA;;AAAA;;AAGf,cAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,cAAKzB,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;AACA,cAAKC,aAAL,GAAqB,IAAI/e,MAAM8e,QAAV,EAArB;AACA,cAAK9L,IAAL,CAAU7Q,GAAV,CAAc,MAAK4c,aAAnB;;AAEA;;;AAGA,cAAKC,kBAAL,GAA0B,IAAIrW,GAAJ,EAA1B;;AAEA,YAAI4O,QAAQ,MAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA;AACA;AACA,YAAI0H,WAAW,EAACC,SAAS,IAAIlf,MAAMqW,OAAV,CAAkB,KAAKkB,KAAvB,EAA8B,CAAC,MAAKzV,MAAL,CAAY8c,aAAZ,GAA4BrH,KAA5B,GAAoC,CAArC,IAA0CA,KAAxE,EAA+E,KAAKA,KAApF,CAAV,EAAsG4H,UAAUvW,gBAAMwW,cAAN,CAAqB,YAArB,EAAmCC,KAAnC,CAAyC,QAAzC,CAAhH,EAAf;AACA,cAAKC,aAAL,GAAqB,IAAIC,uBAAJ,CAAkB,MAAKR,aAAvB,EAAsCE,QAAtC,CAArB;AACA,cAAKjM,IAAL,CAAU7Q,GAAV,CAAc,MAAKmd,aAAL,CAAmBtM,IAAjC;;AAEA;AACA,cAAKwM,iBAAL,GAAyB,EAAzB;AACA,cAAKC,YAAL,GAAoB,IAAIC,sBAAJ,CAAiB,MAAKF,iBAAtB,EAAyC,MAAKG,UAAL,CAAgB7M,IAAhB,OAAzC;AAChB;AACA,kBAAS4C,IAAT,EAAc;AACV,mBAAOA,KAAK1C,IAAZ;AACH,SAJe,EAKhB,KALgB,EAMhB,IANgB,CAApB;;AAQA,cAAK4M,OAAL,GAAe,IAAIC,iBAAJ,CAAY,EAAC9f,OAAO,QAAR,EAAkByJ,SAAS,CAA3B,EAA8BsW,cAAc,MAAKhe,MAAL,CAAY8c,aAAZ,GAA4BrH,KAAxE,EAAZ,CAAf;AACA,cAAKvE,IAAL,CAAU7Q,GAAV,CAAc,MAAKyd,OAAL,CAAa5M,IAA3B;AAjCe;AAkClB;;AAED;;;;;;;4BAGIyC,K,EAAM;AACN,gBAAI8B,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA,gBAAIwI,0BAAJ;AACA,oBAAOtK,MAAM3O,KAAN,CAAY/C,IAAnB;AACI,qBAAK,UAAL;AAAiB;AACbgc,4CAAoB,IAAIC,sBAAJ,CAAiBvK,MAAM3O,KAAvB,CAApB;;AAEA,4BAAImZ,eAAe,EAAE3U,OAAO,KAAKiM,KAAd,EAAqBhM,QAAQ,KAAKgM,KAAlC,EAAnB;;AAEA,4BAAMhM,SAAS,EAAf;AACA,4BAAID,QAAQjP,KAAK6jB,KAAL,CAAYD,aAAa3U,KAAb,GAAqB2U,aAAa1U,MAAlC,GAA2CA,MAAvD,CAAZ;AACA;AACA,4BAAI4U,YAAY,EAAEC,MAAM,iBAAR,EAA2BC,WAAW,cAAtC,EAAsDC,WAAW,oBAAjE;AACZC,uCAAW,MADC,EACOC,aAAa,EADpB,EACwBlV,OAAOA,KAD/B,EACsCC,QAAQA;AAD9C,yBAAhB;;AAIA,4BAAIkV,YAAY,IAAIC,uBAAJ,CAAkBP,SAAlB,CAAhB;AACAM,kCAAUzN,IAAV,CAAe2N,OAAf,CAAwB,KAAKtkB,KAAKC,EAAV,GAAe,GAAvC;AACAmkB,kCAAUzN,IAAV,CAAe4N,OAAf,CAAwB,CAAC,EAAD,GAAMvkB,KAAKC,EAAX,GAAgB,GAAxC;AACAmkB,kCAAUzN,IAAV,CAAe6N,KAAf,CAAqBliB,CAArB,GAAyBshB,aAAa1U,MAAtC;AACAkV,kCAAUzN,IAAV,CAAe6N,KAAf,CAAqBniB,CAArB,GAAyBuhB,aAAa3U,KAAtC;AACA;AACA,4BAAIoG,WAAW+D,MAAM3O,KAArB;AACA2Z,kCAAUzN,IAAV,CAAe5H,QAAf,CAAwBhL,CAAxB,GAA4B6f,aAAa3U,KAAb,GAAqB,CAAjD;AACA,6BAAK0H,IAAL,CAAU7Q,GAAV,CAAcse,UAAUzN,IAAxB;;AAEAyN,kCAAUK,UAAV,CAAqBpP,SAASzL,QAA9B;;AAEAmY,+BAAO/d,GAAP,CAAW0f,iBAAX,EAA8BU,SAA9B;;AAEA;AACH;;AAED;AACIV,wCAAoBgB,oBAAUC,KAAV,CAAgBvL,MAAM3O,KAAtB,CAApB;AACAvC,qCAAOY,IAAP,CAAY,2CAAZ,EAAyDsQ,KAAzD;AACA;AAjCR;;AAoCA,iBAAKuJ,kBAAL,CAAwB3e,GAAxB,CAA4BoV,KAA5B,EAAmCsK,iBAAnC;AACA,iBAAKhB,aAAL,CAAmB5c,GAAnB,CAAuB4d,kBAAkB/M,IAAzC;;AAEA,iBAAKwM,iBAAL,CAAuBtd,IAAvB,CAA4B6d,iBAA5B;AACA,iBAAKN,YAAL,CAAkBwB,WAAlB,CAA8B,KAAKzB,iBAAnC;;AAEA,iBAAK0B,IAAL;AACA,iBAAK5B,aAAL,CAAmBlQ,MAAnB;AACH;;AAED;;;;;;+BAGOqG,K,EAAM;AACT,gBAAIsK,oBAAoB,KAAKf,kBAAL,CAAwB3d,GAAxB,CAA4BoU,KAA5B,CAAxB;AACAsK,8BAAkBoB,YAAlB;;AAEA,iBAAKD,IAAL;AACA,iBAAK5B,aAAL,CAAmBlQ,MAAnB;;AAEA,gBAAG,KAAK+O,iBAAL,MAA4B1I,MAAM3O,KAAN,CAAYyD,GAA3C,EAAgD,KAAK6W,UAAL,CAAgBrB,iBAAhB;AACnD;;AAED;;;;;;+BAGOtK,K,EAAM;AACT,gBAAIsK,oBAAoB,KAAKf,kBAAL,CAAwB3d,GAAxB,CAA4BoU,KAA5B,CAAxB;AACA,gBAAGsK,iBAAH,EAAqB;;AAEjB,oBAAIsB,oBAAoB,KAAK7B,iBAAL,CAAuBvc,OAAvB,CAA+B8c,iBAA/B,CAAxB;AACA,oBAAGsB,sBAAsB,CAAC,CAA1B,EAA6B,KAAK7B,iBAAL,CAAuBtc,MAAvB,CAA8Bme,iBAA9B,EAAiD,CAAjD;AAC7B,qBAAK5B,YAAL,CAAkBwB,WAAlB,CAA8B,KAAKzB,iBAAnC;;AAEA,qBAAKR,kBAAL,CAAwBsC,MAAxB,CAA+B7L,KAA/B;AACA,qBAAKsJ,aAAL,CAAmBhN,MAAnB,CAA0BgO,kBAAkB/M,IAA5C;;AAEA,oBAAG,KAAKmL,iBAAL,MAA4B1I,MAAM3O,KAAN,CAAYyD,GAA3C,EAAgD,KAAKqV,OAAL,CAAa2B,GAAb,GAAmB,KAAnB;;AAEhD,qBAAKL,IAAL;AACH;AACJ;;AAED;;;;;;;;mCAKWM,S,EAAWC,Y,EAAa;AAC/B,iBAAK7N,QAAL,CAAcrM,QAAQoX,QAAtB,EAAgC6C,UAAU1a,KAA1C;AACH;;AAED;;;;+BACO4a,Q,EAAS;;AAEZ,iBAAKvD,iBAAL,IAA0BuD,QAA1B;;AAEA,gBAAG,CAACA,QAAJ,EAAa;AACT,qBAAK9B,OAAL,CAAa2B,GAAb,GAAmB,KAAnB;AACA,qBAAK3N,QAAL,CAAcrM,QAAQmX,QAAtB;AACH,aAHD,MAII;AACA,oBAAI8C,YAAY,KAAKG,WAAL,CAAiBD,QAAjB,CAAhB;AACA,qBAAKN,UAAL,CAAgBI,SAAhB;AACA,qBAAK5N,QAAL,CAAcrM,QAAQkX,MAAtB,EAA8B+C,UAAU1a,KAAxC;AACH;AACJ;;AAED;;;;mCACWxJ,M,EAAO;AACd,iBAAKsiB,OAAL,CAAa2B,GAAb,GAAmBjkB,kBAAkB0iB,sBAAlB,GAAiC1iB,OAAO2L,IAAxC,GAA+C3L,OAAO0V,IAAzE;AACH;;AAED;;;;;;;oCAIY/N,E,EAAG;AACX,gBAAIwQ,KAAJ;AACA,gBAAGxQ,cAAc2c,oBAAjB,EAA4B;AACxBnM,wBAAQxQ,EAAR;AACH,aAFD,MAGK,IAAGA,cAAcoC,oBAAjB,EAA4B;AAAA;AAAA;AAAA;;AAAA;AAC7B,yCAAsB,KAAK2X,kBAAL,CAAwBvhB,IAAxB,EAAtB,8HAAqD;AAAA,4BAA7CokB,UAA6C;;AACjD,4BAAGA,WAAW/a,KAAX,KAAqB7B,EAAxB,EAA4BwQ,QAAQoM,UAAR;AAC/B;AAH4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhC,aAJI,MAKD;AAAA;AAAA;AAAA;;AAAA;AACA,0CAAsB,KAAK7C,kBAAL,CAAwBvhB,IAAxB,EAAtB,mIAAqD;AAAA,4BAA7CokB,UAA6C;;AACjD,4BAAGA,WAAW/a,KAAX,CAAiByD,GAAjB,KAAyBtF,EAA5B,EAAgCwQ,QAAQoM,UAAR;AACnC;AAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIH;;AAED,mBAAO,KAAK7C,kBAAL,CAAwB3d,GAAxB,CAA4BoU,KAA5B,CAAP;AACH;;AAED;;;;;;;;oCAKY+L,S,EAAWlgB,K,EAAOwgB,S,EAAU;AACpC,gBAAIC,gBAAgB3D,OAAO/c,GAAP,CAAWmgB,SAAX,CAApB;AACA,gBAAGO,aAAH,EAAiB;AACb,oBAAGD,SAAH,EAAcC,cAAcjgB,MAAd,CAAqBwe,SAArB,GAAiCwB,SAAjC;AACdC,8BAAcjB,UAAd,CAAyBxf,KAAzB;AACH;AACJ;;AAED;;;;;;;+BAIM;;AAEF,iBAAK0gB,aAAL;;AAEA,gBAAIzK,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA,iBAAKvE,IAAL,CAAUiP,iBAAV,CAA4B,IAA5B;AACA,gBAAMC,eAAe,IAAIliB,MAAMmiB,OAAV,GAAoBC,UAApB,CAA+B,KAAKrD,aAAL,CAAmBsD,WAAlD,CAArB;AACA,gBAAMnD,UAAU,IAAI3H,KAApB;AAAA,gBACIzG,QAAQ,CADZ;;AAGA,gBAAI7R,IAAI,CAAR;AAAA,gBACIqjB,SAAS,CADb;;AAGA;;;AAGA,gBAAI1f,SAAS,EAACyJ,KAAKyE,KAAN,EAAaxE,KAAKwE,KAAlB,EAAyByR,SAAS,CAAlC,EAAb;;AAEA,gBAAI/gB,OAAO,KAAKwd,kBAAL,CAAwBxJ,MAAxB,EAAX;AAAA,gBACIgM,SADJ;AAEA,mBAAO,CAAEA,YAAYhgB,KAAKghB,IAAL,EAAd,EAA4BC,IAA5B,KAAqC,KAA5C,EAAmD;;AAE/CjB,0BAAUlgB,KAAV,CAAgB8J,QAAhB,CAAyB/K,GAAzB,CAA6ByQ,KAA7B,EAAoC,CAApC,EAAuC,CAAvC;;AAEAuN,wBAAQqE,aAAR,CAAsBlB,UAAUlgB,KAAV,CAAgB0R,IAAtC;AACAqL,wBAAQsE,YAAR,CAAqBT,YAArB;;AAEA7D,wBAAQuE,OAAR,CAAgBrE,OAAhB;AACA,oBAAIsE,WAAWtE,QAAQ7f,CAAR,GAAY,CAA3B;AACA,oBAAGO,IAAI,CAAP,EACIqjB,UAAUO,QAAV;;AAEJrB,0BAAUlgB,KAAV,CAAgB8J,QAAhB,CAAyB/K,GAAzB,CAA6ByQ,QAAQwR,MAArC,EAA6C/D,QAAQ5f,CAAR,GAAY,CAAZ,GAAgBugB,OAA7D,EAAsE,CAACX,QAAQne,CAAT,GAAa,CAAnF;;AAEA,oBAAIqgB,YAAYrC,OAAO/c,GAAP,CAAWmgB,UAAUlgB,KAArB,CAAhB;AACAmf,0BAAUzN,IAAV,CAAe5H,QAAf,CAAwB1M,CAAxB,GAA4B8iB,UAAUlgB,KAAV,CAAgB8J,QAAhB,CAAyB1M,CAArD;AACA+hB,0BAAUzN,IAAV,CAAe5H,QAAf,CAAwBzM,CAAxB,GAA4BugB,UAAU,IAAI3H,KAA1C;;AAEA+K,0BAAUO,WAAW3D,OAArB;;AAEAjgB;AACH;;AAED2D,mBAAOyJ,GAAP,GAAayE,KAAb;AACAlO,mBAAO0J,GAAP,GAAagW,MAAb;AACA1f,mBAAO2f,OAAP,GAAiBtjB,CAAjB;AACA,iBAAK2U,QAAL,CAAcrM,QAAQiX,IAAtB,EAA4B5b,MAA5B;AACH;;;wCAEc;AACX;;;;;AAKA,qBAAS4b,IAAT,CAAclf,CAAd,EAAiBE,CAAjB,EAAmB;AACf,uBAAO,CAACF,EAAE,CAAF,EAAKwH,KAAL,CAAWhB,UAAX,CAAsBgd,OAAtB,CAA8BtjB,EAAE,CAAF,EAAKsH,KAAL,CAAWhB,UAAzC,CAAR;AACH;;AAED,gBAAItE,oCAAW,KAAKwd,kBAAL,CAAwB1J,OAAxB,EAAX,EAAJ;AACA9T,iBAAKgd,IAAL,CAAUA,IAAV;AACA,iBAAKQ,kBAAL,GAA0B,IAAIrW,GAAJ,CAAQnH,IAAR,CAA1B;AACA;AACH;;;4BAEmB;AAChB,mBAAO+F,OAAP;AACH;;;;EAxQuBD,kB;;kBA2QbuX,a;;;;;;;;;;;;;;;AC5Tf;;;;AACA;;;;AACA;;;;;;;;AAEA;;;;;;AAMA,IAAMkE,gBAAgB,IAAI/iB,MAAMgjB,oBAAV,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,CAAtB;AACA,IAAMC,gBAAgB,IAAIra,gBAAMd,uBAAV,CAAkC,EAAC/H,OAAO,QAAR,EAAkB0J,aAAa,IAA/B,EAAqCD,SAAS,EAA9C,EAAlC,CAAtB;;AAEA,IAAM0Z,SAASpX,OAAO,OAAP,CAAf;AACA,IAAMqX,SAASrX,OAAO,OAAP,CAAf;;IAEMiV,S;AACF;;;AAGA,uBAAYja,KAAZ,EAAkB;AAAA;;AAEd,aAAKoc,MAAL,IAAepc,KAAf;;AAEA;AACA,aAAKmC,IAAL;;AAEA,aAAK+J,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;;AAEA,aAAKqE,MAAL,IAAe,CAAf;AACH;;AAED;;;;;uCAqBc,CAEb;;AAED;;;;iCACS7hB,K,EAAOQ,M,EAAO;AACnB,gBAAMyJ,SAAS,EAAf;AACA,gBAAID,QAAQjP,KAAK6jB,KAAL,CAAYpe,OAAOwJ,KAAP,GAAexJ,OAAOyJ,MAAtB,GAA+BA,MAA3C,CAAZ;AACA,gBAAG,KAAKkV,SAAL,KAAmBjjB,SAAtB,EAAgC;AAC5B;AACA,oBAAI2iB,YAAY,EAAEC,MAAM,iBAAR,EAA2BC,WAAW,cAAtC,EAAsDC,WAAW,oBAAjE;AACZC,+BAAW,OADC,EACQC,aAAa,EADrB,EACyBlV,OAAOA,KADhC,EACuCC,QAAQA;AAD/C,iBAAhB;AAGA,oBAAI6X,WAAW,EAAf;;AAEA,qBAAK3C,SAAL,GAAiB,IAAIC,uBAAJ,CAAkBP,SAAlB,CAAjB;AACA,qBAAKM,SAAL,CAAezN,IAAf,CAAoB2N,OAApB,CAA6B,KAAKtkB,KAAKC,EAAV,GAAe,GAA5C;AACA,qBAAKmkB,SAAL,CAAezN,IAAf,CAAoB4N,OAApB,CAA6B,CAAC,EAAD,GAAMvkB,KAAKC,EAAX,GAAgB,GAA7C;AACA,qBAAK0W,IAAL,CAAU7Q,GAAV,CAAc,KAAKse,SAAL,CAAezN,IAA7B;AACH;;AAED,iBAAKyN,SAAL,CAAeK,UAAf,CAA0Bxf,KAA1B;AACH;;AAED;;;;;;4BA5CW;AAAE,mBAAO,KAAK4hB,MAAL,CAAP;AAAsB,S;0BACzB5hB,K,EAAM;AACZ,iBAAK4hB,MAAL,IAAe5hB,KAAf;AACH;;;4BAEa;AACV,mBAAO,KAAK0R,IAAL,CAAU5H,QAAjB;AACH,S;0BAEY9J,K,EAAM;AACf,iBAAK0R,IAAL,CAAU5H,QAAV,CAAmBwQ,IAAnB,CAAwBta,KAAxB;AACH;;AAED;;;;0BACUA,K,EAAM;AACZ,iBAAK6hB,MAAL,IAAe7hB,KAAf;AACH,S;4BAEU;AAAE,mBAAO,KAAK6hB,MAAL,CAAP;AAAsB;;;8BA6BtBrc,K,EAAM;AACf,gBAAI0a,YAAY,IAAIT,SAAJ,CAAcja,KAAd,CAAhB;AACA0a,sBAAUxO,IAAV,GAAiB,IAAIhT,MAAMkJ,IAAV,CAAe6Z,aAAf,EAA8BE,aAA9B,CAAjB;AACA,mBAAOzB,SAAP;AACH;;;;;;kBAIUT,S;;;;;;;;;;;;;;;;;;;ACvFf,IAAMhd,OAAO,YAAb;AACA,IAAMsf,QAAQvX,OAAO,MAAP,CAAd;;AAEA,IAAMpG,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMC,aAAa,QAAnB;;IAEMG,U;AACF;;;;;AAKA,wBAAYuF,KAAZ,EAAmBvM,MAAnB,EAA2BwM,MAA3B,EAAkC;AAAA;;AAC9B,YAAGD,UAAU9N,SAAb,EAAwB8N,QAAQ,CAAR;AACxB,YAAGvM,WAAWvB,SAAd,EAAyBuB,SAAS,CAAT;AACzB,YAAGwM,WAAW/N,SAAd,EAAyB+N,SAAS,CAAT;;AAEzB,aAAKE,GAAL,CAASH,KAAT,EAAgBvM,MAAhB,EAAwBwM,MAAxB;AACA,aAAK8X,KAAL,IAAc,IAAIrjB,MAAMqW,OAAV,EAAd;AACH;;AAED;;;;;;;;;4BAKI/K,K,EAAOvM,M,EAAQwM,M,EAAO;AACtB;AACA,iBAAKD,KAAL,GAAaA,KAAb;AACA;AACA,iBAAKvM,MAAL,GAAcA,MAAd;AACA;AACA,iBAAKwM,MAAL,GAAcA,MAAd;AACH;;AAED;;;;;;;;8BAaK;AACD,gBAAG,KAAKD,KAAL,GAAa,CAAhB,EAAmB,KAAKA,KAAL,GAAa,CAAC,KAAKA,KAAnB;AACnB,gBAAG,KAAKvM,MAAL,GAAc,CAAjB,EAAoB,KAAKA,MAAL,GAAc,CAAC,KAAKA,MAApB;AACpB,gBAAG,KAAKwM,MAAL,GAAc,CAAjB,EAAoB,KAAKA,MAAL,GAAc,CAAC,KAAKA,MAApB;AACpB,mBAAO,IAAP;AACH;;;gCAEOzF,U,EAAW;AACf,gBAAIhG,IAAI,KAAKqH,MAAL,GAAcrB,WAAWqB,MAAjC;AACA,gBAAGrH,IAAI,CAAC4F,OAAR,EAAiB,OAAO,CAAC,CAAR;AACjB,gBAAG5F,IAAI4F,OAAP,EAAgB,OAAO,CAAP;AAChB,mBAAO,CAAP;AACH;;;6BAEII,U,EAAW;AACZ,iBAAK2F,GAAL,CAAS3F,WAAWwF,KAApB,EAA2BxF,WAAW/G,MAAtC,EAA8C+G,WAAWyF,MAAzD;AACH;;;gCAEM;AACH,gBAAIzF,aAAa,IAAIC,UAAJ,CAAe,KAAKuF,KAApB,EAA2B,KAAKvM,MAAhC,EAAwC,KAAKwM,MAA7C,CAAjB;AACA,mBAAOzF,UAAP;AACH;;;mCAES;AACN,mBAAO,KAAKwF,KAAL,CAAW7K,OAAX,CAAmB,CAAnB,IAAwB,GAAxB,GAA8B,KAAK1B,MAAL,CAAY0B,OAAZ,CAAoB,CAApB,CAA9B,GAAuD,GAAvD,GAA6D,KAAK8K,MAAL,CAAY9K,OAAZ,CAAoB,CAApB,CAApE;AACH;;;iCAEO;AACJ,mBAAO;AACHsD,sBAAMA,IADH;AAEHuH,uBAAO,KAAKA,KAFT;AAGHvM,wBAAQ,KAAKA,MAHV;AAIHwM,wBAAQ,KAAKA;AAJV,aAAP;AAMH;;;4BA1CS;AACN,mBAAO,KAAK8X,KAAL,EAAYhjB,GAAZ,CAAgB,KAAKiL,KAArB,EAA4B,KAAKC,MAAjC,EAAyC,KAAKxM,MAA9C,CAAP;AACH;;;4BAEW;AACR,mBAAO,KAAKuM,KAAL,GAAa,KAAKC,MAAlB,GAA2B,KAAKxM,MAAvC;AACH;;;iCAsCe+G,U,EAAW;AACvB,mBAAOC,WAAWqB,MAAX,CAAkBtB,UAAlB,KACAA,WAAWwF,KAAX,GAAmB5F,OADnB,IAEAI,WAAW/G,MAAX,GAAoB2G,OAFpB,IAGAI,WAAWyF,MAAX,GAAoB7F,OAH3B;AAKH;;;iCAEe3D,I,EAAK;AACjB,gBAAGA,KAAKgC,IAAL,KAAcA,IAAjB,EAAuBe,QAAQxB,IAAR,CAAa,2BAA2BS,IAAxC;;AAEvB,gBAAI+B,aAAa,IAAIC,UAAJ,CAAehE,KAAKuJ,KAApB,EAA2BvJ,KAAKhD,MAAhC,EAAwCgD,KAAKwJ,MAA7C,CAAjB;AACA,mBAAOzF,UAAP;AACH;;;+BAEaA,U,EAAW;AACrB,mBAAOA,sBAAsBC,UAAtB,IACA,QAAOD,WAAWwF,KAAlB,MAA4B1F,UAD5B,IAEA,QAAOE,WAAW/G,MAAlB,MAA6B6G,UAF7B,IAGA,QAAOE,WAAWyF,MAAlB,MAA6B3F,UAHpC;AAKH;;;;;;kBAGUG,U;;;;;;;;;;;;;;;AC7Gf;;;;AACA;;;;;;;;IAGM6b,U;AACF;;;;AAIA,wBAAY9a,KAAZ,EAAkB;AAAA;;AACd,aAAKA,KAAL,GAAaA,KAAb;;AAEA;AACA,aAAKyb,OAAL,GAAe,EAAf;;AAEA,aAAKxY,QAAL,GAAgB,IAAIuZ,eAAJ,CAAU,IAAV,CAAhB;AACA,aAAKrd,QAAL,GAAgB,KAAKa,KAAL,CAAWb,QAA3B;AACH;;;;mCAmBS;AACN,gBAAIZ,SAAS,gBAAgB,KAAKY,QAArB,GAAgC,KAAhC,GAAwC,KAAKa,KAAL,CAAWxB,QAAX,EAAxC,GAAgE,GAA7E;;AAEA,mBAAOD,MAAP;AACH;;;4BArBa;AACV,mBAAO,KAAKkd,OAAL,CAAaxjB,MAApB;AACH,S;0BAEYuC,K,EAAM;AACf,gBAAIiiB,kBAAkB,KAAKhB,OAAL,CAAaxjB,MAAnC;AACA,gBAAGuC,QAAQiiB,eAAX,EAA2B;AACvB,qBAAKhB,OAAL,CAAaxjB,MAAb,GAAsBuC,KAAtB;AACA,qBAAKwF,KAAL,CAAWb,QAAX,GAAsB3E,KAAtB;AACH,aAHD,MAIK,IAAGA,QAAQiiB,eAAX,EAA2B;AAC5B,qBAAI,IAAItkB,IAAIskB,eAAZ,EAA6BtkB,IAAIqC,KAAjC,EAAwCrC,GAAxC,EAA4C;AACxC,yBAAKsjB,OAAL,CAAatjB,CAAb,IAAkB,KAAK8K,QAAL,CAAc7C,KAAd,EAAlB;AACH;AACJ;AACJ;;;;;;kBAUU0a,U;;;;;;;;;;;;;;;AC5Cf;;AACA;;;;;;;;AACA;;AAEA,IAAM1V,iBAAiBqC,iBAAOrC,cAA9B;;AAEA,IAAIiJ,UAAU3X,SAAd;AAAA,IACIgmB,UAAU,EADd;AAAA,IAEIC,cAAc,EAFlB;;IAIMxH,K;AACF;;;;AAIA,mBAAY3e,MAAZ,EAAoB2D,KAApB,EAA0B;AAAA;;AACtB,aAAK3D,MAAL,GAAcA,MAAd;AACA,aAAK2D,KAAL,GAAaA,KAAb;;AAEA,YAAIgP,QAAQ,IAAZ;;AAEA,aAAKV,GAAL,GAAW,IAAI,CAACpR,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAvD,CAA2D,EAAC6N,WAAW,KAAZ,EAA3D,CAAX;AACA,aAAKgU,SAAL,GAAiB,IAAIC,kBAAJ,CAAc,KAAK1iB,KAAnB,EAA0B,GAA1B,CAAjB;AACA,aAAKyiB,SAAL,CAAe9X,GAAf,CAAmB,KAAK2D,GAAL,CAAS9M,UAA5B;AACA,aAAKihB,SAAL,CAAeE,QAAf,CAAwBC,OAAxB,GAAkC,YAAU;AACxC5T,kBAAM6T,IAAN;AACH,SAFD;;AAIA,YAAIC,KAAKC,iBAAQpY,GAAR,CAAY,KAAK8X,SAAjB,CAAT;AACA,aAAKA,SAAL,CAAeI,IAAf;;AAEA,aAAKN,OAAL,GAAe,EAAf;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACH;;;;iCAEO;AACJ,iBAAKK,IAAL;AACA,iBAAKJ,SAAL,CAAeO,MAAf;AACA,iBAAK1U,GAAL,CAASxM,OAAT;AACA,iBAAKygB,OAAL,CAAazkB,MAAb,GAAsB,KAAK0kB,WAAL,CAAiB1kB,MAAjB,GAA0B,CAAhD;AACH;;;oCAEU;AACPkd,kBAAMiI,SAAN,CAAgB,KAAK3U,GAArB;AACH;;;+BAEK;AACF,iBAAK4U,OAAL,GAAe,KAAf;AACA,iBAAKT,SAAL,CAAeI,IAAf;AACA7H,kBAAMmI,UAAN,CAAiB5mB,SAAjB;AACH;;;+BAEK;AACF,gBAAG2X,YAAY3X,SAAf,EAAyB;AACrB,oBAAG2X,YAAY,IAAf,EAAqB;;AAErB,oBAAIkP,SAASlP,QAAQuO,SAAR,CAAkBY,WAAlB,EAAb;AACA,qBAAKZ,SAAL,CAAea,WAAf,CAA2BF,OAAO3lB,CAAlC,EAAqC2lB,OAAO1lB,CAA5C;;AAEAwW,wBAAQ2O,IAAR;AACH;AACD,iBAAKK,OAAL,GAAe,IAAf;AACA,iBAAKT,SAAL,CAAec,IAAf;AACAR,6BAAQS,QAAR,CAAiB,KAAKf,SAAL,CAAejhB,UAAhC,EAA4CiiB,gBAAOC,YAAnD;AACA1I,kBAAMmI,UAAN,CAAiB,IAAjB;;AAEA,iBAAKF,SAAL;AACH;;AAED;;;;;;;;;;;+BAQOU,U,EAAYtnB,M,EAAQgS,U,EAAYiB,a,EAAuB;AAAA;;AAC1D,iBAAKgN,MAAL,GAAc,IAAIhP,gBAAJ,CAAWjR,MAAX,CAAd;;AAD0D,8CAAL4G,IAAK;AAALA,oBAAK;AAAA;;AAE1D,4BAAKqZ,MAAL,EAAYsH,KAAZ,gBAAqB3gB,IAArB;AACA,iBAAKqZ,MAAL,CAAYuH,IAAZ,CAAiBxV,UAAjB,EAA6BsV,UAA7B,EAAyC,KAAKrV,GAA9C,EAAmD,EAACgB,eAAeA,aAAhB,EAA+BnC,MAAM,KAArC,EAAnD;AACA,mBAAO,KAAKmP,MAAL,CAAYhO,GAAnB;AACH;;AAED;;;;;;qCAGaqB,Q,EAAS;AAClBqL,kBAAMG,YAAN,CAAmBxL,QAAnB,EAA6B,IAA7B;AACH;;;;;AAMD;;;;qCAIoBA,Q,EAAUtT,M,EAAO;AACjCiR,6BAAO6N,YAAP,CAAoBxL,QAApB,EAA8BtT,OAAO2D,KAArC,EAA4C,YAAU;AAClD,oBAAG3D,OAAO6mB,OAAV,EAAkB;AACd7mB,2BAAOwmB,IAAP;AACH,iBAFD,MAGI;AACAxmB,2BAAOknB,IAAP;AACH;AACJ,aAPD;AAQH;;;mCAEiBrP,O,EAAQ;AACtB,gBAAI4P,MAAJ;AACA,gBAAG5P,YAAY3X,SAAf,EAAyB;AACrB,qBAAIunB,SAAS,CAAb,EAAgBA,SAAStB,YAAY1kB,MAArC,EAA6CgmB,QAA7C,EAAsD;AAClDtB,gCAAYsB,MAAZ,EAAoB5P,OAApB;AACH;AACD,qBAAI4P,SAAS,CAAb,EAAgBA,SAAS5P,QAAQsO,WAAR,CAAoB1kB,MAA7C,EAAqDgmB,QAArD,EAA8D;AAC1D5P,4BAAQsO,WAAR,CAAoBsB,MAApB;AACH;AACJ;;AAED5P,sBAAUA,OAAV;;AAEA,gBAAGA,YAAY3X,SAAf,EAAyB;AACrB,qBAAIunB,SAAS,CAAb,EAAgBA,SAASvB,QAAQzkB,MAAjC,EAAyCgmB,QAAzC,EAAkD;AAC9CvB,4BAAQuB,MAAR,EAAgB5P,OAAhB;AACH;AACD,qBAAI4P,SAAS,CAAb,EAAgBA,SAAS5P,QAAQqO,OAAR,CAAgBzkB,MAAzC,EAAiDgmB,QAAjD,EAA0D;AACtD5P,4BAAQqO,OAAR,CAAgBuB,MAAhB;AACH;AACJ;AACJ;;;kCAEgBxV,G,EAAI;AACjB,iBAAK,IAAItQ,CAAT,IAAcsQ,IAAIvN,aAAlB,EAAiC;AAC7BuN,oBAAIvN,aAAJ,CAAkB/C,CAAlB,EAAqB2C,aAArB;AACH;;AAED,gBAAIojB,UAAU9nB,OAAOsY,MAAP,CAAcjG,IAAItN,SAAlB,CAAd;AACA,iBAAIhD,IAAI,CAAR,EAAWA,IAAI+lB,QAAQjmB,MAAvB,EAA+BE,GAA/B,EAAmC;AAC/B,qBAAKilB,SAAL,CAAec,QAAQ/lB,CAAR,CAAf;AACH;AACJ;;;4BAnD0B;AACvB,mBAAOiN,cAAP;AACH;;;;;;kBAoDU+P,K;;;;;;;;;;;;;;;;;AChJf,IAAMgJ,SAAS;AACXC,WAAO,OADI;AAEXC,WAAO;AAFI,CAAf;;AAKA,IAAMC,QAAQ;AACVC,eAAW,WADD;AAEVC,YAAQ,QAFE;AAGVzE,WAAO;AAHG,CAAd;;AAMA;;;AAGA,IAAI0E,kBAAkB,EAAtB;;IAEMrJ,S;;AAEF;;;;AAIA,uBAAYzD,MAAZ,EAAoBhW,UAApB,EAA+B;AAAA;;AAC3B,aAAKgW,MAAL,GAAcA,MAAd;AACA,aAAKqE,OAAL,GAAe,IAAI9c,MAAMwlB,iBAAV,CAA4B,KAAK/M,MAAjC,EAAyChW,UAAzC,CAAf;AACA,aAAKqa,OAAL,CAAa2I,gBAAb,CAA8B,QAA9B,EAAwC,KAAKrW,MAAL,CAAY0D,IAAZ,CAAiB,IAAjB,CAAxC;;AAEA,aAAKgK,OAAL,CAAalT,QAAb,CAAsB,UAASC,KAAT,EAAe;AACjCA,kBAAM6b,WAAN,GAAoB,CAApB;AACH,SAFD;;AAIA,aAAKvB,OAAL,GAAe,KAAf;AACH;;;;+BAaM7mB,M,EAAO;AACV,iBAAKwf,OAAL,CAAa6I,MAAb,CAAoBroB,MAApB;AACH;;;iCAEO;AACJ,iBAAKwf,OAAL,CAAa8I,MAAb;AACH;;;+BAEMtoB,M,EAAO;AACV,gBAAG,KAAKwf,OAAL,CAAalgB,MAAhB,EAAuB;AACnB,qBAAKkgB,OAAL,CAAa8I,MAAb;AACH,aAFD,MAGI;AACA,qBAAK9I,OAAL,CAAa6I,MAAb,CAAoBroB,MAApB;AACH;AACJ;;;iCAEO;AACJ,iBAAKwf,OAAL,CAAaf,MAAb;AACH;;;4BA9BY;AACT,mBAAO,KAAKe,OAAL,CAAaqH,OAApB;AACH,S;0BAEW7iB,K,EAAM;AACd,iBAAKwb,OAAL,CAAaqH,OAAb,GAAuB7iB,KAAvB;AACA,gBAAGA,UAAU,KAAb,EAAmB;AACf,qBAAKukB,MAAL;AACH;AACJ;;;4BAuBU;AACP,mBAAO,KAAK/I,OAAL,CAAagJ,KAApB;AACH,S;0BAESxkB,K,EAAM;AACZ,iBAAKwb,OAAL,CAAagJ,KAAb,GAAqBxkB,KAArB;AACH;;AAED;;;;0BACSA,K,EAAM;AACX,iBAAKwb,OAAL,CAAaiJ,OAAb,CAAqBzkB,KAArB;AACH;;;;;AAUD;;;;;;kCAMiB2D,E,EAAIwT,M,EAAQhW,U,EAAW;AACpC,gBAAIqa,UAAU,IAAIZ,SAAJ,CAAczD,MAAd,EAAsBhW,UAAtB,CAAd;AACA8iB,4BAAgBtgB,EAAhB,IAAsB6X,OAAtB;AACA,mBAAOA,OAAP;AACH;;AAED;;;;;;gCAGe7X,E,EAAG;AACd,mBAAOsgB,gBAAgBtgB,EAAhB,CAAP;AACH;;;4BAzBkB;AACf,mBAAOggB,MAAP;AACH;;;4BAEiB;AACd,mBAAOG,KAAP;AACH;;;;;;kBAsBUlJ,S;;;;;;;;;;;;;;;AC5Gf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAM8J,aAAa,QAAnB;;AAEA,IAAMze,UAAU;AACZ0e,gBAAY,YADA;AAEZC,kBAAc,cAFF;AAGZC,mBAAe;AAHH,CAAhB;;IAMMvR,S;;;AACF,yBAAa;AAAA;;AAGT;AAHS;;AAIT,cAAKW,MAAL,GAAc,IAAI5M,GAAJ,EAAd;AAJS;AAKZ;;AAED;;;;;;;4BAGI7B,K,EAAM;AACN,gBAAI2O,QAAQ,IAAImM,oBAAJ,CAAe9a,KAAf,CAAZ;;AAEA,iBAAKyO,MAAL,CAAYlV,GAAZ,CAAgByG,MAAMyD,GAAtB,EAA2BkL,KAA3B;AACA,iBAAK7B,QAAL,CAAcrM,QAAQ0e,UAAtB,EAAkCxQ,KAAlC;AACH;;AAED;;;;;;+BAGO3O,K,EAAM;AACT,gBAAI2O,QAAQ,KAAKF,MAAL,CAAYlU,GAAZ,CAAgByF,MAAMyD,GAAtB,CAAZ;AACA,iBAAKqJ,QAAL,CAAcrM,QAAQ4e,aAAtB,EAAqC1Q,KAArC;AACH;;AAED;;;;;;+BAGOlL,G,EAAI;AACP,gBAAIkL,QAAQ,KAAKF,MAAL,CAAYlU,GAAZ,CAAgBkJ,GAAhB,CAAZ;AACA,gBAAGkL,KAAH,EAAS;AACL,qBAAKF,MAAL,CAAY+L,MAAZ,CAAmB/W,GAAnB;AACA,qBAAKqJ,QAAL,CAAcrM,QAAQ2e,YAAtB,EAAoCzQ,KAApC;AACH;AACJ;;AAED;;;;iCACSiM,Q,EAAS;AACd,gBAAG,KAAKnM,MAAL,CAAY5E,GAAZ,CAAgB+Q,QAAhB,CAAH,EAA8B,OAAO,KAAKnM,MAAL,CAAYlU,GAAZ,CAAgBqgB,QAAhB,EAA0B5a,KAAjC;AACjC;;;4BAEU;AACP,mBAAO,KAAKyO,MAAL,CAAY6Q,IAAZ,GAAmB,CAA1B;AACH;;;4BAEmB;AAChB,mBAAO7e,OAAP;AACH;;;;EAhDmBD,kB;;kBAmDTsN,S;;;;;;;;;;;;;;;AChEf;;;;AACA;;;;;;;;;;;;AAEA,IAAMrN,UAAU;AACZ8e,oBAAgB;AADJ,CAAhB;;AAIA,IAAMC,gBAAgBxa,OAAO,cAAP,CAAtB;;IAEM6I,Y;;;AACF,4BAAa;AAAA;;AAAA;;AAGT,cAAK2R,aAAL,IAAsB,CAAC,CAAvB;;AAEA;;;AAGA,cAAKC,UAAL,GAAkB,EAAlB;AARS;AASZ;;AAED;;;;;qCACa/a,S,EAAU;AACnB,iBAAK+a,UAAL,CAAgBrkB,IAAhB,CAAqBsJ,SAArB;AACA,iBAAK8a,aAAL;;AAEA,iBAAK1S,QAAL,CAAcrM,QAAQ8e,cAAtB,EAAsC7a,SAAtC;AACH;;AAED;;;;4BACa;AACT,gBAAIgb,eAAe,KAAKF,aAAL,CAAnB;AACA,gBAAGE,iBAAiB,CAAC,CAArB,EAAuB;AACnB,uBAAO,KAAKD,UAAL,CAAgBC,YAAhB,CAAP;AACH;AACJ;;;4BAEU;AACP,mBAAO,KAAKF,aAAL,MAAwB,CAAC,CAAhC;AACH;;;4BAEmB;AAChB,mBAAO/e,OAAP;AACH;;;;EAlCsBD,kB;;kBAqCZqN,Y;;;;;;;;;;;;;;;;;;;AC7Cf,IAAM8R,eAAe,QAArB;;AAEA,IAAMC,aAAa5a,OAAO,WAAP,CAAnB;AACA,IAAM6a,qBAAqB7a,OAAO,mBAAP,CAA3B;;AAEA,IAAM8a,eAAe,CAAE,KAAF,EAAS,KAAT,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,KAArC,CAArB;AACA,IAAI9gB,aAAa,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAjB;;IAEMoP,I;AACF;;;;;;;;;AASA,kBAAYjQ,EAAZ,EAAgBqG,KAAhB,EAAuBC,MAAvB,EAA+BxM,MAA/B,EAAuCiH,MAAvC,EAA+CC,QAA/C,EAAyD4gB,iBAAzD,EAA2E;AAAA;;AACvE,aAAK5hB,EAAL,GAAUA,EAAV;AACA,aAAKqG,KAAL,GAAaA,KAAb;AACA,aAAKC,MAAL,GAAcA,MAAd;AACA,aAAKxM,MAAL,GAAcA,MAAd;AACA,aAAKiH,MAAL,GAAcA,MAAd;AACA;AACA,aAAKmB,MAAL,GAAcmE,QAAQC,MAAR,GAAiBxM,MAA/B;AACA,aAAKkH,QAAL,GAAgBA,QAAhB;;AAEA,aAAK4gB,iBAAL,GAAyBA,iBAAzB;AACH;;AAED;;;;;;;AAqCA;8CACsB5S,W,EAAY;AAC9B,oBAAOA,WAAP;AACI,qBAAK,CAAL;AAAQ,2BAAO,KAAK6S,GAAZ;AACR,qBAAK,CAAL;AAAQ,2BAAO,KAAKC,GAAZ;AACR,qBAAK,CAAL;AAAQ,2BAAO,KAAKC,GAAZ;AACR,qBAAK,CAAL;AAAQ,2BAAO,KAAKC,GAAZ;AACR,qBAAK,CAAL;AAAQ,2BAAO,KAAKC,GAAZ;AACR,qBAAK,CAAL;AAAQ,2BAAO,KAAKC,GAAZ;AANZ;AAQH;;AAED;;;;4BAhDuB;AAAE,mBAAO,KAAKR,kBAAL,CAAP;AAAkC,S;0BACrCrlB,K,EAAM;AACxB,gBAAGA,UAAU9D,SAAb,EAAwB8D,QAAQslB,YAAR;;AAExB,gBAAIC,oBAAoB,EAAxB;AACA,iBAAI,IAAI5nB,IAAI,CAAZ,EAAeA,IAAIqC,MAAMvC,MAAzB,EAAiCE,GAAjC,EAAqC;AACjC,oBAAImoB,KAAK9lB,MAAMrC,CAAN,CAAT;AACA,oBAAIgV,cAAe,QAAOmT,EAAP,yCAAOA,EAAP,OAAcX,YAAf,GAA+BW,EAA/B,GAAoCR,aAAa3jB,OAAb,CAAqBmkB,GAAGC,WAAH,EAArB,CAAtD;AACA,oBAAGpT,gBAAgB,CAAC,CAApB,EAAuB4S,kBAAkB3kB,IAAlB,CAAuB+R,WAAvB;AAC1B;;AAED,iBAAK0S,kBAAL,IAA2BE,iBAA3B;AACA,iBAAKH,UAAL,IAAmBlpB,SAAnB;AACH;;;4BAEQ;AAAEsI,uBAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4BxF,WAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6BzF,WAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B,OAAO+G,UAAP;AAAoB;;;4BAC5G;AAAEA,uBAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B+G,WAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6BzF,WAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4B,OAAOxF,UAAP;AAAoB;;;4BAC5G;AAAEA,uBAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6BzF,WAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4BxF,WAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B,OAAO+G,UAAP;AAAoB;;;4BAC5G;AAAEA,uBAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6BzF,WAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B+G,WAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4B,OAAOxF,UAAP;AAAoB;;;4BAC5G;AAAEA,uBAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B+G,WAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4BxF,WAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6B,OAAOzF,UAAP;AAAoB;;;4BAC5G;AAAEA,uBAAW,CAAX,IAAgB,KAAKwF,KAArB,CAA4BxF,WAAW,CAAX,IAAgB,KAAK/G,MAArB,CAA6B+G,WAAW,CAAX,IAAgB,KAAKyF,MAArB,CAA6B,OAAOzF,UAAP;AAAoB;;AAErH;;;;4BACe;AACX,gBAAG,KAAK4gB,UAAL,MAAqBlpB,SAAxB,EAAkC;AAC9B,oBAAI8pB,YAAY,CAAhB;AACA,qBAAI,IAAIroB,IAAI,CAAZ,EAAeA,IAAI,KAAK4nB,iBAAL,CAAuB9nB,MAA1C,EAAkDE,GAAlD,EAAsD;AAClD,wBAAI6G,cAAa,KAAKyhB,qBAAL,CAA2B,KAAKV,iBAAL,CAAuB5nB,CAAvB,CAA3B,CAAjB;AACA,wBAAG6G,YAAW,CAAX,IAAgBwhB,SAAnB,EAA8BA,YAAYxhB,YAAW,CAAX,CAAZ;AACjC;AACD,qBAAK4gB,UAAL,IAAmBY,SAAnB;AACH;;AAED,mBAAO,KAAKZ,UAAL,CAAP;AACH;;;2CAeyBzS,W,EAAY;AAClC,mBAAO2S,aAAa3S,WAAb,CAAP;AACH;;AAED;;;;;;;mCAIkB3U,C,EAAGE,C,EAAE;AACnB,gBAAGF,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAC,CAAR;AACxB,gBAAG7H,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAP;AACxB,mBAAO,CAAP;AACH;;AAED;;;;;;;mCAIkB7H,C,EAAGE,C,EAAE;AACnB,gBAAGF,EAAEgoB,SAAF,GAAc9nB,EAAE8nB,SAAnB,EAA8B,OAAO,CAAC,CAAR;AAC9B,gBAAGhoB,EAAEgoB,SAAF,GAAc9nB,EAAE8nB,SAAnB,EAA8B,OAAO,CAAP;AAC9B,gBAAGhoB,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAC,CAAR;AACxB,gBAAG7H,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAP;AACxB,mBAAO,CAAP;AACH;;;;;;IAGCiD,S;AACF;;;;;;;AAOA,mBAAYnF,EAAZ,EAAgBqG,KAAhB,EAAuBC,MAAvB,EAA+BxM,MAA/B,EAAuCqW,cAAvC,EAAsD;AAAA;;AAClD,SAAKnQ,EAAL,GAAUA,EAAV;AACA,SAAKqG,KAAL,GAAaA,KAAb;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKxM,MAAL,GAAcA,MAAd;AACA,SAAKqW,cAAL,GAAsBA,cAAtB;AACH,C;;QAIDF,I,GAAAA,I;QACA9K,S,GAAAA,S;;;;;;;;;;;;;;;;;AChIJ;;;;;;;;;IASMod,e;AACF;;;;;;AAMA,6BAAYjiB,MAAZ,EAAoBkiB,QAApB,EAA8BroB,QAA9B,EAAuC;AAAA;;AACnC,aAAKmG,MAAL,GAAcA,WAAW/H,SAAX,GAAuB,KAAvB,GAA+B+H,MAA7C;AACA,aAAKkiB,QAAL,GAAgBA,aAAajqB,SAAb,GAAyB,IAAI,EAA7B,GAAkCiqB,QAAlD;AACA,aAAKroB,QAAL,GAAgBA,QAAhB;AACA,aAAKsoB,cAAL,GAAsB,CAAtB;AACH;;AAED;;;;;;;+BAGO/jB,G,EAAI;AACP,iBAAK+jB,cAAL,GAAsB/jB,GAAtB;AACA,iBAAKvE,QAAL,CAAcuE,GAAd;AACH;;;;;;kBAGU6jB,e;;;;;;;;;;;;;;;;;AC/Bf;;;;;;;;AAQC;;;;;;;IAOK9H,Y;;AAEF;;;;;;;;AAQA,0BAAarK,KAAb,EAAoBjW,QAApB,EAA8BuoB,eAA9B,EAA+CC,cAA/C,EAA+DC,SAA/D,EAAyE;AAAA;;AACrE;;;AAGA,aAAKC,OAAL,GAAe,IAAf;;AAEA,aAAKzS,KAAL,GAAaA,KAAb;AACA,aAAKjW,QAAL,GAAgBA,QAAhB;AACA,aAAKwoB,cAAL,GAAsBA,mBAAmBpqB,SAAnB,GAA+BoqB,cAA/B,GAAgD,KAAtE;AACA,aAAKC,SAAL,GAAiBA,cAAcrqB,SAAd,GAA0BqqB,SAA1B,GAAsC,KAAvD;;AAEA,YAAGF,oBAAoBnqB,SAAvB,EAAiC;AAC7B,iBAAKuqB,YAAL,GAAoB,KAAK1S,KAAzB;AACH,SAFD,MAGI;AACA,iBAAK0S,YAAL,GAAoB,EAApB;AACA,iBAAKJ,eAAL,GAAuBA,eAAvB;AACA,iBAAKK,eAAL,CAAqB,KAAKL,eAA1B;AACH;AACJ;;;;wCAEeA,e,EAAgB;AAC5B,iBAAI,IAAIM,QAAQ,CAAhB,EAAmBA,QAAQ,KAAK5S,KAAL,CAAWtW,MAAtC,EAA8CkpB,OAA9C,EAAsD;AAClD,oBAAIC,QAAQP,gBAAgB,KAAKtS,KAAL,CAAW4S,KAAX,CAAhB,CAAZ;AACA,oBAAGC,UAAU1qB,SAAb,EAAuB;AACnB,yBAAKuqB,YAAL,CAAkB7lB,IAAlB,CAAuBgmB,KAAvB;AACH,iBAFD,MAGI;AACA,yBAAK7S,KAAL,CAAWnS,MAAX,CAAkB+kB,KAAlB,EAAyB,CAAzB;AACAE,wBAAIjjB,GAAJ,CAAQ,2DAAR;AACH;AACJ;AACJ;;;oCAEWmQ,K,EAAOsS,e,EAAgB;AAC/B,iBAAKtS,KAAL,GAAaA,KAAb;AACA,gBAAGsS,oBAAoBnqB,SAAvB,EAAkCmqB,kBAAkB,KAAKA,eAAvB;;AAElC,gBAAGA,oBAAoBnqB,SAAvB,EAAiC;AAC7B,qBAAKuqB,YAAL,GAAoB,KAAK1S,KAAzB;AACH,aAFD,MAGI;AACA,qBAAK0S,YAAL,CAAkBhpB,MAAlB,GAA2B,CAA3B;AACA,qBAAK4oB,eAAL,GAAuBA,eAAvB;AACA,qBAAKK,eAAL,CAAqB,KAAKL,eAA1B;AACH;AACJ;;;6CAEmB;AAChB,iBAAKI,YAAL,CAAkBhpB,MAAlB,GAA2B,CAA3B;AACA,iBAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAI,KAAKoW,KAAL,CAAWtW,MAA9B,EAAsCE,GAAtC,EAA0C;AACtC,oBAAImpB,cAAc,KAAKT,eAAL,CAAqB,KAAKtS,KAAL,CAAWpW,CAAX,CAArB,CAAlB;AACA,oBAAGmpB,WAAH,EAAgB,KAAKL,YAAL,CAAkB7lB,IAAlB,CAAuBkmB,WAAvB;AACnB;AACJ;;;gCAEOC,S,EAAU;AACd,gBAAG,KAAKP,OAAL,KAAiB,KAApB,EAA2B;;AAG3B,gBAAG,KAAKF,cAAR,EAAuB;AACnBU;AACH;;AAED,gBAAIP,eAAe,KAAKA,YAAxB;;AAEA;AACA,gBAAIQ,aAAaF,UAAUG,gBAAV,CAA2BT,YAA3B,EAAyC,KAAKF,SAA9C,CAAjB;AACA,gBAAIU,WAAWxpB,MAAX,GAAoB,CAAxB,EAA2B;AACvB,oBAAG,KAAK4oB,eAAR,EAAwB;AACpB,wBAAIc,mBAAmB,KAAKC,gBAAL,CAAsBH,WAAW,CAAX,EAAc3rB,MAApC,EAA4CmrB,YAA5C,CAAvB;AACA,wBAAGU,qBAAqB,CAAC,CAAzB,EAA4B,KAAKrpB,QAAL,CAAc,KAAKiW,KAAL,CAAWoT,gBAAX,CAAd,EAA4CF,WAAW,CAAX,CAA5C;AAC/B,iBAHD,MAII;AACA,yBAAKnpB,QAAL,CAAcmpB,WAAW,CAAX,EAAc3rB,MAA5B,EAAoC2rB,WAAW,CAAX,CAApC;AACH;AACJ;AACJ;;;yCAEgB1e,K,EAAO8e,U,EAAW;AAC/B,gBAAIC,YAAY,GAAhB;AACA,gBAAIC,gBAAgBF,WAAW5pB,MAA/B;AACA,mBAAM8K,UAAU,IAAV,IAAkB+e,cAAc,CAAtC,EAAwC;AACpC,qBAAI,IAAI3pB,IAAI,CAAZ,EAAeA,IAAI4pB,aAAnB,EAAkC5pB,GAAlC;AAAuC,wBAAG0pB,WAAW1pB,CAAX,MAAkB4K,KAArB,EAA4B,OAAO5K,CAAP;AAAnE,iBACA4K,QAAQA,MAAMif,MAAd;AACH;AACD,mBAAO,CAAC,CAAR;AACH;;;;;;kBAGUpJ,Y;;;;;;;;;;;;;;;;;ICnHT1e,U;AACF,wBAAYc,MAAZ,EAAmB;AAAA;;AAEf,aAAKA,MAAL,GAAcA,MAAd;;AAEA;AACA,aAAKinB,cAAL,GAAsB,IAAI/oB,MAAM8e,QAAV,EAAtB;AACA,aAAKiK,cAAL,CAAoBC,IAApB,GAA2B,gBAA3B;AACA,aAAKC,aAAL,GAAqB,IAAIjpB,MAAM8e,QAAV,EAArB;AACA,aAAKmK,aAAL,CAAmBD,IAAnB,GAA0B,eAA1B;AACA,aAAK9N,gBAAL,GAAwB,IAAIlb,MAAM8e,QAAV,EAAxB;AACA,aAAK5D,gBAAL,CAAsB8N,IAAtB,GAA6B,kBAA7B;AACA,aAAKE,QAAL,GAAgB,IAAIlpB,MAAM8e,QAAV,EAAhB;AACA,aAAKoK,QAAL,CAAcF,IAAd,GAAqB,UAArB;;AAEA;AACA,aAAK/O,KAAL,GAAa,IAAIja,MAAMmpB,KAAV,EAAb;;AAEA;AACA,aAAKlP,KAAL,CAAW9X,GAAX,CAAe,KAAK4mB,cAApB;AACA,aAAK9O,KAAL,CAAW9X,GAAX,CAAe,KAAK8mB,aAApB;AACA,aAAKhP,KAAL,CAAW9X,GAAX,CAAe,KAAK+Y,gBAApB;AACA,aAAKjB,KAAL,CAAW9X,GAAX,CAAe,KAAK+mB,QAApB;AACH;;;;4BAEGtsB,M,EAAQ4O,S,EAAU;AAClB,gBAAGA,cAAchO,SAAjB,EAA4BgO,YAAY,KAAKyd,aAAjB;AAC5Bzd,sBAAUrJ,GAAV,CAAcvF,MAAd;AACH;;;mCAEUA,M,EAAO;AACd,iBAAKssB,QAAL,CAAc/mB,GAAd,CAAkBvF,MAAlB;AACH;;;+BAEMA,M,EAAO;AACV,gBAAG,OAAOA,MAAP,KAAkB,QAArB,EAA8B;AAC1B,oBAAIwsB,UAAUxsB,MAAd;AACAA,yBAAS,KAAKmsB,cAAL,CAAoBM,eAApB,CAAoCD,OAApC,CAAT;AACA,oBAAGxsB,WAAWY,SAAd,EAAyBZ,SAAS,KAAKqsB,aAAL,CAAmBI,eAAnB,CAAmCD,OAAnC,CAAT;AACzB,oBAAGxsB,WAAWY,SAAd,EAAyB;AAC5B;AACD,iBAAKurB,cAAL,CAAoBhX,MAApB,CAA2BnV,MAA3B;AACA,iBAAKqsB,aAAL,CAAmBlX,MAAnB,CAA0BnV,MAA1B;AACH;;;;;;kBAGUoE,U;;;;;;;;;;;;;;;;;AC9Cf,IAAIsoB,WAAW,IAAItpB,MAAMqW,OAAV,EAAf;AAAA,IACIkT,aAAa,IAAIvpB,MAAMqW,OAAV,EADjB;;AAGA;;;;;;;;IAQMiC,M;AACF;;;AAGA,oBAAYxW,MAAZ,EAAmB;AAAA;;AACf,aAAKA,MAAL,GAAcA,MAAd;;AAEA,aAAK2W,MAAL,GAAc,IAAIzY,MAAMwpB,iBAAV,CAA4B,KAAK1nB,MAAL,CAAYmW,GAAxC,EAA6C,KAAKnW,MAAL,CAAYoW,MAAzD,EAAiE,KAAKpW,MAAL,CAAYqW,IAA7E,EAAmF,KAAKrW,MAAL,CAAYsW,GAA/F,CAAd;AACA,aAAKK,MAAL,CAAYuQ,IAAZ,GAAmB,YAAnB;AACH;;;;4CAOmBxd,S,EAAW1J,M,EAAO;AAClC,gBAAG,KAAK2nB,WAAL,KAAqBjsB,SAArB,IAAkCgO,cAAchO,SAAnD,EAA6D;AACzD,qBAAKisB,WAAL,GAAmB,IAAI1Y,IAAI2Y,UAAJ,CAAeC,WAAnB,CAA+B,KAAKlR,MAApC,EAA4CjN,SAA5C,CAAnB;;AAEA,qBAAKie,WAAL,CAAiBtM,IAAjB,GAAwB,YAAU;AAC9B,yBAAK2K,OAAL,GAAe,KAAf;AACH,iBAFD;AAGA,qBAAK2B,WAAL,CAAiBrM,OAAjB,GAA2B,YAAU;AACjC,yBAAK0K,OAAL,GAAe,IAAf;AACH,iBAFD;AAGH;;AAED,gBAAG,KAAK2B,WAAL,KAAqBjsB,SAAxB,EAAkC;AAC9B,oBAAGsE,WAAWtE,SAAd,EAAwB;AACpB,yBAAKisB,WAAL,CAAiBG,KAAjB,CAAuBvpB,GAAvB,CAA2ByB,OAAO+nB,MAAlC,EAA0C/nB,OAAOgoB,MAAjD;AACA,yBAAKL,WAAL,CAAiBM,OAAjB,GAA2BjoB,OAAOioB,OAAlC;AACA,yBAAKN,WAAL,CAAiBO,QAAjB,GAA4BloB,OAAOkoB,QAAnC;AACA,yBAAKP,WAAL,CAAiBQ,QAAjB,GAA4BnoB,OAAOmoB,QAAnC;AACA,yBAAKR,WAAL,CAAiBS,SAAjB,GAA6BpoB,OAAOooB,SAApC;AACA,yBAAKT,WAAL,CAAiBU,WAAjB,GAA+B,IAA/B;AACH;;AAED,qBAAKC,QAAL,GAAgB,KAAKX,WAArB;AACH;AACJ;;;sCAEaje,S,EAAW1J,M,EAAO;AAC5B,gBAAG,KAAKob,aAAL,KAAuB1f,SAAvB,IAAoCgO,cAAchO,SAArD,EAA+D;;AAE3D,oBAAI6sB,aAAa,IAAIrqB,MAAMqW,OAAV,EAAjB;AACA,qBAAKoC,MAAL,CAAY6R,iBAAZ,CAA8BD,UAA9B;AACAA,2BAAWE,cAAX,CAA0B,GAA1B,EAA+BpoB,GAA/B,CAAmC,KAAKsW,MAAL,CAAYrN,QAA/C;;AAEA,qBAAK8R,aAAL,GAAqB,IAAIld,MAAMuY,aAAV,CAAwB,KAAKE,MAA7B,EAAqCjN,SAArC,CAArB;AACA,qBAAK0R,aAAL,CAAmB5f,MAAnB,CAA0Bse,IAA1B,CAA+ByO,UAA/B;;AAEA,oBAAIpa,QAAQ,IAAZ;AACA,qBAAKiN,aAAL,CAAmB9N,MAAnB,GAA4B,YAAU;AAClC,wBAAG,KAAK0Y,OAAR,EAAgB;AACZ,4BAAG,KAAKlrB,MAAL,CAAYwO,QAAZ,CAAqBof,UAArB,CAAgC,KAAKltB,MAArC,IAA+C,EAAlD,EAAqD;AACjD,gCAAImtB,IAAI,IAAIzqB,MAAMqW,OAAV,GAAoBqU,UAApB,CAA+B,KAAKptB,MAApC,EAA4C,KAAKV,MAAL,CAAYwO,QAAxD,EAAkEmf,cAAlE,CAAiF,EAAjF,CAAR;AACA,iCAAKjtB,MAAL,CAAY6E,GAAZ,CAAgBsoB,CAAhB;AACH;AACD,6BAAK1O,MAAL;AACH;AACJ,iBARD;AASA,qBAAKmB,aAAL,CAAmBC,IAAnB,GAA0B,YAAU;AAChC,yBAAKwN,SAAL;AACA,yBAAK7C,OAAL,GAAe,KAAf;AACH,iBAHD;AAIA,qBAAK5K,aAAL,CAAmBE,OAAnB,GAA6B,YAAU;AACnC,yBAAKwN,KAAL;AACA,yBAAK9C,OAAL,GAAe,IAAf;AACH,iBAHD;AAIH;;AAGDhmB,qBAASA,UAAU;AACf+oB,6BAAa,SAAS,SAAS,CADhB;AAEfC,+BAAezuB,KAAKC,EAAL,GAAU;AAFV,aAAnB;AAIA,gBAAGwF,WAAWtE,SAAd,EAAwB;AACpB,qBAAK0f,aAAL,CAAmB2N,WAAnB,GAAiC/oB,OAAO+oB,WAAxC;AACA,qBAAK3N,aAAL,CAAmB4N,aAAnB,GAAmChpB,OAAOgpB,aAA1C;AACA,qBAAK5N,aAAL,CAAmB6N,UAAnB,GAAgC,KAAhC;AACH;;AAED,iBAAKX,QAAL,GAAgB,KAAKlN,aAArB;AACH;;;yCAEe;AACZ,iBAAKC,IAAL;;AAEA,gBAAG,KAAKiN,QAAL,KAAkB,KAAKlN,aAA1B,EAAwC;AACpC,oBAAG,KAAKuM,WAAR,EAAoB;AAChB,yBAAKA,WAAL,CAAiBuB,YAAjB,CAA8B,KAAKvS,MAAnC,EAA2C,CAA3C;AACA,yBAAKwS,mBAAL;AACH;AACJ,aALD,MAMI;AACA,oBAAG,KAAK/N,aAAR,EAAsB;AAClB,yBAAK3E,aAAL;;AAEA;AACA,wBAAIsS,cAAc,GAAlB;;AAEA,wBAAIK,QAAQ,IAAIlrB,MAAMqW,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAC,CAAzB,CAAZ;AACA,wBAAI8U,OAAO,IAAInrB,MAAMorB,UAAV,EAAX;AACAF,0BAAMG,eAAN,CAAsB,KAAK5S,MAAL,CAAY6S,kBAAZ,CAA+BH,IAA/B,CAAtB,EAA4DI,SAA5D,GAAwEhB,cAAxE,CAAuFM,cAAc,EAArG,EAAyG1oB,GAAzG,CAA6G,KAAKsW,MAAL,CAAYrN,QAAzH;;AAEA,yBAAKoO,SAAL,CAAe0R,KAAf;AACH;AACJ;;AAED,iBAAK9N,OAAL;AACH;;;kCAEShS,Q,EAAS;AACf,gBAAG,KAAKgf,QAAL,YAAyBpqB,MAAMuY,aAAlC,EAAgD;AAC5C,qBAAK6R,QAAL,CAAc9sB,MAAd,CAAqBse,IAArB,CAA0BxQ,QAA1B;AACH,aAFD,MAGK;AACDtG,wBAAQxB,IAAR,CAAa,6CAAb,EAA4D,KAAK8mB,QAAjE;AACH;AACJ;;;iCAEO;AACJ,gBAAG,KAAKA,QAAL,KAAkB5sB,SAArB,EAA+B;AAC3B,qBAAK4sB,QAAL,CAAchb,MAAd;AACH;AACJ;;;+BAEK;AACF,gBAAG,KAAK0Y,OAAL,IAAgB,KAAKsC,QAAL,KAAkB5sB,SAAlC,IAA+C,KAAK4sB,QAAL,CAAcjN,IAAhE,EAAqE;AACjE,qBAAKiN,QAAL,CAAcjN,IAAd;AACH;AACJ;;;kCAEQ;AACL,gBAAG,CAAC,KAAK2K,OAAN,IAAiB,KAAKsC,QAAL,KAAkB5sB,SAAnC,IAAgD,KAAK4sB,QAAL,CAAchN,OAAjE,EAAyE;AACrE,qBAAKgN,QAAL,CAAchN,OAAd;AACH;AACJ;;AAED;;;;;;;8BAIMoO,I,EAAMC,kB,EAAmB;AAC3B,gBAAGA,uBAAuBjuB,SAA1B,EAAqCiuB,qBAAqB,GAArB;;AAErC,gBAAIxT,MAAM,KAAKQ,MAAL,CAAYR,GAAZ,IAAmB5b,KAAKC,EAAL,GAAU,GAA7B,CAAV;;AAEA,gBAAIovB,SAASpC,QAAb;AACAkC,iBAAK5I,OAAL,CAAa8I,MAAb;AACA,gBAAIC,YAAYtvB,KAAKiQ,GAAL,CAASof,OAAOhtB,CAAhB,EAAmBgtB,OAAO/sB,CAA1B,EAA6B+sB,OAAOtrB,CAApC,CAAhB;AACA,gBAAIwrB,WAAWvvB,KAAKwvB,GAAL,CAASF,YAAYtvB,KAAKoD,GAAL,CAASwY,MAAM,CAAf,CAArB,IAA0CwT,kBAAzD;;AAEA,gBAAIK,SAASvC,UAAb;AACAiC,iBAAKO,SAAL,CAAeD,MAAf;;AAEA,gBAAI1gB,WAAWke,QAAf;AACAle,qBAASsf,UAAT,CAAoB,KAAKjS,MAAL,CAAYrN,QAAhC,EAA0C0gB,MAA1C,EAAkDP,SAAlD,GAA8DhB,cAA9D,CAA6EqB,QAA7E,EAAuFzpB,GAAvF,CAA2F2pB,MAA3F;AACA1gB,qBAASzM,CAAT,GAAatC,KAAKwvB,GAAL,CAASzgB,SAASzM,CAAlB,CAAb;;AAEA,iBAAK8Z,MAAL,CAAYrN,QAAZ,CAAqBwQ,IAArB,CAA0BxQ,QAA1B;AACA,iBAAKoO,SAAL,CAAesS,MAAf;AACH;;AAED;;;;;;4BA1Jc;AAAE,mBAAO,KAAKrT,MAAL,CAAYrN,QAAnB;AAA8B,S;0BACjC9J,K,EAAM;AAAE,iBAAKmX,MAAL,CAAYrN,QAAZ,CAAqBwQ,IAArB,CAA0Bta,KAA1B;AAAmC;;;4BAC1C;AAAE,mBAAO,KAAKmX,MAAL,CAAYpS,QAAnB;AAA8B,S;0BACjC/E,K,EAAM;AAAE,iBAAKmX,MAAL,CAAYpS,QAAZ,CAAqBuV,IAArB,CAA0Bta,KAA1B;AAAmC;;;4BA0J3C;AACT,mBAAO,KAAK8oB,QAAL,CAActC,OAArB;AACH;;;;;;kBAGUxP,M;;;;;;;;;;;;;;;;;;;ACzLf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAM0T,mBAAmB,IAAIhsB,MAAMisB,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAzB;AACA,IAAMC,mBAAmB,IAAItjB,gBAAMhB,iBAAV,CAA4B,EAACiB,WAAW,CAAZ,EAAeC,WAAW,CAA1B,EAA6BqjB,aAAa,IAA1C,EAA5B,CAAzB;;AAEA,IAAMC,kBAAkB,CAAC,GAAD,EAAM,GAAN,CAAxB;AACA,IAAIC,UAAUhwB,KAAKiwB,MAAL,EAAd;AACA,SAASC,SAAT,GAAoB;AAChB,QAAIxsB,QAAQ,IAAIC,MAAMC,KAAV,EAAZ;AACAF,UAAMysB,MAAN,CAAaH,OAAb,EAAsB,CAAtB,EAAyBD,gBAAgB,CAAhB,IAAqB/vB,KAAKiwB,MAAL,MAAiBF,gBAAgB,CAAhB,IAAqBA,gBAAgB,CAAhB,CAAtC,CAA9C;AACAC,cAAU1vB,gBAAM8vB,YAAN,CAAmBJ,OAAnB,CAAV;AACA,WAAOtsB,KAAP;AACH;;AAED,IAAM2sB,oBAAoB5gB,OAAO,QAAP,CAA1B;;IAEMkU,Y;;;AACF;;;;AAIA,0BAAYtO,QAAZ,EAAqB;AAAA;;AAAA,gIACXA,QADW;;AAGjB,YAAI1I,WAAWkjB,iBAAiBtP,KAAjB,EAAf;AACA5T,iBAASjJ,KAAT,GAAiBwsB,WAAjB;AACA,cAAKtjB,IAAL,GAAY,IAAIjJ,MAAMkJ,IAAV,CAAe8iB,gBAAf,EAAiChjB,QAAjC,CAAZ;AACA,cAAKC,IAAL,CAAU4X,KAAV,CAAgBjF,IAAhB,CAAqBlK,SAAS5L,UAAT,CAAoB6mB,IAAzC;;AAEA,cAAK3Z,IAAL,CAAU7Q,GAAV,CAAc,MAAK8G,IAAnB;AARiB;AASpB;;AAED;;;;;;;AA4BA;;;;;iCAKSvK,C,EAAGC,C,EAAGyB,C,EAAE;AACb,iBAAK6I,IAAL,CAAU4X,KAAV,CAAgBxgB,GAAhB,CAAoB3B,CAApB,EAAuBC,CAAvB,EAA0ByB,CAA1B;AACH;;;uCAEa;AACV,iBAAK0G,KAAL,GAAa,KAAKA,KAAlB;AACH;;AAED;;;;;;iCAGSxF,K,EAAOQ,M,EAAO;AACnB,iIAAeR,KAAf,EAAsBQ,MAAtB;;AAEA,iBAAK2e,SAAL,CAAezN,IAAf,CAAoB6N,KAApB,CAA0BliB,CAA1B,GAA8BmD,OAAOyJ,MAArC;AACA,iBAAKkV,SAAL,CAAezN,IAAf,CAAoB6N,KAApB,CAA0BniB,CAA1B,GAA8BoD,OAAOwJ,KAArC;AACA,iBAAKmV,SAAL,CAAezN,IAAf,CAAoB5H,QAApB,CAA6BhL,CAA7B,GAAiC0B,OAAOwJ,KAAP,GAAe,CAAf,GAAmB,KAAKxE,KAAL,CAAWhB,UAAX,CAAsB/G,MAAtB,GAA+B,CAAnF;AACA,iBAAK0hB,SAAL,CAAezN,IAAf,CAAoB5H,QAApB,CAA6BzM,CAA7B,GAAiC,IAAjC;AACH;;AAED;;;;;;;;0CAKkBD,C,EAAGC,C,EAAGyB,C,EAAE;AACtB,iBAAK6I,IAAL,CAAU5C,QAAV,CAAmBhG,GAAnB,CAAuB3B,CAAvB,EAA0BC,CAA1B,EAA6ByB,CAA7B;AACH;;;4BA3DU;AAAE;AAAqB,S;0BACxBkB,K,EAAM;AACZ,6GAAcA,KAAd;AACA,gBAAIsrB,IAAItrB,MAAMwE,UAAN,CAAiB6mB,IAAzB;AACA,iBAAKE,QAAL,CAAcD,EAAEluB,CAAhB,EAAmBkuB,EAAEjuB,CAArB,EAAwBiuB,EAAExsB,CAA1B;AACH;;AAED;;;;0BACUkB,K,EAAM;AACZ,6GAAcA,KAAd;;AAEA,gBAAG,KAAKorB,iBAAL,CAAH,EAA4B9jB,gBAAMkkB,eAAN,CAAsB,KAAK7jB,IAAL,CAAUD,QAAhC,EAA0C,KAAK0jB,iBAAL,CAA1C;;AAE5B,gBAAGrwB,KAAKwvB,GAAL,CAAS,IAAIvqB,KAAb,IAAsB,KAAzB,EAA+B;AAC3B,oBAAG,KAAKorB,iBAAL,MAA4BlvB,SAA/B,EAAyC;AACrC,yBAAKyL,IAAL,CAAUD,QAAV,GAAqB,KAAKC,IAAL,CAAUD,QAAV,CAAmB4T,KAAnB,EAArB;AACA,yBAAK8P,iBAAL,IAA0B,EAA1B;AACA9jB,oCAAMmkB,gBAAN,CAAuB,KAAK9jB,IAAL,CAAUD,QAAjC,EAA2C1H,KAA3C,EAAkD,KAAKorB,iBAAL,CAAlD;AACH,iBAJD,MAKI;AACA9jB,oCAAMmkB,gBAAN,CAAuB,KAAK9jB,IAAL,CAAUD,QAAjC,EAA2C1H,KAA3C;AACH;AACJ;AACJ,S;4BAEU;AAAE;AAAqB;;;;EA1CXyf,mB;;kBA+EZf,Y;;;;;;;;;;;;;;;;;IClGTtZ,S;AACF;;;;AAIA,uBAAYzF,KAAZ,EAAmBgD,OAAnB,EAA2B;AAAA;;AACvB;;;AAGA,aAAKhD,KAAL,GAAaA,KAAb;AACA;;;AAGA,aAAKgD,OAAL,GAAeA,OAAf;AACH;;AAED;;;;;;;6BAGK+C,K,EAAM;AACP,iBAAK/F,KAAL,GAAa+F,MAAM/F,KAAnB;AACA,iBAAKgD,OAAL,GAAe+C,MAAM/C,OAArB;AACH;;;gCAEM;AACH,gBAAI+C,QAAQ,IAAIN,SAAJ,CAAc,KAAKzF,KAAnB,EAA0B,KAAKgD,OAA/B,CAAZ;AACA,mBAAO+C,KAAP;AACH;;;4BAE0B;AACvB,mBAAO,GAAP;AACH;;;;;;kBAGUN,S;;;;;;;;;;;;;;;AClCf;;;;AACA;;;;;;;;;;;;AAEA,IAAIsmB,YAAJ,EAAkBC,cAAlB;AACA,SAASC,cAAT,GAAyB;AACrB,SAAI,IAAIjuB,IAAI,CAAZ,EAAeA,IAAIguB,eAAeluB,MAAlC,EAA0CE,GAA1C,EAA8C;AAC1C,YAAI6H,QAAQmmB,eAAehuB,CAAf,CAAZ;AACA,YAAIkuB,WAAWrmB,MAAMgG,KAAN,CAAYhG,MAAMsmB,YAAlB,CAAf;AACA,YAAGD,aAAarmB,MAAMumB,UAAtB,EAAiC;AAC7BvmB,kBAAMumB,UAAN,GAAmBF,QAAnB;AACArmB,kBAAMwmB,EAAN,CAAShsB,KAAT,GAAiB6rB,QAAjB;AACH;AACJ;AACJ;AACD,SAASI,UAAT,CAAoBD,EAApB,EAAwBxgB,KAAxB,EAA+BsgB,YAA/B,EAA4C;AACxC,QAAGJ,iBAAiBxvB,SAApB,EAA8B;AAC1ByvB,yBAAiB,EAAjB;AACAD,uBAAeQ,YAAYN,cAAZ,EAA4B,GAA5B,CAAf;AACH;AACDD,mBAAe/qB,IAAf,CAAoB,EAACorB,IAAIA,EAAL,EAASxgB,OAAOA,KAAhB,EAAuBsgB,cAAcA,YAArC,EAAmDC,YAAY,IAA/D,EAApB;AACH;;AAED,IAAMI,SAAS3hB,OAAO,OAAP,CAAf;AACA,IAAMoS,eAAe,QAArB;;AAEA,IAAM3W,UAAU;AACZmmB,YAAQ;AADI,CAAhB;;IAIMC,S;;;AACF,yBAAa;AAAA;;AAAA;;AAGT,cAAKF,MAAL,IAAe,EAAf;AAHS;AAIZ;;;;kCAeShD,C,EAAE;AACR,mBAAOA,EAAEnlB,QAAF,GAAamlB,EAAEnlB,QAAF,EAAb,GAA4BmlB,EAAEpoB,QAAF,EAAnC;AACH;;;8BAEKyK,K,EAAOsgB,Y,EAAa;AACtBG,uBAAW,IAAX,EAAiBzgB,KAAjB,EAAwBsgB,YAAxB;AACH;;;4BAnBU;AACP,mBAAO,KAAKK,MAAL,CAAP;AACH;;AAED;;0BACUhD,C,EAAE;AACR,gBAAGA,MAAMvM,YAAT,EAAuBuM,IAAI,KAAKmD,SAAL,CAAenD,CAAf,CAAJ;;AAEvB,gBAAIoD,UAAU,KAAKJ,MAAL,MAAiBhD,CAA/B;AACA,iBAAKgD,MAAL,IAAehD,CAAf;AACA,gBAAGoD,OAAH,EAAY,KAAKja,QAAL,CAAcrM,QAAQmmB,MAAtB,EAA8B,IAA9B;AACf;;;4BAUmB;AAChB,mBAAOnmB,OAAP;AACH;;;;EA9BmBD,kB;;AAiCxB,IAAMW,kBAAkB,IAAIjI,MAAM8tB,aAAV,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,CAAxB;;AAEA;;;;;;;;;;AAUA;AACA,IAAMrZ,gBAAgB;AAClB2L,UAAM,iBADY;AAElBG,eAAW,QAFO;AAGlBC,iBAAa,EAHK;AAIlBF,eAAW,QAJO;AAKlBD,eAAW,QALO;AAMlB/U,WAAO,GANW;AAOlBC,YAAQ;AAPU,CAAtB;;IAUMmV,a;;AAEF;AACA,2BAAY5e,MAAZ,EAAmB;AAAA;;AAEf,aAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,YAAIzL,WAAW,IAAIhJ,MAAMgI,iBAAV,CAA4B,EAACjI,OAAO,QAAR,EAAkBguB,MAAM/tB,MAAMguB,UAA9B,EAA5B,CAAf;AACA,aAAKhb,IAAL,GAAY,IAAIhT,MAAMkJ,IAAV,CAAejB,eAAf,EAAgCe,QAAhC,CAAZ;AACH;;AAED;;;;;;;AAKA;iCACSilB,S,EAAU;AACf,gBAAIC,OAAOD,UAAU3sB,KAArB;AACA,iBAAKwf,UAAL,CAAgBoN,IAAhB;AACH;;AAED;;;;mCACWA,I,EAAK;AACZ,gBAAG,KAAKC,QAAL,KAAkB3wB,SAArB,EACI,KAAK2wB,QAAL,GAAgBzrB,SAASC,aAAT,CAAuB,QAAvB,CAAhB;;AAEJ,iBAAKwrB,QAAL,CAAc7iB,KAAd,GAAsB,KAAKxJ,MAAL,CAAYwJ,KAAlC;AACA,iBAAK6iB,QAAL,CAAc5iB,MAAd,GAAuB,KAAKzJ,MAAL,CAAYyJ,MAAnC;;AAEA,gBAAI6iB,YAAY,KAAKD,QAAL,CAAcE,UAAd,CAAyB,IAAzB,CAAhB;AACID,sBAAUE,SAAV,GAAsB,KAAKxsB,MAAL,CAAYue,SAAlC;AACA+N,sBAAUG,QAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKzsB,MAAL,CAAYwJ,KAAZ,GAAoB,CAA7C,EAAgD,KAAKxJ,MAAL,CAAYyJ,MAAZ,GAAqB,CAArE;AACA6iB,sBAAUE,SAAV,GAAsB,KAAKxsB,MAAL,CAAYwe,SAAlC;AACA8N,sBAAUhO,IAAV,GAAiB,KAAKte,MAAL,CAAYse,IAA7B;AACAgO,sBAAU7N,SAAV,GAAsB,KAAKze,MAAL,CAAYye,SAAlC;AACA6N,sBAAUI,YAAV,GAAyB,QAAzB;;AAEJ,gBAAI9vB,IAAI,KAAKoD,MAAL,CAAYye,SAAZ,KAA0B,OAA1B,IAAqC,KAAKze,MAAL,CAAYye,SAAZ,KAA0B,MAA/D,GAAwE,KAAKze,MAAL,CAAY0e,WAApF,GACF,KAAK1e,MAAL,CAAYye,SAAZ,KAA0B,KAA1B,IAAmC,KAAKze,MAAL,CAAYye,SAAZ,KAA0B,OAA7D,GAAuE,KAAKze,MAAL,CAAYwJ,KAAZ,GAAoB,KAAKxJ,MAAL,CAAY0e,WAAvG,GACA,KAAK1e,MAAL,CAAYwJ,KAAZ,GAAoB,CAF1B;AAGA8iB,sBAAUK,QAAV,CAAmBP,IAAnB,EAAyBxvB,CAAzB,EAA4B,KAAKoD,MAAL,CAAYyJ,MAAZ,GAAqB,CAAjD;;AAEA;AACA,gBAAItC,OAAO,KAAK+J,IAAhB;AACA;AACA,gBAAIhK,WAAWC,KAAKD,QAApB;AACA,gBAAG,CAACA,SAASyS,GAAb,EAAiB;AACbzS,yBAASyS,GAAT,GAAe,IAAIzb,MAAM0uB,aAAV,CAAwB,KAAKP,QAA7B,CAAf;AACAnlB,yBAASyS,GAAT,CAAakT,SAAb,GAAyB3uB,MAAM4uB,YAA/B;AACA5lB,yBAASyS,GAAT,CAAaoT,UAAb,GAA0B,GAA1B;AACH,aAJD,MAKI;AACA7lB,yBAASyS,GAAT,CAAaqT,KAAb,GAAqB,KAAKX,QAA1B;AACH;AACDnlB,qBAASyS,GAAT,CAAasT,WAAb,GAA2B,IAA3B;AACH;;;0BA5CaztB,K,EAAM;AAChBA,kBAAMoG,EAAN,CAASimB,UAAUpmB,OAAV,CAAkBmmB,MAA3B,EAAmC,KAAKsB,QAAL,CAAclc,IAAd,CAAmB,IAAnB,CAAnC;AACH;;;;;;AA8CL4N,cAAcuO,KAAd,GAAsBtB,SAAtB;;kBAEejN,a;;;;;;;;;;;;;;;;;;;;;AClJf,SAASwO,eAAT,CAAyBC,CAAzB,EAA2B;AACvBA,MAAED,eAAF;AACH;;AAED,IAAIE,UAAJ;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAuB;AACnB,QAAGF,eAAe5xB,SAAlB,EAA4B;AACxB4xB,qBAAa1sB,SAASC,aAAT,CAAuB,OAAvB,CAAb;AACAysB,mBAAWrrB,IAAX,GAAkB,UAAlB;AACArB,iBAAS6sB,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCzhB,WAAzC,CAAqDshB,UAArD;AACH;AACD,QAAGE,eAAeE,KAAlB,EACIF,MAAMA,IAAI1iB,IAAJ,CAAS,IAAT,CAAN;;AAEJwiB,eAAWK,SAAX,IAAwBH,MAAM,IAA9B;AACH;;AAEDD,UAAU,CACN,qBADM,EAEN,sCAFM,EAGN,sCAHM,EAIN,uCAJM,EAKN,sCALM,EAMN,GANM,CAAV;;AASA,IAAM3K,SAAS;AACXgL,kBAAc,6CADH;AAEXC,gBAAY,2BAFD;;AAIXC,iBAAa;8GAJF;AAMXC,eAAW,oIANA;AAOXC,oBAAgB;0IAPL;AASXnL,kBAAc;;AATH,CAAf;;IAaMX,O;;AAEF;;;;AAIA,uBAAa;AAAA;;AACT;;;AAGA,aAAK+L,WAAL;AACH;;;;2CAkBiB;AACd,gBAAG,KAAKA,WAAR,EAAoB;AAChB,qBAAKA,WAAL,CAAiBC,mBAAjB,CAAqC,WAArC,EAAkDd,eAAlD;AACA,qBAAKa,WAAL,CAAiBC,mBAAjB,CAAqC,SAArC,EAAgDd,eAAhD;AACH;AACJ;;;+BAEK;AACFlL,oBAAQS,QAAR,CAAiB,KAAKhiB,UAAtB,EAAkCiiB,OAAOiL,UAAzC;AACH;;;+BAEK;AACF3L,oBAAQiM,WAAR,CAAoB,KAAKxtB,UAAzB,EAAqCiiB,OAAOiL,UAA5C;AACH;;;iCAEO;AACJ,gBAAG,KAAKI,WAAR,EAAoB;AAChB,qBAAKA,WAAL,CAAiBC,mBAAjB,CAAqC,WAArC,EAAkDd,eAAlD;AACA,qBAAKa,WAAL,CAAiBC,mBAAjB,CAAqC,SAArC,EAAgDd,eAAhD;;AAEA,qBAAKa,WAAL,CAAiBhe,MAAjB;AACA,uBAAO,KAAKge,WAAZ;AACH;AACJ;;;0BAvCczuB,K,EAAM;AACjB,gBAAG,KAAKyuB,WAAR,EAAoB;AAChB,qBAAKA,WAAL,CAAiBC,mBAAjB,CAAqC,WAArC,EAAkDd,eAAlD;AACA,qBAAKa,WAAL,CAAiBC,mBAAjB,CAAqC,SAArC,EAAgDd,eAAhD;AACH;;AAED,iBAAKa,WAAL,GAAmBzuB,KAAnB;;AAEA,iBAAKyuB,WAAL,CAAiBtK,gBAAjB,CAAkC,WAAlC,EAA+CyJ,eAA/C;AACA,iBAAKa,WAAL,CAAiBtK,gBAAjB,CAAkC,SAAlC,EAA6CyJ,eAA7C;AACH,S;4BAEe;AACZ,mBAAO,KAAKa,WAAZ;AACH;;;4BA2BY;AACT,mBAAOzxB,WAAW,KAAKmE,UAAL,CAAgBvE,KAAhB,CAAsBsL,OAAjC,CAAP;AACH,S;0BAEWlI,K,EAAM;AACd,iBAAKmB,UAAL,CAAgBvE,KAAhB,CAAsBsL,OAAtB,GAAgClI,KAAhC;AACH;;;8BAEY4sB,I,EAAMgC,U,EAAW;AAC1B,mBAAO;AACHnsB,sBAAM,MADH;AAEH9C,uBAAOitB,IAFJ;AAGHgC,4BAAYA;AAHT,aAAP;AAKH;;;6BAEWhC,I,EAAMgC,U,EAAW;AACzB,gBAAIC,QAAQ,KAAKC,KAAL,CAAWlC,IAAX,EAAiBgC,UAAjB,CAAZ;AACA,mBAAOG,KAAKF,MAAMpsB,IAAX,EAAiBosB,MAAMD,UAAvB,EAAmCC,MAAMlvB,KAAzC,CAAP;AACH;;AAED;;;;;;;;iCAKgBhD,O,EAASC,K,EAAM;AAC3B,gBAAIoyB,SAASryB,QAAQC,KAAR,CAAcqyB,OAA3B;AACA,gBAAIvtB,QAAQstB,OAAOrtB,OAAP,CAAe/E,KAAf,CAAZ;AACA,gBAAG8E,UAAU,CAAC,CAAd,EAAgB;AACZ/E,wBAAQC,KAAR,CAAcqyB,OAAd,IAAyBryB,KAAzB;AACH;AACJ;;AAED;;;;;;;;oCAKmBD,O,EAASC,K,EAAM;AAC9BD,oBAAQC,KAAR,CAAcqyB,OAAd,GAAwBtyB,QAAQC,KAAR,CAAcqyB,OAAd,CAAsB1xB,OAAtB,CAA8BX,KAA9B,EAAqC,EAArC,CAAxB;AACH;;;4BAMUD,O,EAAQ;AACfyE,qBAASmL,IAAT,CAAcC,WAAd,CAA0B7P,QAAQwE,UAAlC;AACH;;;4BANqB;AAClB,mBAAO4sB,SAAP;AACH;;;;;;AAOL,IAAMmB,SAAS;AACXC,WAAO,GADI;AAEXC,YAAQ,GAFG;AAGXC,WAAO;AAHI,CAAf;;IAMMhN,S;;;AACF,uBAAYiN,KAAZ,EAAmBtlB,KAAnB,EAAyB;AAAA;;AAAA;;AAIrB,YAAIulB,GAAJ;;AAEA,YAAIC,OAAO,SAAPA,IAAO,CAASC,IAAT,EAAeC,IAAf,EAAoB;AAC3BH,gBAAI3yB,KAAJ,CAAU+yB,IAAV,GAAiBF,OAAO,IAAxB;AACAF,gBAAI3yB,KAAJ,CAAUgzB,GAAV,GAAgBF,OAAO,IAAvB;AACH,SAHD;;AAKA,YAAIG,QAAQ,CAAZ;AAAA,YACIC,QAAQ,CADZ;AAEA,YAAIC,MAAM,CAAV;AAAA,YACIC,MAAM,CADV;AAAA,YAEIC,MAAM,CAFV;AAAA,YAGIC,MAAM,CAHV;;AAKA,YAAIC,cAAc,SAAdA,WAAc,CAASC,GAAT,EAAa;AAC3BA,kBAAMA,OAAOvzB,OAAOsJ,KAApB;AACA,gBAAIkqB,OAAOD,IAAIE,OAAf;AAAA,gBACIC,OAAOH,IAAII,OADf;AAAA,gBAEIC,KAAKJ,OAAOR,KAFhB;AAAA,gBAGIa,KAAKH,OAAOT,KAHhB;AAII,gBAAIW,KAAK,CAAT,EAAYA,KAAK,CAAL;AACZ,gBAAIC,KAAK,CAAT,EAAYA,KAAK,CAAL;AACZ,gBAAID,KAAKV,GAAL,GAAWE,GAAf,EAAoBQ,KAAKR,MAAMF,GAAX;AACpB,gBAAIW,KAAKV,GAAL,GAAWE,GAAf,EAAoBQ,KAAKR,MAAKF,GAAV;AACxBR,iBAAKiB,EAAL,EAASC,EAAT;AACH,SAXD;;AAaA,YAAIC,cAAc,SAAdA,WAAc,CAASP,GAAT,EAAa;AAC3B,gBAAIQ,IAAIrB,IAAIsB,UAAZ;AACA,gBAAI3mB,YAAa0mB,MAAM10B,SAAN,IAAmB00B,MAAM,IAA1B,GAAkCA,CAAlC,GAAsC/zB,MAAtD;AACAqN,wBAAY9I,SAASmL,IAArB;AACA6jB,kBAAMA,OAAOvzB,OAAOsJ,KAApB;AACA,gBAAIkqB,OAAOD,IAAIE,OAAf;AAAA,gBACIC,OAAOH,IAAII,OADf;AAAA,gBAEAM,SAASvB,IAAI3yB,KAAJ,CAAUgzB,GAFnB;AAAA,gBAGAmB,UAAUxB,IAAI3yB,KAAJ,CAAU+yB,IAHpB;;AAKAI,kBAAMniB,SAAS2hB,IAAI3yB,KAAJ,CAAUoN,KAAnB,CAAN;AACAgmB,kBAAMpiB,SAAS2hB,IAAI3yB,KAAJ,CAAUqN,MAAnB,CAAN;AACAgmB,kBAAMriB,SAAS1D,UAAUtN,KAAV,CAAgBoN,KAAzB,CAAN;AACAkmB,kBAAMtiB,SAAS1D,UAAUtN,KAAV,CAAgBqN,MAAzB,CAAN;;AAEAC,sBAAUtN,KAAV,CAAgBo0B,MAAhB,GAAuB,MAAvB;AACAF,qBAASA,OAAOvzB,OAAP,CAAe,IAAf,EAAoB,EAApB,CAAT;AACAwzB,sBAAUA,QAAQxzB,OAAR,CAAgB,IAAhB,EAAqB,EAArB,CAAV;AACAsyB,oBAAQQ,OAAOU,OAAf;AACAjB,oBAAQS,OAAOO,MAAf;AACA1vB,qBAAS+iB,gBAAT,CAA0B,WAA1B,EAAuCgM,WAAvC;AACH,SArBD;;AAuBA,YAAIc,aAAa,SAAbA,UAAa,GAAU;AACvB,gBAAIL,IAAIrB,IAAIsB,UAAZ;AACA,gBAAI3mB,YAAa0mB,MAAM10B,SAAN,IAAmB00B,MAAM,IAA1B,GAAkCA,CAAlC,GAAsC/zB,MAAtD;AACAqN,wBAAY9I,SAASmL,IAArB;AACArC,sBAAUtN,KAAV,CAAgBo0B,MAAhB,GAAyB,SAAzB;AACA5vB,qBAASstB,mBAAT,CAA6B,WAA7B,EAA0CyB,WAA1C;AACH,SAND;;AAQA,YAAGnmB,UAAU9N,SAAb,EAAwB8N,QAAQklB,OAAOE,MAAf;AACxB,YAAIO,OAAO,KAAK50B,KAAK6jB,KAAL,CAAW7jB,KAAKiwB,MAAL,KAAgB,GAA3B,CAAhB;AAAA,YACI4E,MAAM,KAAK70B,KAAK6jB,KAAL,CAAW7jB,KAAKiwB,MAAL,KAAgB,EAA3B,CADf;AAEA,YAAIkG,WAAW,UAAUvB,IAAV,GAAiB,UAAjB,GAA8BC,GAA9B,GAAoC,YAApC,GAAmD5lB,KAAnD,GAA2D,0CAA3D,GAAwGoZ,OAAOgL,YAA/G,GAA8HhL,OAAOkL,WAApJ;AACAiB,cAAMR,KAAK,KAAL,EAAY,EAACnyB,OAAOs0B,QAAR,EAAZ,CAAN;AACA,YAAIC,OAAOpC,KAAK,KAAL,EAAY,EAACnyB,OAAO,gBAAR,EAAZ,CAAX;AACA2yB,YAAI/iB,WAAJ,CAAgB2kB,IAAhB;AACA,YAAIC,SAASrC,KAAK,KAAL,EAAY,EAACsC,aAAaV,WAAd,EAA2BW,WAAWL,UAAtC,EAAkDr0B,OAAOwmB,OAAOmL,SAAhE,EAAZ,EAAwFe,KAAxF,CAAb;;AAEA,YAAI3gB,aAAJ;AACA,YAAI4iB,QAAQ,SAARA,KAAQ,GAAU;AAClB5iB,kBAAM6iB,KAAN;AACH,SAFD;AAGA,YAAIlP,WAAWyM,KAAK,QAAL,EAAe,EAACxM,SAASgP,KAAV,EAAiB30B,OAAOwmB,OAAOoL,cAA/B,EAAf,EAA+D,OAA/D,CAAf;AACA2C,aAAK3kB,WAAL,CAAiB8V,QAAjB;AACA6O,aAAK3kB,WAAL,CAAiB4kB,MAAjB;;AAEA7B,YAAIjN,QAAJ,GAAeA,QAAf;;AAEA,cAAKnhB,UAAL,GAAkBouB,GAAlB;AACA,cAAKkC,gBAAL;AACA,cAAKnP,QAAL,GAAgBA,QAAhB;AAnFqB;AAoFxB;;;;gCAEM;AACH,iBAAKnhB,UAAL,CAAgBsP,MAAhB;AACH;;;4BAEGihB,G,EAAI;AACJ,iBAAKvwB,UAAL,CAAgBqL,WAAhB,CAA4BklB,GAA5B;AACH;;;sCAEY;AACT,gBAAI90B,QAAQC,OAAOC,gBAAP,CAAwB,KAAKqE,UAA7B,CAAZ;AAAA,gBACIwuB,OAAO3yB,WAAWJ,MAAM+yB,IAAjB,CADX;AAAA,gBAEIC,MAAM5yB,WAAWJ,MAAMgzB,GAAjB,CAFV;;AAIA,mBAAO,EAACxyB,GAAGuyB,IAAJ,EAAUtyB,GAAGuyB,GAAb,EAAP;AACH;;;oCAEWxyB,C,EAAGC,C,EAAE;AACb,iBAAK8D,UAAL,CAAgBvE,KAAhB,CAAsB+yB,IAAtB,GAA6BvyB,IAAI,IAAjC;AACA,iBAAK+D,UAAL,CAAgBvE,KAAhB,CAAsBgzB,GAAtB,GAA4BvyB,IAAI,IAAhC;AACH;;;4BAEkB;AACf,mBAAO6xB,MAAP;AACH;;;;EA9GmBxM,O;;QAkHpBU,M,GAAAA,M;QACAV,O,GAAAA,O;QACAL,S,GAAAA,S;;;;;;;;;AC7QJ;;AAEAK,iBAAQiP,SAAR,CAAkB,CACd,yBADc,EAEd,yBAFc,EAGd,yBAHc,EAId,mBAJc,EAKd,6BALc,EAMd,kBANc,EAOd,yBAPc,EAQd,qBARc,EASd,yBATc,EAUd,iBAVc,EAWd,iBAXc,EAYd,8BAZc,EAad,GAbc,EAed,gBAfc,EAgBd,mBAhBc,EAiBd,gBAjBc,EAkBd,yBAlBc,EAmBd,GAnBc,EAqBd,+BArBc,EAsBd,0BAtBc,EAuBd,iBAvBc,EAwBd,GAxBc,CAAlB;;AA2BA,IAAMvO,SAAS;AACXwO,iBAAa;AADF,CAAf;;AAIAh2B,OAAOqE,cAAP,CAAsB,CAACpD,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAA7E,EAAwF,YAAxF,EAAsG;AAClGqE,SAAK,eAAU;AACX,YAAG,CAAC,KAAK8xB,WAAT,EACI,KAAKA,WAAL,GAAmB,EAAnB;AACJ,eAAO,KAAKA,WAAZ;AACH;AALiG,CAAtG;;AAQA;;AAEA,CAACh1B,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAAvD,CAAiE4S,SAAjE,GAA6E,YAAU;AACnF,QAAIL,MAAM,IAAV;AACA,SAAK,IAAItQ,CAAT,IAAcsQ,IAAIvN,aAAlB,EAAiC;AAC7B,YAAII,aAAamN,IAAIvN,aAAJ,CAAkB/C,CAAlB,CAAjB;AACAmD,mBAAWR,aAAX;AACH;;AAED,QAAIojB,UAAU9nB,OAAOsY,MAAP,CAAcjG,IAAItN,SAAlB,CAAd;AACA,SAAIhD,IAAI,CAAR,EAAWA,IAAI+lB,QAAQjmB,MAAvB,EAA+BE,GAA/B,EAAmC;AAC/B+lB,gBAAQ/lB,CAAR,EAAW2Q,SAAX;AACH;AACJ,CAXD;;AAaA;;AAEA,CAACzR,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAAvD,CAAiE6S,IAAjE,GAAwE,UAASjT,MAAT,EAAiBwP,QAAjB,EAA0B;AAC9F,QAAImD,MAAM,IAAV;AAAA,QAAgBnN,UAAhB;AAAA,QAA4BnD,CAA5B;;AAEA,QAAGmN,QAAH,EAAY;AAAE;AACV,aAAKnN,IAAI,CAAT,EAAYA,IAAIsQ,IAAIvN,aAAJ,CAAkBjD,MAAlC,EAA0CE,GAA1C,EAA8C;AAC1CmD,yBAAamN,IAAIvN,aAAJ,CAAkB/C,CAAlB,CAAb;AACA,gBAAImD,WAAWxF,MAAX,IAAqBA,MAArB,IAA+BwF,WAAWgK,QAAX,IAAuBA,QAA1D,EACI,OAAOhK,UAAP;AACP;;AAED,YAAI4iB,UAAU9nB,OAAOsY,MAAP,CAAcjG,IAAItN,SAAlB,CAAd;AACA,aAAIhD,IAAI,CAAR,EAAWA,IAAI+lB,QAAQjmB,MAAvB,EAA+BE,GAA/B,EAAmC;AAC/BmD,yBAAa4iB,QAAQ/lB,CAAR,EAAW4Q,IAAX,CAAgBjT,MAAhB,EAAwBwP,QAAxB,CAAb;AACA,gBAAGhK,UAAH,EAAe,OAAOA,UAAP;AAClB;AACJ,KAZD,MAaI;AACAgK,mBAAWxP,MAAX,CADA,CACmB;;AAEnB,YAAIw2B,aAAal2B,OAAOO,IAAP,CAAY8R,IAAItN,SAAhB,CAAjB;AACA,aAAIhD,IAAI,CAAR,EAAWA,IAAIm0B,WAAWr0B,MAA1B,EAAkCE,GAAlC,EAAsC;AAClC,gBAAI2lB,aAAawO,WAAWn0B,CAAX,CAAjB;AACA,gBAAIsD,SAASgN,IAAItN,SAAJ,CAAc2iB,UAAd,CAAb;AACA,gBAAGA,eAAexY,QAAlB,EACI,OAAO7J,MAAP;AACP;AACJ;AACD,WAAO/E,SAAP;AACH,CA5BD;;AA8BA;AACA;AACAN,OAAOqE,cAAP,CAAsB,CAACpD,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAA7E,EAAwF,SAAxF,EAAmG;AAC/FqE,SAAK,eAAU;AACX,eAAO,CAAC,KAAKgyB,MAAb;AACH,KAH8F;;AAK/FhzB,SAAK,aAASiB,KAAT,EAAe;AAChB,aAAI,IAAIrC,IAAI,CAAZ,EAAeA,IAAI,KAAKq0B,UAAL,CAAgBv0B,MAAnC,EAA2CE,GAA3C,EAA+C;AAC3C,iBAAKq0B,UAAL,CAAgBr0B,CAAhB,EAAmBqC,QAAQ,MAAR,GAAiB,OAApC;AACH;AACJ;AAT8F,CAAnG;;AAYA;AACA,SAASiyB,UAAT,CAAoB9rB,KAApB,EAA0B;AACtBA,UAAMynB,eAAN;AACH;;AAEDhyB,OAAOqE,cAAP,CAAsB,CAACpD,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD1O,WAAnD,CAA+DC,UAA/D,CAA0EhE,SAAhG,EAA2G,UAA3G,EAAuH;AACnHqE,SAAK,eAAU;AACX,eAAO,KAAKoB,UAAL,CAAgB+wB,YAAhB,CAA6B,UAA7B,CAAP;AACH,KAHkH;;AAKnHnzB,SAAK,aAASiB,KAAT,EAAe;AAChB,YAAIA,KAAJ,EAAU;AACN,iBAAKmB,UAAL,CAAgBgxB,YAAhB,CAA6B,UAA7B,EAAyC,UAAzC;AACA,iBAAKhxB,UAAL,CAAgBgjB,gBAAhB,CAAiC,OAAjC,EAA0C8N,UAA1C,EAAsD,IAAtD;AACAvP,6BAAQS,QAAR,CAAiB,KAAKhiB,UAAL,CAAgBixB,aAAhB,CAA8BA,aAA/C,EAA8DhP,OAAOwO,WAArE;AACH,SAJD,MAKI;AACA,iBAAKzwB,UAAL,CAAgBkxB,eAAhB,CAAgC,UAAhC;AACA,iBAAKlxB,UAAL,CAAgButB,mBAAhB,CAAoC,OAApC,EAA6CuD,UAA7C,EAAyD,IAAzD;AACAvP,6BAAQiM,WAAR,CAAoB,KAAKxtB,UAAL,CAAgBixB,aAAhB,CAA8BA,aAAlD,EAAiEhP,OAAOwO,WAAxE;AACH;AACJ,KAhBkH;;AAkBnHU,gBAAY;AAlBuG,CAAvH;;AAqBA,CAACz1B,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAAvD,CAAiE62B,MAAjE,GAA0E,UAASj3B,MAAT,EAAiBwP,QAAjB,EAA2B9K,KAA3B,EAAiC;AACvG,QAAIc,aAAa,KAAKyN,IAAL,CAAUjT,MAAV,EAAkBwP,QAAlB,CAAjB;AACAhK,eAAW0xB,QAAX,GAAsB,CAACxyB,KAAvB;AACH,CAHD;;AAKA;;AAEApE,OAAOqE,cAAP,CAAsB,CAACpD,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD1O,WAAnD,CAA+DC,UAA/D,CAA0EhE,SAAhG,EAA2G,SAA3G,EAAsH;AAClHqE,SAAK,eAAU;AACX,eAAO,KAAK0yB,QAAL,CAActE,SAArB;AACH,KAHiH;;AAKlHpvB,SAAK,aAASiB,KAAT,EAAe;AAChB,YAAIA,KAAJ,EAAU;AACN,gBAAG,KAAKyyB,QAAL,KAAkBv2B,SAArB,EAAgC;AAC5B,qBAAKu2B,QAAL,GAAgB1D,KAAK,MAAL,EAAa,EAAC2D,OAAO,aAAR,EAAb,CAAhB;;AAEA;;;AAGA,oBAAIxoB,YAAY,KAAK/I,UAAL,CAAgBixB,aAAhB,CAA8BA,aAA9C;AACAloB,0BAAUyoB,SAAV,CAAoB9xB,GAApB,CAAwB,SAAxB;AACAqJ,0BAAUsC,WAAV,CAAsB,KAAKimB,QAA3B;AACH;AACD,iBAAKA,QAAL,CAActE,SAAd,GAA0BnuB,KAA1B;AACH;AACJ,KAnBiH;;AAqBlHsyB,gBAAY;AArBsG,CAAtH;;AAwBA,CAACz1B,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAA2BC,OAA1C,EAAmD5N,GAAnD,CAAuD7E,SAAvD,CAAiEk3B,UAAjE,GAA8E,UAASt3B,MAAT,EAAiBwP,QAAjB,EAA2B9K,KAA3B,EAAiC;AAC3G,QAAIc,aAAa,KAAKyN,IAAL,CAAUjT,MAAV,EAAkBwP,QAAlB,CAAjB;AACAhK,eAAW+xB,OAAX,GAAqB7yB,KAArB;AACH,CAHD,C;;;;;;;;;;;;;;;AC/JA;;;;;;;;AAEA,SAAS8yB,KAAT,CAAeC,IAAf,EAAqBj1B,QAArB,EAA8B;AAC1B4O,eAAW5O,QAAX,EAAqBi1B,IAArB;AACH;;AAED,IAAMC,gBAAgB,IAAIt0B,MAAMisB,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAtB;AACA,IAAMsI,gBAAgB,IAAIv0B,MAAM6H,oBAAV,CAA+B,EAAC9H,OAAO,QAAR,EAAkB0J,aAAa,IAA/B,EAAqCD,SAAS,GAA9C,EAAmDiS,KAAK,IAAIzb,MAAMw0B,aAAV,GAA0BC,IAA1B,CAA+B,oCAA/B,EAAqE,UAAShZ,GAAT,EAAa;AAC3LA,YAAIiZ,KAAJ,GAAYjZ,IAAIkZ,KAAJ,GAAY30B,MAAM40B,cAA9B;AACH,KAF4G,CAAxD,EAA/B,CAAtB;AAGA,IAAMC,WAAW,IAAI70B,MAAMkJ,IAAV,CAAeorB,aAAf,EAA8BC,aAA9B,CAAjB;;AAEA,IAAIhW,UAAU,IAAIve,MAAMqW,OAAV,EAAd;;IAEMye,Q;;;;;;;;;AAEF;;;;uCAIsBhJ,M,EAAQ1F,I,EAAK;AAC/B,gBAAI7E,MAAMsT,SAASjY,KAAT,EAAV;AACA2E,gBAAInW,QAAJ,CAAawQ,IAAb,CAAkBkQ,MAAlB;;AAEA,gBAAG1F,gBAAgBpmB,MAAMqW,OAAzB,EACIkL,IAAIV,KAAJ,CAAUjF,IAAV,CAAewK,IAAf,EADJ,KAGI7E,IAAIV,KAAJ,CAAUxgB,GAAV,CAAc+lB,IAAd,EAAoBA,IAApB,EAA0BA,IAA1B;;AAEJ,mBAAO7E,GAAP;AACH;;AAED;;;;;;iCAGgBiK,I,EAAK;AACjB,gBAAIjK,MAAMsT,SAASjY,KAAT,EAAV;;AAEA4O,iBAAKO,SAAL,CAAexN,OAAf;AACAgD,gBAAInW,QAAJ,CAAawQ,IAAb,CAAkB2C,OAAlB;AACAiN,iBAAK5I,OAAL,CAAarE,OAAb;AACAgD,gBAAIV,KAAJ,CAAUjF,IAAV,CAAe2C,OAAf;;AAEA,mBAAOgD,GAAP;AACH;;;;;;AAGL;;;;AAIA,IAAMwT,eAAe,MAAM,GAAN,GAAY,GAAjC;;AAEA;AACA,IAAI/hB,IAAJ;;AAEA;AACA,IAAIgiB,eAAe,IAAIrsB,GAAJ,EAAnB;;AAEA,IAAIssB,QAAQ,IAAIj1B,MAAMqW,OAAV,EAAZ;AAAA,IACI6e,OAAO,IAAIl1B,MAAMqW,OAAV,EADX;AAAA,IAEI8e,SAAS,IAAIn1B,MAAMqW,OAAV,EAFb;;IAIM+e,Q;;;;;;;;;AAEF;;;sCAGqBtM,M,EAAO;AACxB9V,mBAAO,IAAIhT,MAAM8e,QAAV,EAAP;AACA9L,iBAAKgW,IAAL,GAAY,eAAZ;AACAlkB,oBAAQE,GAAR,CAAYgO,KAAKgW,IAAL,GAAY,aAAxB;AACAhW,iBAAK0S,WAAL,GAAmB/a,OAAOC,gBAAP,GAA0B,EAA7C;AACAke,mBAAO3mB,GAAP,CAAW6Q,IAAX;AACH;;;;;AAID;;;;;;mCAMkBtU,C,EAAGC,C,EAAGyB,C,EAAGM,C,EAAG20B,C,EAAGC,C,EAAGv1B,K,EAAOw1B,Q,EAAUC,S,EAAWC,S,EAAU;AACtEP,iBAAK70B,GAAL,CAAS3B,CAAT,EAAYC,CAAZ,EAAeyB,CAAf;AACA+0B,mBAAO90B,GAAP,CAAWK,CAAX,EAAc20B,CAAd,EAAiBC,CAAjB;;AAEA;AACA,gBAAInuB,SAAS0tB,SAASjY,KAAT,EAAb;AACA5J,iBAAK7Q,GAAL,CAASgF,MAAT;;AAEAA,mBAAOiE,QAAP,CAAgBwQ,IAAhB,CAAqBsZ,IAArB;AACA/tB,mBAAO0Z,KAAP,CAAajF,IAAb,CAAkBuZ,MAAlB;;AAEA,gBAAGp1B,KAAH,EAAS;AACL;AACA,oBAAIiJ,WAAW7B,OAAO6B,QAAP,CAAgB4T,KAAhB,EAAf;AACAzV,uBAAO6B,QAAP,GAAkBA,QAAlB;AACAA,yBAASjJ,KAAT,CAAeqJ,MAAf,CAAsBrJ,SAAS,QAA/B;AACA,oBAAGy1B,cAAc,IAAjB,EAAsB;AAClBxsB,6BAASwsB,SAAT,GAAqB,IAArB;AACH,iBAFD,MAGI;AACAxsB,6BAASQ,OAAT,GAAmBnN,KAAK6jB,KAAL,CAAWngB,QAAQg1B,YAAnB,IAAmC,GAAtD;AACA/rB,6BAASS,WAAT,GAAuBT,SAASQ,OAAT,GAAmB,CAAnB,IAAwBR,SAASQ,OAAT,GAAmB,GAAlE;AACH;;AAED,oBAAG,CAACisB,SAAJ,EAAc;AACVzsB,6BAASyS,GAAT,GAAe,IAAf;AACH,iBAFD,MAGI;AACAzS,6BAASyS,GAAT,CAAaia,MAAb,CAAoBr1B,GAApB,CAAwB,EAAxB,EAA4B,EAA5B;AACH;AACJ;;AAED,gBAAIkK,MAAMvK,MAAM3D,IAAN,CAAWmO,YAAX,EAAV;AACAwqB,yBAAa30B,GAAb,CAAiBkK,GAAjB,EAAsBpD,MAAtB;;AAEA,gBAAGouB,WAAW,CAAd,EAAgB;AACZnB,sBAAMmB,QAAN,EAAgB,YAAU;AACtBH,6BAASO,iBAAT,CAA2BprB,GAA3B;AACH,iBAFD;AAGH;;AAED,mBAAOA,GAAP;AACH;;AAED;;;;;;0CAGyBA,G,EAAI;AACzB,gBAAI3N,SAASo4B,aAAa3zB,GAAb,CAAiBkJ,GAAjB,CAAb;AACA,gBAAG3N,kBAAkBoD,MAAM8e,QAAxB,IAAoCliB,OAAOksB,MAA9C,EAAqD;AACjDlsB,uBAAOksB,MAAP,CAAc/W,MAAd,CAAqBnV,MAArB;AACH;AACJ;;;mCAEgB;AAAA;AAAA;AAAA;;AAAA;AACb,qCAAeo4B,aAAav3B,IAAb,EAAf,8HAAmC;AAAA,wBAA3B8M,GAA2B;;AAC/B6qB,6BAASO,iBAAT,CAA2BprB,GAA3B;AACH;AAHY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIhB;;AAED;;;;kDACiC4Z,O,EAAQ;AACrC/T,kBAAMyN,GAAN,CAAU7K,IAAV,CAAe4iB,gBAAf,CAAgC5iB,IAAhC,CAAqCmR,OAArC,GAA+CA,OAA/C;AACH;;;4BAvEgB;AAAE,mBAAOnR,IAAP;AAAc;;;;;;AA0ErC;;;;IAIM5C,K;;;;;;;qCAEkBhR,Q,EAAS;AACzB,gBAAIy2B,UAAUzlB,MAAMyN,GAAN,CAAU7K,IAAV,CAAe8iB,cAAf,CAA8BC,UAA5C;AACAF,oBAAQn4B,OAAR,CAAgB,aAAK;AACjB,oBAAIsL,WAAWgtB,EAAE/sB,IAAF,CAAOD,QAAtB;AACA5J,yBAAS4J,QAAT;AACAA,yBAAS+lB,WAAT,GAAuB,IAAvB;AACH,aAJD;AAKH;;;4BAEoB;AACjB,mBAAOkH,kBAAP;AACH;;;;;;AAGL7lB,MAAM8lB,GAAN,GAAYpB,QAAZ;AACA1kB,MAAM+lB,GAAN,GAAYf,QAAZ;;AAEA;AACAhlB,MAAMgmB,GAAN;AACA;AACAhmB,MAAMyN,GAAN;;kBAEezN,K;;;;;;;;;;;;;;;;;AClLf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAM8N,eAAe,QAArB;;AAEA,IAAImY,YAAY,IAAIr2B,MAAMmiB,OAAV,GAAoBmU,aAApB,CAAkC,CAACj6B,KAAKC,EAAN,GAAW,CAA7C,CAAhB;AACA,IAAIi6B,cAAc,IAAIv2B,MAAMmiB,OAAV,EAAlB;;IAEMqU,gB;AACF,gCAAa;AAAA;;AACT,aAAKxjB,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;;AAEA;;;AAGA,aAAK2X,cAAL,GAAsB,EAAtB;AACH;;AAED;;;;;;;4BAGIjrB,S,EAAU;AACV,gBAAIkrB,gBAAgBC,wBAAcC,OAAd,CAAsBprB,SAAtB,CAApB;AACA,iBAAKwH,IAAL,CAAU7Q,GAAV,CAAcu0B,cAAc1jB,IAA5B;AACA,iBAAKyjB,cAAL,CAAoBv0B,IAApB,CAAyBw0B,aAAzB;AACH;;;gCAEM;AACH,iBAAI,IAAIz3B,IAAI,CAAZ,EAAeA,IAAI,KAAKw3B,cAAL,CAAoB13B,MAAvC,EAA+CE,GAA/C,EAAmD;AAC/C,oBAAI43B,KAAK,KAAKJ,cAAL,CAAoBx3B,CAApB,CAAT;AACA,qBAAK+T,IAAL,CAAUjB,MAAV,CAAiB8kB,GAAG7jB,IAApB;AACH;AACD,iBAAKyjB,cAAL,CAAoB13B,MAApB,GAA6B,CAA7B;AACH;;AAED;;;;;;6CAGqB+3B,mB,EAAoB;AACrC,iBAAI,IAAIC,SAAS,CAAjB,EAAoBA,SAAS,KAAKN,cAAL,CAAoB13B,MAAjD,EAAyDg4B,QAAzD,EAAkE;AAC9D,oBAAI1sB,UAAU,KAAKosB,cAAL,CAAoBM,MAApB,EAA4BvrB,SAA5B,CAAsCnB,OAApD;AACA,qBAAI,IAAI2sB,WAAW,CAAnB,EAAsBA,WAAW3sB,QAAQtL,MAAzC,EAAiDi4B,UAAjD,EAA4D;AACxD,wBAAG3sB,QAAQ2sB,QAAR,EAAkBzsB,GAAlB,KAA0BusB,mBAA7B,EAAiD;AAC7C,+BAAOzsB,QAAQ2sB,QAAR,CAAP;AACH;AACJ;AACJ;AACJ;;AAED;;;;;;kCAGUtrB,gB,EAAiB;AACvB,gBAAG,QAAOA,gBAAP,yCAAOA,gBAAP,OAA4BwS,YAA/B,EAA6CxS,mBAAmB,KAAKurB,oBAAL,CAA0BvrB,gBAA1B,CAAnB;AAC7C6qB,wBAAYW,QAAZ;AACAX,wBAAYY,eAAZ,CAA4BzrB,iBAAiBN,QAAjB,CAA0B1M,CAA1B,GAA8BgN,iBAAiB5F,UAAjB,CAA4BwF,KAA5B,GAAoC,CAA9F,EAAiGI,iBAAiBN,QAAjB,CAA0BzM,CAA3H,EAA8H+M,iBAAiBN,QAAjB,CAA0BhL,CAA1B,GAA8BsL,iBAAiB5F,UAAjB,CAA4B/G,MAA5B,GAAqC,CAAjM;AACA;AACA,mBAAOw3B,WAAP;AACH;;;;;;kBAGUC,gB;;;;;;;;;;;;;;;;;AC/Df;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEMY,Y;AACF;AACA,sBAAYnuB,IAAZ,EAAiB;AAAA;;AACb,SAAKA,IAAL,GAAYA,IAAZ;AACH,C;;AAGL;;;;;;AAIA,SAASouB,oBAAT,CAA8B7rB,SAA9B,EAAwC;AACpC;;;AAGA,QAAI8rB,QAAQ,IAAI3uB,GAAJ,EAAZ;;AAEA6C,cAAUnB,OAAV,CAAkB3M,OAAlB,CAA0B,cAAM;AAC5B,YAAIuL,OAAOL,gBAAM2uB,UAAN,EAAX;;AAEA,YAAI7L,SAASmL,GAAG/wB,UAAH,CAAc6mB,IAA3B;AACA1jB,aAAK4X,KAAL,CAAWjF,IAAX,CAAgB8P,MAAhB;AACAziB,aAAKmC,QAAL,CAAczM,CAAd,IAAmB+sB,OAAO/sB,CAAP,GAAW,CAA9B;;AAEAsK,aAAKD,QAAL,GAAgBC,KAAKD,QAAL,CAAc4T,KAAd,EAAhB;AACA3T,aAAKD,QAAL,CAAcjJ,KAAd,CAAoBqJ,MAApB,CAA2B,QAA3B;AACAH,aAAKD,QAAL,CAAcS,WAAd,GAA4B,IAA5B;AACAR,aAAKD,QAAL,CAAcQ,OAAd,GAAwB,EAAxB;AACAP,aAAKD,QAAL,CAAc+kB,IAAd,GAAqB/tB,MAAMw3B,QAA3B;AACAvuB,aAAKD,QAAL,CAAcyuB,aAAd,GAA8B,IAA9B;AACAxuB,aAAKD,QAAL,CAAc0uB,mBAAd,GAAoC,CAApC;AACAzuB,aAAKD,QAAL,CAAc2uB,kBAAd,GAAmC,CAAnC;;AAEAL,cAAMj3B,GAAN,CAAUw2B,EAAV,EAAc,IAAIO,YAAJ,CAAiBnuB,IAAjB,CAAd;AACH,KAjBD;;AAmBA,WAAOquB,KAAP;AACH;;AAED,IAAIhO,WAAW,IAAItpB,MAAMqW,OAAV,EAAf;;AAEA;AACA,IAAIuhB,QAAQ,IAAIC,OAAJ,EAAZ;;IAEMlB,a;AACF;;;;;AAKA,2BAAYnrB,SAAZ,EAAuBwH,IAAvB,EAA4B;AAAA;;AAExB;AACA,aAAK8kB,kBAAL,GAA0B,IAAI93B,MAAMse,IAAV,EAA1B;AACA,aAAKwZ,kBAAL,CAAwBpV,aAAxB,CAAsC1P,IAAtC;;AAEA4kB,cAAMv3B,GAAN,CAAUmL,SAAV,EAAqB,IAArB;;AAEA,aAAKA,SAAL,GAAiBA,SAAjB;AACA,aAAKwH,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;AACA,aAAK9L,IAAL,CAAU7Q,GAAV,CAAc6Q,IAAd;;AAEApK,wBAAMmvB,mBAAN,CAA0B,KAAK/kB,IAA/B;AACApK,wBAAMwW,cAAN,CAAqB,YAArB,EAAmCC,KAAnC,CAAyC,KAAKrM,IAA9C;;AAEA,aAAKglB,cAAL,GAAsBX,qBAAqB7rB,SAArB,CAAtB;AAfwB;AAAA;AAAA;;AAAA;AAgBxB,iCAAqB,KAAKwsB,cAA1B,8HAAyC;AAAA;AAAA,oBAAhCnB,EAAgC;AAAA,oBAA5BtV,GAA4B;;AACrCA,oBAAItY,IAAJ,CAASmC,QAAT,CAAkBjJ,GAAlB,CAAsB00B,GAAGzrB,QAAzB;AACA,qBAAK4H,IAAL,CAAU7Q,GAAV,CAAcof,IAAItY,IAAlB;AACH;AAnBuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqB3B;;AAED;AACA;;;;;;;;AAQA;;;;;;;;2CAImBkb,O,EAASjF,O,EAAQ;;AAEhC,gBAAGiF,WAAW,KAAK8T,YAAL,KAAsBz6B,SAApC,EAA8C;;AAE1C,oBAAG0hB,YAAY1hB,SAAf,EAA0B0hB,UAAU,IAAIlf,MAAMqW,OAAV,CAAkB,CAAlB,EAAqB,GAArB,EAA0B,CAA1B,CAAV;;AAE1B,qBAAKyhB,kBAAL,CAAwBlV,OAAxB,CAAgC0G,QAAhC;;AAEA,oBAAI4O,YAAY,IAAIl4B,MAAMm4B,WAAV,CAAsB7O,SAAS5qB,CAAT,GAAawgB,QAAQxgB,CAAR,GAAY,CAA/C,EAAkDwgB,QAAQvgB,CAA1D,EAA6D2qB,SAASlpB,CAAT,GAAa8e,QAAQ9e,CAAR,GAAY,CAAtF,EAAyF,CAAzF,EAA4F,CAA5F,EAA+F,CAA/F,CAAhB;AACA,oBAAIg4B,gBAAgB,IAAIxvB,gBAAMyvB,wBAAV,CAAmCzvB,gBAAMwW,cAAN,CAAqB,YAArB,EAAmCC,KAAnC,CAAyC,QAAzC,CAAnC,CAApB;AACA,qBAAK4Y,YAAL,GAAoB,IAAIj4B,MAAMkJ,IAAV,CAAegvB,SAAf,EAA0BE,aAA1B,CAApB;AACAxvB,gCAAM0vB,aAAN,CAAoB,KAAKL,YAAzB;;AAEA,qBAAKA,YAAL,CAAkB7sB,QAAlB,CAA2BzM,CAA3B,GAA+B,IAA/B;AACA,qBAAKqU,IAAL,CAAU7Q,GAAV,CAAc,KAAK81B,YAAnB;AACH;;AAED,iBAAKA,YAAL,CAAkB9T,OAAlB,GAA4BA,OAA5B;AACH;;AAED;;;;;;;gCAIe3Y,S,EAAU;AACrB,gBAAIwH,OAAO4kB,MAAMv2B,GAAN,CAAUmK,SAAV,CAAX;AACA,gBAAI,CAAEwH,IAAN,EAAY;AACR,oBAAIulB,SAASlB,qBAAqB7rB,SAArB,CAAb;AACA,oBAAIwH,QAAO,IAAIhT,MAAM8e,QAAV,EAAX;AAFQ;AAAA;AAAA;;AAAA;AAGR,0CAAsByZ,MAAtB,mIAA6B;AAAA;AAAA,4BAApB1B,EAAoB;AAAA,4BAAhB5tB,IAAgB;;AACzBA,6BAAKmC,QAAL,CAAcjJ,GAAd,CAAkB00B,GAAGzrB,QAArB;AACA4H,8BAAK7Q,GAAL,CAAS8G,IAAT;AACH;AANO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQR+J,wBAAO,IAAI2jB,aAAJ,CAAkBnrB,SAAlB,EAA6BwH,KAA7B,CAAP;AACA4kB,sBAAMv3B,GAAN,CAAUmL,SAAV,EAAqBwH,KAArB;AACAzO,iCAAOY,IAAP,CAAY,qBAAZ,EAAmCqG,SAAnC;AACH;AACD,mBAAOwH,IAAP;AACH;;;;;;kBAGU2jB,a;;;;;;;;;;;;;;;;;ACpIf,IAAM6B,OAAO1sB,OAAO,KAAP,CAAb;AAAA,IACI2sB,SAAS3sB,OAAO,OAAP,CADb;;AAGA;;;;IAGM4sB,I;AACF;;;;AAIA,kBAAYC,KAAZ,EAAmBC,OAAnB,EAA2B;AAAA;;AACvB,aAAK/C,OAAL,GAAe,EAAf;;AAEA,aAAK2C,IAAL,IAAaG,KAAb;AACA,aAAKF,MAAL,IAAeG,OAAf;AACH;;AAED;;;;;;;kCAGgB;AACZ,gBAAIh8B,MAAJ;;AADY,8CAALsH,IAAK;AAALA,oBAAK;AAAA;;AAGZ,gBAAG,KAAK2xB,OAAL,CAAa92B,MAAb,KAAwB,CAA3B,EAA6B;AACzBnC,yBAAS,KAAK47B,IAAL,cAAct0B,IAAd,CAAT;AACH,aAFD,MAGI;AACAtH,yBAAS,KAAKi5B,OAAL,CAAa,KAAKA,OAAL,CAAa92B,MAAb,GAAsB,CAAnC,CAAT;AACA,kBAAE,KAAK82B,OAAL,CAAa92B,MAAf;AACH;;AAED,mBAAO,KAAK05B,MAAL,eAAa77B,MAAb,SAAwBsH,IAAxB,EAAP;AACH;;AAED;;;;;;+BAGOtH,M,EAAO;AACV,iBAAKi5B,OAAL,CAAa,KAAKA,OAAL,CAAa92B,MAA1B,IAAoCnC,MAApC;AACH;;;;;;kBAGU87B,I;;;;;;;;;;;;;;;AC5Cf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMhzB,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMC,aAAa,QAAnB;;AAEA,IAAMizB,aAAa/sB,OAAO,WAAP,CAAnB;;AAEA,IAAMvE,UAAU;AACZwU,YAAQ,QADI;AAEZ+c,WAAO,OAFK;AAGZrnB,YAAQ,QAHI;AAIZG,YAAQ,QAJI;AAKZG,YAAQ;AALI,CAAhB;;AAQA;;;;;AAKA;;;;IAGMP,U;;;AAEF;;;AAGA,wBAAY1P,MAAZ,EAAmB;AAAA;;AAAA;;AAGf,cAAKA,MAAL,GAAcA,MAAd;AAHe;AAIlB;;AAED;;;;;8BACMR,K,EAAM;AACR;AACA,gBAAIuc,MAAMvc,KAAV;;AAEA,iBAAKu3B,UAAL,IAAmBhb,IAAIvM,MAAJ,CAAWK,SAA9B;AACH;;AAED;;;;yCACgB;AACZ,mBAAO,IAAI9L,kBAAJ,EAAP;AACH;;AAED;;;;iCACS6b,Q,EAAS;AACd;AACA,gBAAI/P,YAAY,KAAKknB,UAAL,CAAhB;AACA,gBAAI/xB,QAAQ6K,UAAUonB,QAAV,CAAmBrX,QAAnB,CAAZ;AACA,mBAAO5a,KAAP;AACH;;AAED;;;;qCACY;AACR;AACA,gBAAI6K,YAAY,KAAKknB,UAAL,CAAhB;AACA,gBAAIvjB,UAAU,EAAd;AACA3D,sBAAU4D,MAAV,CAAiB7X,OAAjB,CAAyB;AAAA,uBAAS4X,QAAQpT,IAAR,CAAaZ,MAAMwF,KAAnB,CAAT;AAAA,aAAzB;;AAEA,mBAAOwO,OAAP;AACH;;AAED;;;;;;;6BAIKxO,K,EAAM;AACP,gBAAGjB,mBAASuB,MAAT,CAAgBN,KAAhB,CAAH,EAA0B;AACtB,oBAAG;AACC,yBAAK8M,QAAL,CAAcrM,QAAQwU,MAAtB,EAA8BjV,KAA9B;AACA,2BAAO,IAAP;AACH,iBAHD,CAIA,OAAM2M,KAAN,EAAY;AACRlP,qCAAOY,IAAP,CAAY,wCAAZ,EAAsDsO,KAAtD,EAA6D3M,KAA7D;AACH;;AAED,uBAAO,KAAP;AACH;;AAEDvC,6BAAOY,IAAP,CAAY,mDAAZ,EAAiE2B,KAAjE;AACA,mBAAO,KAAP;AACH;;AAED;;;;+BACM;AACF,iBAAK8M,QAAL,CAAcrM,QAAQuxB,KAAtB;AACH;;AAED;;;;;;;4BAIIhyB,K,EAAM;AACN,gBAAGjB,mBAASuB,MAAT,CAAgBN,KAAhB,CAAH,EAA0B;;AAEtB,oBAAIf,qBAAWizB,QAAX,CAAoBlyB,MAAMhB,UAAN,CAAiBmzB,GAAjB,EAApB,MAAgD,KAApD,EAA2D;AACvD10B,qCAAOY,IAAP,CAAY,uDAAZ,EAAqE2B,KAArE;AACA,2BAAO,KAAP;AACH;;AAED,oBAAG;AACC,wBAAIoyB,gBAAgBpyB,MAAMI,KAAN,EAApB;AACA,wBAAIqD,MAAM2uB,cAAcpiB,MAAd,EAAV;;AAEA,yBAAKlD,QAAL,CAAcrM,QAAQkK,MAAtB,EAA8BynB,aAA9B;AACA,2BAAO3uB,GAAP;AACH,iBAND,CAOA,OAAMkJ,KAAN,EAAY;AACRlP,qCAAOY,IAAP,CAAY,uCAAZ,EAAqDsO,KAArD,EAA4D3M,KAA5D;AACH;;AAED,uBAAO,KAAP;AACH;;AAEDvC,6BAAOY,IAAP,CAAY,kDAAZ,EAAgE2B,KAAhE;AACA,mBAAO,KAAP;AACH;;AAED;;;;;;;;+BAKO4a,Q,EAAUhQ,Q,EAAS;AACtB,gBAAIynB,WAAW,KAAKJ,QAAL,CAAcrX,QAAd,CAAf;AACA,gBAAG,CAACyX,QAAJ,EAAa;AACT50B,iCAAOY,IAAP,CAAY,yCAAZ,EAAuDuc,QAAvD;AACA,uBAAO,KAAP;AACH;;AAED,gBAAG7b,mBAASuB,MAAT,CAAgBsK,QAAhB,CAAH,EAA6B;;AAEzB,oBAAI3L,qBAAWizB,QAAX,CAAoBtnB,SAAS5L,UAAT,CAAoBmzB,GAApB,EAApB,MAAmD,KAAvD,EAA8D;AAC1D10B,qCAAOY,IAAP,CAAY,0DAAZ,EAAwEuM,QAAxE;AACA,2BAAO,KAAP;AACH;;AAED,oBAAG;AACCynB,6BAASpyB,IAAT,CAAc2K,QAAd;;AAEA,yBAAKkC,QAAL,CAAcrM,QAAQqK,MAAtB,EAA8BunB,QAA9B;AACA,2BAAO,IAAP;AACH,iBALD,CAMA,OAAM1lB,KAAN,EAAY;AACRlP,qCAAOY,IAAP,CAAY,0CAAZ,EAAwDsO,KAAxD,EAA+D/B,QAA/D;AACH;;AAED,uBAAO,KAAP;AACH;;AAEDnN,6BAAOY,IAAP,CAAY,qDAAZ,EAAmEuM,QAAnE;AACA,mBAAO,KAAP;AACH;;AAED;;;;;;;+BAIOgQ,Q,EAAS;;AAEZ;AACA,gBAAI/P,YAAY,KAAKknB,UAAL,CAAhB;AACA,gBAAIM,WAAWxnB,UAAUonB,QAAV,CAAmBrX,QAAnB,CAAf;;AAEA,gBAAG,CAACyX,QAAJ,EAAa;AACT50B,iCAAOY,IAAP,CAAY,yCAAZ,EAAuDuc,QAAvD;AACA,uBAAO,KAAP;AACH;;AAED,iBAAK9N,QAAL,CAAcrM,QAAQwK,MAAtB,EAA8BonB,QAA9B;AACA,mBAAO,IAAP;AACH;;;4BAEmB;AAChB,mBAAO5xB,OAAP;AACH;;;;EA3JoByE,yB;;AA8JzBwF,WAAW3L,QAAX,GAAsBA,kBAAtB;;kBAEe2L,U;;;;;;;;;;;;;;;AC5Lf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;;;;;AAMA,IAAMjK,UAAU;AACZ2K,qBAAiB,iBADL;AAEZknB,uBAAmB,mBAFP;AAGZC,qBAAiB;AAHL,CAAhB;;AAMA;;;;;IAKMpnB,iB;;;AACF;;;AAGA,+BAAYnQ,MAAZ,EAAmB;AAAA;;AAAA;;AAGf,cAAKA,MAAL,GAAcA,MAAd;;AAEA,cAAKqQ,YAAL,GAAoB,IAAIwC,sBAAJ,EAApB;AALe;AAMlB;;AAED;;;;;8BACMrT,K,EAAM;AACR;AACA,gBAAIuc,MAAMvc,KAAV;AACH;;AAED;;;;;;;6BAIKg4B,U,EAAW;;AAEZ,gBAAIv3B,aAAJ;AACA,gBAAG;AACCA,uBAAO,OAAOu3B,UAAP,KAAsB,QAAtB,GAAiCx7B,KAAKC,KAAL,CAAWu7B,UAAX,CAAjC,GAA0DA,UAAjE;AACH,aAFD,CAGA,OAAM7lB,KAAN,EAAY;AACRlP,iCAAOY,IAAP,CAAY,oDAAZ,EAAkEsO,KAAlE,EAAyE6lB,UAAzE;AACA,uBAAO,KAAP;AACH;;AAED,gBAAGv3B,KAAKyJ,SAAR,EAAkB;AACd,oBAAIA,kBAAJ;AACA,oBAAG;AACCA,gCAAYpB,oBAAUuB,QAAV,CAAmB5J,KAAKyJ,SAAxB,CAAZ;AACH,iBAFD,CAGA,OAAMiI,KAAN,EAAY;AACRlP,qCAAOY,IAAP,CAAY,8DAAZ,EAA4EsO,KAA5E,EAAmF1R,KAAKyJ,SAAxF;AACA,2BAAO,KAAP;AACH;;AAED,oBAAG,CAACA,UAAUjB,GAAd,EAAmBiB,UAAUsL,MAAV;AACnB,oBAAIvM,MAAMiB,UAAUjB,GAApB;;AAEA,oBAAIgvB,cAAJ;AACA,oBAAGx3B,KAAKiR,IAAR,EAAa;AACT,wBAAG;AACCumB,gCAAQ3wB,gBAAM+C,QAAN,CAAe5J,KAAKiR,IAApB,CAAR;AACH,qBAFD,CAGA,OAAMS,KAAN,EAAY;AACRlP,yCAAOY,IAAP,CAAY,yDAAZ,EAAuEsO,KAAvE,EAA8E1R,KAAKiR,IAAnF;AACA,+BAAO,KAAP;AACH;AACJ;;AAED,oBAAGumB,KAAH,EAAS;AACL,wBAAI7C,gBAAgB,IAAIC,uBAAJ,CAAkBnrB,SAAlB,EAA6B+tB,KAA7B,CAApB;AACA,wBAAIhiB,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;AACA,wBAAI2H,UAAU,KAAK3H,KAAnB;AACA,wBAAIiiB,YAAY,IAAIjiB,KAApB;AACAmf,kCAAc+C,kBAAd,CAAiC,IAAjC,EAAuC,IAAIz5B,MAAMqW,OAAV,CAAkB6I,OAAlB,EAA2Bsa,SAA3B,EAAsCta,OAAtC,CAAvC;AACH;;AAED,qBAAK/M,YAAL,CAAkBC,YAAlB,CAA+B5G,SAA/B;;AAEA,qBAAKoI,QAAL,CAAcrM,QAAQ2K,eAAtB,EAAuC1G,SAAvC;AACA,uBAAOjB,GAAP;AACH;;AAED,mBAAO,KAAP;AACH;;;4BAEmB;AAChB,mBAAOhD,OAAP;AACH;;;;EA5E2ByE,yB;;kBAgFjBiG,iB;;;;;;;;;;;;;;;ACxGf;;;;AACA;;;;;;;;;;;;AAEA;;;AAGA;;;IAGMynB,W;AACF;AACA,qBAAYnvB,GAAZ,EAAgB;AAAA;;AACZ,SAAKA,GAAL,GAAWA,GAAX;AACH,C;;IAGCovB,W;AACF;AACA,qBAAYpvB,GAAZ,EAAiBub,KAAjB,EAAwB7f,QAAxB,EAAiC;AAAA;;AAC7B,SAAKsE,GAAL,GAAWA,GAAX;AACA,SAAKub,KAAL,GAAaA,KAAb;AACA,SAAK7f,QAAL,GAAgBA,YAAY,CAA5B;AACH,C;;IAGCmO,a,GACF,yBAAa;AAAA;;AACT;AACA,SAAKwlB,aAAL,GAAqB,EAArB;AACA;AACA,SAAKrlB,MAAL,GAAc,EAAd;AACA;AACA,SAAKC,QAAL,GAAgB,EAAhB;;AAEA,SAAKqlB,WAAL,GAAmB,CAAnB;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA;AACA,SAAKC,aAAL,GAAqB,CAArB;AACH,C;;AAGL;;;AACA,SAASC,kBAAT,CAA4B5mB,aAA5B,EAA0C;AACtC,QAAIxQ,SAAS,IAAIwR,aAAJ,EAAb;;AAEA;AACA,aAAS6lB,QAAT,CAAkBC,YAAlB,EAA+B;AAC3B,aAAI,IAAIj7B,IAAI,CAAZ,EAAeA,IAAI2D,OAAOg3B,aAAP,CAAqB76B,MAAxC,EAAgDE,GAAhD,EAAoD;AAChD,gBAAG2D,OAAOg3B,aAAP,CAAqB36B,CAArB,EAAwBsL,GAAxB,KAAgC2vB,YAAnC,EAAgD;AAC5C,uBAAOt3B,OAAOg3B,aAAP,CAAqB36B,CAArB,CAAP;AACH;AACJ;;AAED,YAAIk7B,KAAK,IAAIT,WAAJ,CAAgBQ,YAAhB,CAAT;AACAt3B,eAAOg3B,aAAP,CAAqB13B,IAArB,CAA0Bi4B,EAA1B;AACA,eAAOA,EAAP;AACH;;AAED,QAAIN,cAAc,CAAlB;AAAA,QACIC,gBAAgB,CADpB;;AAGA;AACA,aAASM,SAAT,CAAmBC,WAAnB,EAAgC74B,IAAhC,EAAqC;AACjC,YAAI84B,UAAU,IAAd;AACA,aAAI,IAAIr7B,IAAI,CAAZ,EAAeA,IAAIuC,KAAKzC,MAAxB,EAAgCE,GAAhC,EAAoC;AAChC,gBAAGuC,KAAKvC,CAAL,EAAQsL,GAAR,KAAgB8vB,YAAY9vB,GAA/B,EAAmC;AAC/B+vB,0BAAU,KAAV;AACA94B,qBAAKvC,CAAL,EAAQgH,QAAR;AACA;AACH;AACJ;;AAED,YAAGq0B,OAAH,EAAW;AACPD,wBAAYp0B,QAAZ,GAAuB,CAAvB;AACAzE,iBAAKU,IAAL,CAAUm4B,WAAV;AACH;AACJ;;AAEDjnB,kBAAcmB,MAAd,CAAqB7W,OAArB,CAA6B,aAAK;AAC9B,YAAI6M,MAAM2nB,EAAEprB,KAAF,CAAQyD,GAAlB;AACA,YAAIub,QAAQmU,SAAS/H,EAAExmB,gBAAF,CAAmBF,SAAnB,CAA6BjB,GAAtC,CAAZ;AACA6vB,kBAAU,IAAIT,WAAJ,CAAgBpvB,GAAhB,EAAqBub,KAArB,CAAV,EAAuCljB,OAAO2R,MAA9C;AACAslB;AACH,KALD;;AAOAzmB,kBAAcoB,QAAd,CAAuB9W,OAAvB,CAA+B,aAAK;AAChC,YAAI6M,MAAM2nB,EAAEprB,KAAF,CAAQyD,GAAlB;AACA,YAAIub,QAAQ,IAAZ;AACA,YAAI3R,mBAAmB+d,EAAE/d,gBAAzB;AACAvR,eAAO4R,QAAP,CAAgBtS,IAAhB,CAAqB,IAAIy3B,WAAJ,CAAgBpvB,GAAhB,EAAqBub,KAArB,EAA4B3R,gBAA5B,CAArB;AACA2lB,yBAAiB3lB,gBAAjB;AACH,KAND;;AAQAvR,WAAOi3B,WAAP,GAAqBA,WAArB;AACAj3B,WAAOk3B,aAAP,GAAuBA,aAAvB;AACAl3B,WAAOm3B,aAAP,GAAuB3mB,cAAckB,OAArC;;AAEA,WAAO1R,MAAP;AACH;;AAED,IAAM2E,UAAU;AACZ+K,kBAAc,cADF;AAEZgB,YAAQ,QAFI;AAGZI,YAAQ;AAHI,CAAhB;;IAMMrB,e;;;AAEF,+BAAa;AAAA;;AAAA;AAGZ;;AAED;;;;;8BACMvQ,M,EAAO;AACT,iBAAK8R,QAAL,CAAcrM,QAAQ+K,YAAtB,EAAoCxQ,MAApC;AACH;;AAED;;;;kCACgB;AACZ,gBAAIR,wDAAJ;AACA,oBAAOA,KAAP;AACI,qBAAKiG,QAAQ+L,MAAb;AACI,wBAAIF,gEAAJ;AACA,wBAAIxQ,SAASo3B,mBAAmB5mB,aAAnB,CAAb;AACA,yBAAKQ,QAAL,CAAcrM,QAAQ+L,MAAtB,EAA8B1Q,MAA9B;AACA;AACJ,qBAAK2E,QAAQmM,MAAb;AACI,wBAAID,wDAAJ;AACA,yBAAKG,QAAL,CAAcrM,QAAQmM,MAAtB,EAA8BD,KAA9B;AACA;AATR;AAWH;;;4BAEmB;AAChB,mBAAOlM,OAAP;AACH;;;;EA9ByByE,yB;;kBAiCfqG,e;;;;;;;;;;;;;;;;AC3If;;;;;;AACAsK,OAAO4d,aAAP,GAAuBA,uBAAvB,C;;;;;;;;;;;;;;;;ACDA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;;;;;AAMA;;;AAGA,IAAM9lB,gBAAgB;AACrBpG,QAAO;AADc,CAAtB;;AAIA,IAAMmsB,QAAQ;AACbx6B,QAAOA,KADM;AAEba,MAAM1C,OAAO0C,GAAP,IAAc,mBAAA2O,CAAQ,CAAR,EAAgDC,OAFvD;AAGbnI,WAAU,mBAAAkI,CAAQ,CAAR,EAAoCC,OAHjC;AAIb9S,QAAO,mBAAA6S,CAAQ,CAAR,EAAiCC,OAJ3B;AAKbW,QAAO,mBAAAZ,CAAQ,EAAR,EAA6BC,OALvB;AAMblB,SAAQ,mBAAAiB,CAAQ,CAAR,EAAyCC;AANpC,CAAd;;AASA;AACA,SAASgrB,QAAT,CAAkBC,MAAlB,EAAyB;AACxB,KAAGA,kBAAkBH,aAArB,EAAmC;AAClC,MAAII,KAAKD,MAAT;AACA/d,SAAOge,EAAP,GAAYA,EAAZ;AACAJ,gBAAcC,KAAd,CAAoBpqB,KAApB,CAA0BgmB,GAA1B,GAAgCuE,EAAhC;AACA,MAAI74B,SAAS64B,GAAG74B,MAAhB;AACA,MAAGA,OAAOuM,KAAV,EAAiB;AAChB9J,oBAAOgB,MAAP,GAAgB,IAAhB;AACAhB,oBAAOq2B,SAAP,GAAmB,IAAnB;AACAr2B,oBAAOs2B,cAAP,GAAwB,IAAxB;AACA;;AAED;AACA;AACA;;AAED,KAAGH,kBAAkB3pB,aAArB,EAAyB;AACxB,MAAM2B,aAAa,mBAAAlD,CAAQ,EAAR,EAAiCC,OAApD;AACA,MAAIoO,MAAM6c,MAAV;AACAH,gBAAcC,KAAd,CAAoBpqB,KAApB,CAA0ByN,GAA1B,GAAgCA,GAAhC;AACAA,MAAIpL,UAAJ,CAAeqoB,gBAAf,CAAgCpoB,WAAWnL,OAAX,CAAmByP,IAAnD,EAAyD,YAAU;AAClEujB,iBAAcC,KAAd,CAAoBpqB,KAApB,CAA0B+lB,GAA1B,CAA8B4E,aAA9B,CAA4Cld,IAAIpL,UAAJ,CAAegF,eAAf,CAA+BwC,KAA3E;AACA,GAFD;AAGA;AACD;;AAED;AACA,SAAS+gB,IAAT,CAAcL,EAAd,EAAiB,CAEhB;;AAED,IAAMpzB,UAAU;AACf0N,QAAO;AADQ,CAAhB;;IAIMslB,a;;;AACL;;;;;AAKA,wBAAavpB,YAAb,EAA2BlP,MAA3B,EAAoC;AAAA;;AAAA;;AAGnC,MAAImO,aAAJ;;AAEA,QAAKnO,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;AACAgmB;;AAEA,QAAKxpB,EAAL,GAAU,IAAI2M,YAAJ,CAAO,MAAK9b,MAAL,CAAYm5B,QAAnB,CAAV;;AAEA;AACA,MAAIC,mBAAmB,EAACjqB,IAAI,MAAKA,EAAV,EAAvB;;AAEA;AACA,QAAKC,UAAL,GAAkB,IAAIM,oBAAJ,CAAe0pB,gBAAf,CAAlB;;AAEA;AACA,MAAIC,0BAA0B,EAAClqB,IAAI,MAAKA,EAAV,EAA9B;;AAEA;AACA,QAAKE,iBAAL,GAAyB,IAAIc,2BAAJ,CAAsBkpB,uBAAtB,CAAzB;;AAEA;AACA,QAAK7pB,MAAL,GAAc,IAAIe,yBAAJ,EAAd;;AAEA;AACA,MAAI+oB,YAAY,EAACnqB,IAAI,MAAKA,EAAV,EAAcC,YAAY,MAAKA,UAA/B,EAA2CC,mBAAmB,MAAKA,iBAAnE,EAAsFC,iBAAiB,MAAKE,MAA5G,EAAhB;AACA,MAAIuM,MAAM,IAAI9M,aAAJ,CAAQC,YAAR,EAAsBoqB,SAAtB,CAAV;AACCvd,MAAInW,EAAJ,CAAOqJ,cAAIxJ,OAAJ,CAAYuJ,KAAnB,EAA0B,YAAU;AACnCb,SAAM2D,QAAN,CAAerM,QAAQ0N,KAAvB;AACA,GAFD;;AAIDwlB,WAAS5c,GAAT;;AAEA,MAAG,MAAK/b,MAAL,CAAYuM,KAAf,EAAqB;AACpB2sB;AACA;AApCkC;AAqCnC;;AAED;;;;;;;;sCAI4B;AAC3B,OAAIK,QAAQC,uBAAaC,YAAb,EAAZ;;AAEA,UAAO,IAAI1hB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,QAAGshB,KAAH,EAAS;AACRvhB;AACA,KAFD,MAGK;AACJ,SAAItV,UAAU,sBAAd;AACAuV,YAAOvV,OAAP;AACA;AACD,IARM,CAAP;AASA;;;sBAEmB;AACnB,UAAO+C,OAAP;AACA;;;sBAEiB;AACjB,UAAOizB,KAAP;AACA;;;;EArE0BxuB,yB;;AAyE5BuuB,cAAc3c,EAAd,GAAmBA,YAAnB;AACA2c,cAAc/oB,UAAd,GAA2BA,oBAA3B;AACA+oB,cAActoB,iBAAd,GAAkCA,2BAAlC;AACAsoB,cAAchpB,MAAd,GAAuBc,yBAAvB;;kBAEekoB,a;;;;;;;;;;;;;;;;;;ICjJTe,Y;AACF,0BAAc;AAAA;AAEb;;;;mCAEoB;AACjB,UAAIE,SAAS94B,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,UAAI84B,KAAKD,OAAOnN,UAAP,CAAkB,OAAlB,KAA8BmN,OAAOnN,UAAP,CAAkB,oBAAlB,CAAvC;AACA,aAAOoN,MAAMA,cAAcC,qBAA3B;AACH;;;;;;kBAGUJ,Y;;;;;;;;;;;;;;;ACbf;;;;AACA;;;;;;;;AAEA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;AAaC;;;;;;AAMD,IAAM51B,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMg2B,oBAAoB,6BAA6BjvB,KAA7B,CAAmC,EAAnC,EAAuCkvB,MAAvC,CAA8C,CAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,CAA9C,CAA1B;;IAEMpjB,K;;AAEF;;;;AAIA,mBAAaqjB,YAAb,EAA0B;AAAA;;AACtB,aAAK/T,OAAL,GAAe,IAAf;;AAEA,YAAI7X,QAAQ,IAAZ;AACA/S,eAAOqE,cAAP,CAAsB,IAAtB,EAA4B,QAA5B,EAAsC;AAClCF,iBAAK,eAAU;AACX,uBAAO4O,MAAM6rB,OAAb;AACH,aAHiC;AAIlCz7B,iBAAK,aAASoY,MAAT,EAAgB;AACjBxI,sBAAM6rB,OAAN,GAAgBrjB,MAAhB;AACAxI,sBAAMgI,GAAN,GAAY,EAAC5L,KAAK,EAAN,EAAUC,KAAKmM,OAAOR,GAAtB,EAA2B3a,QAAQmb,OAAOR,GAA1C,EAAZ;AACH;AAPiC,SAAtC;;AAUA,aAAK4jB,YAAL,GAAoBA,YAApB;;AAEA,aAAKE,MAAL,GAAc,EAACr9B,GAAE,CAAH,EAAMC,GAAE,CAAR,EAAd;AACA,aAAKq9B,WAAL,GAAmB,IAAIh8B,MAAMi8B,OAAV,EAAnB;AACA,aAAKC,aAAL,GAAqB,IAAIl8B,MAAMi8B,OAAV,EAArB;AACA,aAAKE,UAAL,GAAkB,IAAIn8B,MAAMi8B,OAAV,EAAlB;AACA,aAAKG,iBAAL,GAAyB,CAAzB;AACA;;;AAGA,aAAKvjB,MAAL,GAAc,EAAd;AACA,aAAKwjB,aAAL;;AAEA,aAAKhU,SAAL,GAAiB,IAAIroB,MAAMs8B,SAAV,EAAjB;;AAEA,aAAKC,KAAL,GAAa,IAAIv8B,MAAMw8B,KAAV,EAAb;AACA,aAAKD,KAAL,CAAWzrB,KAAX;;AAEA,aAAK2rB,cAAL,GAAsB,EAACrtB,QAAO,EAAR,EAAYstB,UAAS,EAArB,EAAyBC,UAAS,EAAlC,EAAsCC,aAAY,EAAlD,EAAsDC,eAAc,EAApE,EAAwEC,WAAU,EAAlF,EAAsFC,cAAa,EAAnG,EAAuGC,SAAQ,EAA/G,EAAtB;AACA,aAAKC,gBAAL,GAAwB,CACpB,IAAIzV,yBAAJ,CAAoB,IAApB,EAA0B,IAAE,EAA5B,EAAgC,KAAKkV,QAAL,CAAc5pB,IAAd,CAAmB,IAAnB,CAAhC,CADoB,EAEpB,IAAI0U,yBAAJ,CAAoB,IAApB,EAA0B,IAAE,EAA5B,EAAgC,KAAKmV,QAAL,CAAc7pB,IAAd,CAAmB,IAAnB,CAAhC,CAFoB,CAAxB;;AAKA,aAAKoqB,QAAL,GAAgB,EAAhB;;AAEA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACA,aAAKC,YAAL,GAAoB,EAApB;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKC,OAAL,GAAe,EAAf;AACA,aAAKC,MAAL,GAAc,EAAd;;AAEA;;;AAGA,aAAKC,WAAL,GAAmB;AACfC,wBAAYlgC,SADG;AAEfmgC,gBAAIngC,SAFW,EAEAogC,IAAIpgC,SAFJ;AAGfkB,eAAG,CAHY,EAGTC,GAAG,CAHM;AAIfk/B,gBAAI,CAJW,EAIRC,IAAI,CAJI;AAKflS,sBAAU,CALK;AAMfmS,qBAAS,CANM,CAMJ;AANI,SAAnB;AAQA,YAAIC,eAAe,KAAnB;AACA9gC,eAAOqE,cAAP,CAAsB,KAAKk8B,WAA3B,EAAwC,SAAxC,EAAmD;AAC/Cp8B,iBAAK,eAAU;AACX,uBAAO28B,YAAP;AACH,aAH8C;AAI/C39B,iBAAK,aAASiB,KAAT,EAAe;AAChB08B,+BAAe18B,KAAf;AACA,qBAAKq8B,EAAL,GAAU,KAAKC,EAAL,GAAUpgC,SAApB;AACA,qBAAKqgC,EAAL,GAAU,KAAKC,EAAL,GAAU,CAApB;AACH;AAR8C,SAAnD;;AAWA,aAAKG,eAAL,GAAuB,EAAvB;;AAEA,aAAKpC,YAAL,CAAkBpW,gBAAlB,CAAmC,WAAnC,EAAgD,KAAKmX,WAAL,CAAiB9pB,IAAjB,CAAsB,IAAtB,CAAhD;AACA,aAAK+oB,YAAL,CAAkBpW,gBAAlB,CAAmC,SAAnC,EAA8C,KAAKqX,SAAL,CAAehqB,IAAf,CAAoB,IAApB,CAA9C;AACA,aAAK+oB,YAAL,CAAkBpW,gBAAlB,CAAmC,aAAnC,EAAkD,KAAKsX,YAAL,CAAkBjqB,IAAlB,CAAuB,IAAvB,CAAlD;AACA,aAAK+oB,YAAL,CAAkBpW,gBAAlB,CAAmC,WAAnC,EAAgD,KAAKyY,WAAL,CAAiBprB,IAAjB,CAAsB,IAAtB,CAAhD,EAA6E,KAA7E;;AAEA,YAAIqrB,mBAAmB,KAAKC,YAAL,CAAkBtrB,IAAlB,CAAuB,IAAvB,CAAvB;AACA,YAAI,KAAK+oB,YAAL,CAAkBpW,gBAAtB,EAAwC;AACpC,iBAAKoW,YAAL,CAAkBpW,gBAAlB,CAAmC,YAAnC,EAAiD0Y,gBAAjD,EAAmE,KAAnE;AACA,iBAAKtC,YAAL,CAAkBpW,gBAAlB,CAAmC,gBAAnC,EAAqD0Y,gBAArD,EAAuE,KAAvE;AACH,SAHD,MAKI,KAAKtC,YAAL,CAAkBwC,WAAlB,CAA8B,cAA9B,EAA8CF,gBAA9C;;AAEJ,aAAK1jB,iBAAL,GAAyB,IAAzB;AACAtc,eAAOsnB,gBAAP,CAAwB,QAAxB,EAAkC,KAAK6Y,QAAL,CAAcxrB,IAAd,CAAmB,IAAnB,CAAlC;;AAEA,aAAK4H,iBAAL,GAAyB,IAAzB;AACA,aAAK9B,QAAL,GAAgB,EAAhB;AACAza,eAAOsnB,gBAAP,CAAwB,QAAxB,EAAkC,KAAK8Y,QAAL,CAAczrB,IAAd,CAAmB,IAAnB,CAAlC;;AAEA;;;AAGA,aAAK0rB,QAAL,GAAgB,IAAIrgC,OAAOsgC,QAAP,CAAgBC,QAApB,EAAhB;AACA,aAAKF,QAAL,CAAcG,EAAd,GAAmB,KAAKH,QAAL,CAAcI,YAAjC;AACA,aAAKJ,QAAL,CAAcK,UAAd,GAA2B,KAAKL,QAAL,CAAcM,gBAAzC;AACA,aAAKrhC,IAAL,GAAY,EAAZ;;AAEA;AAEH;;;;kCAEQ;AACL;AACH;;;mCAEUA,I,EAAK;AACZ,gBAAGA,SAASD,SAAZ,EAAuB;AACnBC,uBAAOk+B,iBAAP;AACH;;AAED,gBAAI1rB,QAAQ,IAAZ;AACAxS,iBAAKC,OAAL,CAAa,eAAO;AAChBuS,sBAAMxS,IAAN,CAAWE,GAAX,IAAkB,KAAlB;AACAsS,sBAAMuuB,QAAN,CAAeO,cAAf,CAA8B;AAC1BthC,0BAAME,GADoB;AAE1BqhC,oCAAgB,IAFU;AAG1BC,gCAAY,sBAAU;AAClBhvB,8BAAMxS,IAAN,CAAWE,GAAX,IAAkB,IAAlB;AACH,qBALyB;AAM1BuhC,8BAAU,oBAAU;AAChBjvB,8BAAMxS,IAAN,CAAWE,GAAX,IAAkB,KAAlB;AACH;AARyB,iBAA9B;AAUH,aAZD;AAaH;;;wCAEc;AACX,gBAAIkb,SAAS,KAAKgjB,YAAL,CAAkBsD,qBAAlB,EAAb;AACA,iBAAKtmB,MAAL,CAAYna,CAAZ,GAAgBma,OAAOna,CAAvB;AACA,iBAAKma,MAAL,CAAYla,CAAZ,GAAgBka,OAAOla,CAAvB;AACA,iBAAKka,MAAL,CAAYvN,KAAZ,GAAoBuN,OAAOvN,KAA3B;AACA,iBAAKuN,MAAL,CAAYtN,MAAZ,GAAqBsN,OAAOtN,MAA5B;AACA,iBAAKsN,MAAL,CAAYoY,IAAZ,GAAmBpY,OAAOoY,IAA1B;AACA,iBAAKpY,MAAL,CAAYumB,KAAZ,GAAoBvmB,OAAOumB,KAA3B;AACA,iBAAKvmB,MAAL,CAAYwmB,MAAZ,GAAqBxmB,OAAOwmB,MAA5B;AACA,iBAAKxmB,MAAL,CAAYqY,GAAZ,GAAkBrY,OAAOqY,GAAzB;;AAEA;;;;;;;AAOH;;;oCAEWwM,U,EAAW;AACnB,gBAAGA,WAAW4B,MAAX,KAAsB,CAAzB,EAA2B;AACvB,qBAAKC,oBAAL,CAA0B7B,UAA1B;AACA,oBAAI/5B,MAAM,KAAK44B,KAAL,CAAWiD,cAAX,EAAV;AACA,oBAAG77B,MAAM,KAAKy4B,iBAAX,GAA+B,KAAK6B,eAAvC,EAAuD;AACnD,wBAAG,KAAKwB,cAAL,KAAwBjiC,SAA3B,EAAqC;AACjC,6BAAKkiC,kBAAL,CAAwB,KAAKD,cAA7B;AACA,6BAAKA,cAAL,GAAsBjiC,SAAtB;AACH;AACD,yBAAKq/B,aAAL,CAAmBa,UAAnB;AACA;AACH;;AAED,qBAAKtB,iBAAL,GAAyBz4B,GAAzB;AACA,qBAAK85B,WAAL,CAAiBkC,OAAjB,GAA2B,IAA3B;;AAEA,oBAAI1vB,QAAQ,IAAZ;AACA,qBAAKwvB,cAAL,GAAsB,KAAKG,aAAL,CAClB,KAAKC,iBAAL,GAAyB,YAAU;AAC/B5vB,0BAAMwvB,cAAN,GAAuBjiC,SAAvB;AACA,yBAAI,IAAIyB,IAAI,CAAZ,EAAeA,IAAIgR,MAAMktB,WAAN,CAAkBp+B,MAArC,EAA6CE,GAA7C,EAAiD;AAC7CgR,8BAAMktB,WAAN,CAAkBl+B,CAAlB,EAAqBy+B,UAArB;AACH;AACDztB,0BAAM6vB,aAAN,CAAoB,aAApB;AACA7vB,0BAAMksB,UAAN,CAAiBvgB,IAAjB,CAAsB3L,MAAM+rB,WAA5B;AACH,iBARiB,EASlB,KAAKiC,eAAL,GAAuB,IATL,CAAtB;AAWH;AACJ;;;sCAEaP,U,EAAW;AACrB,iBAAI,IAAIz+B,IAAI,CAAZ,EAAeA,IAAI,KAAKq+B,aAAL,CAAmBv+B,MAAtC,EAA8CE,GAA9C,EAAkD;AAC9C,qBAAKq+B,aAAL,CAAmBr+B,CAAnB,EAAsBy+B,UAAtB;AACH;;AAED,iBAAKoC,aAAL,CAAmB,eAAnB;AACH;;;yCAEgBpC,U,EAAW;AACxB,gBAAG,KAAK+B,cAAL,KAAwBjiC,SAA3B,EAAqC;AACjC,qBAAKkiC,kBAAL,CAAwB,KAAKD,cAA7B;AACA,qBAAKA,cAAL,GAAsBjiC,SAAtB;AACA,qBAAKqiC,iBAAL;AACH;AACJ;;;kCAESnC,U,EAAW;AACjB,gBAAGA,WAAW4B,MAAX,KAAsB,CAAzB,EAA2B;AACvB,oBAAI37B,MAAM,KAAK44B,KAAL,CAAWiD,cAAX,EAAV;AACA,oBAAG77B,MAAM,KAAKy4B,iBAAX,GAA+B,KAAK6B,eAAvC,EAAuD;AACnD,yBAAK8B,gBAAL,CAAsBrC,UAAtB;AACH;;AAED,qBAAK6B,oBAAL,CAA0B7B,UAA1B;AACA,qBAAI,IAAIz+B,IAAI,CAAZ,EAAeA,IAAI,KAAKm+B,SAAL,CAAer+B,MAAlC,EAA0CE,GAA1C,EAA8C;AAC1C,yBAAKm+B,SAAL,CAAen+B,CAAf,EAAkBy+B,UAAlB;AACH;;AAED,qBAAKoC,aAAL,CAAmB,WAAnB;AACA,oBAAIhgC,IAAI,KAAKq8B,UAAL,CAAgB6D,iBAAhB,CAAkC,KAAKhE,WAAvC,CAAR;AACA,oBAAIiE,cAAcngC,IAAI,EAAtB,CAbuB,CAaG;AAC1B,oBAAGmgC,WAAH,EAAe;AACX,yBAAKjD,OAAL,CAAaU,UAAb;AACH;;AAED,qBAAKD,WAAL,CAAiBkC,OAAjB,GAA2B,KAA3B;AACH;AACJ;;;sCAEY;AACT,gBAAIzN,IAAI,KAAKuL,WAAb;AACA,gBAAGvL,EAAEyN,OAAL,EAAa;AACT,oBAAIO,IAAI,KAAKlE,WAAb;AACA,oBAAG9J,EAAEyL,EAAF,KAASngC,SAAZ,EAAuB00B,EAAEyL,EAAF,GAAOzL,EAAExzB,CAAF,GAAMwhC,EAAExhC,CAAf;AACvB,oBAAGwzB,EAAE0L,EAAF,KAASpgC,SAAZ,EAAuB00B,EAAE0L,EAAF,GAAO1L,EAAEvzB,CAAF,GAAMuhC,EAAEvhC,CAAf;;AAEvB,oBAAIwhC,KAAKjO,EAAExzB,CAAF,GAAMwzB,EAAEyL,EAAjB;AAAA,oBACIyC,KAAKlO,EAAEvzB,CAAF,GAAMuzB,EAAE0L,EADjB;AAEA1L,kBAAEtG,QAAF,GAAavvB,KAAKG,IAAL,CAAU2jC,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAb;AACA,oBAAGlO,EAAEtG,QAAF,GAAasG,EAAE6L,OAAf,KACE1hC,KAAKwvB,GAAL,CAASqG,EAAE2L,EAAX,IAAiBn4B,OAAjB,IAA4BrJ,KAAKwvB,GAAL,CAASqG,EAAE4L,EAAX,IAAiBp4B,OAD/C,CAAH,EAEC;AACG,yBAAI,IAAIzG,IAAI,CAAZ,EAAeA,IAAI,KAAKu+B,MAAL,CAAYz+B,MAA/B,EAAuCE,GAAvC,EAA2C;AACvC,6BAAKu+B,MAAL,CAAYv+B,CAAZ,EAAeizB,CAAf;AACH;AACJ;;AAEDA,kBAAE2L,EAAF,GAAO3L,EAAExzB,CAAF,GAAMwhC,EAAExhC,CAAf;AACAwzB,kBAAE4L,EAAF,GAAO5L,EAAEvzB,CAAF,GAAMuhC,EAAEvhC,CAAf;;AAEAuzB,kBAAExzB,CAAF,GAAMwhC,EAAExhC,CAAR;AACAwzB,kBAAEvzB,CAAF,GAAMuhC,EAAEvhC,CAAR;AACH;AACJ;;;gCAEO++B,U,EAAW;AACf,iBAAI,IAAIz+B,IAAI,CAAZ,EAAeA,IAAI,KAAKs+B,OAAL,CAAax+B,MAAhC,EAAwCE,GAAxC,EAA4C;AACxC,qBAAKs+B,OAAL,CAAat+B,CAAb,EAAgBy+B,UAAhB;AACH;;AAED,iBAAKoC,aAAL,CAAmB,SAAnB;AACH;;;qCAEYpC,U,EAAW;AACpB;AACA,iBAAK6B,oBAAL,CAA0B7B,UAA1B;AACA,iBAAI,IAAIz+B,IAAI,CAAZ,EAAeA,IAAI,KAAKo+B,YAAL,CAAkBt+B,MAArC,EAA6CE,GAA7C,EAAiD;AAC7C,qBAAKo+B,YAAL,CAAkBp+B,CAAlB,EAAqBy+B,UAArB;AACH;;AAED,iBAAKoC,aAAL,CAAmB,cAAnB;AACH;;;oCAEWpC,U,EAAW;AACnB,iBAAK3B,MAAL,CAAYr9B,CAAZ,GAAgBsB,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBm0B,WAAW9L,OAAX,GAAqB,KAAK/Y,MAAL,CAAYoY,IAAlD,EAAwD,CAAxD,EAA2D,KAAKpY,MAAL,CAAYvN,KAAvE,CAAhB;AACA,iBAAKywB,MAAL,CAAYp9B,CAAZ,GAAgBqB,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBm0B,WAAW5L,OAAX,GAAqB,KAAKjZ,MAAL,CAAYqY,GAAlD,EAAuD,CAAvD,EAA0D,KAAKrY,MAAL,CAAYtN,MAAtE,CAAhB;AACA,iBAAKkyB,WAAL,CAAiBC,UAAjB,GAA8BA,UAA9B;AACA,iBAAKqC,gBAAL,CAAsBrC,UAAtB;AACH;;;iCAEQj2B,K,EAAM;AACX,iBAAKgT,iBAAL,GAAyB,IAAzB;AACH;;;qCAEYijB,U,EAAW;AACpBA,uBAAW2C,cAAX;AACA,gBAAIC,QAAQtgC,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBm0B,WAAW6C,UAAX,IAAyB,CAAC7C,WAAW8C,MAAtD,EAA8D,CAAC,CAA/D,EAAkE,CAAlE,CAAZ;AACA,iBAAKvoB,GAAL,CAAS3a,MAAT,GAAkB0C,MAAM3D,IAAN,CAAWkN,KAAX,CAAiB,KAAK0O,GAAL,CAAS3a,MAAT,GAAkBgjC,QAAQ,EAA3C,EAA+C,KAAKroB,GAAL,CAAS5L,GAAxD,EAA6D,KAAK4L,GAAL,CAAS3L,GAAtE,CAAlB;AACA,iBAAK2L,GAAL,CAASwoB,IAAT,GAAgB,CAAhB;AACH;;;mCAES;AACN,iBAAKxoB,GAAL,CAASwoB,IAAT,IAAiB,EAAjB;AACA,gBAAG,KAAKxoB,GAAL,CAASwoB,IAAT,IAAiB,CAAjB,IAAsB91B,OAAO+1B,KAAP,CAAa,KAAKzoB,GAAL,CAASwoB,IAAtB,CAAzB,EAAqD;AACjD;AACH;AACD,iBAAKhoB,MAAL,CAAYR,GAAZ,IAAmB,CAAC,KAAKA,GAAL,CAAS3a,MAAT,GAAkB,KAAKmb,MAAL,CAAYR,GAA/B,IAAsC,KAAKA,GAAL,CAASwoB,IAAlE;AACA,iBAAKhoB,MAAL,CAAY8C,sBAAZ;AACH;;;iCAEQ9T,K,EAAO;AACZ,iBAAKgT,iBAAL,GAAyB,IAAzB;AACA,iBAAKC,iBAAL,GAAyB,IAAzB;AACH;;;4CAEmBimB,S,EAAWvhC,Q,EAAS;AACpC,gBAAIuI,YAAY,KAAKg5B,SAAL,CAAhB;AACA,iBAAI,IAAIC,YAAY,CAApB,EAAuBA,YAAYj5B,UAAU5I,MAA7C,EAAqD6hC,WAArD,EAAiE;AAC7D,oBAAGj5B,UAAUi5B,SAAV,MAAyBxhC,QAA5B,EAAqC;AACjCuI,8BAAUzE,MAAV,CAAiB09B,SAAjB,EAA4B,CAA5B;AACH;AACJ;AACJ;;;iCAEO;AACJ,iBAAKrB,oBAAL;;AAEA,iBAAKsB,QAAL;;AAEA;AACA,iBAAKC,eAAL;AACA,iBAAKhB,aAAL,CAAmB,QAAnB;;AAEA,gBAAIn8B,MAAM,KAAK44B,KAAL,CAAWiD,cAAX,EAAV;AACA,iBAAI,IAAIuB,UAAU,CAAlB,EAAqBA,UAAU,KAAK9D,gBAAL,CAAsBl+B,MAArD,EAA6DgiC,SAA7D,EAAuE;AACnE,oBAAIC,kBAAkB,KAAK/D,gBAAL,CAAsB8D,OAAtB,CAAtB;AACA,oBAAGC,gBAAgBz7B,MAAhB,IACK5B,MAAMq9B,gBAAgBtZ,cAAtB,GAAuCsZ,gBAAgBvZ,QAD/D,EAEC;AACGuZ,oCAAgB5xB,MAAhB,CAAuBzL,GAAvB;AACH;AACJ;;AAED,iBAAKs9B,WAAL;AACH;;;mCAES;AACN,iBAAKC,QAAL;AACA,iBAAKpB,aAAL,CAAmB,UAAnB;AACH;;;mCAES;AACN,iBAAKA,aAAL,CAAmB,UAAnB;AACH;;;mCAES;AACN,iBAAI,IAAIc,YAAY,KAAK1D,QAAL,CAAcn+B,MAAlC,EAA0C6hC,cAAc,CAAxD,GAA2D;AACvD,qBAAK1D,QAAL,CAAc0D,SAAd;AACH;AACD,iBAAK1D,QAAL,CAAcn+B,MAAd,GAAuB,CAAvB;AACH;;;sCAEaoiC,M,EAAQ/M,K,EAAM;AACxB,gBAAIgN,OAAOjjC,OAAO6P,UAAP,CAAkB,YAAU;AACnCmzB;AACH,aAFU,EAER/M,KAFQ,CAAX;AAGA,mBAAOgN,IAAP;AACH;;;2CAEkBA,I,EAAK;AACpBjjC,mBAAOkjC,YAAP,CAAoBD,IAApB;AACA;AACH;;;+BAEMD,M,EAAQ1Z,Q,EAAS;AACpB,gBAAG,KAAK6Z,QAAL,KAAkB9jC,SAArB,EAAgC,KAAK8jC,QAAL,GAAgB,EAAhB;AAChC,gBAAIF,OAAOjjC,OAAOqvB,WAAP,CAAmB,YAAU;AACpC2T;AACH,aAFU,EAER1Z,QAFQ,CAAX;AAGA,iBAAK6Z,QAAL,CAAcp/B,IAAd,CAAmB,EAACi/B,QAAOA,MAAR,EAAgBC,MAAKA,IAArB,EAAnB;AACA,mBAAOA,IAAP;AACH;;;mCAEUD,M,EAAO;AACd,gBAAG,KAAKG,QAAL,KAAkB9jC,SAArB,EAAgC;AAChC,gBAAG,OAAO2jC,MAAP,KAAkB,QAArB,EAA8B;AAC1BhjC,uBAAOojC,aAAP,CAAqBJ,MAArB;AACA;AACH;AACD,iBAAI,IAAIliC,IAAI,CAAZ,EAAeA,IAAI,KAAKqiC,QAAL,CAAcviC,MAAjC,EAAyCE,GAAzC,EAA6C;AACzC,oBAAG,KAAKqiC,QAAL,CAAcriC,CAAd,EAAiBkiC,MAAjB,KAA4BA,MAA/B,EAAsC;AAClChjC,2BAAOojC,aAAP,CAAqB,KAAKD,QAAL,CAAcriC,CAAd,EAAiBmiC,IAAtC;AACA,yBAAKE,QAAL,CAAcp+B,MAAd,CAAqBjE,CAArB,EAAwB,CAAxB;AACA;AACH;AACJ;AACJ;;;6CAEoBy+B,U,EAAW;AAC5B,gBAAG,KAAKjjB,iBAAR,EAA2B;AACvB,qBAAK4hB,aAAL;AACA,qBAAK5hB,iBAAL,GAAyB,KAAzB;AACH;AACD,gBAAG,KAAKC,iBAAR,EAA2B;AACvB,qBAAI,IAAIzb,IAAI,CAAZ,EAAeA,IAAI,KAAK2Z,QAAL,CAAc7Z,MAAjC,EAAyCE,GAAzC,EAA6C;AACzC,yBAAK2Z,QAAL,CAAc3Z,CAAd,EAAiB,KAAK4Z,MAAtB;AACH;AACD,qBAAK6B,iBAAL,GAAyB,KAAzB;AACH;;AAED,gBAAGgjB,eAAelgC,SAAlB,EAA4B;AACxB,qBAAKu+B,MAAL,CAAYr9B,CAAZ,GAAgBsB,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBm0B,WAAW9L,OAAX,GAAqB,KAAK/Y,MAAL,CAAYoY,IAAlD,EAAwD,CAAxD,EAA2D,KAAKpY,MAAL,CAAYvN,KAAvE,CAAhB;AACA,qBAAKywB,MAAL,CAAYp9B,CAAZ,GAAgBqB,MAAM3D,IAAN,CAAWkN,KAAX,CAAiBm0B,WAAW5L,OAAX,GAAqB,KAAKjZ,MAAL,CAAYqY,GAAlD,EAAuD,CAAvD,EAA0D,KAAKrY,MAAL,CAAYtN,MAAtE,CAAhB;AACH;;AAED,iBAAKywB,WAAL,CAAiBt9B,CAAjB,GAAqB,KAAKq9B,MAAL,CAAYr9B,CAAjC;AACA,iBAAKs9B,WAAL,CAAiBr9B,CAAjB,GAAqB,KAAKo9B,MAAL,CAAYp9B,CAAjC;;AAEA,iBAAKu9B,aAAL,CAAmBx9B,CAAnB,GAAuB,KAAKq9B,MAAL,CAAYr9B,CAAZ,GAAgB,KAAKma,MAAL,CAAYvN,KAA5B,GAAoC,CAApC,GAAwC,CAA/D;AACA,iBAAK4wB,aAAL,CAAmBv9B,CAAnB,GAAuB,CAAC,KAAKo9B,MAAL,CAAYp9B,CAAb,GAAiB,KAAKka,MAAL,CAAYtN,MAA7B,GAAsC,CAAtC,GAA0C,CAAjE;AACH;;;oCAEWsqB,O,EAAShO,S,EAAU;AAC3B,iBAAKiZ,eAAL;AACAjZ,wBAAYA,cAAcrqB,SAAd,GAA0BqqB,SAA1B,GAAsC,KAAlD;AACA,gBAAIU,aAAasN,mBAAmBrG,KAAnB,GAA2B,KAAKnH,SAAL,CAAeG,gBAAf,CAAgCqN,OAAhC,EAAyChO,SAAzC,CAA3B,GAAiF,KAAKQ,SAAL,CAAemZ,eAAf,CAA+B3L,OAA/B,EAAwChO,SAAxC,CAAlG;AACA,gBAAIU,WAAWxpB,MAAX,GAAoB,CAAxB,EAA2B;AACvB,uBAAOwpB,WAAW,CAAX,CAAP;AACH;AACD,mBAAO/qB,SAAP;AACH;;AAED;;;;;;;;wCAKgBiK,K,EAAOg6B,O,EAAShsB,K,EAAM;AAClC,gBAAG,KAAKgnB,cAAL,CAAoBh1B,KAApB,EAA2Bg6B,OAA3B,MAAwCjkC,SAA3C,EAAsDsH,QAAQE,GAAR,CAAY,kBAAkBy8B,OAAlB,GAA4B,wBAAxC;AACtD,iBAAKhF,cAAL,CAAoBh1B,KAApB,EAA2Bg6B,OAA3B,IAAsChsB,KAAtC;AACH;;;2CAEkBhO,K,EAAOg6B,O,EAAQ;AAC9B,mBAAO,KAAKhF,cAAL,CAAoBh1B,KAApB,EAA2Bg6B,OAA3B,CAAP;AACH;;;0CAEgB;AACb,iBAAKhpB,MAAL,CAAYwJ,iBAAZ;AACA,iBAAKoG,SAAL,CAAeqZ,aAAf,CAA6B,KAAKxF,aAAlC,EAAiD,KAAKzjB,MAAtD;AACH;;;sCAEahR,K,EAAM;AAChB,gBAAIk6B,oBAAoBzkC,OAAOO,IAAP,CAAY,KAAKg/B,cAAL,CAAoBh1B,KAApB,CAAZ,CAAxB;AACA,gBAAIm6B,mBAAmBD,kBAAkB5iC,MAAzC;AACA,gBAAG6iC,mBAAmB,CAAtB,EAAwB;AACpB,oBAAGA,mBAAmB,CAAtB,EACID,kBAAkBnjB,IAAlB,GAAyBqjB,OAAzB;;AAEJ,qBAAI,IAAIC,SAAS,CAAjB,EAAoBA,SAASF,gBAA7B,EAA+CE,QAA/C,EAAwD;AACpD,wBAAInkC,MAAMgkC,kBAAkBG,MAAlB,CAAV;AACA,yBAAKrF,cAAL,CAAoBh1B,KAApB,EAA2B9J,GAA3B,EAAgCokC,OAAhC,CAAwC,KAAK1Z,SAA7C;AACH;AACJ;AACJ;;;;;;kBAGU7P,K;;;;;;;;;;;;;;;;;ICzeTnB,O;AACF,qBAAYjY,QAAZ,EAAqB;AAAA;;AACjB,aAAK4iC,YAAL,GAAoB5iC,QAApB;AACH;;;;+BAEMgY,O,EAAQ;AACX;AACA,gBAAI6qB,WAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIC,YAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIC,UAAkB,CAAE,CAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;AACA,gBAAIC,gBAAkB,CAAE,EAAF,EAAU,CAAV,EAAkB,CAAlB,EAA0B,CAA1B,CAAtB;;AAEA,gBAAIx/B,SAAS;AACTq/B,0BAAUI,QAAQJ,SAAS7qB,OAAT,CAAR,CADD;AAET8qB,2BAAWG,QAAQH,UAAU9qB,OAAV,CAAR,CAFF;AAGT+qB,yBAASE,QAAQF,QAAQ/qB,OAAR,CAAR,CAHA;AAITgrB,+BAAeA,cAAchrB,OAAd;AAJN,aAAb;AAMA,mBAAOxU,MAAP;AACH;;;uCAEcwU,O,EAAQ;AACnB,gBAAIxU,SAAS,KAAK0U,MAAL,CAAYF,OAAZ,CAAb;AACA,iBAAK4qB,YAAL,CAAkBp/B,MAAlB;AACH;;;2CAEiB;AACd,gBAAIwU,UAAU,CAAd;AACA;AACA,iBAAKkrB,cAAL,CAAoBlrB,OAApB;AACH;;;;;;kBAIUC,O;;;;;;;;;;;;;;;AClCf;;;;;;;;AAEA;;;;;;;;;;AAUA;AACA,IAAM5C,gBAAgB;AAClBytB,eAAW,IADO;AAElBC,aAAS,IAFS;AAGlBI,mBAAeviC,MAAMwiC,gBAHH;AAIlBC,uBAAmB,IAJD;AAKlB9qB,gBAAY,QALM;AAMlByqB,mBAAe,CANG;AAOlBH,cAAU;AAPQ,CAAtB;;IAUMpqB,Q;AACF;;;AAGA,sBAAY/V,MAAZ,EAAoB;AAAA;;AAEhB,aAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;AACA,aAAKqD,QAAL,GAAgB,IAAI9X,MAAM0iC,aAAV,CAAwB,EAACR,WAAW,KAAKpgC,MAAL,CAAYogC,SAAxB,EAAxB,CAAhB;;AAEA,aAAKpqB,QAAL,CAAc6qB,SAAd,CAAwB7a,OAAxB,GAAkC,KAAKhmB,MAAL,CAAYqgC,OAA9C;AACA,aAAKrqB,QAAL,CAAc6qB,SAAd,CAAwB5+B,IAAxB,GAA+B,KAAKjC,MAAL,CAAYygC,aAA3C;AACA,aAAKzqB,QAAL,CAAc6qB,SAAd,CAAwBC,UAAxB,GAAqC,KAAK9gC,MAAL,CAAY2gC,iBAAjD;;AAEA,aAAK3qB,QAAL,CAAc+qB,uBAAd,GAAwC,IAAxC;AACA,aAAK/qB,QAAL,CAAcgrB,UAAd,GAA2B,IAA3B;AACA,aAAKhrB,QAAL,CAAcirB,WAAd,GAA4B,IAA5B;AACA,aAAKjrB,QAAL,CAAckrB,WAAd,GAA4BhjC,MAAMijC,qBAAlC;AACA,aAAKnrB,QAAL,CAAcC,mBAAd,GAAoC,GAApC;AACA;;AAEA,aAAKmrB,cAAL,GAAsB,KAAKprB,QAAL,CAAcqrB,OAAd,CAAsBC,YAAtB,CAAmC,KAAKtrB,QAAL,CAAcqrB,OAAd,CAAsBE,gBAAzD,CAAtB;AACA,aAAKC,UAAL,GAAkBnlC,OAAOolC,gBAAP,KAA4B/lC,SAA5B,GAAwCW,OAAOolC,gBAA/C,GAAkE,CAApF;AACA,aAAKzrB,QAAL,CAAc0rB,aAAd,CAA4B,KAAKF,UAAjC;AACA,aAAKxrB,QAAL,CAAc2rB,aAAd,CAA4B,IAAIzjC,MAAMC,KAAV,CAAgB,KAAK6B,MAAL,CAAY6V,UAA5B,CAA5B,EAAqE,CAArE;;AAEA,aAAK+rB,cAAL,GAAsB,UAAS7qB,MAAT,EAAgB;AAClC,gBAAI8qB,WAAW9qB,OAAOvN,KAAP,GAAe,KAAKxJ,MAAL,CAAYsgC,aAA1C;AACA,gBAAIwB,YAAY/qB,OAAOtN,MAAP,GAAgB,KAAKzJ,MAAL,CAAYsgC,aAA5C;AACA,iBAAKtqB,QAAL,CAAc+rB,OAAd,CAAsBF,QAAtB,EAAgCC,SAAhC;AACH,SAJD;;AAMA,aAAKrpB,MAAL,GAAc,UAASN,KAAT,EAAgBxB,MAAhB,EAAuB;AACjC,iBAAKX,QAAL,CAAcgsB,MAAd,CAAqB7pB,KAArB,EAA4BxB,MAA5B;AACH,SAFD;;AAIA,aAAK+C,gBAAL,GAAwB,YAAU;AAC9B,iBAAK1D,QAAL,CAAc6qB,SAAd,CAAwB5T,WAAxB,GAAsC,IAAtC;AACH,SAFD;;AAIA,aAAKgV,gBAAL,GAAwB,UAASlrB,MAAT,EAAgB;AACpC,iBAAKf,QAAL,CAAcrV,UAAd,CAAyBvE,KAAzB,CAA+BoN,KAA/B,GAAuCjP,KAAK6jB,KAAL,CAAWrH,OAAOvN,KAAlB,IAA2B,IAAlE;AACA,iBAAKwM,QAAL,CAAcrV,UAAd,CAAyBvE,KAAzB,CAA+BqN,MAA/B,GAAwClP,KAAK6jB,KAAL,CAAWrH,OAAOtN,MAAlB,IAA4B,IAApE;AACH,SAHD;;AAKA,aAAK6N,YAAL,GAAoB,UAASP,MAAT,EAAiBJ,MAAjB,EAAwB;AACxCA,mBAAOP,MAAP,GAAgBW,OAAOvN,KAAP,GAAeuN,OAAOtN,MAAtC;AACAkN,mBAAO8C,sBAAP;AACH,SAHD;;AAKA,aAAKzC,mBAAL,GAA2B,UAASD,MAAT,EAAiBJ,MAAjB,EAAwB;AAC/C,iBAAKW,YAAL,CAAkBP,MAAlB,EAA0BJ,MAA1B;;AAEA,iBAAKirB,cAAL,CAAoB7qB,MAApB;AACA,iBAAKkrB,gBAAL,CAAsBlrB,MAAtB;AACH,SALD;;AAOA,YAAG,KAAK/W,MAAL,CAAYmgC,QAAf,EAAwB;AACpBpqB,qBAASmsB,WAAT,CAAqB,IAArB;AACH;AACJ;;;;kCAEQ;AACL,iBAAKlsB,QAAL,CAAc+D,OAAd;AACH;;;oCAEmBjE,a,EAAc;AAC9BA,0BAAcqqB,QAAd,GAAyB,IAAIjiC,MAAMikC,cAAV,CAAyBrsB,cAAcE,QAAvC,CAAzB;AACAF,0BAAcssB,UAAd,GAA2B,IAAIlkC,MAAMmkC,UAAV,CAAqB3mC,SAArB,EAAgCA,SAAhC,CAA3B;AACAoa,0BAAcssB,UAAd,CAAyBE,cAAzB,GAA0C,IAA1C;AACAxsB,0BAAcqqB,QAAd,CAAuBoC,OAAvB,CAA+BzsB,cAAcssB,UAA7C;AACAtsB,0BAAc0sB,YAAd,GAA6B,CAAC1sB,cAAcssB,UAAf,CAA7B;;AAEAtsB,0BAAc2sB,SAAd,GAA0B,UAAS9rB,MAAT,EAAgB;AACtCb,8BAAca,MAAd,GAAuBA,MAAvB;AACAb,8BAAcssB,UAAd,CAAyBzrB,MAAzB,GAAkCA,MAAlC;AACH,aAHD;;AAKAb,0BAAc8rB,cAAd,GAA+B,UAAS7qB,MAAT,EAAgB;AAC3C,oBAAI8qB,WAAW9qB,OAAOvN,KAAP,GAAesM,cAAc9V,MAAd,CAAqBsgC,aAAnD;AACA,oBAAIwB,YAAY/qB,OAAOtN,MAAP,GAAgBqM,cAAc9V,MAAd,CAAqBsgC,aAArD;AACAxqB,8BAAcE,QAAd,CAAuB+rB,OAAvB,CAA+BF,QAA/B,EAAyCC,SAAzC;;AAEAD,2BAAYtnC,KAAK6jB,KAAL,CAAYyjB,WAAW/rB,cAAc0rB,UAArC,KAAqD,CAAjE;AACTM,4BAAYvnC,KAAK6jB,KAAL,CAAYyjB,WAAW/rB,cAAc0rB,UAArC,KAAqD,CAAjE;AACA1rB,8BAAcqqB,QAAd,CAAuB4B,OAAvB,CAAgCF,QAAhC,EAA0CC,SAA1C;AACM,aARD;;AAUAhsB,0BAAc2C,MAAd,GAAuB,UAASN,KAAT,EAAe;AAClCrC,8BAAcssB,UAAd,CAAyBjqB,KAAzB,GAAiCA,KAAjC;AACArC,8BAAcqqB,QAAd,CAAuB6B,MAAvB;AACH,aAHD;AAIH;;;;;;kBAGUjsB,Q;;;;;;;;;;;;;ACrHf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA;;;;;AAKA;AACA,IAAMpD,gBAAgB,EAAtB;;AAEA;AACA,IAAM+vB,gBAAgB,IAAIC,mBAAJ,CAAe,IAAIzkC,MAAMqW,OAAV,CAAkB,CAAlB,EAAqB,EAArB,EAAyB,GAAzB,CAAf,EAA8C,IAAIrW,MAAM0kC,KAAV,CAAgB,CAAC,GAAjB,EAAsB,CAAtB,EAAyB,CAAzB,CAA9C,CAAtB;;IAEMxrB,O;;;AACF;;;;AAIA,yBAAYpX,MAAZ,EAAoBkW,YAApB,EAAiC;AAAA;;AAAA,8HACvBlW,MADuB;;AAG7B,sBAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,oBAAI8C,QAAQ,MAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA,sBAAKc,gBAAL,GAAwB,IAAIC,gBAAJ,CAAWN,YAAX,CAAxB;;AAEA,sBAAK2sB,eAAL,GAAuBH,cAAct9B,KAAd,EAAvB;AACA,sBAAKy9B,eAAL,CAAqBv5B,QAArB,CAA8Bmf,cAA9B,CAA6ChT,KAA7C;AACA,sBAAKotB,eAAL,CAAqBtlB,KAArB,CAA2B,MAAKhH,gBAAhC;AACA,sBAAKA,gBAAL,CAAsBI,MAAtB,CAA6BwJ,iBAA7B;;AAEA;AACA;AAf6B;AAgBhC;;;EArBiBjhB,oB;;kBAwBPkY,O;;;;;;;;;;;;;;;;;ACvCf,IAAM0rB,YAAY94B,OAAO,UAAP,CAAlB;AACA,IAAM+4B,YAAY/4B,OAAO,UAAP,CAAlB;;IAEM24B,S;;AAEF;;;;AAIA,uBAAYr5B,QAAZ,EAAsB/E,QAAtB,EAA+B;AAAA;;AAC3B,aAAKu+B,SAAL,IAAkBx5B,YAAY,IAAIpL,MAAMqW,OAAV,EAA9B;AACA,aAAKwuB,SAAL,IAAkBx+B,YAAY,IAAIrG,MAAM0kC,KAAV,EAA9B;AACH;;AAED;;;;;;;;;AAsBA;;;;8BAIMpnC,M,EAAO;AACTA,mBAAO8N,QAAP,CAAgBwQ,IAAhB,CAAqB,KAAKgpB,SAAL,CAArB;AACAtnC,mBAAO+I,QAAP,CAAgBuV,IAAhB,CAAqB,KAAKipB,SAAL,CAArB;AACH;;;gCAEM;AACH,gBAAIC,YAAY,IAAIL,SAAJ,CAAc,KAAKG,SAAL,EAAgBhoB,KAAhB,EAAd,EAAuC,KAAKioB,SAAL,EAAgBjoB,KAAhB,EAAvC,CAAhB;AACA,mBAAOkoB,SAAP;AACH;;;4BA/Ba;AACV,mBAAO,KAAKF,SAAL,CAAP;AACH,S;0BAEYtjC,K,EAAM;AACf,iBAAKsjC,SAAL,IAAkBtjC,KAAlB;AACH;;AAED;;;;;;4BAGc;AACV,mBAAO,KAAKujC,SAAL,CAAP;AACH,S;0BAEYvjC,K,EAAM;AACf,iBAAKujC,SAAL,IAAkBvjC,KAAlB;AACH;;;;;;kBAiBUmjC,S;;;;;;;;;;;;;;;;;ACpDf;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMM,OAAOj5B,OAAO,KAAP,CAAb;;AAEA,IAAM2a,eAAe,QAArB;;IAEMue,W;;AAEF;AACA,yBAAYnnB,GAAZ,EAAgB;AAAA;;AAEZ,aAAKknB,IAAL,IAAalnB,GAAb;AACH;;;;;;AAmBD;;;;qCAIavc,K,EAAM;;AAEf,gBAAG,QAAOA,KAAP,yCAAOA,KAAP,OAAiBmlB,YAApB,EAAiC;AAC7BliB,iCAAOY,IAAP,CAAY,4DAAZ,EAA0E7D,KAA1E;AACA;AACH;;AAED;AACA,gBAAIuc,MAAM,KAAKknB,IAAL,CAAV;AACAlnB,gBAAI7K,IAAJ,CAAS8iB,cAAT,CAAwBmP,KAAxB,CAA8B3jC,KAA9B;AACH;;;4BA/BsB;AACnB;AACA,gBAAIuc,MAAM,KAAKknB,IAAL,CAAV;AACA,mBAAOlnB,IAAI7K,IAAJ,CAAS8iB,cAAT,CAAwBh0B,MAAxB,CAA+BojC,iBAAtC;AACH,S;0BACqB5jC,K,EAAM;;AAExB,gBAAG,QAAOA,KAAP,yCAAOA,KAAP,OAAiBmlB,YAApB,EAAiC;AAC7BliB,iCAAOY,IAAP,CAAY,iEAAZ,EAA+E7D,KAA/E;AACA;AACH;;AAED;AACA,gBAAIuc,MAAM,KAAKknB,IAAL,CAAV;AACAlnB,gBAAI7K,IAAJ,CAAS8iB,cAAT,CAAwBh0B,MAAxB,CAA+BojC,iBAA/B,GAAmD5jC,KAAnD;AACH;;;;;;AAoBL,IAAM6jC,uBAAuB,EAA7B;;IAIMpnB,a;;;AAEF;AACA,2BAAYF,GAAZ,EAAgB;AAAA;;AAAA;;AAGZ,cAAKknB,IAAL,IAAalnB,GAAb;;AAEA,cAAKunB,WAAL,GAAmB,IAAIJ,WAAJ,CAAgBnnB,GAAhB,CAAnB;AALY;AAMf;;AAED;;;;;;oCAEY6D,Q,EAAU2jB,wB,EAAyB;AAC3C;AACA,gBAAIxnB,MAAM,KAAKknB,IAAL,CAAV;;AAEA,gBAAGrjB,YAAY,CAAC7D,IAAIvM,MAAJ,CAAWK,SAAX,CAAqBonB,QAArB,CAA8BrX,QAA9B,CAAhB,EAAwD;AACpDnd,iCAAOY,IAAP,CAAY,wDAAZ,EAAsEuc,QAAtE;AACA;AACH;;AAED7D,gBAAI7K,IAAJ,CAASsyB,aAAT,CAAuBC,MAAvB,CAA8B7jB,QAA9B;;AAEA,gBAAG2jB,6BAA6B7nC,SAAhC,EAA2C6nC,2BAA2B,IAA3B;AAC3C,gBAAGA,4BAA4B,CAAC3jB,QAAhC,EAA0C7D,IAAI7K,IAAJ,CAAS8iB,cAAT,CAAwB0P,WAAxB,CAAoC9jB,QAApC;AAC7C;;;4BAEmB;AAChB,mBAAOyjB,oBAAP;AACH;;;;EA9BuBn5B,yB;;kBAiCb+R,a;;;;;;;;;;;;;;;ACxFf;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMgnB,OAAOj5B,OAAO,KAAP,CAAb;;AAEA,IAAMvE,UAAU;AACZk+B,sBAAkB;AADN,CAAhB;;IAIMxnB,I;;;AACF;AACA,kBAAYJ,GAAZ,EAAgB;AAAA;;AAAA;;AAGZ,cAAKknB,IAAL,IAAalnB,GAAb;;AAEA,YAAI5N,aAAJ;AACA;AACA,iBAASy1B,eAAT,CAAyBC,UAAzB,EAAoC;AAChC11B,kBAAM2D,QAAN,CAAerM,QAAQk+B,gBAAvB,EAAyCE,WAAWp7B,GAApD;AACH;;AAEDsT,YAAI7K,IAAJ,CAASsyB,aAAT,CAAuB59B,EAAvB,CAA0BmX,wBAActX,OAAd,CAAsBoX,QAAhD,EAA0D+mB,eAA1D;AAXY;AAYf;;;;4BAEmB;AAChB,mBAAOn+B,OAAP;AACH;;;;EAlBcyE,yB;;kBAsBJiS,I;;;;;;;;;;;;;;;;;;;AChCf,IAAMwI,eAAe,QAArB;;AAEA;AACA,SAASmf,WAAT,CAAqBroC,MAArB,EAA6BuM,MAA7B,EAAoC;AAChC,QAAI+7B,OAAOl7B,OAAOC,gBAAlB;AACA,QAAIk7B,UAAUvoC,MAAd;AACAuM,WAAOpM,OAAP,CAAe,iBAAS;AACpB,YAAIyiC,KAAKpgC,MAAMG,CAAN,GAAU3C,OAAO2C,CAA1B;AAAA,YACIkgC,KAAKrgC,MAAMI,CAAN,GAAU5C,OAAO4C,CAD1B;AAAA,YAEI4lC,KAAKhmC,MAAMP,CAAN,GAAUjC,OAAOiC,CAF1B;AAGA,YAAIM,IAAIqgC,KAAKA,EAAL,GAAUC,KAAKA,EAAf,GAAoB2F,KAAKA,EAAjC;AACA,YAAGjmC,IAAI+lC,IAAP,EAAY;AACRA,mBAAO/lC,CAAP;AACAgmC,sBAAU/lC,KAAV;AACH;AACJ,KATD;;AAWA,WAAO+lC,OAAP;AACH;;AAED,IAAIE,YAAY,IAAIhmC,MAAMC,KAAV,EAAhB;;IAEM+J,a;AACF;;;AAGA,6BAAsB;AAAA;;AAAA;;AAClB;AACA,aAAKF,MAAL,GAAc,EAAd;;AAFkB,0CAAPA,MAAO;AAAPA,kBAAO;AAAA;;AAGlBA,eAAOpM,OAAP,CAAe,iBAAS;AACpB,gBAAI,EAAEqC,iBAAiBC,MAAMC,KAAzB,CAAJ,EAAsCF,QAAQ,IAAIC,MAAMC,KAAV,CAAgBF,KAAhB,CAAR;AACtC,kBAAK+J,MAAL,CAAY5H,IAAZ,CAAiBnC,KAAjB;AACH,SAHD;AAIH;;AAED;;;;;;;;;8BAKMzC,M,EAAO;AACT,gBAAI2S,QAAQ,IAAZ;AACA,gBAAG,QAAO3S,MAAP,yCAAOA,MAAP,OAAkBmpB,YAArB,EAAkC;AAC9B,oBAAIwf,WAAWL,YAAYI,UAAU58B,MAAV,CAAiB9L,MAAjB,CAAZ,EAAsC,KAAKwM,MAA3C,CAAf;AACAxM,yBAAS2oC,SAAS58B,MAAT,EAAT;AACH,aAHD,MAIK,IAAG/L,kBAAkB0C,MAAMC,KAA3B,EAAiC;AAClC,oBAAIgmC,YAAWL,YAAYtoC,MAAZ,EAAoB,KAAKwM,MAAzB,CAAf;AACAxM,uBAAOse,IAAP,CAAYqqB,SAAZ;AACH,aAHI,MAIA,IAAG3oC,kBAAkB0C,MAAMkmC,QAA3B,EAAoC;AACrC,oBAAInmC,QAAQzC,OAAOyC,KAAnB;AACA,oBAAGA,iBAAiBC,MAAMC,KAA1B,EAAgC;AAC5B,wBAAIgmC,aAAWL,YAAY7lC,KAAZ,EAAmB,KAAK+J,MAAxB,CAAf;AACA/J,0BAAM6b,IAAN,CAAWqqB,UAAX;AACH;AACJ,aANI,MAOA,IAAG3oC,kBAAkB0C,MAAM8e,QAA3B,EAAoC;AACrCxhB,uBAAOsM,QAAP,CAAgB,UAASC,KAAT,EAAe;AAC3B,wBAAGA,iBAAiB7J,MAAMkJ,IAA1B,EAA+B;AAC3B+G,8BAAMoP,KAAN,CAAYxV,MAAMb,QAAlB;AACH;AACJ,iBAJD;AAKH;AACD,mBAAO1L,MAAP;AACH;;;;;;kBAGU0M,a;;;;;;;;;;;;;;;;;;;;;ACpEf,IAAMm8B,WAAWr6B,OAAO,SAAP,CAAjB;;IAEMs6B,e;AACF,+BAAa;AAAA;;AACT,aAAKD,QAAL,IAAiB,KAAjB;AACH;;AAED;;;;;gCAMO;AACH,iBAAKre,OAAL,GAAe,KAAf;AACH;;;+BAEK;AACFvjB,mBAAOY,IAAP,CAAY,yCAAZ;AACH;;;gCAEM;AACHZ,mBAAOY,IAAP,CAAY,0CAAZ;AACH;;;4BAfY;AAAE,mBAAO,KAAKghC,QAAL,CAAP;AAAwB,S;0BAC3B7kC,K,EAAM;AACd,iBAAK6kC,QAAL,IAAiB7kC,KAAjB;AACH;;;+BAca+kC,I,EAAK;AACf,mBAAOA,gBAAgBD,eAAvB;AACH;;;;;;IAGChgC,gB;;;AACF,gCAAa;AAAA;;AAAA;AAIZ;;AAED;;;;;;;6BAGKigC,I,EAAK;AACN,iBAAKve,OAAL,GAAeue,KAAKve,OAApB;AACH;;;gCAEM;AACH,gBAAIue,OAAO,IAAIjgC,gBAAJ,EAAX;AACAigC,iBAAKve,OAAL,GAAe,KAAKA,OAApB;AACA,mBAAOue,IAAP;AACH;;;;EAlB0BD,e;;IAqBzBE,U;;;AACF,0BAAa;AAAA;;AAAA;AAEZ;;;;6BAEID,I,EAAK;AACN9hC,mBAAOY,IAAP,CAAY,oCAAZ;AACH;;;gCAEM;AACHZ,mBAAOY,IAAP,CAAY,qCAAZ;AACH;;;;EAXoBihC,e;;IAcnB9/B,kB;;;AACF,kCAAa;AAAA;;AAAA;AAEZ;;AAED;;;;;;;6BAGK+/B,I,EAAK;AACN,iBAAKve,OAAL,GAAeue,KAAKve,OAApB;AACH;;;gCAEM;AACH,gBAAIue,OAAO,IAAI//B,kBAAJ,EAAX;AACA+/B,iBAAKve,OAAL,GAAe,KAAKA,OAApB;AACA,mBAAOue,IAAP;AACH;;;;EAhB4BC,U;;IAmB3B9/B,qB;;;AACF,qCAAa;AAAA;;AAAA;AAEZ;;AAED;;;;;;;6BAGK6/B,I,EAAK;AACN,iBAAKve,OAAL,GAAeue,KAAKve,OAApB;AACH;;;gCAEM;AACH,gBAAIue,OAAO,IAAI7/B,qBAAJ,EAAX;AACA6/B,iBAAKve,OAAL,GAAe,KAAKA,OAApB;AACA,mBAAOue,IAAP;AACH;;;;EAhB+BC,U;;QAoBhCF,e,GAAAA,e;QACAhgC,gB,GAAAA,gB;QACAE,kB,GAAAA,kB;QACAE,qB,GAAAA,qB;;;;;;;;;;;;;;;AC5GJ;;;;;;;;;;;;AAEA,IAAIo+B,YAAY94B,OAAO,UAAP,CAAhB;AACA,IAAI+4B,YAAY/4B,OAAO,UAAP,CAAhB;;IAEMy6B,W;AACF,2BAAa;AAAA;;AACT,aAAK3B,SAAL,IAAkB,IAAI5kC,MAAMqW,OAAV,EAAlB;AACA,aAAKwuB,SAAL,IAAkB,IAAI7kC,MAAM0kC,KAAV,EAAlB;AACH;;AAED;;;;;4BACc;AAAE,mBAAO,KAAKE,SAAL,CAAP;AAAyB,S;0BAC5BtjC,K,EAAM;AACf,iBAAKsjC,SAAL,IAAkBtjC,KAAlB;AACH;;AAED;;;;4BACc;AAAE,mBAAO,KAAKsjC,SAAL,CAAP;AAAyB,S;0BAC5BtjC,K,EAAM;AACf,iBAAKujC,SAAL,IAAkBvjC,KAAlB;AACH;;;;;;IAGCgiB,K;;;AACF;;;;AAIA,mBAAY7N,KAAZ,EAAkB;AAAA;;AAAA;;AAGd,cAAKA,KAAL,GAAaA,KAAb;AAHc;AAIjB;;;;gCAMM;AACH,gBAAI+wB,QAAQ,IAAIljB,KAAJ,CAAU,KAAK7N,KAAf,CAAZ;AACA,mBAAO+wB,KAAP;AACH;;;mCAES;AACN,gBAAInhC,SAAS,WAAW,KAAKyB,KAAL,CAAWxB,QAAX,EAAX,GAAmC,GAAhD;;AAEA,mBAAOD,MAAP;AACH;;;4BAbU;AACP,mBAAO,KAAKoQ,KAAL,CAAW3O,KAAlB;AACH;;;;EAbey/B,W;;kBA2BLjjB,K;;;;;;;;;;;;;;;ACnDf;;;;AACA;;;;;;;;AAEA;AACA;AACA,IAAM7O,gBAAgB;AAClByK,iBAAS,IAAIlf,MAAMqW,OAAV,CAAkB,CAAlB,EAAqB,IAArB,EAA2B,CAA3B,CADS;AAElB8I,kBAAU;AAFQ,CAAtB;;AAKA,IAAIqM,OAAO,IAAIxrB,MAAMse,IAAV,EAAX;AACA,IAAIqO,OAAO,IAAI3sB,MAAMqW,OAAV,EAAX;;IAEMkJ,a;AACF;AACA,+BAAYknB,UAAZ,EAAwB3kC,MAAxB,EAA+B;AAAA;;AAE3B,qBAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,qBAAKgyB,UAAL,GAAkBA,UAAlB;AACA,qBAAKzzB,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;;AAEA,oBAAIoZ,YAAY,IAAIl4B,MAAMm4B,WAAV,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,CAAhB;AACA,oBAAIC,gBAAgB,IAAIxvB,gBAAMyvB,wBAAV,CAAmC,KAAKv2B,MAAL,CAAYqd,QAA/C,CAApB;AACA,qBAAK8Y,YAAL,GAAoB,IAAIj4B,MAAMkJ,IAAV,CAAegvB,SAAf,EAA0BE,aAA1B,CAApB;AACAxvB,gCAAM0vB,aAAN,CAAoB,KAAKL,YAAzB;;AAEA,qBAAKjlB,IAAL,CAAU7Q,GAAV,CAAc,KAAK81B,YAAnB;;AAEA,qBAAK7oB,MAAL;AACH;;;;yCAEO;AACJoc,6BAAK9I,aAAL,CAAmB,KAAK+jB,UAAxB;AACA,4BAAMvkB,eAAe,IAAIliB,MAAMmiB,OAAV,GAAoBC,UAApB,CAA+B,KAAKqkB,UAAL,CAAgBpkB,WAA/C,CAArB;AACAmJ,6BAAK7I,YAAL,CAAkBT,YAAlB;AACAsJ,6BAAK5I,OAAL,CAAa+J,IAAb;AACA,4BAAIphB,SAASohB,KAAKhuB,CAAlB;;AAEA,4BAAIugB,UAAU,KAAKpd,MAAL,CAAYod,OAA1B;AACA,4BAAIsa,YAAYn9B,KAAKiQ,GAAL,CAAS,KAAT,EAAgB4S,QAAQvgB,CAAxB,CAAhB;AACA,6BAAKs5B,YAAL,CAAkBpX,KAAlB,CAAwBxgB,GAAxB,CAA4BhE,KAAKiQ,GAAL,CAAS,KAAT,EAAgBqgB,KAAKjuB,CAAL,GAASwgB,QAAQxgB,CAAR,GAAY,CAArC,CAA5B,EAAqE86B,SAArE,EAAgFn9B,KAAKiQ,GAAL,CAAS,KAAT,EAAgBqgB,KAAKvsB,CAAL,GAAS8e,QAAQ9e,CAAR,GAAY,CAArC,CAAhF;;AAEAorB,6BAAKO,SAAL,CAAeY,IAAf;AACA,6BAAKsL,YAAL,CAAkB7sB,QAAlB,CAA2B/K,GAA3B,CAA+BssB,KAAKjuB,CAApC,EAAuCiuB,KAAKhuB,CAAL,GAAS4M,SAAS,CAAlB,GAAsBiuB,SAA7D,EAAwE7M,KAAKvsB,CAA7E;AACH;;;;;;kBAGUmf,a;;;;;;;;;;;;;;;AChDf;;;;;;;;AAGA,IAAMmnB,eAAe,IAAI1mC,MAAMisB,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAArB;AACA,IAAM0a,kBAAkB,IAAI3mC,MAAMgI,iBAAV,CAA4B,EAAC+lB,MAAM/tB,MAAMw3B,QAAb,EAAuBoP,YAAW,KAAlC,EAAyCC,WAAU,IAAnD,EAA5B,CAAxB;AACA,IAAMC,qBAAqB,IAAI9mC,MAAMgI,iBAAV,CAA4B,EAAC+lB,MAAM/tB,MAAMw3B,QAAb,EAA5B,CAA3B;;AAEA;AACA;AACA,IAAM/iB,gBAAgB;AAClB1U,WAAO,QADW;AAElByJ,aAAS,CAFS;AAGlBsW,kBAAc,CAHI;AAIlBinB,iBAAa;AAJK,CAAtB;;AAOA,IAAIC,WAAW,IAAIhnC,MAAMse,IAAV,EAAf;AACA,IAAIiY,cAAc,IAAIv2B,MAAMmiB,OAAV,EAAlB;;IAEMtC,O;;AAEF;AACA,qBAAY/d,MAAZ,EAAmB;AAAA;;AAEf,aAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,aAAKzB,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;;AAEA;AACA,aAAKmoB,QAAL,GAAgB,IAAIt+B,GAAJ,EAAhB;AACH;;AAED;;;;;kCA6ES;AACL,iBAAKqK,IAAL,CAAUmR,OAAV,GAAoB,KAApB;AACH;;;0BA9EY7iB,K,EAAM;AACf,gBAAG,CAACA,KAAJ,EAAW,OAAO,KAAK4lC,OAAL,EAAP;;AAEX,iBAAKl0B,IAAL,CAAUmR,OAAV,GAAoB,IAApB;;AAEA,gBAAG,KAAKnb,QAAL,KAAkBxL,SAArB,EAAgC,KAAKwL,QAAL,GAAgB29B,gBAAgB/pB,KAAhB,EAAhB;AAChC,gBAAI5T,WAAW,KAAKA,QAApB;AACIA,qBAASjJ,KAAT,CAAeqJ,MAAf,CAAsB,KAAKtH,MAAL,CAAY/B,KAAlC;AACAiJ,qBAASQ,OAAT,GAAmBxJ,MAAM3D,IAAN,CAAWkN,KAAX,CAAiB,KAAKzH,MAAL,CAAY0H,OAA7B,EAAsC,CAAtC,EAAyC,CAAzC,CAAnB;AACAR,qBAASS,WAAT,GAAuB,IAAvB,CATW,CASiB;AAC5BT,qBAASyuB,aAAT,GAAyB,IAAzB;AACAzuB,qBAAS0uB,mBAAT,GAA+B,CAAC,KAAK51B,MAAL,CAAYge,YAA5C;AACA9W,qBAAS2uB,kBAAT,GAA8B,KAAK71B,MAAL,CAAYilC,WAA1C;;AAEJ,gBAAInnB,UAAU,KAAKqnB,QAAL,CAAc5lC,GAAd,CAAkBC,KAAlB,CAAd;AACA,gBAAG,CAACse,OAAJ,EAAY;AACRA,0BAAUte,MAAMsb,KAAN,CAAY,IAAZ,CAAV;AACA,oBAAGgD,mBAAmB5f,MAAMkJ,IAA5B,EAAiC;AAC7B0W,4BAAQ5W,QAAR,GAAmBA,QAAnB;AACH,iBAFD,MAGI;AACA4W,4BAAQunB,QAAR,CAAiBzpC,OAAjB,CAAyB;AAAA,+BAAU0pC,OAAOx9B,QAAP,CAAgB,UAASC,KAAT,EAAe;AAC9D,gCAAGA,iBAAiB7J,MAAMkJ,IAA1B,EAA+B;AAC3B,oCAAIm+B,eAAex9B,MAAM+S,KAAN,EAAnB;AACAyqB,6CAAar+B,QAAb,GAAwBA,QAAxB;AACA,oCAAGa,MAAMif,MAAT,EAAgB;AACZ;AACAjf,0CAAMif,MAAN,CAAa3mB,GAAb,CAAiBklC,YAAjB;AACAx9B,0CAAMif,MAAN,CAAa/W,MAAb,CAAoBlI,KAApB;AACH;AACJ;AACJ,yBAVkC,CAAV;AAAA,qBAAzB;AAWH;;AAED,qBAAKo9B,QAAL,CAAc5mC,GAAd,CAAkBiB,KAAlB,EAAyBse,OAAzB;AACH;;AAEDte,kBAAM2gB,iBAAN;AACArC,oBAAQyC,WAAR,CAAoBzG,IAApB,CAAyBta,MAAM+gB,WAA/B;;AAEA,mBAAM,KAAKrP,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAAlC;AAAqC,qBAAKiU,IAAL,CAAUjB,MAAV,CAAiB,KAAKiB,IAAL,CAAUm0B,QAAV,CAAmB,KAAKn0B,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAA/C,CAAjB;AAArC,aACA,KAAKiU,IAAL,CAAU7Q,GAAV,CAAcyd,OAAd;AACH;;AAED;;;;0BACQte,K,EAAM;AACV,gBAAG,CAACA,KAAJ,EAAW,OAAO,KAAK4lC,OAAL,EAAP;;AAEX,iBAAKl0B,IAAL,CAAUmR,OAAV,GAAoB,IAApB;;AAEA,gBAAG,KAAKmjB,WAAL,KAAqB9pC,SAAxB,EAAmC,KAAK8pC,WAAL,GAAmBR,mBAAmBlqB,KAAnB,EAAnB;AACnC,iBAAK0qB,WAAL,CAAiBvnC,KAAjB,CAAuBqJ,MAAvB,CAA8B,KAAKtH,MAAL,CAAY/B,KAA1C;AACA,iBAAKunC,WAAL,CAAiB99B,OAAjB,GAA2BxJ,MAAM3D,IAAN,CAAWkN,KAAX,CAAiB,KAAKzH,MAAL,CAAY0H,OAA7B,EAAsC,CAAtC,EAAyC,CAAzC,CAA3B;AACA,iBAAK89B,WAAL,CAAiB79B,WAAjB,GAA+B,KAAK69B,WAAL,CAAiB99B,OAAjB,GAA2B,IAA1D;;AAEA,gBAAG,KAAK+9B,OAAL,KAAiB/pC,SAApB,EAA8B;AAC1B,qBAAK+pC,OAAL,GAAe,IAAIvnC,MAAMkJ,IAAV,CAAew9B,YAAf,EAA6B,KAAKY,WAAlC,CAAf;AACH;;AAEDhmC,kBAAM2gB,iBAAN;AACA+kB,qBAAStkB,aAAT,CAAuBphB,KAAvB;AACA0lC,qBAASpkB,OAAT,CAAiB,KAAK5P,IAAL,CAAU6N,KAA3B;AACA,iBAAK7N,IAAL,CAAU6N,KAAV,CAAgB2mB,SAAhB,CAA0B,KAAK1lC,MAAL,CAAYge,YAAtC;AACAknB,qBAASjb,SAAT,CAAmB,KAAK/Y,IAAL,CAAU5H,QAA7B;;AAEA,gBAAI0d,SAAS,KAAK9V,IAAL,CAAU8V,MAAvB;AACA,gBAAGA,MAAH,EAAU;AACNA,uBAAO7G,iBAAP;AACA,oBAAIwlB,UAAUlR,YAAYnU,UAAZ,CAAuB0G,OAAOzG,WAA9B,CAAd;AACA,qBAAKrP,IAAL,CAAU00B,WAAV,CAAsBD,OAAtB;AACH;;AAED,mBAAM,KAAKz0B,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAAlC;AAAqC,qBAAKiU,IAAL,CAAUjB,MAAV,CAAiB,KAAKiB,IAAL,CAAUm0B,QAAV,CAAmB,KAAKn0B,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAA/C,CAAjB;AAArC,aACA,KAAKiU,IAAL,CAAU7Q,GAAV,CAAc,KAAKolC,OAAnB;AACH;;;;;;kBAQU1nB,O;;;;;;;;;;;;;;;ACnHf;;;;;;;;AAEA,IAAM9b,OAAO,QAAb;AACA,IAAM4jC,QAAQ77B,OAAO,MAAP,CAAd;;IAEMiL,M;AACF,sBAAa;AAAA;;AACT;;;AAGA,aAAK3L,QAAL,GAAgB,IAAIpL,MAAMqW,OAAV,EAAhB;;AAEA;;;AAGA,aAAKvQ,UAAL,GAAkB,IAAIC,oBAAJ,EAAlB;;AAEA,aAAK4hC,KAAL,IAAc,IAAI3nC,MAAMse,IAAV,EAAd;AACH;;AAED;;;;;iCAQQ;AACJ,mBAAO;AACHva,sBAAMA,IADH;AAEHqH,0BAAU,KAAKA,QAFZ;AAGHtF,4BAAY,KAAKA;AAHd,aAAP;AAKH;;;mCAES;AACN,mBAAO,KAAKA,UAAL,CAAgBR,QAAhB,EAAP;AACH;;;4BAjBS;AACN;AACA,gBAAI9F,IAAI,KAAKmoC,KAAL,CAAR;AACAnoC,cAAEooC,oBAAF,CAAuB,KAAKx8B,QAA5B,EAAsC,KAAKtF,UAAL,CAAgB6mB,IAAtD;AACA,mBAAOntB,CAAP;AACH;;;iCAceuC,I,EAAMoF,M,EAAO;AACzB,gBAAI,CAAEA,MAAN,EAAe;AACX,oBAAGpF,KAAKgC,IAAL,KAAcA,IAAjB,EAAuBe,QAAQxB,IAAR,CAAa,2BAA2BS,IAAxC;;AAEvBoD,yBAAS,IAAI4P,MAAJ,EAAT;AACH;;AAED5P,mBAAOiE,QAAP,GAAkB,IAAIpL,MAAMqW,OAAV,CAAkBtU,KAAKqJ,QAAL,CAAc1M,CAAhC,EAAmCqD,KAAKqJ,QAAL,CAAczM,CAAjD,EAAoDoD,KAAKqJ,QAAL,CAAchL,CAAlE,CAAlB;AACA+G,mBAAOrB,UAAP,GAAoBC,qBAAW4F,QAAX,CAAoB5J,KAAK+D,UAAzB,CAApB;;AAEA,mBAAOqB,MAAP;AACH;;;;;;kBAGU4P,M;;;;;;;;;;;;;;;;ACgBf;;;;iCAGA,WAAgC8wB,MAAhC,EAAwC9nC,KAAxC,EAA+C+nC,KAA/C,EAAsDrS,SAAtD,EAAiEsS,MAAjE,EAAyEC,UAAzE,EAAqFC,WAArF,EAAiG;AAC7F,aAAI,IAAIhpC,IAAI,CAAZ,EAAeA,IAAI8oC,MAAnB,EAA2B9oC,GAA3B,EAA+B;AAC3BipC,wBAAYL,MAAZ,EAAoB9nC,KAApB,EAA2B+nC,KAA3B,EAAkCE,UAAlC,EAA8CvS,SAA9C;AACA,kBAAM0S,MAAMH,aAAaC,WAAnB,CAAN;AACH;AACJ,K;;oBALcG,gB;;;;;AAOf;;;AA60BA;;;;;;;kCAMA,WAAoB58B,SAApB,EAA+B6J,KAA/B,EAAsCvT,MAAtC,EAA6C;;AAEzC,aAAKA,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;AACA3P,gBAAQE,GAAR,CAAY,YAAZ,EAA0B,KAAKlD,MAA/B;;AAEAsO,wBAAM+lB,GAAN,CAAUkS,yBAAV,CAAoC,KAApC;;AAEA,YAAIC,kBAAkB,IAAIC,eAAJ,CAAoB/8B,SAApB,EAA+B,KAAK1J,MAApC,CAAtB;AACAwmC,wBAAgBjzB,KAAhB,GAAwBA,KAAxB;;AAEA,YAAI4S,QAAQ5S,MAAMtW,MAAN,GAAe,CAA3B;;AAEA;AACA,iBAASypC,UAAT,CAAoBxlC,KAApB,EAA0B;AACtB,gBAAI0S,OAAOL,MAAMrS,KAAN,CAAX;AACAslC,4BAAgBG,WAAhB,CAA4B/yB,IAA5B;AACAL,kBAAMnS,MAAN,CAAaF,KAAb,EAAoB,CAApB;AACAilB;AACH;;AAED;AACA;AACA,iBAASygB,QAAT,CAAkB1lC,KAAlB,EAAyB0S,IAAzB,EAA8B;AAC1B4yB,4BAAgBK,SAAhB,CAA0BjzB,IAA1B;;AAEAA,iBAAKU,GAAL,CAASnQ,QAAT;AACA,gBAAGyP,KAAKU,GAAL,CAASnQ,QAAT,KAAsB,CAAzB,EAA2B;AACvBoP,sBAAMnS,MAAN,CAAaF,KAAb,EAAoB,CAApB;AACAilB;AACH;AACJ;;AAED,eAAM5S,MAAMtW,MAAN,GAAe,CAArB,EAAuB;AACnB,gBAAI2W,OAAOL,MAAM4S,KAAN,CAAX;;AAEA;AACAqgB,4BAAgBM,cAAhB;AACA,gBAAI,MAAMT,MAAM,EAAN,CAAN;;AAEJ;AACA,gBAAIU,aAAaP,gBAAgBQ,UAAhB,CAA2BpzB,KAAK1P,MAAhC,CAAjB;AACA,gBAAI6iC,eAAe,KAAnB,EAA0B;;AAEtB,oBAAIE,SAAS,qBAAT;AACJP,2BAAWvgB,KAAX;AACH,aAJD,MAKI;;AAEA;AACA,oBAAI9R,aAAamyB,gBAAgBU,YAAhB,CAA6BtzB,IAA7B,CAAjB;AACA,oBAAIS,eAAe,KAAnB,EAA0B;;AAEtB,wBAAI4yB,SAAS,sBAAT;AACJP,+BAAWvgB,KAAX;AACH,iBAJD,MAKI;;AAEAygB,6BAASzgB,KAAT,EAAgB9R,UAAhB;AACH;AACJ;;AAED,gBAAI,MAAMgyB,MAAM,EAAN,CAAN;AACP;;AAEDG,wBAAgBpyB,WAAhB,CAA4BsI,IAA5B,CAAiCyqB,WAAW/nB,IAA5C;;AAEAgoB;AACA94B,wBAAM+lB,GAAN,CAAUkS,yBAAV,CAAoC,IAApC;;AAEA,eAAOC,eAAP;AACH,K;;oBAtEcxyB,I;;;;;AAj6Bf;;AACA;;;;AACA;;AACA;;;;;;;;;;2cALA;;AAOA,IAAMqzB,YAAY,KAAlB;;AAEA,IAAIC,UAAU,IAAd;AACA,IAAGD,SAAH,EAAa;AACT/4B,oBAAMyN,GAAN,CAAUpL,UAAV,CAAqB7T,KAArB,CAA2ByqC,UAA3B,CAAsC,CAAC,OAAD,EAAU,OAAV,CAAtC;AACH;;AAED,SAASlB,KAAT,CAAemB,EAAf,EAAmBC,KAAnB,EAA0B;AACtB,WAAO,IAAI1vB,OAAJ,CAAY,mBAAW;AAC1B,YAAGsvB,aAAaI,KAAhB,EAAuBv7B,WAAW8L,OAAX,EAAoBwvB,EAApB,EAAvB,KACKxvB;AACR,KAHM,CAAP;AAIH;;AAED,SAAS/L,KAAT,CAAeu7B,EAAf,EAAmBC,KAAnB,EAA0B;AACtB,WAAO,IAAI1vB,OAAJ,CAAY,mBAAW;AAC1B,YAAGsvB,aAAaI,KAAhB,EAAsB;AAAA,gBAETC,OAFS,GAElB,SAASA,OAAT,GAAkB;AACd,oBAAGC,QAAQjsC,SAAX,EAAsB6jC,aAAaoI,GAAb;AACtBzZ,oCAAoB,SAApB,EAA+BwZ,OAA/B;AACA1vB;AACH,aANiB;;AAClB,gBAAI2vB,MAAMjsC,SAAV;;AAMA,gBAAG8rC,MAAMA,KAAK,CAAd,EAAiBG,MAAMz7B,WAAWw7B,OAAX,EAAoBF,EAApB,CAAN;AACjB7jB,6BAAiB,SAAjB,EAA4B+jB,OAA5B;AACH,SATD,MAUI;AACA1vB;AACH;AACJ,KAdM,CAAP;AAeH;;AAED,SAAS2kB,QAAT,CAAkB6K,EAAlB,EAAsBC,KAAtB,EAA6B;AACzB,WAAO,IAAI1vB,OAAJ,CAAY,mBAAW;AAC1B,YAAGsvB,aAAaI,KAAhB,EAAsB;AAAA,gBAETC,OAFS,GAElB,SAASA,OAAT,GAAkB;AACd,oBAAGC,QAAQjsC,SAAX,EAAsB6jC,aAAaoI,GAAb;AACtBzZ,oCAAoB,SAApB,EAA+BwZ,OAA/B;AACA1vB;AACH,aANiB;;AAClB,gBAAI2vB,MAAMjsC,SAAV;;AAMA,gBAAG8rC,MAAMA,KAAK,CAAd,EAAiBG,MAAMz7B,WAAWw7B,OAAX,EAAoBF,EAApB,CAAN;AACjB7jB,6BAAiB,SAAjB,EAA4B+jB,OAA5B;AACH,SATD,MAUI;AACA1vB;AACH;AACJ,KAdM,CAAP;AAeH;;AAED,SAASivB,QAAT,GAA0B;AAAA;;AACtB,yBAAQ/jC,GAAR;AACH;;AAED;;;AAGA,SAASkjC,WAAT,CAAqBL,MAArB,EAA6B9nC,KAA7B,EAAoC+nC,KAApC,EAA2CvS,QAA3C,EAAqDE,SAArD,EAA+D;AAC3D,QAAI/2B,IAAImpC,OAAOnpC,CAAf;AAAA,QAAkBC,IAAIkpC,OAAOlpC,CAA7B;AAAA,QAAgCyB,IAAIynC,OAAOznC,CAA3C;AAAA,QAA8CM,IAAImnC,OAAOv8B,KAAzD;AAAA,QAAgE+pB,IAAIwS,OAAOt8B,MAA3E;AAAA,QAAmF+pB,IAAIuS,OAAO9oC,MAA9F;AACA,QAAI2qC,WAAWt5B,gBAAM+lB,GAAN,CAAUwT,UAAV,CAAqBjrC,IAAIgC,IAAE,CAA3B,EAA8B/B,IAAI02B,IAAE,CAApC,EAAuCj1B,IAAIk1B,IAAE,CAA7C,EAAgD50B,CAAhD,EAAmD20B,CAAnD,EAAsDC,CAAtD,EAAyDv1B,SAAS,QAAlE,EAA4Ew1B,YAAY,CAAC,CAAzF,EAA4F,CAAC8M,QAAQyF,KAAR,CAA7F,EAA6GrS,SAA7G,CAAf;AACA,WAAOiU,QAAP;AACH,CAaD,SAASR,UAAT,CAAoBU,IAApB,EAAyB;AACrB,QAAGA,IAAH,EAAQ;AACJA,aAAKlsC,OAAL,CAAa,eAAO;AAChB0S,4BAAM+lB,GAAN,CAAUR,iBAAV,CAA4BprB,GAA5B;AACH,SAFD;AAGH,KAJD,MAKI;AACA6F,wBAAM+lB,GAAN,CAAU0T,QAAV;AACH;AACJ;;AAED,IAAMnkC,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMmkC,aAAa,OAAnB;AACA,IAAMC,iBAAiB,IAAvB;;IAEMC,M;AACF;;;AAGA,oBAAYtrC,CAAZ,EAAeC,CAAf,EAAkByB,CAAlB,EAAqBkL,KAArB,EAA4BC,MAA5B,EAAoCxM,MAApC,EAA4CkrC,UAA5C,EAAuD;AAAA;;AACnD,aAAKx+B,GAAL,CAAS/M,CAAT,EAAYC,CAAZ,EAAeyB,CAAf,EAAkBkL,KAAlB,EAAyBC,MAAzB,EAAiCxM,MAAjC,EAAyCkrC,UAAzC;AACH;;AAED;;;;;;;4BAGIvrC,C,EAAGC,C,EAAGyB,C,EAAGkL,K,EAAOC,M,EAAQxM,M,EAAQkrC,U,EAAW;AAC3C,iBAAKvrC,CAAL,GAASA,CAAT,CAAY,KAAKC,CAAL,GAASA,CAAT,CAAY,KAAKyB,CAAL,GAASA,CAAT;AACxB,iBAAKkL,KAAL,GAAaA,KAAb,CAAoB,KAAKC,MAAL,GAAcA,MAAd,CAAsB,KAAKxM,MAAL,GAAcA,MAAd;AAC1C,iBAAKkrC,UAAL,GAAkBA,UAAlB;AACA,mBAAO,IAAP;AACH;;AAED;;;;6BACKpC,M,EAAO;AACR,iBAAKp8B,GAAL,CAASo8B,OAAOnpC,CAAhB,EAAmBmpC,OAAOlpC,CAA1B,EAA6BkpC,OAAOznC,CAApC,EAAuCynC,OAAOv8B,KAA9C,EAAqDu8B,OAAOt8B,MAA5D,EAAoEs8B,OAAO9oC,MAA3E,EAAmF8oC,OAAOoC,UAA1F;AACA,mBAAO,IAAP;AACH;;;;;AAMD;;;;mCAIW3nB,M,EAAO;AACd,gBAAI5jB,IAAI,KAAKA,CAAL,GAAS4jB,MAAjB;AAAA,gBAAyB3jB,IAAI,KAAKA,CAAL,GAAS2jB,MAAtC;AAAA,gBAA8CliB,IAAI,KAAKA,CAAL,GAASkiB,MAA3D;AAAA,gBAAmE5hB,IAAI,KAAK4K,KAAL,GAAagX,SAAS,CAA7F;AAAA,gBAAgG+S,IAAI,KAAK9pB,MAAL,GAAc+W,SAAS,CAA3H;AAAA,gBAA8HgT,IAAI,KAAKv2B,MAAL,GAAcujB,SAAS,CAAzJ;;AAEA4nB,wBAAY,CAAZ,IAAiBxrC,CAAjB,CAA0BwrC,YAAY,CAAZ,IAAiBvrC,CAAjB,CAA0BurC,YAAY,CAAZ,IAAiB9pC,CAAjB,CAHtC,CAGkE;AAChF8pC,wBAAY,CAAZ,IAAiBxrC,IAAIgC,CAArB,CAA0BwpC,YAAY,CAAZ,IAAiBvrC,CAAjB,CAA0BurC,YAAY,CAAZ,IAAiB9pC,CAAjB,CAJtC,CAIkE;AAChF8pC,wBAAY,CAAZ,IAAiBxrC,CAAjB,CAA0BwrC,YAAY,CAAZ,IAAiBvrC,IAAI02B,CAArB,CAA0B6U,YAAY,CAAZ,IAAiB9pC,CAAjB,CALtC,CAKkE;AAChF8pC,wBAAY,CAAZ,IAAiBxrC,IAAIgC,CAArB,CAA0BwpC,YAAY,EAAZ,IAAkBvrC,IAAI02B,CAAtB,CAA0B6U,YAAY,EAAZ,IAAkB9pC,CAAlB,CANtC,CAMkE;;AAEhF8pC,wBAAY,EAAZ,IAAkBxrC,CAAlB,CAA0BwrC,YAAY,EAAZ,IAAkBvrC,CAAlB,CAA0BurC,YAAY,EAAZ,IAAkB9pC,IAAIk1B,CAAtB,CARtC,CAQkE;AAChF4U,wBAAY,EAAZ,IAAkBxrC,IAAIgC,CAAtB,CAA0BwpC,YAAY,EAAZ,IAAkBvrC,CAAlB,CAA0BurC,YAAY,EAAZ,IAAkB9pC,IAAIk1B,CAAtB,CATtC,CASkE;AAChF4U,wBAAY,EAAZ,IAAkBxrC,CAAlB,CAA0BwrC,YAAY,EAAZ,IAAkBvrC,IAAI02B,CAAtB,CAA0B6U,YAAY,EAAZ,IAAkB9pC,IAAIk1B,CAAtB,CAVtC,CAUkE;AAChF4U,wBAAY,EAAZ,IAAkBxrC,IAAIgC,CAAtB,CAA0BwpC,YAAY,EAAZ,IAAkBvrC,IAAI02B,CAAtB,CAA0B6U,YAAY,EAAZ,IAAkB9pC,IAAIk1B,CAAtB,CAXtC,CAWkE;;AAEhF4U,wBAAY,EAAZ,IAAkBxrC,IAAIgC,IAAE,CAAxB,CAA0BwpC,YAAY,EAAZ,IAAkBvrC,IAAI02B,IAAE,CAAxB,CAA0B6U,YAAY,EAAZ,IAAkB9pC,IAAIk1B,IAAE,CAAxB,CAbtC,CAakE;;AAEhF,mBAAO4U,WAAP;AACH;;AAED;;;;;;;uCAIetnC,M,EAAO;AAClB,gBAAGA,WAAWpF,SAAd,EAAyBoF,SAASunC,UAAT;AACzB,gBAAIzrC,IAAI,KAAKA,CAAb;AAAA,gBAAgBC,IAAI,KAAKA,CAAzB;AAAA,gBAA4ByB,IAAI,KAAKA,CAArC;AAAA,gBAAwCM,IAAI,KAAK4K,KAAjD;AAAA,gBAAwDgqB,IAAI,KAAKv2B,MAAjE;;AAEA6D,mBAAO,CAAP,IAAYlE,CAAZ,CAAuBkE,OAAO,CAAP,IAAYjE,CAAZ,CAAmBiE,OAAO,CAAP,IAAYxC,CAAZ;AAC1CwC,mBAAO,CAAP,IAAYlE,IAAIgC,CAAhB,CAAuBkC,OAAO,CAAP,IAAYjE,CAAZ,CAAmBiE,OAAO,CAAP,IAAYxC,CAAZ;AAC1CwC,mBAAO,CAAP,IAAYlE,IAAIgC,CAAhB,CAAuBkC,OAAO,CAAP,IAAYjE,CAAZ,CAAmBiE,OAAO,CAAP,IAAYxC,IAAIk1B,CAAhB;AAC1C1yB,mBAAO,CAAP,IAAYlE,CAAZ,CAAuBkE,OAAO,EAAP,IAAajE,CAAb,CAAmBiE,OAAO,EAAP,IAAaxC,IAAIk1B,CAAjB;;AAE1C,mBAAO1yB,MAAP;AACH;;AAED;;;;;;sCAGc0f,M,EAAQ8nB,E,EAAIC,E,EAAIC,E,EAAG;AAC7B,gBAAI5rC,IAAI,KAAKA,CAAL,GAAS4jB,MAAjB;AAAA,gBAAyB3jB,IAAI,KAAKA,CAAL,GAAS2jB,MAAtC;AAAA,gBAA8CliB,IAAI,KAAKA,CAAL,GAASkiB,MAA3D;AAAA,gBAAmE5hB,IAAI,KAAK4K,KAAL,GAAagX,SAAS,CAA7F;AAAA,gBAAgG+S,IAAI,KAAK9pB,MAAL,GAAc+W,SAAS,CAA3H;AAAA,gBAA8HgT,IAAI,KAAKv2B,MAAL,GAAcujB,SAAS,CAAzJ;AACA,mBAAO8nB,KAAK1rC,CAAL,IAAU0rC,KAAK1rC,IAAIgC,CAAnB,IACA2pC,KAAK1rC,CADL,IACU0rC,KAAK1rC,IAAI02B,CADnB,IAEAiV,KAAKlqC,CAFL,IAEUkqC,KAAKlqC,IAAIk1B,CAF1B;AAGH;;AAED;;;;uCACehT,M,EAAQioB,S,EAAU;AAC7B,gBAAI7rC,IAAI,KAAKA,CAAL,GAAS4jB,MAAjB;AAAA,gBAAyB3jB,IAAI,KAAKA,CAAL,GAAS2jB,MAAtC;AAAA,gBAA8CliB,IAAI,KAAKA,CAAL,GAASkiB,MAA3D;AAAA,gBAAmE5hB,IAAI,KAAK4K,KAAL,GAAagX,SAAS,CAA7F;AAAA,gBAAgG+S,IAAI,KAAK9pB,MAAL,GAAc+W,SAAS,CAA3H;AAAA,gBAA8HgT,IAAI,KAAKv2B,MAAL,GAAcujB,SAAS,CAAzJ;AACA,gBAAIkoB,KAAKD,UAAU7rC,CAAnB;AAAA,gBAAsB+rC,KAAKF,UAAU5rC,CAArC;AAAA,gBAAwC+rC,KAAKH,UAAUnqC,CAAvD;AAAA,gBAA0DuqC,KAAKJ,UAAUj/B,KAAzE;AAAA,gBAAgFs/B,KAAKL,UAAUh/B,MAA/F;AAAA,gBAAuGs/B,KAAKN,UAAUxrC,MAAtH;AACA,mBAAOyrC,KAAK9rC,CAAL,IAAU8rC,KAAKG,EAAL,GAAUjsC,IAAIgC,CAAxB,IACA+pC,KAAK9rC,CADL,IACU8rC,KAAKG,EAAL,GAAUjsC,IAAI02B,CADxB,IAEAqV,KAAKtqC,CAFL,IAEUsqC,KAAKG,EAAL,GAAUzqC,IAAIk1B,CAF/B;AAGH;;AAED;;;;mCACWhT,M,EAAQwoB,K,EAAM;AACrB,gBAAIpsC,IAAI,KAAKA,CAAL,GAAS4jB,MAAjB;AAAA,gBAAyB3jB,IAAI,KAAKA,CAAL,GAAS2jB,MAAtC;AAAA,gBAA8CliB,IAAI,KAAKA,CAAL,GAASkiB,MAA3D;AAAA,gBAAmE5hB,IAAI,KAAK4K,KAAL,GAAagX,SAAS,CAA7F;AAAA,gBAAgG+S,IAAI,KAAK9pB,MAAL,GAAc+W,SAAS,CAA3H;AAAA,gBAA8HgT,IAAI,KAAKv2B,MAAL,GAAcujB,SAAS,CAAzJ;;AAEA,mBAAO5jB,KAAKosC,MAAMpsC,CAAN,GAAUosC,MAAMx/B,KAArB,IAA8B5M,IAAIgC,CAAJ,IAASoqC,MAAMpsC,CAA7C,IACIC,KAAKmsC,MAAMnsC,CAAN,GAAUmsC,MAAMv/B,MADzB,IACmC5M,IAAI02B,CAAJ,IAASyV,MAAMnsC,CADlD,IAEIyB,KAAK0qC,MAAM1qC,CAAN,GAAU0qC,MAAM/rC,MAFzB,IAEmCqB,IAAIk1B,CAAJ,IAASwV,MAAM1qC,CAFzD;AAGH;;AAED;;;;;;gCAGQkiB,M,EAAQhX,K,EAAOC,M,EAAQxM,M,EAAQ6D,M,EAAO;AAC1C,gBAAG,CAACA,MAAJ,EAAYA,SAASmoC,UAAT;AACZ;AACA,gBAAIC,MAAM1/B,QAAQ,KAAKA,KAAL,GAAagX,SAAS,CAA9B,IAAmC/W,SAAS,KAAKA,MAAL,GAAc+W,SAAS,CAAnE,IAAwEvjB,SAAS,KAAKA,MAAL,GAAcujB,SAAS,CAAlH;AACA,gBAAG0oB,GAAH,EAAO;AACH;AACA,oBAAItsC,IAAI,KAAKurC,UAAL,KAAoB,CAApB,GAAwB,KAAKvrC,CAAL,GAAS,KAAK4M,KAAd,GAAsBA,KAA9C,GAAsD,KAAK5M,CAAnE;AACAkE,uBAAO6I,GAAP,CAAW/M,CAAX,EAAc,KAAKC,CAAnB,EAAsB,KAAKyB,CAA3B,EAA8BkL,KAA9B,EAAqCC,MAArC,EAA6CxM,MAA7C,EAAqD,KAAKkrC,UAA1D;AACA,uBAAOrnC,MAAP;AACH;;AAED,mBAAO,KAAP;AACH;;AAED;;;;iCACSilC,M,EAAQoD,a,EAAeC,O,EAAQ;AACpC,gBAAIC,UAAJ;;AAEA;AACA,gBAAIC,OAAOvD,OAAOnpC,CAAP,GAAWmpC,OAAOv8B,KAA7B;AACA,gBAAI8a,OAAO,KAAK1nB,CAAL,GAAS,KAAK4M,KAAd,GAAsB8/B,IAAjC;AACA,gBAAGhlB,OAAO6kB,aAAV,EAAwB;AACpB,oBAAII,OAAO,IAAIrB,MAAJ,CAAWoB,IAAX,EAAiB,KAAKzsC,CAAtB,EAAyB,KAAKyB,CAA9B,EAAiCgmB,IAAjC,EAAuC,KAAK7a,MAA5C,EAAoD,KAAKxM,MAAzD,EAAiE,CAAjE,CAAX;AACA,oBAAGosC,eAAe3tC,SAAlB,EAA6B2tC,aAAa,EAAb;AAC7BA,2BAAWjpC,IAAX,CAAgBmpC,IAAhB;AACH;;AAED;AACAD,mBAAO,KAAK1sC,CAAZ;AACA0nB,mBAAOyhB,OAAOnpC,CAAP,GAAW0sC,IAAlB;AACA,gBAAGhlB,OAAO6kB,aAAV,EAAwB;AACpB,oBAAIK,OAAO,IAAItB,MAAJ,CAAWoB,IAAX,EAAiB,KAAKzsC,CAAtB,EAAyB,KAAKyB,CAA9B,EAAiCgmB,IAAjC,EAAuC,KAAK7a,MAA5C,EAAoD,KAAKxM,MAAzD,EAAiE,CAAjE,CAAX;AACA,oBAAGosC,eAAe3tC,SAAlB,EAA6B2tC,aAAa,EAAb;AAC7BA,2BAAWjpC,IAAX,CAAgBopC,IAAhB;AACH;;AAED,gBAAI,CAACJ,OAAL,EAAc;AACV;AACAE,uBAAOvD,OAAOlpC,CAAP,GAAWkpC,OAAOt8B,MAAzB;AACA6a,uBAAO,KAAKznB,CAAL,GAAS,KAAK4M,MAAd,GAAuB6/B,IAA9B;AACA,oBAAGhlB,OAAO6kB,aAAV,EAAwB;AACpB,wBAAIM,OAAO,IAAIvB,MAAJ,CAAWnC,OAAOnpC,CAAlB,EAAqB0sC,IAArB,EAA2BvD,OAAOznC,CAAlC,EAAqCynC,OAAOv8B,KAA5C,EAAmD8a,IAAnD,EAAyDyhB,OAAO9oC,MAAhE,EAAwE,CAAxE,CAAX,CADoB,CACmE;AACvF,wBAAGosC,eAAe3tC,SAAlB,EAA6B2tC,aAAa,EAAb;AAC7BA,+BAAWjpC,IAAX,CAAgBqpC,IAAhB;AACH;AACJ;;AAED;AACAH,mBAAO,KAAKhrC,CAAZ;AACAgmB,mBAAOyhB,OAAOznC,CAAP,GAAWgrC,IAAlB;AACA,gBAAG,KAAH,EAAiC;AAC7B,oBAAII,QAAQ,IAAIxB,MAAJ,CAAW,KAAKtrC,CAAhB,EAAmB,KAAKC,CAAxB,EAA2BysC,IAA3B,EAAiC,KAAK9/B,KAAtC,EAA6C,KAAKC,MAAlD,EAA0D6a,IAA1D,EAAgE,CAAhE,CAAZ,CAD6B,CACmD;AAChF,oBAAG+kB,eAAe3tC,SAAlB,EAA6B2tC,aAAa,EAAb;AAC7BA,2BAAWjpC,IAAX,CAAgBspC,KAAhB;AACH;;AAED;AACAJ,mBAAOvD,OAAOznC,CAAP,GAAWynC,OAAO9oC,MAAzB;AACAqnB,mBAAO,KAAKhmB,CAAL,GAAS,KAAKrB,MAAd,GAAuBqsC,IAA9B;AACA,iBAAKhrC,CAAL,GAASgrC,IAAT;AACA,iBAAKrsC,MAAL,GAAcqnB,IAAd;;AAEA,mBAAO+kB,UAAP;AACH;;AAED;;;;0CACkBL,K,EAAM;AACpB,gBAAIW,OAAO,KAAKC,cAAL,CAAoBvB,UAApB,CAAX;AAAA,gBACIwB,OAAOb,MAAMY,cAAN,CAAqBE,WAArB,CADX;;AAGA,gBAAIC,WAAW,CAAf;AACA,gBAAIC,gBAAgB,EAApB;AACA,iBAAI,IAAIC,KAAK,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,MAAM,CAA/B,EAAiC;AAC7B,oBAAIC,QAAQD,KAAK,CAAL,KAAW,EAAX,GAAgB,CAAhB,GAAoBA,KAAK,CAArC;AACA,oBAAIE,KAAKR,KAAKM,EAAL,CAAT;AAAA,oBAAmBG,KAAKT,KAAKM,KAAK,CAAV,CAAxB;AAAA,oBAAsCI,MAAMV,KAAKO,KAAL,CAA5C;AAAA,oBAAyDI,MAAMX,KAAKO,QAAQ,CAAb,CAA/D;;AAEA,qBAAI,IAAIK,KAAK,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,MAAM,CAA/B,EAAiC;AAC7B,wBAAIC,QAAQD,KAAK,CAAL,KAAW,EAAX,GAAgB,CAAhB,GAAoBA,KAAK,CAArC;AACA,wBAAIE,KAAKZ,KAAKU,EAAL,CAAT;AAAA,wBAAmBG,KAAKb,KAAKU,KAAK,CAAV,CAAxB;AAAA,wBAAsCI,MAAMd,KAAKW,KAAL,CAA5C;AAAA,wBAAyDI,MAAMf,KAAKW,QAAQ,CAAb,CAA/D;;AAEA,wBACI,oCAAuBxC,UAAvB,EAAmC2B,KAAK,CAAL,CAAnC,EAA4CA,KAAK,CAAL,CAA5C,EAAqDA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAA/D,EAAwEA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAlF,EAA2Fc,EAA3F,EAA+FC,EAA/F,KACG,oCAAuB1C,UAAvB,EAAmC6B,KAAK,CAAL,CAAnC,EAA4CA,KAAK,CAAL,CAA5C,EAAqDA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAA/D,EAAwEA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAlF,EAA2FM,EAA3F,EAA+FC,EAA/F,CAFP,EAGC;AACGL;AACH;;AAED,wBAAIpqB,eAAe,4BAAewqB,EAAf,EAAmBC,EAAnB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCG,EAAjC,EAAqCC,EAArC,EAAyCC,GAAzC,EAA8CC,GAA9C,CAAnB;AACA,wBAAGjrB,iBAEK,oCAAuBqoB,UAAvB,EAAmC2B,KAAK,CAAL,CAAnC,EAA4CA,KAAK,CAAL,CAA5C,EAAqDA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAA/D,EAAwEA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAlF,EAA2FhqB,aAAa/iB,CAAxG,EAA2G+iB,aAAa9iB,CAAxH,KACG,oCAAuBmrC,UAAvB,EAAmC6B,KAAK,CAAL,CAAnC,EAA4CA,KAAK,CAAL,CAA5C,EAAqDA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAA/D,EAAwEA,KAAK,CAAL,IAAUA,KAAK,CAAL,CAAlF,EAA2FlqB,aAAa/iB,CAAxG,EAA2G+iB,aAAa9iB,CAAxH,CAHR,CAAH,EAKC;AACGmtC,sCAAc5pC,IAAd,CAAmBuf,YAAnB;AACH;AACJ;AACJ;;AAED,gBAAGoqB,WAAW,CAAd,EAAgB;AACZ,qBAAI,IAAI5sC,IAAI,CAAZ,EAAeA,IAAI,EAAnB,EAAuBA,KAAK,CAA5B;AAA+B6sC,kCAAc5pC,IAAd,CAAmB,EAACxD,GAAG+sC,KAAKxsC,CAAL,CAAJ,EAAaN,GAAG8sC,KAAKxsC,IAAI,CAAT,CAAhB,EAAnB,EAAiD,EAACP,GAAGitC,KAAK1sC,CAAL,CAAJ,EAAaN,GAAGgtC,KAAK1sC,IAAI,CAAT,CAAhB,EAAjD;AAA/B;AACH,aAFD,MAGI;AACA6sC,8BAAc/sC,MAAd,GAAuB,CAAvB;AACH;;AAED,gBAAI4tC,aAAa,kCAAqBb,aAArB,CAAjB;;AAEA,gBAAIc,QAAQ,EAAEC,IAAI,EAACnuC,GAAG+sC,KAAK,CAAL,CAAJ,EAAa9sC,GAAG8sC,KAAK,CAAL,CAAhB,EAAN,EAAgCqB,IAAI,EAACpuC,GAAG+sC,KAAK,CAAL,CAAJ,EAAa9sC,GAAG8sC,KAAK,CAAL,CAAhB,EAApC,EAA8DsB,IAAI,EAACruC,GAAG+sC,KAAK,CAAL,CAAJ,EAAa9sC,GAAG8sC,KAAK,CAAL,CAAhB,EAAlE,EAA4FuB,IAAI,EAACtuC,GAAG+sC,KAAK,CAAL,CAAJ,EAAa9sC,GAAG8sC,KAAK,EAAL,CAAhB,EAAhG,EAAZ;AACA,gBAAIwB,QAAQ,EAAEJ,IAAI,EAACnuC,GAAGitC,KAAK,CAAL,CAAJ,EAAahtC,GAAGgtC,KAAK,CAAL,CAAhB,EAAN,EAAgCmB,IAAI,EAACpuC,GAAGitC,KAAK,CAAL,CAAJ,EAAahtC,GAAGgtC,KAAK,CAAL,CAAhB,EAApC,EAA8DoB,IAAI,EAACruC,GAAGitC,KAAK,CAAL,CAAJ,EAAahtC,GAAGgtC,KAAK,CAAL,CAAhB,EAAlE,EAA4FqB,IAAI,EAACtuC,GAAGitC,KAAK,CAAL,CAAJ,EAAahtC,GAAGgtC,KAAK,EAAL,CAAhB,EAAhG,EAAZ;AACAgB,uBAAWzqC,IAAX,CAAgB0qC,KAAhB,EAAuBK,KAAvB;;AAEA,0CAAiBN,UAAjB;;AAEA,mBAAOA,UAAP;AACH;;AAED;;;;;;;4BA9LY;AACR,mBAAO,KAAKrhC,KAAL,GAAa,KAAKC,MAAlB,GAA2B,KAAKxM,MAAvC;AACH;;;4CAgM0BO,C,EAAGE,C,EAAE;AAC5B,gBAAGF,EAAEc,CAAF,GAAMZ,EAAEY,CAAX,EAAc,OAAO,CAAC,CAAR;AACd,gBAAGd,EAAEc,CAAF,GAAMZ,EAAEY,CAAX,EAAa,OAAO,CAAP;AACb,gBAAGd,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAC,CAAR;AACxB,gBAAG7H,EAAE6H,MAAF,GAAW3H,EAAE2H,MAAhB,EAAwB,OAAO,CAAP;AACxB,mBAAO,CAAP;AACH;;;;;;AAGL,IAAI4jC,aAAa,IAAIf,MAAJ,EAAjB;AACA,IAAIkD,cAAc,IAAIlD,MAAJ,EAAlB;AACA,IAAImD,cAAc,IAAInD,MAAJ,EAAlB;AACA,IAAIE,cAAc,CAAC,CAAD,CAAlB;AACA,IAAIC,aAAa,CAAC,CAAD,CAAjB;AACA,IAAIyB,cAAc,CAAC,CAAD,CAAlB;;IAEM3C,U;;AAEF;;;;;;;;;;AAUA,wBAAY7yB,GAAZ,EAAiB1X,CAAjB,EAAoBC,CAApB,EAAuByB,CAAvB,EAA0BkW,WAA1B,EAAuCC,YAAvC,EAAqDC,YAArD,EAAmEvC,WAAnE,EAA+E;AAAA;;AAC3E,aAAKmC,GAAL,GAAWA,GAAX;AACA,aAAK1X,CAAL,GAASA,CAAT,CAAY,KAAKC,CAAL,GAASA,CAAT,CAAY,KAAKyB,CAAL,GAASA,CAAT;AACxB,aAAKkW,WAAL,GAAmBA,WAAnB,CAAgC,KAAKC,YAAL,GAAoBA,YAApB,CAAkC,KAAKC,YAAL,GAAoBA,YAApB;AAClE,aAAKvC,WAAL,GAAmBA,WAAnB;AACH;;AAED;;;;;kCACiB3U,C,EAAGE,C,EAAE;AAClB,gBAAI0sC,KAAK5sC,EAAEc,CAAF,GAAMd,EAAEkX,YAAjB;AAAA,gBACIg2B,KAAKhtC,EAAEY,CAAF,GAAMZ,EAAEgX,YADjB;AAEA,gBAAG01B,KAAKpC,UAAL,GAAkB0C,EAArB,EAAyB,OAAO,CAAC,CAAR;AACzB,gBAAGN,KAAKM,KAAK1C,UAAb,EAAyB,OAAO,CAAP;AACzB,gBAAGxqC,EAAEX,CAAF,GAAMa,EAAEb,CAAX,EAAc,OAAO,CAAC,CAAR;AACd,gBAAGW,EAAEX,CAAF,GAAMa,EAAEb,CAAX,EAAc,OAAO,CAAP;AACd,gBAAGW,EAAE8W,GAAF,CAAMjP,MAAN,GAAe3H,EAAE4W,GAAF,CAAMjP,MAAN,GAAe2iC,UAAjC,EAA6C,OAAO,CAAC,CAAR;AAC7C,gBAAGxqC,EAAE8W,GAAF,CAAMjP,MAAN,GAAe2iC,UAAf,GAA4BtqC,EAAE4W,GAAF,CAAMjP,MAArC,EAA6C,OAAO,CAAP;AAC7C,mBAAO,CAAP;AACH;;AAED;;;;6BACY7H,C,EAAGE,C,EAAE;AACb,gBAAGF,EAAEc,CAAF,GAAM0pC,UAAN,GAAmBtqC,EAAEY,CAAxB,EAA0B;AACtB,oBAAGd,EAAEc,CAAF,GAAMd,EAAEkX,YAAR,GAAuBhX,EAAEY,CAAzB,IAA8Bd,EAAEX,CAAF,GAAMa,EAAEb,CAAzC,EAA4C,OAAO,CAAP;AAC5C,uBAAO,CAAC,CAAR;AACH;AACD,gBAAGa,EAAEY,CAAF,GAAM0pC,UAAN,GAAmBxqC,EAAEc,CAAxB,EAA0B;AACtB,oBAAGZ,EAAEY,CAAF,GAAMZ,EAAEgX,YAAR,GAAuBlX,EAAEc,CAAzB,IAA8BZ,EAAEb,CAAF,GAAMW,EAAEX,CAAzC,EAA4C,OAAO,CAAP;AAC5C,uBAAO,CAAP;AACH;AACD,gBAAGW,EAAEX,CAAF,GAAMa,EAAEb,CAAX,EAAc,OAAO,CAAC,CAAR;AACd,gBAAGW,EAAEX,CAAF,GAAMa,EAAEb,CAAX,EAAc,OAAO,CAAP;AACd,gBAAGW,EAAE8W,GAAF,CAAMjP,MAAN,GAAe3H,EAAE4W,GAAF,CAAMjP,MAAN,GAAe2iC,UAAjC,EAA6C,OAAO,CAAC,CAAR;AAC7C,gBAAGxqC,EAAE8W,GAAF,CAAMjP,MAAN,GAAe2iC,UAAf,GAA4BtqC,EAAE4W,GAAF,CAAMjP,MAArC,EAA6C,OAAO,CAAP;AAC7C,mBAAO,CAAP;AACH;;;;;;IAGCohC,e;AACF;;;;AAIA,6BAAY/8B,SAAZ,EAAuB1J,MAAvB,EAA8B;AAAA;;AAC1B,aAAK0J,SAAL,GAAiBA,SAAjB;AACA,aAAK1J,MAAL,GAAcA,MAAd;;AAEA;AACA,aAAKoU,WAAL,GAAmB,EAAnB;AACA;AACA,aAAKS,aAAL,GAAqB,EAArB;;AAEA,YAAIy2B,cAAc,IAAIpD,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoBx+B,UAAUF,KAA9B,EAAqCE,UAAUD,MAA/C,EAAuDC,UAAUzM,MAAjE,EAAyE,CAAzE,CAAlB;AACA;AACA,aAAKsuC,OAAL,GAAe,CAACD,WAAD,CAAf;;AAEA;AACA,aAAKE,IAAL,GAAY,EAAZ;;AAEA,aAAKC,eAAL,GAAuB,CAAvB;AACH;;AAED;;;;;;;AAKA;kCACU73B,I,EAAK;AACX,iBAAK63B,eAAL,IAAwB73B,KAAKU,GAAL,CAASpQ,MAAjC;AACA,iBAAKkQ,WAAL,CAAiBhU,IAAjB,CAAsBwT,IAAtB;AACA,iBAAK43B,IAAL,CAAUprC,IAAV,CAAewT,IAAf;AACH;;AAED;;;;oCACYA,I,EAAK;AACb,iBAAKiB,aAAL,CAAmBzU,IAAnB,CAAwBwT,IAAxB;AACH;;AAED;;;;mCACW1P,M,EAAO;AACd,mBAAO,KAAKunC,eAAL,GAAuBvnC,MAAvB,IAAiC,KAAKwF,SAAL,CAAe4J,cAAvD;AACH;;AAED;;;;+BACOyyB,M,EAAQmD,G,EAAI;AAAA;;AAEf;AACA,gBAAIG,aAAatD,OAAO2F,QAAP,CAAgBxC,GAAhB,EAAqB,KAAKyC,SAAL,CAAexC,aAApC,EAAmD,KAAKnpC,MAAL,CAAYopC,OAA/D,CAAjB;;AAEA;AACA,gBAAGC,UAAH,EAAe,iBAAKkC,OAAL,EAAanrC,IAAb,oCAAqBipC,UAArB;;AAEf;AACA,gBAAGtD,OAAO9oC,MAAP,GAAgB,KAAK0uC,SAAL,CAAexC,aAAlC,EAAgD;AAC5C,oBAAIyC,cAAc,KAAKL,OAAL,CAAapqC,OAAb,CAAqB4kC,MAArB,CAAlB;AACA,qBAAKwF,OAAL,CAAanqC,MAAb,CAAoBwqC,WAApB,EAAiC,CAAjC;AACA,uBAAO,KAAP;AACH;;AAED,gBAAIC,YAAY,EAAhB;AACA,gBAAG,CAACxC,UAAJ,EAAgBA,aAAa,EAAb;AAChBA,uBAAWjpC,IAAX,CAAgB2lC,MAAhB;AACAsD,uBAAWztC,OAAX,CAAmB,kBAAU;AACzBiwC,0BAAUzrC,IAAV,CAAegmC,YAAYL,MAAZ,EAAoB,UAApB,EAAgC,IAAhC,EAAsC,CAAC,CAAvC,EAA0C,IAA1C,CAAf;AACH,aAFD;;AAIAqB,uBAAWyE,SAAX;;AAEA,mBAAO,IAAP;AACH;;;;;AAUD;qDAC6Bj4B,I,EAAK;AAC9B,gBAAIk4B,aAAa,KAAKP,OAAL,CAAatuC,MAA9B;AACA,gBAAI8uC,aAAan4B,KAAKvO,MAAtB;AACA,gBAAI0f,oBAAoBnR,KAAKmR,iBAA7B;;AAEA;AACA;AACA,gBAAIinB,mBAAmB,EAAvB;AAAA,gBACIC,wBAAwB,EAD5B;AAEA,gBAAIC,wBAAwB,CAA5B;AACA;AACA,iBAAI,IAAIC,UAAU,CAAlB,EAAqBA,UAAUL,UAAV,IAAwBI,wBAAwB,CAArE,EAAwEC,SAAxE,EAAkF;AAC9E,oBAAIpG,SAAS,KAAKwF,OAAL,CAAaY,OAAb,CAAb;;AAEA,oBAAGpG,OAAO1gC,MAAP,GAAgB0mC,UAAnB,EAA8B;AAC1B,wBAAIK,cAAchB,YAAYnmC,IAAZ,CAAiB8gC,MAAjB,CAAlB;;AAEAkG,0CAAsBhvC,MAAtB,GAA+B,CAA/B;AACA,yBAAI,IAAIovC,UAAU,CAAlB,EAAqBA,UAAUtnB,kBAAkB9nB,MAAjD,EAAyDovC,SAAzD,EAAmE;AAC/D,4BAAIl6B,cAAc4S,kBAAkBsnB,OAAlB,CAAlB;;AAEA,4BAAIroC,aAAa4P,KAAK6R,qBAAL,CAA2BtT,WAA3B,CAAjB;AACA,4BAAIm6B,gBAAgBvG,OAAOwG,OAAP,CAAevE,UAAf,EAA2BhkC,WAAW,CAAX,CAA3B,EAA0CA,WAAW,CAAX,CAA1C,EAAyDA,WAAW,CAAX,CAAzD,CAApB;AACA,4BAAGsoC,kBAAkB,KAArB,EAA2B;;AAEvBJ;;AAEA;AACA,gCAAI7C,aAAa+C,YAAYV,QAAZ,CAAqBY,aAArB,EAAoC,KAAKX,SAAL,CAAexC,aAAnD,EAAkE,KAAKnpC,MAAL,CAAYopC,OAA9E,CAAjB;AACA,gCAAGC,eAAe3tC,SAAlB,EAA6B2tC,aAAa,EAAb;AAC7B,gCAAG+C,YAAYnvC,MAAZ,GAAqB,KAAK0uC,SAAL,CAAexC,aAAvC,EACIE,WAAWjpC,IAAX,CAAgBgsC,WAAhB;;AAEJ,gCAAII,mBAAmB;AACnBzG,wCAAQoG,OADW;AAEnBh6B,6CAAaA,WAFM;AAGnBs6B,mCAAG,KAAKd,SAAL,CAAee,OAAf,CAAuB94B,IAAvB,EAA6B04B,aAA7B,EAA4CjD,UAA5C;AAHgB,6BAAvB;AAKA4C,kDAAsB7rC,IAAtB,CAA2BosC,gBAA3B;AACH;AACJ;;AAED,wBAAGP,sBAAsBhvC,MAAtB,GAA+B,CAAlC,EAAoC;AAChCgvC,8CAAsBvvB,IAAtB,CAA2B+pB,gBAAgBkG,OAA3C;AACA,4BAAIC,cAAcX,sBAAsBY,GAAtB,EAAlB;AACAb,yCAAiB5rC,IAAjB,CAAsBwsC,WAAtB;AACH;AACJ;AACJ;;AAED,gBAAGZ,iBAAiB/uC,MAAjB,KAA4B,CAA/B,EAAiC;AAC7B,uBAAO,KAAP;AACH;;AAED+uC,6BAAiBtvB,IAAjB,CAAsB+pB,gBAAgBkG,OAAtC;AACA,gBAAIG,eAAed,iBAAiBa,GAAjB,EAAnB;AACA,mBAAOC,YAAP;AACH;;AAED;;;;qCACal5B,I,EAAK;;AAEd,gBAAIk5B,eAAe,KAAKC,4BAAL,CAAkCn5B,IAAlC,CAAnB;;AAEA,gBAAGk5B,iBAAiB,KAApB,EAA0B;AACtB9pC,wBAAQE,GAAR,CAAY,mBAAZ;AACA,uBAAO,KAAK8pC,UAAL,CAAgBp5B,IAAhB,CAAP;AACH;;AAED,gBAAImyB,SAAS,KAAKwF,OAAL,CAAauB,aAAa/G,MAA1B,CAAb;AACA,gBAAI5zB,cAAcyB,KAAKmR,iBAAL,CAAuB+nB,aAAa36B,WAApC,CAAlB;AACA,gBAAInO,aAAa4P,KAAK6R,qBAAL,CAA2BtT,WAA3B,CAAjB;AACA,gBAAIm6B,gBAAgBvG,OAAOwG,OAAP,CAAevE,UAAf,EAA2BhkC,WAAW,CAAX,CAA3B,EAA0CA,WAAW,CAAX,CAA1C,EAAyDA,WAAW,CAAX,CAAzD,CAApB;AACA,gBAAGsoC,kBAAkB,KAArB,EAA2B;AACvB,uBAAO,KAAKW,SAAL,CAAer5B,IAAf,EAAqBmyB,MAArB,EAA6BuG,aAA7B,EAA4Cn6B,WAA5C,CAAP;AACH;;AAED,mBAAO,KAAP;AACH;;AAED;;;;oCACYyB,I,EAAK;AACb,gBAAImR,oBAAoBnR,KAAKmR,iBAA7B;AACA,gBAAI+mB,aAAa,KAAKP,OAAL,CAAatuC,MAA9B;;AAEA;AACA,iBAAI,IAAIkvC,UAAU,CAAlB,EAAqBA,UAAUL,UAA/B,EAA2CK,SAA3C,EAAqD;AACjD,oBAAIpG,SAAS,KAAKwF,OAAL,CAAaY,OAAb,CAAb;;AAEA,qBAAI,IAAIE,UAAU,CAAlB,EAAqBA,UAAUtnB,kBAAkB9nB,MAAjD,EAAyDovC,SAAzD,EAAmE;AAC/D,wBAAIl6B,cAAc4S,kBAAkBsnB,OAAlB,CAAlB;;AAEA,wBAAIroC,aAAa4P,KAAK6R,qBAAL,CAA2BtT,WAA3B,CAAjB;;AAEA;AACA,wBAAIm6B,gBAAgBvG,OAAOwG,OAAP,CAAevE,UAAf,EAA2BhkC,WAAW,CAAX,CAA3B,EAA0CA,WAAW,CAAX,CAA1C,EAAyDA,WAAW,CAAX,CAAzD,CAApB;AACA,wBAAGsoC,kBAAkB,KAArB,EAA2B;AACvB;AACA;AACA,4BAAIxrC,SAAS,EAACilC,QAAQoG,OAAT,EAAkBh6B,aAAaA,WAA/B,EAAb;AACA,+BAAOrR,MAAP;AACH;AACJ;AACJ;;AAED,mBAAO,KAAP;AACH;;AAED;;;;mCACW8S,I,EAAK;;AAEZ,gBAAIs5B,WAAW,KAAKC,WAAL,CAAiBv5B,IAAjB,CAAf;AACA,gBAAGs5B,QAAH,EAAY;;AAER,oBAAInH,SAAS,KAAKwF,OAAL,CAAa2B,SAASnH,MAAtB,CAAb;AACA,oBAAI5zB,cAAcyB,KAAKmR,iBAAL,CAAuBmoB,SAAS/6B,WAAhC,CAAlB;AACA,oBAAInO,aAAa4P,KAAK6R,qBAAL,CAA2BtT,WAA3B,CAAjB;;AAEA,oBAAIm6B,gBAAgBvG,OAAOwG,OAAP,CAAevE,UAAf,EAA2BhkC,WAAW,CAAX,CAA3B,EAA0CA,WAAW,CAAX,CAA1C,EAAyDA,WAAW,CAAX,CAAzD,CAApB;AACA,oBAAGsoC,kBAAkB,KAArB,EAA2B;;AAEvB,2BAAO,KAAKW,SAAL,CAAer5B,IAAf,EAAqBmyB,MAArB,EAA6BuG,aAA7B,EAA4Cn6B,WAA5C,CAAP;AACH;AACJ;;AAED,mBAAO,KAAP;AACH;;AAED;;;;kCACUyB,I,EAAMw5B,gB,EAAkBC,S,EAAWl7B,W,EAAY;;AAErD,gBAAIm7B,iBAAiB,KAAKl5B,WAAL,CAAiBnX,MAAtC;;AAEA;AACA,iBAAI,IAAIswC,UAAU,CAAlB,EAAqBA,UAAUD,cAA/B,EAA+CC,SAA/C,EAAyD;AACrD,oBAAIl5B,cAAa,KAAKD,WAAL,CAAiBm5B,OAAjB,CAAjB;AACA;AACA,oBAAIC,eAAepC,YAAYzhC,GAAZ,CAAgB0K,YAAWzX,CAA3B,EAA8ByX,YAAWxX,CAAzC,EAA4CwX,YAAW/V,CAAvD,EAA0D+V,YAAWG,WAArE,EAAkFH,YAAWI,YAA7F,EAA2GJ,YAAWK,YAAtH,EAAoI,CAApI,CAAnB;;AAEA,oBAAI+R,aAAa+mB,aAAaC,UAAb,CAAwB,CAACzF,UAAzB,EAAqCqF,SAArC,CAAjB;AACA,oBAAG5mB,UAAH,EAAc;AACVzjB,4BAAQE,GAAR,CAAY,mBAAZ;AACA,2BAAO,KAAK8pC,UAAL,CAAgBp5B,IAAhB,CAAP;AACH;AACJ;;AAED;AACA,gBAAIS,aAAa,IAAI8yB,UAAJ,CAAevzB,IAAf,EAAqBy5B,UAAUzwC,CAA/B,EAAkCywC,UAAUxwC,CAA5C,EAA+CwwC,UAAU/uC,CAAzD,EAA4D+uC,UAAU7jC,KAAtE,EAA6E6jC,UAAU5jC,MAAvF,EAA+F4jC,UAAUpwC,MAAzG,EAAiHkV,WAAjH,CAAjB;AACA,gBAAI,IAAIy1B,WAAWxB,YAAYiH,SAAZ,EAAuB,UAAvB,EAAmC,IAAnC,CAAf;;AAEJ;AACA,gBAAIK,gBAAgB,KAAKC,MAAL,CAAYP,gBAAZ,EAA8BC,SAA9B,CAApB;;AAEA,gBAAIjG,WAAW,CAACQ,QAAD,CAAX;AACJxB,wBAAYiH,SAAZ,EAAuB,UAAvB,EAAmC,KAAnC;;AAEA,mBAAOh5B,UAAP;AACH;;;mDAEyB;AACtB,gBAAIk3B,UAAU,KAAKA,OAAnB;AAAA,gBACIO,aAAaP,QAAQtuC,MADzB;AAEA,gBAAI2wC,iBAAiB,KAAKlkC,SAAL,CAAeF,KAApC;;AAEA,iBAAI,IAAI2iC,UAAU,CAAlB,EAAqBA,UAAUL,UAA/B,EAA2CK,SAA3C,EAAqD;AACjD,oBAAIpG,SAASwF,QAAQY,OAAR,CAAb;;AAEA,oBAAG5xC,KAAKwvB,GAAL,CAASgc,OAAOnpC,CAAhB,IAAqBorC,UAAxB,EAAoCjC,OAAOoC,UAAP,GAAoB,CAApB,CAApC,KACK,IAAG5tC,KAAKwvB,GAAL,CAASgc,OAAOnpC,CAAP,GAAWmpC,OAAOv8B,KAAlB,GAA0BokC,cAAnC,IAAqD5F,UAAxD,EAAoEjC,OAAOoC,UAAP,GAAoB,CAApB;AAC5E;AACJ;;;oDAE0B;AACvB,gBAAIoD,UAAU,KAAKA,OAAnB;AAAA,gBACIO,aAAaP,QAAQtuC,MADzB;;AAGA,gBAAI4wC,QAAQ,IAAI7F,UAAhB;AACA,qBAAS8F,OAAT,CAAiBtuC,KAAjB,EAAuB;AACnB,uBAAOjF,KAAK6jB,KAAL,CAAW5e,QAAQquC,KAAnB,CAAP;AACH;;AAED;AACA;AACA,gBAAIE,SAAS,EAAb;;AAEA,gBAAIC,aAAa,EAAjB;AAAA,gBAAqBnD,aAAa,EAAlC;AACA,iBAAI,IAAIsB,UAAU,CAAlB,EAAqBA,UAAUL,UAA/B,EAA2CK,SAA3C,EAAqD;AACjD,oBAAI8B,UAAU1C,QAAQY,OAAR,CAAd;AACA6B,2BAAW/wC,MAAX,GAAoB,CAApB;AACA+wC,2BAAW5tC,IAAX,CAAgB+rC,OAAhB;;AAEA,qBAAI,IAAI+B,UAAU/B,UAAU,CAA5B,EAA+B+B,UAAUpC,UAAzC,EAAqDoC,SAArD,EAA+D;AAC3D,wBAAIC,UAAU5C,QAAQ2C,OAAR,CAAd;;AAEA,wBAAG3zC,KAAKwvB,GAAL,CAASkkB,QAAQpxC,CAAR,GAAYsxC,QAAQtxC,CAA7B,IAAkCmrC,UAArC,EAAgD;AAC5C,4BAAIvhB,aAAawnB,QAAQR,UAAR,CAAmBzF,UAAnB,EAA+BmG,OAA/B,CAAjB;AACA,4BAAG1nB,UAAH,EAAc;AACVunB,uCAAW5tC,IAAX,CAAgB8tC,OAAhB;AACH;AACJ;AACJ;;AAED,oBAAIE,gBAAgBJ,WAAW/wC,MAA/B;AACA,oBAAGmxC,gBAAgB,CAAnB,EAAqB;AACjBvD,+BAAW5tC,MAAX,GAAoB,CAApB;;AAEA,yBAAI,IAAIoxC,aAAa,CAArB,EAAwBA,aAAaD,aAArC,EAAoDC,YAApD,EAAiE;AAC7D,4BAAIC,aAAa/C,QAAQyC,WAAWK,UAAX,CAAR,CAAjB;;AAEA,6BAAI,IAAIE,aAAaF,aAAa,CAAlC,EAAqCE,aAAaH,aAAlD,EAAiEG,YAAjE,EAA8E;AAC1E,gCAAIC,aAAajD,QAAQyC,WAAWO,UAAX,CAAR,CAAjB;;AAEA1D,uCAAWzqC,IAAX,sCAAmBkuC,WAAWG,iBAAX,CAA6BD,UAA7B,CAAnB;AACH;AACJ;;AAED,wBAAG3D,WAAW5tC,MAAX,GAAoB,CAAvB,EAAyB;AAAA;;AACrB,4BAAIyxC,OAAOZ,QAAQG,QAAQpxC,CAAhB,CAAX;AACA,4BAAGkxC,OAAOW,IAAP,MAAiBhzC,SAApB,EAA+BqyC,OAAOW,IAAP,IAAe,EAAC7xC,GAAGoxC,QAAQpxC,CAAZ,EAAeguC,YAAY,EAA3B,EAAf;AAC/B,wDAAO6D,IAAP,EAAa7D,UAAb,EAAwBzqC,IAAxB,8BAAgCyqC,UAAhC;AACH;AACJ;AACJ;;AAED,gBAAI8D,cAAcvzC,OAAOO,IAAP,CAAYoyC,MAAZ,CAAlB;AACA,iBAAI,IAAIa,QAAQ,CAAZ,EAAeC,WAAWF,YAAY1xC,MAA1C,EAAkD2xC,QAAQC,QAA1D,EAAoED,OAApE,EAA4E;AACxE;AACA,oBAAIE,QAAQf,OAAOY,YAAYC,KAAZ,CAAP,CAAZ;AACA,oBAAI/D,cAAaiE,MAAMjE,UAAvB;AACA,oBAAIkE,UAAUD,MAAMjyC,CAApB;AACA,oBAAImyC,eAAe,KAAKtlC,SAAL,CAAeD,MAAf,GAAwBslC,OAA3C;;AAEA,8CAAiBlE,WAAjB;AACA,qBAAI,IAAIoE,QAAQ,CAAZ,EAAeC,WAAWrE,YAAW5tC,MAAzC,EAAiDgyC,QAAQC,QAAzD,EAAmED,OAAnE,EAA2E;AACvE,wBAAIE,OAAOtE,YAAWoE,KAAX,CAAX;AACA,wBAAIvG,KAAKyG,KAAKpE,EAAL,CAAQnuC,CAAjB;AAAA,wBAAoB+rC,KAAKwG,KAAKpE,EAAL,CAAQluC,CAAjC;AACA,wBAAIgsC,KAAKsG,KAAKlE,EAAL,CAAQruC,CAAR,GAAY8rC,EAArB;AAAA,wBAAyBI,KAAKqG,KAAKlE,EAAL,CAAQpuC,CAAR,GAAY8rC,EAA1C;;AAEA;AACA,wBAAIR,aAAcO,GAAG9rC,CAAH,GAAOisC,KAAK,CAAb,GAAmB,KAAKn/B,SAAL,CAAeF,KAAf,GAAuB,CAA1C,GAA+C,CAA/C,GAAmD,CAApE;AACA,wBAAI4lC,YAAY,IAAIlH,MAAJ,CAAWQ,EAAX,EAAeqG,OAAf,EAAwBpG,EAAxB,EAA4BE,EAA5B,EAAgCmG,YAAhC,EAA8ClG,EAA9C,EAAkDX,UAAlD,CAAhB;AACA,yBAAKoD,OAAL,CAAanrC,IAAb,CAAkBgvC,SAAlB;AACH;AACJ;AACJ;;;uDAE6B;AAC1B,gBAAI7D,UAAU,KAAKA,OAAnB;AACA,gBAAIpC,gBAAgB,KAAKwC,SAAL,CAAexC,aAAnC;AACA,iBAAI,IAAIgD,UAAU,CAAlB,EAAqBA,UAAUZ,QAAQtuC,MAAvC,EAA+CkvC,SAA/C,EAAyD;AACrD,oBAAIpG,SAASwF,QAAQY,OAAR,CAAb;AACA,oBAAGpG,OAAOv8B,KAAP,GAAe2/B,aAAf,IAAgCpD,OAAOt8B,MAAP,GAAgB0/B,aAAhD,IAAiEpD,OAAO9oC,MAAP,GAAgBksC,aAApF,EAAkG;AAC9FoC,4BAAQnqC,MAAR,CAAe+qC,OAAf,EAAwB,CAAxB;AACAA;AACH;AACJ;AACJ;;;oDAE2B93B,U,EAAYg7B,K,EAAM;AAC1C,gBAAI9D,UAAU,KAAKA,OAAnB;AACA,gBAAI+D,aAAaj7B,WAAWC,GAAX,CAAejP,MAAhC;;AAEA;AACA,gBAAImoC,eAAevE,WAAWt/B,GAAX,CAAe0K,WAAWzX,CAA1B,EAA6ByX,WAAWxX,CAAxC,EAA2CwX,WAAW/V,CAAtD,EAAyD+V,WAAWG,WAApE,EAAiFH,WAAWI,YAA5F,EAA0GJ,WAAWK,YAArH,EAAmI,CAAnI,CAAnB;;AAEA,iBAAI,IAAIy3B,UAAU,CAAlB,EAAqBA,UAAUZ,QAAQtuC,MAAvC,EAA+CkvC,SAA/C,EAAyD;AACrD,oBAAIpG,SAASwF,QAAQY,OAAR,CAAb;;AAEA,oBAAGmD,aAAavJ,OAAO1gC,MAApB,IAA8BmoC,aAAa+B,cAAb,CAA4BvH,UAA5B,EAAwCjC,MAAxC,CAAjC,EAAiF;AAC7EwF,4BAAQnqC,MAAR,CAAe+qC,OAAf,EAAwB,CAAxB;AACAA;AACAnpC,4BAAQE,GAAR,CAAY,qBAAqBipC,OAArB,GAA+B,UAA3C;AACA;AACH;;AAED,oBAAGqB,aAAaC,UAAb,CAAwB,CAACzF,UAAzB,EAAqCjC,MAArC,CAAH,EAAgD;;AAE5C,wBAAGsJ,KAAH,EAAS;AACLrsC,gCAAQE,GAAR,CAAY,0BAA0BipC,OAA1B,GAAoC,cAAhD;AACAZ,gCAAQ1gC,KAAR,CAAcshC,OAAd,EAAuB,CAAvB;AACAA;AACA;AACH;;AAED,wBAAIuB,gBAAgB,KAAKC,MAAL,CAAY5H,MAAZ,EAAoByH,YAApB,CAApB;AACArB;AACH;AACJ;AACJ;;;qDAE4BkD,K,EAAM;AAC/B,gBAAIj7B,cAAc,KAAKA,WAAvB;AAAA,gBACIk5B,iBAAiBl5B,YAAYnX,MADjC;;AAGA,iBAAI,IAAIkpB,QAAQ,CAAhB,EAAmBA,QAAQmnB,cAA3B,EAA2CnnB,OAA3C,EAAmD;AAC/C,oBAAI9R,aAAaD,YAAY+R,KAAZ,CAAjB;AACA,qBAAKqpB,2BAAL,CAAiCn7B,UAAjC,EAA6Cg7B,KAA7C;AACH;AACJ;;;iDAEuB;AACpB,gBAAI9D,UAAU,KAAKA,OAAnB;;AAEA,iBAAI,IAAIY,UAAU,CAAlB,EAAqBA,UAAUZ,QAAQtuC,MAAvC,EAA+CkvC,SAA/C,EAAyD;AACrD,oBAAI8B,UAAU1C,QAAQY,OAAR,CAAd;AACA,oBAAIsD,UAAUxB,QAAQ5oC,MAAtB;;AAEA,qBAAI,IAAI6oC,UAAU/B,UAAU,CAA5B,EAA+B+B,UAAU3C,QAAQtuC,MAAjD,EAAyDixC,SAAzD,EAAmE;AAC/D,wBAAIC,UAAU5C,QAAQ2C,OAAR,CAAd;AACA,wBAAIwB,UAAUvB,QAAQ9oC,MAAtB;;AAEA,wBAAGoqC,UAAUC,OAAb,EAAqB;AACjB;AACA,4BAAGvB,QAAQoB,cAAR,CAAuBvH,UAAvB,EAAmCiG,OAAnC,CAAH,EAA+C;AAC3C1C,oCAAQnqC,MAAR,CAAe+qC,OAAf,EAAwB,CAAxB;AACAA;AACA;AACH;AACJ,qBAPD,MAQI;AACA;AACA,4BAAG8B,QAAQsB,cAAR,CAAuBvH,UAAvB,EAAmCmG,OAAnC,CAAH,EAA+C;AAC3C5C,oCAAQnqC,MAAR,CAAe8sC,OAAf,EAAwB,CAAxB;AACAA;AACH;AACJ;AACJ;AACJ;AACJ;;;yCAEe;AACZ,gBAAI3C,UAAU,KAAKA,OAAnB;;AAEA,gBAAG1wB,OAAO80B,mBAAP,KAA+Bj0C,SAAlC,EAA6Cmf,OAAO80B,mBAAP,GAA6B,CAA7B;;AAE7C;AACA,iBAAKC,wBAAL;;AAEA;AACA,iBAAKC,4BAAL;;AAEA;AACA,iBAAKC,yBAAL;;AAEA;AACA,iBAAKC,4BAAL;;AAEA;AACA,iBAAKC,sBAAL;;AAEA;AACAzE,oBAAQ7uB,IAAR,CAAawrB,OAAO+H,mBAApB;;AAEA,iBAAK77B,WAAL,CAAiBsI,IAAjB,CAAsByqB,WAAW/nB,IAAjC;AACH;;;0BA5ZS7L,K,EAAM;AACZ,iBAAKo4B,SAAL,GAAiB,IAAIuE,gBAAJ,CAAqB38B,KAArB,EAA4B,IAA5B,CAAjB;AACH;;;gCA+Cc/V,C,EAAGE,C,EAAE;AAChB,gBAAGkhC,MAAMphC,EAAEivC,CAAR,KAAc7N,MAAMlhC,EAAE+uC,CAAR,CAAjB,EAA6B,OAAO,CAAP;;AAE7B,gBAAGjvC,EAAEivC,CAAF,GAAM/uC,EAAE+uC,CAAX,EAAc,OAAO,CAAC,CAAR;AACd,gBAAGjvC,EAAEivC,CAAF,GAAM/uC,EAAE+uC,CAAX,EAAc,OAAO,CAAP;AACd,mBAAO,CAAP;AACH;;;;;;IAwWCyD,gB;AACF;;;;AAIA,8BAAY38B,KAAZ,EAAmBizB,eAAnB,EAAmC;AAAA;;AAE/B3rB,eAAO8wB,SAAP,GAAmB,IAAnB;AACA,aAAKvF,WAAL,GAAmB,UAASwF,WAAT,EAAqB,CAEvC,CAFD;;AAIA,aAAK5rC,MAAL,GAAc;AACVmwC,wCAA4B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AADlB,SAAd;;AAIA,aAAKC,YAAL,GAAoB78B,KAApB;AACA,aAAKizB,eAAL,GAAuBA,eAAvB;AACA,aAAK6J,cAAL,GAAsB,KAAK7J,eAAL,CAAqB+E,OAA3C;;AAEA,aAAKpC,aAAL,GAAqBnB,UAArB;;AAEA,aAAKsI,wBAAL,GAAgCl9B,iBAAKm9B,UAArC;;AAEA;AACA,aAAKH,YAAL,CAAkB1zB,IAAlB,CAAuB,KAAK4zB,wBAA5B;;AAEA,YAAIE,yBAAyB,KAAKJ,YAAlC;AACA;AACA,aAAKK,aAAL,GAAqB,KAAKC,uBAAL,CAA6BF,sBAA7B,CAArB;AACH;;AAED;;;;;gDACwBj9B,K,EAAM;AAC1B,gBAAIk9B,gBAAgB,CAAC5nC,OAAOC,gBAAR,EAA0BD,OAAOC,gBAAjC,EAAmDD,OAAOC,gBAA1D,CAApB;;AAEA,iBAAI,IAAIqd,QAAQ,CAAZ,EAAewqB,WAAWp9B,MAAMtW,MAApC,EAA4CkpB,QAAQwqB,QAApD,EAA8DxqB,OAA9D,EAAsE;AAClE,oBAAIvS,OAAOL,MAAM4S,KAAN,CAAX;AACA,oBAAIpB,oBAAoBnR,KAAKmR,iBAA7B;AACA,qBAAI,IAAIsnB,UAAU,CAAlB,EAAqBA,UAAUtnB,kBAAkB9nB,MAAjD,EAAyDovC,SAAzD,EAAmE;AAC/D,wBAAIl6B,cAAc4S,kBAAkBsnB,OAAlB,CAAlB;AACA,wBAAIroC,aAAa4P,KAAK6R,qBAAL,CAA2BtT,WAA3B,CAAjB;AACA,wBAAGnO,WAAW,CAAX,IAAgBysC,cAAc,CAAd,CAAnB,EAAqCA,cAAc,CAAd,IAAmBzsC,WAAW,CAAX,CAAnB;AACrC,wBAAGA,WAAW,CAAX,IAAgBysC,cAAc,CAAd,CAAnB,EAAqCA,cAAc,CAAd,IAAmBzsC,WAAW,CAAX,CAAnB;AACrC,wBAAGA,WAAW,CAAX,IAAgBysC,cAAc,CAAd,CAAnB,EAAqCA,cAAc,CAAd,IAAmBzsC,WAAW,CAAX,CAAnB;AACxC;AACJ;;AAED,mBAAOysC,aAAP;AACH;;AAED;;;;;;;;;gCAMQG,U,EAAY1H,G,EAAKG,U,EAAW;;AAEhC;;AAEA,gBAAIwH,kBAAkB,KAAKrK,eAAL,CAAqB98B,SAArB,CAA+BzM,MAArD;AACA,gBAAIwzC,gBAAgB,KAAKA,aAAzB;AACA,gBAAIN,6BAA6B,KAAKnwC,MAAL,CAAYmwC,0BAA7C;;AAEA,gBAAIW,YAAY,IAAI,CAAC5H,IAAI5qC,CAAJ,GAAQ4qC,IAAIjsC,MAAb,IAAuB4zC,eAA3C,CARgC,CAQ4B;;AAE5D;AACA,gBAAIE,gBAAgB,CAApB,CAXgC,CAWT;AACvB,gBAAG1H,WAAWpsC,MAAX,GAAoB,CAAvB,EAAyB;AACrB8zC,gCAAgB,CAAhB;AACA,qBAAI,IAAI5E,UAAU,CAAlB,EAAqBA,UAAU9C,WAAWpsC,MAA1C,EAAkDkvC,SAAlD,EAA4D;AACxD,wBAAIpG,SAASsD,WAAW8C,OAAX,CAAb;;AAEA,wBAAI6E,SAAS,CAAb;AAAA,wBAAgBC,SAAS,CAAzB;AAAA,wBAA4BC,SAAS,CAArC;AACA,wBAAGnL,OAAOv8B,KAAP,IAAgBinC,cAAc,CAAd,CAAhB,IAAqC1K,OAAOv8B,KAAP,GAAeinC,cAAc,CAAd,CAAhB,GAAoCA,cAAc,CAAd,IAAmBN,2BAA2B,CAA3B,CAA9F,EAA6Ha,UAAU,CAAV;AAC7H,wBAAGjL,OAAOt8B,MAAP,IAAiBgnC,cAAc,CAAd,CAAjB,IAAsC1K,OAAOv8B,KAAP,GAAeinC,cAAc,CAAd,CAAhB,GAAoCA,cAAc,CAAd,IAAmBN,2BAA2B,CAA3B,CAA/F,EAA8Hc,UAAU,CAAV;AAC9H,wBAAGlL,OAAO9oC,MAAP,IAAiBwzC,cAAc,CAAd,CAAjB,IAAsC1K,OAAOv8B,KAAP,GAAeinC,cAAc,CAAd,CAAhB,GAAoCA,cAAc,CAAd,IAAmBN,2BAA2B,CAA3B,CAA/F,EAA8He,UAAU,CAAV;;AAE9HH,qCAAiBC,SAAS,EAAT,GAAcC,SAAS,EAAvB,GAA4BC,SAAS,EAAtD;AACH;AACDH,iCAAiB1H,WAAWpsC,MAA5B;AACH;;AAED,gBAAIk0C,cAAc,KAAK3K,eAAL,CAAqBxmC,MAArB,CAA4BmxC,WAA9C;AACA,gBAAIC,kBAAkB,KAAK5K,eAAL,CAAqBxmC,MAArB,CAA4BoxC,eAAlD;AACA,gBAAIC,QAAQP,YAAYK,WAAZ,GAA0BJ,gBAAgBK,eAAtD;AACA,mBAAOC,KAAP;AACH;;;;;;AAGL;;;;;;;AAOA;;;AACA,IAAM1+B,gBAAgB;AAClBw+B,iBAAa,EADK;AAElBC,qBAAiB,EAFC;AAGlBhI,aAAS;AAHS,CAAtB,C,QAqFIp1B,I,GAAAA,I;;;;;;;;;;;;;;;;AC5+BJ;;;;AACA;;;;;;;;AAGA;;;;AAIA,SAASs9B,OAAT,CAAiBvd,OAAjB,EAA0BqK,CAA1B,EAA4B;AACxB,QAAI7qB,QAAQ,EAAZ;AACAwgB,YAAQn4B,OAAR,CAAgB,aAAK;AACjB2X,cAAMnT,IAAN,CAAW,IAAIgT,cAAJ,CAAS8gB,EAAEkK,EAAE,CAAF,CAAF,CAAT,EAAkBlK,EAAEkK,EAAE,CAAF,CAAF,CAAlB,EAA2BlK,EAAEkK,EAAE,CAAF,CAAF,CAA3B,EAAoClK,EAAEkK,EAAE,CAAF,CAAF,CAApC,EAA6ClK,EAAEkK,EAAE,CAAF,CAAF,CAA7C,CAAX;AACH,KAFD;AAGA,WAAO7qB,KAAP;AACH;;IAEKg+B,Q;AACF;;;;AAIA,kBAAY7nC,SAAZ,EAAuB6J,KAAvB,EAA6B;AAAA;;AACzB,SAAK7J,SAAL,GAAiBA,SAAjB;AACA,SAAK6J,KAAL,GAAaA,KAAb;AACH,C;;IAGC4gB,Q;;;;;;;8CAE0B;AACxB,gBAAIqd,gBAAgB,EAAEC,IAAI,IAAN,EAAYC,MAAM,MAAlB,EAA0BC,QAAQ,EAAlC,EAAsCC,OAAO,EAA7C,EAAiDC,QAAQ,CAAzD,EAApB;AACA,gBAAIC,YAAY,CACZ,EAAEL,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,CAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EADY,EAElB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,CAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EAFkB,EAGlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,CAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EAHkB,EAIlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EAJkB,EAKlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EALkB,EAMZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,CAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EANY,CAAhB;;AASA,gBAAIroC,YAAYtO,OAAOC,MAAP,CAAc,IAAIiN,mBAAJ,EAAd,EAA+BkpC,aAA/B,CAAhB;AACA,gBAAIj+B,QAAQ+9B,QAAQQ,SAAR,EAAmB,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,QAA1B,EAAoC,UAApC,CAAnB,CAAZ;;AAEA,gBAAI7xC,OAAO,IAAIsxC,QAAJ,CAAa7nC,SAAb,EAAwB6J,KAAxB,CAAX;AACA,mBAAOtT,IAAP;AACH;;;8CAE2B;AACxB,gBAAIuxC,gBAAgB,EAAEC,IAAI,IAAN,EAAYC,MAAM,MAAlB,EAA0BC,QAAQ,EAAlC,EAAsCC,OAAO,EAA7C,EAAiDC,QAAQ,EAAzD,EAApB;AACA,gBAAIC,YAAY,CACZ,EAAEL,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAwCC,OAAO,EAA/C,EAAmDC,QAAQ,EAA3D,EAA+DE,UAAU,CAAzE,EADY,EAElB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EAFkB,EAGlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,CAAtE,EAHkB,EAIZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,CAAnC,EAAuCC,OAAO,CAA9C,EAAiDC,QAAQ,CAAzD,EAA4DE,UAAU,EAAtE,EAJY,CAAhB;;AAOA,gBAAIroC,YAAYtO,OAAOC,MAAP,CAAc,IAAIiN,mBAAJ,EAAd,EAA+BkpC,aAA/B,CAAhB;AACA,gBAAIj+B,QAAQ+9B,QAAQQ,SAAR,EAAmB,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,QAA1B,EAAoC,UAApC,CAAnB,CAAZ;;AAEA,gBAAI7xC,OAAO,IAAIsxC,QAAJ,CAAa7nC,SAAb,EAAwB6J,KAAxB,CAAX;AACA,mBAAOtT,IAAP;AACH;;;qDAEkC;AAC/B,gBAAIuxC,gBAAgB,EAAEC,IAAI,IAAN,EAAYC,MAAM,MAAlB,EAA0BC,QAAQ,GAAlC,EAAuCC,OAAO,GAA9C,EAAmDC,QAAQ,GAA3D,EAApB;AACA,gBAAIC,YAAY,CACZ,EAAEL,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,GAAnC,EAAyCC,OAAO,EAAhD,EAAoDC,QAAQ,EAA5D,EAAgEE,UAAU,CAA1E,EADY,EAElB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,EAA9C,EAAkDC,QAAQ,EAA1D,EAA8DE,UAAU,CAAxE,EAFkB,EAGlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,EAA9C,EAAkDC,QAAQ,EAA1D,EAA8DE,UAAU,CAAxE,EAHkB,EAIZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAwCC,OAAO,EAA/C,EAAmDC,QAAQ,EAA3D,EAA+DE,UAAU,EAAzE,EAJY,CAAhB;;AAOA,gBAAIroC,YAAYtO,OAAOC,MAAP,CAAc,IAAIiN,mBAAJ,EAAd,EAA+BkpC,aAA/B,CAAhB;AACA,gBAAIj+B,QAAQ+9B,QAAQQ,SAAR,EAAmB,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,QAA1B,EAAoC,UAApC,CAAnB,CAAZ;;AAEA,gBAAI7xC,OAAO,IAAIsxC,QAAJ,CAAa7nC,SAAb,EAAwB6J,KAAxB,CAAX;AACA,mBAAOtT,IAAP;AACH;;;sDAEmC;AAChC,gBAAIuxC,gBAAgB,EAAEC,IAAI,IAAN,EAAYC,MAAM,MAAlB,EAA0BC,QAAQ,GAAlC,EAAuCC,OAAO,GAA9C,EAAmDC,QAAQ,GAA3D,EAApB;AACA,gBAAIC,YAAY,CACZ,EAAEL,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,GAAnC,EAAyCC,OAAO,EAAhD,EAAoDC,QAAQ,EAA5D,EAAgEE,UAAU,CAA1E,EADY,EAElB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,EAA9C,EAAkDC,QAAQ,EAA1D,EAA8DE,UAAU,CAAxE,EAFkB,EAGlB,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAuCC,OAAO,EAA9C,EAAkDC,QAAQ,EAA1D,EAA8DE,UAAU,CAAxE,EAHkB,EAIZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAwCC,OAAO,EAA/C,EAAmDC,QAAQ,EAA3D,EAA+DE,UAAU,EAAzE,EAJY,EAKZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAwCC,OAAO,EAA/C,EAAmDC,QAAQ,EAA3D,EAA+DE,UAAU,EAAzE,EALY,EAMZ,EAAEN,IAAI,IAAN,EAAYC,MAAM,OAAlB,EAA2BC,QAAQ,EAAnC,EAAwCC,OAAO,EAA/C,EAAmDC,QAAQ,EAA3D,EAA+DE,UAAU,EAAzE,EANY,CAAhB;;AASA,gBAAIroC,YAAYtO,OAAOC,MAAP,CAAc,IAAIiN,mBAAJ,EAAd,EAA+BkpC,aAA/B,CAAhB;AACA,gBAAIj+B,QAAQ+9B,QAAQQ,SAAR,EAAmB,CAAC,IAAD,EAAO,QAAP,EAAiB,OAAjB,EAA0B,QAA1B,EAAoC,UAApC,CAAnB,CAAZ;;AAEA,gBAAI7xC,OAAO,IAAIsxC,QAAJ,CAAa7nC,SAAb,EAAwB6J,KAAxB,CAAX;AACA,mBAAOtT,IAAP;AACH;;;;;;kBAGUk0B,Q;;;;;;;;;;;;;;;;;ACjGf,SAAS6d,MAAT,CAAgBC,EAAhB,EAAoBC,EAApB,EAAuB;AACnB,WAAO33C,KAAKwvB,GAAL,CAASkoB,KAAKC,EAAd,IAAoB,GAA3B;AACH;;IAEK9+B,I;AACF;;;;;;;AAOA,kBAAYjQ,EAAZ,EAAgBgvC,IAAhB,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCluC,QAAlC,EAA2C;AAAA;;AACvC,aAAKstC,EAAL,GAAUtuC,EAAV;AACA,aAAKmvC,QAAL,GAAgB,KAAhB;AACA,aAAKC,IAAL,GAAYH,IAAZ;AACA,aAAKI,IAAL,GAAYL,IAAZ;AACA,aAAKM,IAAL,GAAYJ,IAAZ;AACA,aAAKK,MAAL,GAAc,CAAd;AACA,aAAKC,MAAL,GAAc,CAAd;AACA,aAAKC,MAAL,GAAc,CAAd;AACA,aAAKb,QAAL,GAAgB5tC,QAAhB;AACA,aAAK0uC,QAAL,GAAgB,CAAhB;AACA,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAK99B,MAAL,GAAc,KAAKs9B,IAAL,GAAY,KAAKC,IAAjB,GAAwB,KAAKC,IAA3C;AACH;;AAED;;;;;;;;2CAI0B7+B,I,EAAK;AAC3B,gBAAIhV,IAAIgV,KAAK2+B,IAAb;AAAA,gBAAmB/e,IAAI5f,KAAK4+B,IAA5B;AAAA,gBAAkCjf,IAAI3f,KAAK6+B,IAA3C;;AAEA,gBAAGT,OAAOp+B,KAAKi/B,QAAZ,EAAsBj0C,CAAtB,CAAH,EAA4B;AAAE;AAC1B,oBAAGozC,OAAOp+B,KAAKk/B,QAAZ,EAAsBvf,CAAtB,CAAH,EAA4B;AAAE;AAC1B,2BAAO,KAAP;AACH,iBAFD,MAGK,IAAGye,OAAOp+B,KAAKk/B,QAAZ,EAAsBtf,CAAtB,CAAH,EAA4B;AAAE;AAC/B,2BAAO,KAAP;AACH;AACJ,aAPD,MAQK,IAAGwe,OAAOp+B,KAAKi/B,QAAZ,EAAsBtf,CAAtB,CAAH,EAA4B;AAAE;AAC/B,oBAAGye,OAAOp+B,KAAKk/B,QAAZ,EAAsBl0C,CAAtB,CAAH,EAA4B;AAAE;AAC1B,2BAAO,KAAP;AACH,iBAFD,MAGK,IAAGozC,OAAOp+B,KAAKk/B,QAAZ,EAAsBtf,CAAtB,CAAH,EAA4B;AAAE;AAC/B,2BAAO,KAAP;AACH;AACJ,aAPI,MAQA,IAAGwe,OAAOp+B,KAAKi/B,QAAZ,EAAsBrf,CAAtB,CAAH,EAA4B;AAAE;AAC/B,oBAAGwe,OAAOp+B,KAAKk/B,QAAZ,EAAsBl0C,CAAtB,CAAH,EAA4B;AAAE;AAC1B,2BAAO,KAAP;AACH,iBAFD,MAGK,IAAGozC,OAAOp+B,KAAKk/B,QAAZ,EAAsBvf,CAAtB,CAAH,EAA4B;AAAE;AAC/B,2BAAO,KAAP;AACH;AACJ;;AAED,mBAAO,KAAP;AACH;;;;;;kBAGUngB,I;;;;;;;;;;;;;;;IChET9K,S;AACF;;;;;;AAMA,mBAAYnF,EAAZ,EAAgBqG,KAAhB,EAAuBvM,MAAvB,EAA+BwM,MAA/B,EAAsC;AAAA;;AAClC,SAAKgoC,EAAL,GAAUtuC,EAAV;;AAEA,SAAKyuC,KAAL,GAAa30C,UAAU,CAAvB;AACA,SAAK00C,MAAL,GAAcnoC,SAAS,CAAvB;AACA,SAAKqoC,MAAL,GAAcpoC,UAAU,CAAxB;AACH,C;;kBAGUnB,S;;;;;;;;;;;;;AChBf;AACA;;AAEA,IAAM1E,UAAUrJ,KAAKsJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAhB;AACA,IAAMmkC,aAAa,OAAnB;AACA,IAAMC,iBAAiB,IAAvB;;AAEA;AACA;AACA;AACA,SAAS+K,gBAAT,CAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,EAA0CC,EAA1C,EAA8CC,EAA9C,EAAkDC,EAAlD,EAAsDC,EAAtD,EAA0D;;AAEtD;AACA,QAAKP,OAAOE,EAAP,IAAaD,OAAOE,EAArB,IAA6BC,OAAOE,EAAP,IAAaD,OAAOE,EAArD,EAA0D;AACtD,eAAO,KAAP;AACH;;AAED,QAAIC,cAAe,CAACD,KAAKF,EAAN,KAAaH,KAAKF,EAAlB,IAAwB,CAACM,KAAKF,EAAN,KAAaD,KAAKF,EAAlB,CAA3C;;AAEA;AACA,QAAI34C,KAAKwvB,GAAL,CAAS0pB,WAAT,IAAwB7vC,OAA5B,EAAqC;AACjC,eAAO,KAAP;AACH;;AAED,QAAI8vC,KAAK,CAAC,CAACH,KAAKF,EAAN,KAAaH,KAAKI,EAAlB,IAAwB,CAACE,KAAKF,EAAN,KAAaL,KAAKI,EAAlB,CAAzB,IAAkDI,WAA3D;AACA,QAAIE,KAAK,CAAC,CAACR,KAAKF,EAAN,KAAaC,KAAKI,EAAlB,IAAwB,CAACF,KAAKF,EAAN,KAAaD,KAAKI,EAAlB,CAAzB,IAAkDI,WAA3D;;AAEA;AACA,QAAIC,KAAK,CAAL,IAAUA,KAAK,CAAf,IAAoBC,KAAK,CAAzB,IAA8BA,KAAK,CAAvC,EAA0C,OAAO,KAAP;;AAE1C;AACA,QAAI/2C,IAAIq2C,KAAKS,MAAMP,KAAKF,EAAX,CAAb;AACA,QAAIp2C,IAAIq2C,KAAKQ,MAAMN,KAAKF,EAAX,CAAb;;AAEA,WAAO,EAACt2C,IAAD,EAAIC,IAAJ,EAAP;AACH;;AAED,SAAS+2C,cAAT,CAAwBzJ,EAAxB,EAA4B0J,EAA5B,EAAgCpJ,EAAhC,EAAoCqJ,EAApC,EAAwCC,EAAxC,EAA4CC,EAA5C,EAAgDjY,EAAhD,EAAoDC,EAApD,EAAuD;AACnD;AACA,QAAIiY,KAAKH,KAAKD,EAAd;AAAA,QACIK,KAAK/J,KAAKM,EADd;AAEA,QAAI0J,KAAKF,KAAK9J,EAAL,GAAU+J,KAAKL,EAAxB;;AAEA;AACA,QAAIO,KAAKpY,KAAKgY,EAAd;AAAA,QACIK,KAAKN,KAAKhY,EADd;AAEA,QAAIuY,KAAKF,KAAKL,EAAL,GAAUM,KAAKL,EAAxB;;AAEA,QAAIO,cAAcN,KAAKI,EAAL,GAAUD,KAAKF,EAAjC;;AAEA;AACA,QAAI35C,KAAKwvB,GAAL,CAASwqB,WAAT,IAAwBvM,UAA5B,EAAwC,OAAO,KAAP;;AAExC,QAAIprC,IAAI,CAACy3C,KAAKF,EAAL,GAAUD,KAAKI,EAAhB,IAAsBC,WAA9B;AACA,QAAI13C,IAAI,CAACo3C,KAAKK,EAAL,GAAUF,KAAKD,EAAhB,IAAsBI,WAA9B;AACA,WAAO,EAAC33C,GAAGA,CAAJ,EAAOC,GAAGA,CAAV,EAAP;AACH;;AAED,SAAS23C,sBAAT,CAAgCh0B,MAAhC,EAAwCkoB,EAAxC,EAA4CC,EAA5C,EAAgDE,EAAhD,EAAoDC,EAApD,EAAwDR,EAAxD,EAA4DC,EAA5D,EAA+D;AAC3D,QAAI3rC,IAAI8rC,KAAKloB,MAAb;AAAA,QAAqB3jB,IAAI8rC,KAAKnoB,MAA9B;AAAA,QAAsC5hB,IAAIiqC,KAAKroB,SAAS,CAAxD;AAAA,QAA2D+S,IAAIuV,KAAKtoB,SAAS,CAA7E;AACA,WAAO8nB,KAAK1rC,CAAL,IAAU0rC,KAAK1rC,IAAIgC,CAAnB,IACA2pC,KAAK1rC,CADL,IACU0rC,KAAK1rC,IAAI02B,CAD1B;AAEH;;AAED;AACA,SAASkhB,0BAAT,CAAoCj0B,MAApC,EAA4CkoB,EAA5C,EAAgDC,EAAhD,EAAoDE,EAApD,EAAwDC,EAAxD,EAA4D4L,EAA5D,EAAgEC,EAAhE,EAAoEC,EAApE,EAAwEC,EAAxE,EAA2E;AACvE,QAAIj4C,IAAI8rC,KAAKloB,MAAb;AAAA,QAAqB3jB,IAAI8rC,KAAKnoB,MAA9B;AAAA,QAAsC5hB,IAAIiqC,KAAKroB,SAAS,CAAxD;AAAA,QAA2D+S,IAAIuV,KAAKtoB,SAAS,CAA7E;AACA,WAAOk0B,KAAK93C,CAAL,IAAU83C,KAAKE,EAAL,GAAUh4C,IAAIgC,CAAxB,IACA+1C,KAAK93C,CADL,IACU83C,KAAKE,EAAL,GAAUh4C,IAAI02B,CAD/B;AAEH;;AAED;;;AAGA,SAASuhB,oBAAT,CAA8BC,MAA9B,EAAqC;AACjC;AACA,QAAMlH,QAAQtzC,KAAK4Z,KAAL,CAAW,IAAI6zB,UAAf,CAAd;AACA,QAAIgN,KAAK,EAAT;AACAD,WAAOn5C,OAAP,CAAe,iBAAS;AACpB,YAAIq5C,OAAO16C,KAAK6jB,KAAL,CAAWgL,MAAMxsB,CAAN,GAAUixC,KAArB,CAAX;AACA,YAAGmH,GAAGC,IAAH,MAAav5C,SAAhB,EAA2Bs5C,GAAGC,IAAH,IAAW,EAACr4C,GAAGwsB,MAAMxsB,CAAV,EAAas4C,IAAI,EAAjB,EAAX;AAC3B,YAAIA,KAAKF,GAAGC,IAAH,EAASC,EAAlB;AACA,YAAIxG,OAAOn0C,KAAK6jB,KAAL,CAAWgL,MAAMvsB,CAAN,GAAUgxC,KAArB,CAAX;AACA,YAAIl+B,SAAS,IAAb;AACA,aAAI,IAAIwlC,KAAK,CAAb,EAAgBA,KAAKD,GAAGj4C,MAAxB,EAAgCk4C,IAAhC,EAAqC;AACjC,gBAAGD,GAAGC,EAAH,EAAOzG,IAAP,KAAgBA,IAAnB,EAAyB/+B,SAAS,KAAT;AAC5B;AACD,YAAGA,MAAH,EAAWulC,GAAG90C,IAAH,CAAQ,EAACsuC,MAAMA,IAAP,EAAa7xC,GAAGusB,MAAMvsB,CAAtB,EAAR;AACd,KAVD;;AAYA;;AAEA;AACA,aAASu4C,QAAT,CAAkB53C,CAAlB,EAAqBE,CAArB,EAAuB;AACnB,YAAGF,EAAEkxC,IAAF,GAAShxC,EAAEgxC,IAAd,EAAoB,OAAO,CAAC,CAAR;AACpB,YAAGlxC,EAAEkxC,IAAF,GAAShxC,EAAEgxC,IAAd,EAAoB,OAAO,CAAP;AACpB,eAAO,CAAP;AACH;AACD,QAAI2G,SAASj6C,OAAOO,IAAP,CAAYq5C,EAAZ,CAAb;AACA,SAAI,IAAIM,KAAK,CAAb,EAAgBA,KAAKD,OAAOp4C,MAA5B,EAAoCq4C,IAApC,EAAyC;AACrC,YAAIL,OAAOD,GAAGK,OAAOC,EAAP,CAAH,CAAX;AACAL,aAAKC,EAAL,CAAQx4B,IAAR,CAAa04B,QAAb;AACH;;AAED;AACA;AACA,QAAIG,gBAAgB,EAApB;AACA,SAAI,IAAID,MAAK,CAAb,EAAgBA,MAAKD,OAAOp4C,MAA5B,EAAoCq4C,KAApC,EAAyC;AACrC,YAAIE,QAAQR,GAAGK,OAAOC,GAAP,CAAH,CAAZ;AACA,YAAIG,MAAMD,MAAMN,EAAhB;AACA,aAAI,IAAIQ,MAAMJ,MAAK,CAAnB,EAAsBI,MAAML,OAAOp4C,MAAnC,EAA2Cy4C,KAA3C,EAAiD;AAC7C,gBAAIC,QAAQX,GAAGK,OAAOK,GAAP,CAAH,CAAZ;AACA,gBAAIE,MAAMD,MAAMT,EAAhB;;AAEA,gBAAIW,aAAa,EAAjB;AACA,gBAAIC,aAAa,EAAC7C,IAAIuC,MAAM54C,CAAX,EAAcu2C,IAAIwC,MAAM/4C,CAAxB,EAA2Bs4C,IAAIW,UAA/B,EAAjB;AACA,iBAAI,IAAIE,MAAM,CAAd,EAAiBA,MAAMN,IAAIx4C,MAA3B,EAAmC84C,KAAnC,EAAyC;AACrC,qBAAI,IAAIC,MAAM,CAAd,EAAiBA,MAAMJ,IAAI34C,MAA3B,EAAmC+4C,KAAnC,EAAyC;AACrC,wBAAGP,IAAIM,GAAJ,EAASrH,IAAT,KAAkBkH,IAAII,GAAJ,EAAStH,IAA9B,EAAmC;AAC/BmH,mCAAWz1C,IAAX,CAAgBq1C,IAAIM,GAAJ,EAASl5C,CAAzB;AACA;AACH;AACJ;AACJ;;AAED,gBAAGg5C,WAAW54C,MAAX,GAAoB,CAAvB,EAA0Bs4C,cAAcn1C,IAAd,CAAmB01C,UAAnB;AAC7B;AACJ;;AAED;;AAEA;AACA,QAAIjL,aAAa,EAAjB;AACA,SAAI,IAAIoL,MAAM,CAAd,EAAiBA,MAAMV,cAAct4C,MAArC,EAA6Cg5C,KAA7C,EAAmD;AAC/C,YAAIC,eAAeX,cAAcU,GAAd,CAAnB;AACA,YAAIf,KAAKgB,aAAahB,EAAtB;AACA,YAAIjC,KAAKiD,aAAajD,EAAtB;AAAA,YAA0BE,KAAK+C,aAAa/C,EAA5C;AACA,aAAI,IAAI4C,MAAM,CAAd,EAAiBA,MAAMb,GAAGj4C,MAA1B,EAAkC84C,KAAlC,EAAwC;AACpC,iBAAI,IAAIC,OAAMD,MAAM,CAApB,EAAuBC,OAAMd,GAAGj4C,MAAhC,EAAwC+4C,MAAxC,EAA8C;AAC1C,oBAAIjL,KAAK,EAACnuC,GAAGq2C,EAAJ,EAAQp2C,GAAGq4C,GAAGa,GAAH,CAAX,EAAT;AAAA,oBACI/K,KAAK,EAACpuC,GAAGu2C,EAAJ,EAAQt2C,GAAGq4C,GAAGa,GAAH,CAAX,EADT;AAAA,oBAEI9K,KAAK,EAACruC,GAAGu2C,EAAJ,EAAQt2C,GAAGq4C,GAAGc,IAAH,CAAX,EAFT;AAAA,oBAGI9K,KAAK,EAACtuC,GAAGq2C,EAAJ,EAAQp2C,GAAGq4C,GAAGc,IAAH,CAAX,EAHT;;AAKA,oBAAIG,YAAY,EAACpL,IAAIA,EAAL,EAASC,IAAIA,EAAb,EAAiBC,IAAIA,EAArB,EAAyBC,IAAIA,EAA7B,EAAhB;AACAL,2BAAWzqC,IAAX,CAAgB+1C,SAAhB;AACH;AACJ;AACJ;;AAED,WAAOtL,UAAP;AACH;;AAED;;;;AAIA,SAASuL,gBAAT,CAA0BvL,UAA1B,EAAqC;AACjC,SAAI,IAAIoE,QAAQ,CAAhB,EAAmBA,QAAQpE,WAAW5tC,MAAtC,EAA8CgyC,OAA9C,EAAsD;AAClD,YAAIoH,KAAKxL,WAAWoE,KAAX,CAAT;AACA,YAAI9E,KAAKkM,GAAGtL,EAAH,CAAMnuC,CAAf;AAAA,YAAkBi3C,KAAKwC,GAAGtL,EAAH,CAAMluC,CAA7B;AACA,YAAIy5C,KAAKD,GAAGpL,EAAH,CAAMruC,CAAN,GAAUutC,EAAnB;AAAA,YAAuBoM,KAAKF,GAAGpL,EAAH,CAAMpuC,CAAN,GAAUg3C,EAAtC;AACA,aAAI,IAAI2C,QAAQ,CAAhB,EAAmBA,QAAQ3L,WAAW5tC,MAAtC,EAA8Cu5C,OAA9C,EAAsD;AAClD,gBAAGvH,UAAUuH,KAAb,EAAmB;AACf,oBAAIC,KAAK5L,WAAW2L,KAAX,CAAT;AACA,oBAAI/L,KAAKgM,GAAG1L,EAAH,CAAMnuC,CAAf;AAAA,oBAAkBk3C,KAAK2C,GAAG1L,EAAH,CAAMluC,CAA7B;AACA,oBAAI65C,KAAKD,GAAGxL,EAAH,CAAMruC,CAAN,GAAU6tC,EAAnB;AAAA,oBAAuBkM,KAAKF,GAAGxL,EAAH,CAAMpuC,CAAN,GAAUi3C,EAAtC;AACA,oBAAGW,2BAA2BzM,UAA3B,EAAuCmC,EAAvC,EAA2C0J,EAA3C,EAA+CyC,EAA/C,EAAmDC,EAAnD,EAAuD9L,EAAvD,EAA2DqJ,EAA3D,EAA+D4C,EAA/D,EAAmEC,EAAnE,CAAH,EAA0E;AACtE9L,+BAAWzpC,MAAX,CAAkBo1C,KAAlB,EAAyB,CAAzB;AACAA;AACAvH,4BAAQ10C,KAAKiQ,GAAL,CAAS,CAAT,EAAYgsC,QAAQ,CAApB,CAAR;AACA;AACH;AACJ;AACJ;AACJ;AACD,WAAO3L,UAAP;AACH;;AAED;AACA,SAAS+L,oBAAT,CAA8BzM,EAA9B,EAAkC0J,EAAlC,EAAsCpJ,EAAtC,EAA0CqJ,EAA1C,EAA8Cl3C,CAA9C,EAAiDC,CAAjD,EAAmD;AAC/C,QAAIwhC,KAAKoM,KAAKN,EAAd;AAAA,QAAkB7L,KAAKwV,KAAKD,EAA5B;AAAA,QACIgD,MAAMj6C,IAAIutC,EADd;AAAA,QACkB2M,MAAMj6C,IAAIg3C,EAD5B;AAAA,QAEIkD,MAAMn6C,IAAI6tC,EAFd;AAAA,QAEkBuM,MAAMn6C,IAAIi3C,EAF5B;AAGA,QAAI91C,IAAIzD,KAAKG,IAAL,CAAU2jC,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAR;AAAA,QACI/gC,KAAKhD,KAAKG,IAAL,CAAUm8C,MAAMA,GAAN,GAAYC,MAAMA,GAA5B,CADT;AAAA,QAEIG,KAAK18C,KAAKG,IAAL,CAAUq8C,MAAMA,GAAN,GAAYC,MAAMA,GAA5B,CAFT;AAGA,WAAOz8C,KAAKwvB,GAAL,CAAU/rB,KAAKT,KAAK05C,EAAV,CAAV,IAA4BhP,cAAnC;AACH;;QAGG2L,c,GAAAA,c;QACAY,sB,GAAAA,sB;QACAC,0B,GAAAA,0B;QACA2B,gB,GAAAA,gB;QACAtB,oB,GAAAA,oB;;;;;;;;;;;;;;;ACpMJ;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA;;;;;;;;;;;AAWC;AACD,IAAMniC,gBAAgB;AAClBxD,QAAIzT,SADc;AAElB8nC,mBAAe;AACX0T,kBAAU,GADC;AAEXC,kBAAU,EAFC;AAGXn3C,gBAAQ;AAHG,KAFG;AAOlBg0B,oBAAgB;AACZh0B,gBAAQ;AACJojC,+BAAmB;AADf;AADI;AAPE,CAAtB;;AAcA,IAAI8B,WAAW,IAAIhnC,MAAMse,IAAV,EAAf;AACA,IAAIC,UAAU,IAAIve,MAAMqW,OAAV,EAAd;;IAEMpD,I;AACF;;;;;;AAMA,kBAAY3B,MAAZ,EAAoBmB,UAApB,EAAgC3Q,MAAhC,EAAuC;;AAuFnC;AAvFmC;AAAA,yCAwFnC,WAA4BsR,aAA5B,EAA0C;AACtC,sBAAMnD,MAAM6lB,cAAN,CAAqBojB,oBAArB,CAA0C9lC,aAA1C,CAAN;AACH,aA1FkC;;AAAA,4BAwFpBD,YAxFoB;AAAA;AAAA;AAAA;;AAAA;;AAEnC,aAAKV,UAAL,GAAkBA,UAAlB;AACA,aAAK3Q,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA,YAAIxE,QAAQ,IAAZ;AACA,YAAIsH,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA;AACA,YAAG,IAAH,EAAQ;AACJ,gBAAI4hC,SAAS,KAAK1mC,UAAL,CAAgB2mC,aAAhB,CAA8B,KAAK3mC,UAAL,CAAgBgF,eAA9C,EAA+D,IAA/D,EAAqE,IAArE,CAAb;;AAEA,gBAAI4D,KAAK89B,OAAO/zC,MAAP,CAAc;AAAA,uBAASi0C,iBAAiBr5C,MAAMib,gBAAhC;AAAA,aAAd,EAAgE,CAAhE,CAAT;AACA,gBAAIq+B,SAAS,EAAC,SAAQ,UAAT,EAAoB,aAAY,CAAhC,EAAkC,cAAa,IAA/C,EAAoD,eAAc,OAAlE,EAA0E,iBAAgB,CAA1F,EAA4F,oBAAmB,IAA/G,EAAoH,oBAAmB,IAAvI,EAA4I,sBAAqB,CAAC,GAAlK,EAAsK,qBAAoB,GAA1L,EAA8L,uBAAsB,GAApN,EAAwN,wBAAuB,CAAC,GAAhP,EAAoP,sBAAqB,EAAzQ,EAA4Q,qBAAoB,GAAhS,EAAb;AACA,gBAAI/qC,SAAS,mBAAAiB,CAAQ,CAAR,EAAsCC,OAAnD;AACAlB,mBAAOgrC,IAAP,CAAYl+B,EAAZ,EAAgBi+B,MAAhB;;AAEA,gBAAG,KAAK7mC,UAAL,CAAgBxB,EAAhB,CAAmBnP,MAAnB,CAA0BiX,GAA7B,EAAiC;AAC7B,qBAAKtG,UAAL,CAAgB2mC,aAAhB,CAA8B,KAAK3mC,UAAL,CAAgBsG,GAA9C;AACH;;AAED,gBAAIygC,SAASL,OAAO/zC,MAAP,CAAc;AAAA,uBAASi0C,iBAAiBr5C,MAAMib,gBAAhC;AAAA,aAAd,EAAgE,CAAhE,CAAb;AACAu+B,mBAAOhxC,UAAP,GAAoB,IAApB;AACH;;AAED;AACA,aAAKotB,gBAAL,GAAwB,IAAIY,0BAAJ,EAAxB;AACA,aAAK/jB,UAAL,CAAgBgF,eAAhB,CAAgCiC,UAAhC,CAA2C,KAAKkc,gBAAL,CAAsB5iB,IAAjE;AACA;AACA,iBAASymC,gBAAT,CAA0BjuC,SAA1B,EAAoC;AAChC;AACA,gBAAIggB,OAAOhgB,UAAUtB,cAAV,CAAyBshB,IAApC;AACAvb,kBAAMwC,UAAN,CAAiB4F,gBAAjB,CAAkCqhC,KAAlC,CAAwCluB,IAAxC,EAA8C,EAA9C;AACAvb,kBAAM2lB,gBAAN,CAAuBhqB,GAAvB,CAA2BJ,SAA3B;;AAEAw7B,qBAAStkB,aAAT,CAAuBzS,MAAM2lB,gBAAN,CAAuB5iB,IAA9C;AACAg0B,qBAASpkB,OAAT,CAAiBrE,OAAjB;AACAzZ,oBAAQE,GAAR,CAAY,iBAAZ,EAA+BgiC,QAA/B;AACA,gBAAI2S,gBAAgBt9C,KAAKiQ,GAAL,CAASiS,QAAQ7f,CAAjB,EAAoB6f,QAAQ5f,CAA5B,EAA+B4f,QAAQne,CAAvC,CAApB;AACA6P,kBAAMq1B,aAAN,CAAoBtyB,IAApB,CAAyB5H,QAAzB,CAAkChL,CAAlC,GAAsCu5C,gBAAgB,CAAhB,GAAoB1pC,MAAMnO,MAAN,CAAawjC,aAAb,CAA2B0T,QAA3B,GAAsCzhC,KAAhG;AACAtH,kBAAMq1B,aAAN,CAAoBtyB,IAApB,CAAyB5H,QAAzB,CAAkCzM,CAAlC,GAAsCsR,MAAMnO,MAAN,CAAawjC,aAAb,CAA2B2T,QAA3B,GAAsC1hC,KAA5E;AACH;AACDjG,eAAOa,YAAP,CAAoBzK,EAApB,CAAuBiN,uBAAapN,OAAb,CAAqB8e,cAA5C,EAA4DozB,gBAA5D;;AAEA;AACA,aAAK33C,MAAL,CAAYwjC,aAAZ,CAA0BxjC,MAA1B,CAAiCmP,EAAjC,GAAsC,KAAKnP,MAAL,CAAYmP,EAAlD;AACA,aAAKq0B,aAAL,GAAqB,IAAIzmB,uBAAJ,CAAkB,KAAK/c,MAAL,CAAYwjC,aAAZ,CAA0BxjC,MAA5C,CAArB;;AAEA,aAAK2Q,UAAL,CAAgB7T,KAAhB,CAAsBg7C,eAAtB,CAAsC,SAAtC,EAAiD,eAAjD,EAAkE,KAAKtU,aAAL,CAAmB7lB,YAArF;AACA3a,gBAAQE,GAAR,CAAY,iBAAZ,EAA+B,KAAKyN,UAAL,CAAgB7T,KAAhB,CAAsB69B,cAArD;;AAEA,aAAKhqB,UAAL,CAAgBgF,eAAhB,CAAgCiC,UAAhC,CAA2C,KAAK4rB,aAAL,CAAmBtyB,IAA9D;;AAEA,iBAAS6mC,sBAAT,GAAiC;AAC7B7S,qBAAStkB,aAAT,CAAuBzS,MAAMq1B,aAAN,CAAoBtyB,IAA3C;AACAg0B,qBAASjb,SAAT,CAAmBxN,OAAnB;AACA,gBAAIu7B,kBAAkBv7B,QAAQ7f,CAA9B;AACAuR,kBAAMq1B,aAAN,CAAoBtyB,IAApB,CAAyB+mC,gBAAzB,CAA0Cx7B,OAA1C;AACA,gBAAIy7B,UAAUF,kBAAkBv7B,QAAQ7f,CAAxC;;AAEAsoC,qBAAStkB,aAAT,CAAuBzS,MAAM2lB,gBAAN,CAAuB5iB,IAA9C;AACAg0B,qBAASjb,SAAT,CAAmBxN,OAAnB;AACA,gBAAI07B,UAAU17B,QAAQ7f,CAAtB;;AAEAuR,kBAAMq1B,aAAN,CAAoBtyB,IAApB,CAAyB5H,QAAzB,CAAkC1M,CAAlC,GAAsCu7C,UAAUD,OAAhD;AACH;AACD,iBAASE,iBAAT,CAA2BzkC,KAA3B,EAAiC;AAC7BxF,kBAAMq1B,aAAN,CAAoB15B,GAApB,CAAwB6J,KAAxB;AACAokC;AACH;AACDvoC,eAAOK,SAAP,CAAiBjK,EAAjB,CAAoBkN,oBAAUrN,OAAV,CAAkB0e,UAAtC,EAAkDi0B,iBAAlD;AACA,iBAASC,mBAAT,CAA6B1kC,KAA7B,EAAmC;AAC/BxF,kBAAMq1B,aAAN,CAAoBtzB,MAApB,CAA2ByD,KAA3B;AACAokC;AACH;AACDvoC,eAAOK,SAAP,CAAiBjK,EAAjB,CAAoBkN,oBAAUrN,OAAV,CAAkB2e,YAAtC,EAAoDi0B,mBAApD;AACA,iBAASC,oBAAT,CAA8B3kC,KAA9B,EAAoC;AAChCxF,kBAAMq1B,aAAN,CAAoBl2B,MAApB,CAA2BqG,KAA3B;AACAokC;AACH;AACDvoC,eAAOK,SAAP,CAAiBjK,EAAjB,CAAoBkN,oBAAUrN,OAAV,CAAkB4e,aAAtC,EAAqDi0B,oBAArD;;AAEA;AACA,aAAKt4C,MAAL,CAAYg0B,cAAZ,CAA2Bh0B,MAA3B,CAAkCmP,EAAlC,GAAuC,KAAKnP,MAAL,CAAYmP,EAAnD;AACA,aAAK6kB,cAAL,GAAsB,IAAIukB,wBAAJ,CAAmB,KAAK/U,aAAxB,EAAuC,KAAK1P,gBAA5C,EAA8D,KAAK9zB,MAAL,CAAYg0B,cAAZ,CAA2Bh0B,MAAzF,CAAtB;AACA,aAAK2Q,UAAL,CAAgBgF,eAAhB,CAAgCiC,UAAhC,CAA2C,KAAKoc,cAAL,CAAoB9iB,IAA/D;AAMA1B,eAAO5J,EAAP,CAAU6J,iBAAOhK,OAAP,CAAegM,UAAzB,EAAqCJ,YAArC;;AAEA,YAAI6tB,kBAAkB,IAAIxZ,yBAAJ,CAAoB,IAApB,EAA0B,IAAE,EAA5B,EAAgC,KAAKpY,MAAL,CAAY0D,IAAZ,CAAiB,IAAjB,CAAhC,CAAtB;AACA,aAAKL,UAAL,CAAgB7T,KAAhB,CAAsBq+B,gBAAtB,CAAuC/6B,IAAvC,CAA4C8+B,eAA5C;;AAEA,YAAG,KAAKl/B,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsBiX,GAAzB,EAA6B;AACzB,iBAAKuhC,QAAL;AACH;;AAED,YAAG,KAAKx4C,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsB6X,SAAzB,EAAmC;AAC/B,iBAAKC,SAAL;AACH;AACJ;;AAED;;;;;+BACOjW,G,EAAI;AACP,iBAAKmyB,cAAL,CAAoB1mB,MAApB;AACH;;;mCAES;AACN,gBAAImI,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;AACA,gBAAI3Y,QAAQ,KAAK6T,UAAL,CAAgB7T,KAA5B;AACA,gBAAIma,MAAM,KAAKtG,UAAL,CAAgBsG,GAA1B;AACA,gBAAI9I,QAAQ,IAAZ;AAGH;;;8CAEoB;AACjB,iBAAK6lB,cAAL,CAAoBykB,KAApB;AACH;;;oCAEU;;AAEP,gBAAIt+B,QAAQ,mBAAAzM,CAAQ,EAAR,EAAqCC,OAAjD;AACA,gBAAIlB,SAAS,mBAAAiB,CAAQ,CAAR,EAAsCC,OAAnD;AACA,gBAAIyM,YAAY,mBAAA1M,CAAQ,EAAR,EAAyCC,OAAzD;;AAEA,gBAAIQ,QAAQ,IAAZ;AACA,gBAAIrR,QAAQ,KAAK6T,UAAL,CAAgB7T,KAA5B;;AAEA,gBAAG,KAAKkD,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsBiX,GAAzB,EAA6B;AACzB,oBAAIgE,eAAeb,UAAU0a,OAAV,CAAkB,KAAlB,CAAnB;;AAEAroB,uBAAO6N,YAAP,CAAoB,WAApB,EAAiC,mBAAjC,EAAsD,YAAU;AAC5DW,iCAAay9B,MAAb,CAAoBvqC,MAAMq1B,aAAN,CAAoBtyB,IAAxC;AACH,iBAFD;AAGH;AACJ;;;;;;kBAGUC,I;;;;;;;;;;;;;;;AC9Lf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;AAEA,SAASk1B,KAAT,CAAemB,EAAf,EAAmB;AACf,WAAO,IAAIzvB,OAAJ,CAAY;AAAA,eAAW7L,WAAW8L,OAAX,EAAoBwvB,EAApB,CAAX;AAAA,KAAZ,CAAP;AACH;;AAED;;;;;;AAMC;AACD,IAAM70B,gBAAgB,EAAtB;;AAEA;;;;AAIA,SAASgmC,SAAT,CAAmBj5B,SAAnB,EAA6B;AACzB;AACA,QAAIk5B,kBAAkB,IAAIC,4BAAJ,CAAuBn5B,UAAU1a,KAAjC,CAAtB;AACA4zC,oBAAgBE,MAAhB,CAAuBp5B,SAAvB;AACA,WAAOk5B,eAAP;AACH;;AAED;;;;;AAKA,SAASG,WAAT,CAAqBj+C,MAArB,EAA6B4kB,SAA7B,EAAuC;AACnC;AACA5kB,WAAOg+C,MAAP,CAAcp5B,SAAd;AACA,WAAO5kB,MAAP;AACH;;AAED,SAASk+C,oBAAT,CAA8B7mC,WAA9B,EAA0C;AACtC,YAAOA,WAAP;AACI,aAAK,KAAL;AAAY,mBAAQ,CAAC,CAAD,EAAQ,CAAR,EAAgB,CAAhB,CAAR;AACZ,aAAK,KAAL;AAAY,mBAAQ,CAAC,EAAD,EAAQ,CAAR,EAAgB,CAAhB,CAAR;AACZ,aAAK,KAAL;AAAY,mBAAQ,CAAC,CAAD,EAAQ,CAAR,EAAgB,EAAhB,CAAR;AACZ,aAAK,KAAL;AAAY,mBAAQ,CAAC,EAAD,EAAQ,CAAR,EAAgB,EAAhB,CAAR;AACZ,aAAK,KAAL;AAAY,mBAAQ,CAAC,EAAD,EAAQ,CAAC,EAAT,EAAgB,CAAhB,CAAR;AACZ,aAAK,KAAL;AAAY,mBAAQ,CAAC,CAAD,EAAQ,CAAC,EAAT,EAAgB,CAAhB,CAAR;AANhB;AAQH;;AAED;;;AAGA,SAAS8mC,mBAAT,CAA6B9mC,WAA7B,EAAyC;AACrC,QAAM+mC,MAAM3+C,KAAKC,EAAL,GAAU,KAAtB;AACA,QAAIgD,IAAIw7C,qBAAqB7mC,WAArB,CAAR;AACA,WAAO,IAAIjU,MAAM0kC,KAAV,CAAgBplC,EAAE,CAAF,IAAO07C,GAAvB,EAA4B17C,EAAE,CAAF,IAAO07C,GAAnC,EAAwC17C,EAAE,CAAF,IAAO07C,GAA/C,CAAP;AACH;;AAED,IAAI38B,UAAU,IAAIre,MAAMse,IAAV,EAAd;AACA,IAAIC,UAAU,IAAIve,MAAMqW,OAAV,EAAd;;IAEMgkC,c;AACF;;;;;AAKA,4BAAY/U,aAAZ,EAA2B1P,gBAA3B,EAA6C9zB,MAA7C,EAAoD;AAAA;;AAEhD,aAAKwjC,aAAL,GAAqBA,aAArB;AACA,aAAK1P,gBAAL,GAAwBA,gBAAxB;AACA,aAAK9zB,MAAL,GAAcnF,gBAAMiB,eAAN,CAAsBkE,MAAtB,EAA8B2S,aAA9B,CAAd;;AAEA;AACA,aAAKshB,UAAL,GAAkB,EAAlB;AACA,aAAK/iB,IAAL,GAAY,IAAIhT,MAAM8e,QAAV,EAAZ;;AAEA,aAAKm8B,IAAL,GAAY,IAAIviB,cAAJ,CAAS+hB,SAAT,EAAoBI,WAApB,CAAZ;;AAEA;AACA,aAAKK,cAAL,GAAsB,EAAtB;AACH;;AAED;;;;;;;;oDAG2B9nC,a,EAAc;;AAErC,oBAAImE,QAAQ,KAAKzV,MAAL,CAAYmP,EAAZ,CAAenP,MAAf,CAAsByV,KAAlC;;AAEA,oBAAI7L,mBAAmB0H,cAAcmB,MAAd,CAAqB,CAArB,EAAwB7I,gBAA/C;AACA,oBAAIyvC,SAAS,KAAKvlB,gBAAL,CAAsBwlB,SAAtB,CAAgC1vC,gBAAhC,CAAb;AACA,oBAAI4W,SAAS,IAAItiB,MAAMqW,OAAV,EAAb;AACA,oBAAIpC,cAAc,IAAIjU,MAAMorB,UAAV,EAAlB;AACA,oBAAIvK,QAAQ,IAAI7gB,MAAMqW,OAAV,EAAZ;AACA8kC,uBAAOE,SAAP,CAAiB/4B,MAAjB,EAAyBrO,WAAzB,EAAsC4M,KAAtC;;AAEA;AACA,oBAAIy6B,mBAAmB,IAAI3yC,GAAJ,EAAvB;;AAEA,oBAAIuyC,iBAAiB,KAAKA,cAA1B;AACA,oBAAIloC,OAAO,KAAKA,IAAhB;AACA,oBAAIuoC,kBAAkB,KAAKC,yBAAL,CAA+B1oC,IAA/B,CAAoC,IAApC,CAAtB;AACA,oBAAI2oC,SAAS/vC,iBAAiB5F,UAAjB,CAA4B/G,MAAzC;AACA,oBAAIqwC,iBAAiBh8B,cAAcmB,MAAd,CAAqBxV,MAA1C;AACA,oBAAI28C,eAAe,KAAK55C,MAAL,CAAYojC,iBAAZ,GAAgC,IAAhC,GAAuCkK,cAA1D;AACA,qBAAI,IAAInwC,IAAI,CAAZ,EAAeA,IAAImwC,cAAnB,EAAmCnwC,GAAnC,EAAuC;AACnC,wBAAIyW,OAAOtC,cAAcmB,MAAd,CAAqBtV,CAArB,CAAX;AACA,wBAAI08C,oBAAoB,KAAKrW,aAAL,CAAmB3jB,WAAnB,CAA+BjM,KAAK5O,KAApC,CAAxB;;AAEA,wBAAI80C,iBAAiBN,iBAAiBj6C,GAAjB,CAAqBs6C,iBAArB,CAArB;AACA,wBAAIE,gBAAgBF,kBAAkB70C,KAAlB,CAAwBb,QAA5C;AACA,wBAAG21C,mBAAmBp+C,SAAtB,EAAiC89C,iBAAiBj7C,GAAjB,CAAqBs7C,iBAArB,EAAwCC,iBAAiB,CAAzD;AACjCN,qCAAiBj7C,GAAjB,CAAqBs7C,iBAArB,EAAwC,EAAEC,cAA1C;AACA,wBAAI95B,YAAY85B,mBAAmBC,aAAnB,GAAmC,oBAAnC,GAA0D,gBAA1E;AACA,yBAAKvW,aAAL,CAAmBwW,WAAnB,CAA+BH,iBAA/B,EAAkDC,iBAAiB,GAAjB,GAAuBC,aAAzE,EAAwF/5B,SAAxF;;AAEA,wBAAI44B,kBAAkB,KAAKO,IAAL,CAAUrkB,OAAV,CAAkB+kB,iBAAlB,CAAtB;;AAEA,yBAAK5lB,UAAL,CAAgB7zB,IAAhB,CAAqBw4C,eAArB;;AAEA,wBAAIr0C,WAAW00C,oBAAoBrlC,KAAKzB,WAAzB,CAAf;AACAymC,oCAAgBqB,iBAAhB,CAAkC11C,SAAS3H,CAA3C,EAA8C2H,SAAS1H,CAAvD,EAA0D0H,SAASjG,CAAnE;;AAEA,wBAAI1B,IAAIgX,KAAKtK,QAAL,CAAc1M,CAAd,GAAkB4jB,OAAO5jB,CAAjC;AAAA,wBACIC,IAAI+W,KAAKtK,QAAL,CAAczM,CAAd,GAAkB2jB,OAAO3jB,CADjC;AAAA,wBAEIyB,IAAIsV,KAAKtK,QAAL,CAAchL,CAAd,GAAkBkiB,OAAOliB,CAFjC;;AAIA,wBAAI47C,gBAAgBC,gBAAMC,KAAN,CAAYC,QAAZ,CAAqBF,gBAAMG,SAAN,CAAgBC,IAAhB,CAAqBC,WAA1C,EAChB59C,CADgB,EACbC,CADa,EACV88C,MADU,EAEhB,CAFgB,EAEb,CAFa,EAEVr7C,IAAIq7C,MAFM,EAGhB,EAHgB,CAApB;;AAMAO,kCAAcO,SAAd,GAA0B7B,eAA1B;AACAsB,kCAAcQ,IAAd,CAAmB9B,gBAAgBtvC,QAAnC,EAA6C,GAA7C,EAAkD,GAAlD,EAAuD,GAAvD;AACA4wC,kCAAcS,UAAd,GAA2BlB,eAA3B;AACAS,kCAAc5sC,MAAd,CAAqB,CAArB;AACA8rC,mCAAeh5C,IAAf,CAAoB85C,aAApB;;AAEAhpC,yBAAK7Q,GAAL,CAASu4C,gBAAgB1nC,IAAzB;AACA,0BAAMm1B,MAAMuT,YAAN,CAAN;AACH;;AAED,sBAAMvT,MAAM,GAAN,CAAN;;AAEA,oBAAIuU,iBAAiB,IAAInlC,KAAzB;AACA,qBAAI,IAAItY,KAAI,CAAR,EAAW09C,mBAAmBvpC,cAAcoB,QAAd,CAAuBzV,MAAzD,EAAiEE,KAAI09C,gBAArE,EAAuF19C,IAAvF,EAA2F;AACvF,wBAAIyW,QAAOtC,cAAcoB,QAAd,CAAuBvV,EAAvB,CAAX;AACA,wBAAI08C,qBAAoB,KAAKrW,aAAL,CAAmB3jB,WAAnB,CAA+BjM,MAAK5O,KAApC,CAAxB;;AAEA,wBAAG7H,OAAM,CAAT,EAAYy9C,kBAAkBhnC,MAAK5O,KAAL,CAAWhB,UAAX,CAAsBwF,KAAtB,GAA8B,CAAhD;;AAEZ,yBAAI,IAAIsxC,IAAI,CAAZ,EAAeA,IAAIlnC,MAAKvB,gBAAxB,EAA0CyoC,GAA1C,EAA8C;AAC1C,4BAAIlC,mBAAkB,KAAKO,IAAL,CAAUrkB,OAAV,CAAkB+kB,kBAAlB,CAAtB;;AAEA,6BAAK5lB,UAAL,CAAgB7zB,IAAhB,CAAqBw4C,gBAArB;;AAEA,4BAAIh8C,MAAIgN,iBAAiB5F,UAAjB,CAA4BwF,KAA5B,GAAoC,GAApC,GAA0CoxC,cAA1C,GAA2Dp6B,OAAO5jB,CAA1E;AAAA,4BACIC,KAAI+W,MAAK5O,KAAL,CAAWhB,UAAX,CAAsByF,MAAtB,GAA+B,CAA/B,GAAmC+W,OAAO3jB,CADlD;AAAA,4BAEIyB,KAAIsV,MAAK5O,KAAL,CAAWhB,UAAX,CAAsB/G,MAAtB,GAA+B69C,CAA/B,GAAmCt6B,OAAOliB,CAFlD;;AAIA,4BAAI47C,iBAAgBC,gBAAMC,KAAN,CAAYC,QAAZ,CAAqBF,gBAAMG,SAAN,CAAgBC,IAAhB,CAAqBC,WAA1C,EAChB59C,GADgB,EACbC,EADa,EACV88C,MADU,EAEhB,CAFgB,EAEb,CAFa,EAEVr7C,KAAIq7C,MAFM,EAGhB,EAHgB,CAApB;;AAMAO,uCAAcO,SAAd,GAA0B7B,gBAA1B;AACAsB,uCAAcQ,IAAd,CAAmB9B,iBAAgBtvC,QAAnC,EAA6C,GAA7C,EAAkD,GAAlD,EAAuD,GAAvD;AACA4wC,uCAAcS,UAAd,GAA2BlB,eAA3B;AACAS,uCAAc5sC,MAAd,CAAqB,CAArB;AACA8rC,uCAAeh5C,IAAf,CAAoB85C,cAApB;;AAEAhpC,6BAAK7Q,GAAL,CAASu4C,iBAAgB1nC,IAAzB;AACA,8BAAMm1B,MAAMuT,eAAe,EAArB,CAAN;AACH;;AAEDgB,sCAAkBhnC,MAAK5O,KAAL,CAAWhB,UAAX,CAAsBwF,KAAtB,GAA8B,IAAIiM,KAApD;AACH;AACJ,a;;;;;;;;;AAED;;;;kDAC0BslC,K,EAAM;AAC5B,gBAAInC,kBAAkBmC,MAAMN,SAA5B;AACA,iBAAKO,eAAL,CAAqBD,KAArB;AACA,gBAAIE,kBAAkBd,gBAAMC,KAAN,CAAYC,QAAZ,CAAqBF,gBAAMG,SAAN,CAAgBY,OAAhB,CAAwBC,QAA7C,EAClB,CADkB,EACf,CADe,EACZ,CADY,EAElB,EAFkB,EAEd,EAFc,EAEV,EAFU,EAGlB,EAHkB,CAAtB;;AAMAF,4BAAgBR,SAAhB,GAA4B7B,eAA5B;AACAqC,4BAAgBP,IAAhB,CAAqB9B,gBAAgB1nC,IAAhB,CAAqB6N,KAA1C,EAAiD,GAAjD,EAAsD,GAAtD,EAA2D,GAA3D;AACAk8B,4BAAgBN,UAAhB,GAA6B,KAAKK,eAAL,CAAqBhqC,IAArB,CAA0B,IAA1B,CAA7B,CAA6D;AAC7DiqC,4BAAgB3tC,MAAhB,CAAuB,CAAvB;AACA,iBAAK8rC,cAAL,CAAoBh5C,IAApB,CAAyB66C,eAAzB;AACH;;AAED;;;;wCACgBF,K,EAAM;AAClB,gBAAInC,kBAAkBmC,MAAMN,SAA5B;AACA7B,4BAAgB1nC,IAAhB,CAAqB6N,KAArB,CAA2BxgB,GAA3B,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC;AACA,gBAAI2C,QAAQ,KAAKk4C,cAAL,CAAoBj4C,OAApB,CAA4B45C,KAA5B,CAAZ;AACA,gBAAG75C,SAAS,CAAC,CAAb,EAAe;AACX,qBAAKk4C,cAAL,CAAoBh4C,MAApB,CAA2BF,KAA3B,EAAkC,CAAlC;AACH;AACD65C,kBAAMK,MAAN;AACAL,kBAAMM,MAAN;AACH;;AAED;;;;oCACYz7B,Q,EAAS;AACjB,gBAAG,CAACA,QAAJ,EAAa;AACT,qBAAK07B,iBAAL;AACH,aAFD,MAGI;AACA,qBAAKC,SAAL,CAAe37B,QAAf;AACH;AACJ;;;4CAEkB;AACf,iBAAI,IAAIziB,IAAI,CAAR,EAAWq+C,gBAAgB,KAAKvnB,UAAL,CAAgBh3B,MAA/C,EAAuDE,IAAIq+C,aAA3D,EAA0Er+C,GAA1E,EAA8E;AAC1E,qBAAK82B,UAAL,CAAgB92B,CAAhB,EAAmBs+C,KAAnB,GAA2B,CAA3B;AACH;AACJ;;AAED;;;;kCACU77B,Q,EAAS;AACf,iBAAI,IAAIziB,IAAI,CAAR,EAAWq+C,gBAAgB,KAAKvnB,UAAL,CAAgBh3B,MAA/C,EAAuDE,IAAIq+C,aAA3D,EAA0Er+C,GAA1E,EAA8E;AAC1E,oBAAIuiB,YAAY,KAAKuU,UAAL,CAAgB92B,CAAhB,CAAhB;;AAEA,oBAAIu+C,UAAUh8B,UAAU1a,KAAxB;AACA,oBAAG02C,QAAQjzC,GAAR,KAAgBmX,QAAnB,EAA4B;AACxBF,8BAAU+7B,KAAV,GAAkB,IAAlB;AACH,iBAFD,MAGI;AACA/7B,8BAAU+7B,KAAV,GAAkB,GAAlB;AACH;AACJ;AACJ;;AAED;;;;8BACMj8C,K,EAAM;AACR,gBAAGA,SAAS,CAAZ,EAAc;AACV,qBAAK0R,IAAL,CAAUm0B,QAAV,CAAmBzpC,OAAnB,CAA2B,iBAAS;AAChCmM,0BAAMsa,OAAN,GAAgB,IAAhB;AACH,iBAFD;AAGA;AACH;;AAED,gBAAItZ,OAAOF,OAAOC,gBAAlB;AAAA,gBAAoCK,OAAON,OAAOK,gBAAlD;AACA,iBAAKgI,IAAL,CAAUm0B,QAAV,CAAmBzpC,OAAnB,CAA2B,iBAAS;AAChC2gB,wBAAQqE,aAAR,CAAsB7Y,KAAtB;AACAwU,wBAAQuE,OAAR,CAAgBrE,OAAhB;AACA,oBAAIk/B,aAAal/B,QAAQ5f,CAAR,GAAY,CAA7B;AACA0f,wBAAQ0N,SAAR,CAAkBxN,OAAlB;AACA,oBAAIm/B,MAAMn/B,QAAQ5f,CAAR,GAAY8+C,UAAtB;AACA,oBAAIE,OAAOp/B,QAAQ5f,CAAR,GAAY8+C,UAAvB;AACA,oBAAGC,MAAM7yC,IAAT,EAAeA,OAAO6yC,GAAP;AACf,oBAAGC,OAAO1yC,IAAV,EAAgBA,OAAO0yC,IAAP;AACnB,aATD;;AAWA,gBAAIh/C,IAAIkM,OAAOvJ,SAAS2J,OAAOJ,IAAhB,CAAf;;AAEA;;AAEA,iBAAKmI,IAAL,CAAUm0B,QAAV,CAAmBzpC,OAAnB,CAA2B,iBAAS;AAChC2gB,wBAAQqE,aAAR,CAAsB7Y,KAAtB;AACAwU,wBAAQuE,OAAR,CAAgBrE,OAAhB;AACA,oBAAIk/B,aAAal/B,QAAQ5f,CAAR,GAAY,CAA7B;AACA0f,wBAAQ0N,SAAR,CAAkBxN,OAAlB;AACA,oBAAIm/B,MAAMn/B,QAAQ5f,CAAR,GAAY8+C,UAAtB;;AAEA,oBAAGC,MAAM/+C,CAAT,EAAYkL,MAAMsa,OAAN,GAAgB,IAAhB,CAAZ,KACKta,MAAMsa,OAAN,GAAgB,KAAhB;AACR,aATD;AAUH;;;gCAEM;AACH,iBAAK+2B,cAAL,CAAoBn8C,MAApB,GAA6B,CAA7B;AACA,iBAAKg3B,UAAL,CAAgBh3B,MAAhB,GAAyB,CAAzB;AACA,mBAAM,KAAKiU,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAAlC;AAAqC,qBAAKiU,IAAL,CAAUjB,MAAV,CAAiB,KAAKiB,IAAL,CAAUm0B,QAAV,CAAmB,KAAKn0B,IAAL,CAAUm0B,QAAV,CAAmBpoC,MAAnB,GAA4B,CAA/C,CAAjB;AAArC;AACH;;;iCAEO;AACJ,iBAAKm8C,cAAL,CAAoBx9C,OAApB,CAA4B,yBAAiB;AACzCkgD,8BAAcxuC,MAAd;AACH,aAFD;AAGH;;;;;;kBAGUirC,c;;;;;;;;;;;;;;;;;;;AC3Sf;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMwD,uBAAuB,IAAI79C,MAAM89C,aAAV,CAAwB,IAAI99C,MAAMisB,iBAAV,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAxB,CAA7B;AACA,IAAM8xB,4BAA4B,IAAI/9C,MAAMg+C,iBAAV,CAA4B,EAACj+C,OAAO,QAAR,EAAkBosB,aAAa,IAA/B,EAA5B,CAAlC;;AAEA,IAAM8xB,wBAAwBnyC,OAAO,YAAP,CAA9B;;IAEM6uC,kB;;;AACF;;;AAGA,gCAAYjpC,QAAZ,EAAqB;AAAA;;AAAA,4IACXA,QADW;;AAGjB,YAAIwsC,eAAe,MAAKj1C,IAAL,CAAUD,QAA7B;AACAk1C,qBAAazmB,aAAb,GAA6B,IAA7B;AACAymB,qBAAaxmB,mBAAb,GAAmC,CAAnC;AACAwmB,qBAAavmB,kBAAb,GAAkC,CAAlC;AACAumB,qBAAaz0C,WAAb,GAA2B,IAA3B;AACAy0C,qBAAa10C,OAAb,GAAuB,EAAvB;AACA00C,qBAAaC,QAAb,GAAwBn+C,MAAMo+C,cAA9B;AACAF,qBAAarX,SAAb,GAAyB,IAAzB;AACAqX,qBAAatX,UAAb,GAA0B,KAA1B;;AAEA,cAAK39B,IAAL,CAAUT,UAAV,GAAuB,MAAKS,IAAL,CAAUR,aAAV,GAA0B,IAAjD;;AAEA,YAAIO,WAAW+0C,0BAA0BnhC,KAA1B,EAAf;AACA,cAAKyhC,QAAL,GAAgB,IAAIr+C,MAAMs+C,YAAV,CAAuBT,oBAAvB,EAA6C70C,QAA7C,CAAhB;AACA,cAAKq1C,QAAL,CAAc34B,WAAd,GAA4B/a,OAAOC,gBAAP,GAA0B,CAAtD;AACA,cAAKyzC,QAAL,CAAcx9B,KAAd,CAAoBjF,IAApB,CAAyBlK,SAAS5L,UAAT,CAAoB6mB,IAA7C;;AAEA,cAAK3Z,IAAL,CAAU7Q,GAAV,CAAc,MAAKk8C,QAAnB;AApBiB;AAqBpB;;AAED;;;;;;;AA2BA;;;;;iCAKS3/C,C,EAAGC,C,EAAGyB,C,EAAE;AACb,iBAAK6I,IAAL,CAAU4X,KAAV,CAAgBxgB,GAAhB,CAAoB3B,CAApB,EAAuBC,CAAvB,EAA0ByB,CAA1B;AACA,iBAAKi+C,QAAL,CAAcx9B,KAAd,CAAoBxgB,GAApB,CAAwB3B,CAAxB,EAA2BC,CAA3B,EAA8ByB,CAA9B;AACH;;AAED;;;;;;;;0CAKkB1B,C,EAAGC,C,EAAGyB,C,EAAE;AACtB,iBAAK6I,IAAL,CAAU5C,QAAV,CAAmBhG,GAAnB,CAAuB3B,CAAvB,EAA0BC,CAA1B,EAA6ByB,CAA7B;AACA,iBAAKi+C,QAAL,CAAch4C,QAAd,CAAuBhG,GAAvB,CAA2B3B,CAA3B,EAA8BC,CAA9B,EAAiCyB,CAAjC;AACH;;AAED;;;;;;+BAGOohB,S,EAAU;AACb,iBAAK1a,KAAL,GAAa0a,UAAU1a,KAAvB;AACA,iBAAKmC,IAAL,CAAUD,QAAV,CAAmBjJ,KAAnB,GAA2ByhB,UAAUvY,IAAV,CAAeD,QAAf,CAAwBjJ,KAAnD;AACH;;;4BApDU;AAAE;AAAqB,S;0BACxBuB,K,EAAM;AACZ,yHAAcA,KAAd;AACA,iBAAKuf,KAAL,GAAavf,MAAMwE,UAAN,CAAiB6mB,IAA9B;AACH;;AAED;;;;0BACUrrB,K,EAAM;AACZ,yHAAcA,KAAd;;AAEA,gBAAG,KAAK28C,qBAAL,CAAH,EAAgCr1C,gBAAMkkB,eAAN,CAAsB,KAAKuxB,QAAL,CAAcr1C,QAApC,EAA8C,KAAKi1C,qBAAL,CAA9C;;AAEhC,gBAAG5hD,KAAKwvB,GAAL,CAAS,IAAIvqB,KAAb,IAAsB,KAAzB,EAA+B;AAC3B,oBAAG,KAAK28C,qBAAL,MAAgCzgD,SAAnC,EAA6C;AACzC,yBAAK6gD,QAAL,CAAcr1C,QAAd,GAAyB,KAAKq1C,QAAL,CAAcr1C,QAAd,CAAuB4T,KAAvB,EAAzB;AACA,yBAAKqhC,qBAAL,IAA8B,EAA9B;AACAr1C,oCAAMmkB,gBAAN,CAAuB,KAAKsxB,QAAL,CAAcr1C,QAArC,EAA+C1H,KAA/C,EAAsD,KAAK28C,qBAAL,CAAtD;AACH,iBAJD,MAKI;AACAr1C,oCAAMmkB,gBAAN,CAAuB,KAAKsxB,QAAL,CAAcr1C,QAArC,EAA+C1H,KAA/C;AACH;AACJ;AACJ,S;4BAEU;AAAE;AAAqB;;;;EApDL0e,sB;;kBAmFlB26B,kB;;;;;;;;;;;;;;;AC5Ff;;;;;;;;AAEA;;;;;;;;AAQA,SAAS4D,aAAT,CAAuBlqB,IAAvB,EAA6BmqB,UAA7B,EAAyCle,KAAzC,EAAgD/K,QAAhD,EAAyD,CAAE;;AAE3D;;;;AAIA,SAASkpB,sBAAT,CAAgCnhD,MAAhC,EAAuC,CAAE;;AAEzC,IAAIi/B,QAAQ,IAAIv8B,MAAMw8B,KAAV,EAAZ;;AAEA,SAASie,SAAT,GAAoB;AAChB,WAAO,IAAIwB,KAAJ,EAAP;AACH;AACD;AACA,SAASpB,WAAT,CAAqBgC,KAArB,EAA2B;AACvB,WAAOA,KAAP;AACH;AACD,IAAI5B,OAAO,IAAIviB,cAAJ,CAAS+hB,SAAT,EAAoBI,WAApB,CAAX;;AAEA,IAAMuB,YAAY;AACd;AACAsC,YAAQ,gBAAS9+C,CAAT,EAAYJ,CAAZ,EAAeK,CAAf,EAAkBC,CAAlB,EAAoB;AACxB,eAAON,IAAIK,KAAKD,IAAIE,CAAT,CAAX;AACH,KAJa;;AAMdu8C,UAAM;AACF;AACAsC,wBAAgB,wBAAS/+C,CAAT,EAAYJ,CAAZ,EAAeK,CAAf,EAAkBC,CAAlB,EAAqB;AACjC,gBAAI8+C,KAAG,CAACh/C,KAAGE,CAAJ,IAAOF,CAAd;AACA,gBAAIi/C,KAAGD,KAAGh/C,CAAV;AACA,mBAAOJ,IAAEK,KAAG,KAAGg/C,EAAH,GAAMD,EAAN,GAAW,CAAC,GAAD,GAAKA,EAAL,GAAQA,EAAnB,GAAwB,MAAIC,EAA5B,GAAiC,CAAC,EAAD,GAAID,EAArC,GAA0C,KAAGh/C,CAAhD,CAAT;AACH,SANC;;AAQF;AACA08C,qBAAa,qBAAU18C,CAAV,EAAaJ,CAAb,EAAgBK,CAAhB,EAAmBC,CAAnB,EAAsB;AAC/B,mBAAO,CAACD,CAAD,IAAKD,KAAGE,CAAR,KAAYF,IAAE,CAAd,IAAmBJ,CAA1B;AACH,SAXC;;AAaF;AACAs/C,sBAAc,sBAAUl/C,CAAV,EAAaJ,CAAb,EAAgBK,CAAhB,EAAmBC,CAAnB,EAAsB;AAChC,mBAAOD,KAAG,CAACD,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAV,GAAYA,CAAZ,GAAgB,CAAnB,IAAwBJ,CAA/B;AACH;AAhBC,KANQ;;AAyBdw9C,aAAS;AACL;AACAC,kBAAU,kBAAUr9C,CAAV,EAAaJ,CAAb,EAAgBK,CAAhB,EAAmBC,CAAnB,EAAsB;AAC5B,mBAAOzD,KAAKoD,GAAL,CAASG,IAAIE,CAAJ,GAAQzD,KAAKC,EAAtB,IAA4BuD,CAA5B,GAAgCL,CAAvC;AACH;AAJI;AAzBK,CAAlB;;AAiCA;;;;AAIA,SAASu/C,2BAAT,CAAqCzhD,MAArC,EAA4C,CAAE;;IAExC0hD,U;AACF;;;;AAIA,0BAAsB;AAAA;;AAAA,0CAAPC,MAAO;AAAPA,kBAAO;AAAA;;AAClB,aAAKA,MAAL,GAAcA,MAAd;;AAEA;AACA,aAAKxC,UAAL;AACA,aAAKyC,SAAL,GAAiB,KAAjB;AACH;;AAED;;;;;;;;6BAIKtiD,M,EAAsB;AAAA,+CAAXsJ,UAAW;AAAXA,0BAAW;AAAA;;AACvB,iBAAI,IAAIjH,IAAI,CAAZ,EAAeA,IAAI,KAAKggD,MAAL,CAAYlgD,MAA/B,EAAuCE,GAAvC,EAA2C;AACvC,qBAAKggD,MAAL,CAAYhgD,CAAZ,EAAeu9C,IAAf,CAAoB5/C,MAApB,EAA4BsJ,WAAWjH,CAAX,CAA5B;AACH;AACJ;;;iCAEO;AACJ,iBAAKggD,MAAL,CAAYvhD,OAAZ,CAAoB,iBAAS;AACzBm/C,sBAAMK,MAAN;AACH,aAFD;AAGH;;AAED;;;;;;;+BAIOt9C,C,EAAE;AACL,gBAAIs/C,YAAY,IAAhB;AACA,iBAAKD,MAAL,CAAYvhD,OAAZ,CAAoB,iBAAS;AACzB,oBAAGm/C,MAAMqC,SAAN,KAAoB,KAAvB,EACIrC,MAAMztC,MAAN,CAAaxP,CAAb;;AAEJs/C,4BAAYA,aAAarC,MAAMqC,SAA/B;AACH,aALD;;AAOA,iBAAKA,SAAL,GAAiBA,SAAjB;AACA,gBAAG,KAAKA,SAAL,IAAkB,KAAKzC,UAA1B,EACI,KAAKA,UAAL,CAAgB,IAAhB;AACP;;AAED;;;;;;iCAGQ;AACJ,iBAAKwC,MAAL,CAAYvhD,OAAZ,CAAoB,iBAAS;AACzBu9C,qBAAKkC,MAAL,CAAYN,KAAZ;AACH,aAFD;AAGH;;AAED;;;;;;;;;;;;;iCAUgBz9C,Q,EAAU+/C,W,EAAaC,W,EAAaC,W,EAAaC,M,EAAQC,M,EAAQC,M,EAAQjqB,Q,EAAS;AAC9F,gBAAIkqB,SAASxE,KAAKrkB,OAAL,EAAb;AACA6oB,mBAAO94C,KAAP,CAAavH,QAAb,EAAuB+/C,WAAvB,EAAoCG,MAApC,EAA4C/pB,QAA5C;;AAEA,gBAAImqB,SAASzE,KAAKrkB,OAAL,EAAb;AACA8oB,mBAAO/4C,KAAP,CAAavH,QAAb,EAAuBggD,WAAvB,EAAoCG,MAApC,EAA4ChqB,QAA5C;;AAEA,gBAAIoqB,SAAS1E,KAAKrkB,OAAL,EAAb;AACA+oB,mBAAOh5C,KAAP,CAAavH,QAAb,EAAuBigD,WAAvB,EAAoCG,MAApC,EAA4CjqB,QAA5C;;AAEA,gBAAIqqB,QAAQ,IAAIZ,UAAJ,CAAeS,MAAf,EAAuBC,MAAvB,EAA+BC,MAA/B,CAAZ;;AAEA,mBAAOC,KAAP;AACH;;;;;;IAGC3D,K;AACF;;;;;;AAMA,mBAAY78C,QAAZ,EAAsBo/C,UAAtB,EAAkCle,KAAlC,EAAyC/K,QAAzC,EAAkD;AAAA;;AAC9C,aAAK5uB,KAAL,CAAWvH,QAAX,EAAqBo/C,UAArB,EAAiCle,KAAjC,EAAwC/K,QAAxC;;AAEA;AACA,aAAKknB,UAAL;AACH;;AAED;;;;;;;;;;8BAMMr9C,Q,EAAUo/C,U,EAAYle,K,EAAO/K,Q,EAAS;AACxC,iBAAKn2B,QAAL,GAAgBA,QAAhB;AACA,iBAAKo/C,UAAL,GAAkBA,UAAlB;AACA,iBAAKle,KAAL,GAAaA,KAAb;AACA,iBAAK/K,QAAL,GAAgBA,QAAhB;;AAEA,gBAAG,KAAKipB,UAAL,KAAoBhhD,SAApB,IAAiC,KAAKZ,MAAtC,IAAgD,KAAKwP,QAAxD,EAAiE;AAC7D,qBAAKoyC,UAAL,GAAkB,KAAK5hD,MAAL,CAAY,KAAKwP,QAAjB,CAAlB;AACH;;AAED,iBAAKwJ,SAAL,GAAiB2mB,MAAMiD,cAAN,EAAjB;AACA,iBAAK0f,SAAL,GAAiB,KAAjB;AACH;;AAED;;;;;;;6BAIKtiD,M,EAAQwP,Q,EAAS;AAClB,iBAAKxP,MAAL,GAAcA,MAAd;AACA,iBAAKwP,QAAL,GAAgBA,QAAhB;;AAEA,gBAAG,KAAKoyC,UAAL,KAAoBhhD,SAAvB,EAAiC;AAC7B,qBAAKghD,UAAL,GAAkB,KAAK5hD,MAAL,CAAY,KAAKwP,QAAjB,CAAlB;AACH;AACJ;;;iCAEO;AACJ,iBAAKxP,MAAL,GAAc,KAAKwP,QAAL,GAAgB5O,SAA9B;AACH;;AAED;;;;;;;+BAIOoC,C,EAAE;AACL,gBAAGA,MAAMpC,SAAT,EAAoBoC,IAAI28B,MAAMiD,cAAN,KAAyB,KAAK5pB,SAAlC;;AAEpB,gBAAGhW,KAAK,KAAK21B,QAAb,EAAsB;AAClB,qBAAK2pB,SAAL,GAAiB,IAAjB;AACA,oBAAIW,WAAW,KAAKrB,UAAL,GAAkB,KAAKle,KAAtC;;AAEA,oBAAG,KAAK1jC,MAAR,EACI,KAAKA,MAAL,CAAY,KAAKwP,QAAjB,IAA6ByzC,QAA7B;;AAEJ,oBAAG,KAAKpD,UAAR,EACI,KAAKA,UAAL,CAAgB,IAAhB;;AAEJ,uBAAOoD,QAAP;AACH;;AAED,gBAAInhD,IAAI,KAAKU,QAAL,CAAcQ,CAAd,EAAiB,KAAK4+C,UAAtB,EAAkC,KAAKle,KAAvC,EAA8C,KAAK/K,QAAnD,CAAR;AACA,gBAAG,KAAK34B,MAAR,EACI,KAAKA,MAAL,CAAY,KAAKwP,QAAjB,IAA6B1N,CAA7B;;AAEJ,mBAAOA,CAAP;AACH;;;iCAEO;AACJu8C,iBAAKkC,MAAL,CAAY,IAAZ;AACH;;AAED;;;;;;;;;gCAMe/9C,Q,EAAUo/C,U,EAAYle,K,EAAO/K,Q,EAAS;AACjD,gBAAIsnB,QAAQ5B,KAAKrkB,OAAL,EAAZ;AACAimB,kBAAMl2C,KAAN,CAAYvH,QAAZ,EAAsBo/C,UAAtB,EAAkCle,KAAlC,EAAyC/K,QAAzC;;AAEA,mBAAOsnB,KAAP;AACH;;;4BAEqB;AAClB,mBAAOT,SAAP;AACH;;;;;;AAGLH,MAAMC,KAAN,GAAc8C,UAAd;;kBAEe/C,K","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0432ff935bcf7822849d","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nconst typeofObject = 'object';\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(typeof source[key] === typeofObject) Utils.AssignUndefined(target[key], source[key]);\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {SupportsStacking} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    set weight(value){ return super.weight; }\r\n    get weight(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && SupportsStacking.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nclass Signaler {\r\n    constructor(){\r\n        /** @type {Array<SignalerCallback>} */\r\n        this.signals = {};\r\n        /** @type {Array<string>} */\r\n        this.dispatches = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    OnIncludingPrior(event, callback){\r\n        var args = this.dispatches[event];\r\n        if(args){\r\n            callback(...args);\r\n        }\r\n        else{\r\n            this.On(event, callback);\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this.dispatches[event] = args;\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import ColorTemplate from \"./ColorTemplate\";\r\n\r\nconst SolidMaterialType = THREE.MeshStandardMaterial;\r\nconst TransparentMaterialType = THREE.MeshStandardMaterial;\r\nconst InvisibleMaterialType = THREE.MeshBasicMaterial;\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new SolidMaterialType({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nconst castShadow = true;\r\nconst receiveShadow = true;\r\n\r\n/** @type {Map<string, ColorTemplate>} */\r\nvar colorTemplates = new Map();\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * @param {Number} color hex\r\n     */\r\n    static CreateSolidMaterialMatte(color){\r\n        return new Asset.SolidMaterialType({color: color, roughness: 1, metalness: .2});\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    static RestoreMaterial(material, modified){\r\n        if(modified === undefined) return;\r\n\r\n        let keys = Object.keys(modified);\r\n        for(let i = 0; i < keys.length; i++){\r\n            let key = keys[i];\r\n            if(material[key] !== undefined){\r\n                if(material[key].setHex){\r\n                    /** @type {THREE.Color} */\r\n                    let color = material.color;\r\n                    color.setHex(modified[key]);\r\n                }\r\n                else{\r\n                    material[key] = modified[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static SetMaterialFocus(material, value, modified){\r\n\r\n        /** @type {THREE.Color} */\r\n        let color = material.color;\r\n        if(color !== undefined){\r\n            if(modified) modified.color = color.getHex();\r\n\r\n            let reduce = (value - 1) / 4;\r\n            color.r = THREE.Math.clamp(color.r - reduce, 0, 1);\r\n            color.g = THREE.Math.clamp(color.g - reduce, 0, 1);\r\n            color.b = THREE.Math.clamp(color.b - reduce, 0, 1);\r\n        }\r\n\r\n        /** @type {Number} */\r\n        let opacity = material.opacity;\r\n        if(opacity !== undefined){\r\n            if(modified){\r\n                modified.opacity = opacity;\r\n                modified.transparent = material.transparent;\r\n            }\r\n\r\n            material.opacity = THREE.Math.clamp(material.opacity * value, 0, 1);;\r\n            material.transparent = material.opacity < 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @param {THREE.Object3D} texturePath \r\n     */\r\n    static FromJSON(json, texturePath){\r\n        return objectLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object */\r\n    static StandardSceneObject(object){\r\n        Asset.CastReceiveShadow(object);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastReceiveShadow(object, value){\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value === undefined ? castShadow : value;\r\n                child.receiveShadow = value === undefined ? receiveShadow : value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static ReceiveShadow(object, value){\r\n        if(value === undefined) value = receiveShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.receiveShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /** @param {THREE.Object3D} object @param {Boolean} [value] */\r\n    static CastShadow(object, value){\r\n        if(value === undefined) value = castShadow;\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    static CreateColorTemplate(key, ...colors){\r\n        var template = new ColorTemplate(...colors);\r\n        colorTemplates.set(key, template);\r\n    }\r\n\r\n    /**\r\n     * @param {string} key \r\n     */\r\n    static ColorTemplates(key){\r\n        return colorTemplates.get(key);\r\n    }\r\n\r\n}\r\n\r\nAsset.SolidMaterialType = SolidMaterialType;\r\nAsset.TransparentMaterialType = TransparentMaterialType;\r\nAsset.InvisibleMaterialType = InvisibleMaterialType;\r\n\r\nAsset.CreateColorTemplate('Containers', 0x020202, 0x7f7f7f, 0xffffff);\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nvar combinedVolume = new ContainingVolume();\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'weight, label not implemented');\r\n    }\r\n\r\n    /** @param {ContainingVolume} volume */\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    get combinedVolume(){\r\n        let minX = Number.MAX_SAFE_INTEGER,\r\n            minY = Number.MAX_SAFE_INTEGER,\r\n            minZ = Number.MAX_SAFE_INTEGER;\r\n\r\n        let maxX = Number.MIN_SAFE_INTEGER,\r\n            maxY = Number.MIN_SAFE_INTEGER,\r\n            maxZ = Number.MIN_SAFE_INTEGER;\r\n\r\n        this.volumes.forEach(volume => {\r\n            let pos = volume.position;\r\n            let dim = volume.dimensions;\r\n            if(pos.x < minX) minX = pos.x;\r\n            if(pos.y < minY) minY = pos.y;\r\n            if(pos.z < minZ) minZ = pos.z;\r\n            if(pos.x + dim.width > maxX) maxX = pos.x + dim.width;\r\n            if(pos.y + dim.height > maxY) maxY = pos.y + dim.height;\r\n            if(pos.z + dim.length > maxZ) maxZ = pos.z + dim.length;\r\n        });\r\n\r\n        combinedVolume.container = this;\r\n        combinedVolume.dimensions.Set(maxX - minX, maxZ - minZ, maxY - minY);\r\n        combinedVolume.position.set((maxX + minX) / 2, (maxZ + minZ) / 2, (maxY + minY) / 2);\r\n        \r\n        return combinedVolume;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) throw('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            containingVolume.container = container;\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","\r\n/** SignalerCallback \r\n * @callback SignalerCallback\r\n * @param {Array<*>} args\r\n */\r\n\r\nconst _signals = Symbol('signals');\r\nconst _dispatches = Symbol('dispatches');\r\n\r\nclass LightDispatcher {\r\n    constructor(){\r\n        this[_signals] = {};\r\n        this[_dispatches] = {};\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    On(event, callback){\r\n        if(this[_signals][event] === undefined){\r\n            this[_signals][event] = [];\r\n        }\r\n        this[_signals][event].push(callback);\r\n    }\r\n\r\n    /** @param {string} event @param {SignalerCallback} callback */\r\n    Off(event, callback){\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {string} event @param {Array<*>} [args] */\r\n    Dispatch(event, ...args){\r\n        this[_dispatches][event] = args;\r\n        var callbacks = this[_signals][event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default LightDispatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/LightDispatcher.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _weight = Symbol('weight');\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n        this[_weight] = 0;\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /** @returns {Number} */\r\n    get weight(){ return this[_weight]; }\r\n    set weight(value){ this[_weight] = value; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import Utils from \"../Utils\";\r\n\r\nconst serializeModes = {\r\n    none: 'none',\r\n    json: 'json'\r\n};\r\n\r\n/**\r\n * @typedef ConfigParams\r\n * @property {Boolean} debug\r\n * @property {Boolean} save\r\n * @property {serializeModes} serializeMode\r\n */\r\n\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    var propertyPath = key;\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0],\r\n        propertyPath: propertyPath\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    var endKey = key.shift();\r\n    if(obj[endKey].setHex){\r\n        obj[endKey].setHex(val);\r\n    }\r\n    else{\r\n        obj[endKey] = val;\r\n    }\r\n    return obj[endKey];\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\n/** \r\n * @typedef GUI\r\n * @property {HTMLElement} domElement\r\n */\r\n\r\nclass Shortcut{\r\n    /**\r\n     * @param {string} label \r\n     */\r\n    constructor(label){\r\n        this.label = label;\r\n\r\n        ///** @type {Map<string, GUI>} */\r\n        //this.folders = new Map();\r\n\r\n        this.controller = {};\r\n    }\r\n\r\n    Add(label, target){\r\n        label = label.replace(new RegExp(' ', 'g'), '_');\r\n        this.controller[label] = target;\r\n        Config.shortcutsGUI.add(this.controller, label);\r\n        console.log('added ' + label + ' shortcut to ' + this.label);\r\n    }\r\n}\r\n\r\n/** @type {GUI} */\r\nvar shortcutsGUI;\r\n\r\n/** @type {Map<string, Shortcut>} */\r\nvar shortcuts = new Map();\r\n\r\n/** @type {Map<Object, Config>} */\r\nvar instances = new Map();\r\n\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = instances;\r\n        instances.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Serialize(){\r\n        var data = {};\r\n        this.keys.forEach(key => {\r\n            let isController = key instanceof Controller;\r\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\r\n            let keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\r\n                data[keyInfo.propertyPath] = saveValue;\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Function} guiChanged \r\n     * @param {string} label \r\n     * @param {string} gui - or a dat.GUI object\r\n     * @param {ConfigParams} params \r\n     */\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            },\r\n\r\n            Serialize: function(){\r\n                if(scope.Update){\r\n                    scope.Update();\r\n                    var data = scope.Serialize();\r\n                    var json = JSON.stringify(data);\r\n                    console.log(data, json);\r\n                }\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        switch(params.serializeMode){\r\n            default: break;\r\n            case serializeModes.json:\r\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n                if(this.editing['editor.Serialize'] !== true){\r\n                    this.defaultsFolder.add(editor, 'Serialize');\r\n                    this.editing['editor.Serialize'] = true;\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    static get shortcuts(){\r\n        return shortcuts;\r\n    }\r\n\r\n    static get shortcutsGUI(){\r\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n            autoPlace: false\r\n        });\r\n        return shortcutsGUI;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} property - #property marks a folder\r\n     * @param {Array<string>} subProperties \r\n     * @returns returns the subProperties full paths\r\n     */\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    /**\r\n     * @param {*} target \r\n     * @param {*} data \r\n     */\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n\r\n        if(instances.has(target) && instances.get(target).Update)\r\n            instances.get(target).Update();\r\n    }\r\n\r\n    /**\r\n     * @param {string} category\r\n     * @param {string} label \r\n     * @param {Function} target \r\n     */\r\n    static MakeShortcut(category, label, target){\r\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\r\n        var shortcut = shortcuts.get(category);\r\n        shortcut.Add(label, target);\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer, { PackerParams } from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\nimport Signaler from './utils/cik/Signaler';\r\nimport PackerInterface, { SolverParams } from './components/PackerInterface';\r\nimport BoxEntry from './components/box/BoxEntry';\r\nimport Container from './packer/container/Container';\r\n\r\nconst signals = {\r\n    start: 'start'\r\n};\r\n\r\n/**\r\n * @typedef AppParams\r\n * @property {UX} ux\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n * @property {PackerInterface} packerInterface\r\n */\r\n\r\nclass App extends Signaler{\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {AppParams} params\r\n     */\r\n    constructor(containerDiv, params) {\r\n\r\n        super();\r\n\r\n        let scope = this;\r\n\r\n        this.ux = params.ux;\r\n        this.cargoInput = params.cargoInput;\r\n        this.packingSpaceInput = params.packingSpaceInput;\r\n        this.packerInterface = params.packerInterface;\r\n\r\n        /** @type {PackerParams} */\r\n        let packerParams = {ux: this.ux};\r\n        this.packer = new Packer(packerParams);\r\n        \r\n        this.cargoInput.On(CargoInput.signals.insert, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Add(boxEntry);\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.modify, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Modify(boxEntry);\r\n                scope.SolveAgain();\r\n            });\r\n\r\n        this.cargoInput.On(CargoInput.signals.remove, \r\n            /** @param {BoxEntry} boxEntry */\r\n            function(boxEntry){\r\n                scope.packer.cargoList.Remove(boxEntry.uid);\r\n                scope.SolveAgain();\r\n            });\r\n        \r\n        this.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, \r\n            /** @param {Container} container */\r\n            function(container){\r\n                scope.packer.packingSpace.AddContainer(container);\r\n            });\r\n\r\n        this.packerInterface.On(PackerInterface.signals.solveRequest, \r\n            /** @param {SolverParams} solverParams */\r\n            function(solverParams){\r\n                scope.Solve(solverParams);\r\n            });\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n\r\n    Start(){\r\n        let scope = this;\r\n        let packerInterface = this.packerInterface;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        let viewParams = { ux: this.ux };\r\n        this.view = new View(this.packer, this.sceneSetup, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.ux._Bind(this);\r\n        this.cargoInput._Bind(this);\r\n        this.packingSpaceInput._Bind(this);\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            Logger.Log('Packing result:', packingResult);\r\n            packerInterface._Notify(PackerInterface.signals.solved, packingResult);\r\n        }\r\n        this.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        /** @param {*} error */\r\n        function onPackFailed(error){\r\n            packerInterface._Notify(PackerInterface.signals.failed, error);\r\n        }\r\n        this.packer.On(Packer.signals.packFailed, onPackFailed);\r\n\r\n        this.Dispatch(signals.start);\r\n    }\r\n\r\n    SolveAgain(){\r\n        if(this.ux.params.autoUpdatePack && this.packer.solveAgain) this.Solve();\r\n    }\r\n\r\n    /** @param {SolverParams} [solverParams] */\r\n    Solve(solverParams){\r\n        this.view.ClearPackingResults();\r\n        this.packer.Solve(solverParams);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 11\n// module chunks = 0","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"./container/ContainingVolume\";\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @typedef SolverParams\r\n * @property {*} algorithmParams\r\n * @property {string} algorithm\r\n */\r\n\r\nclass PackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {ContainingVolume} containingVolume \r\n     * @param {THREE.Vector3} position \r\n     * @param {Number} orientation \r\n     */\r\n    constructor(entry, containingVolume, position, orientation){\r\n        this.entry = entry;\r\n        this.containingVolume = containingVolume;\r\n        this.position = position;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nclass UnpackedCargo {\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {Number} unpackedQuantity\r\n     */\r\n    constructor(entry, unpackedQuantity){\r\n        this.entry = entry;\r\n        this.unpackedQuantity = unpackedQuantity;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    /** @param {Number} numTotalItem @param {Number} runtime */\r\n    constructor(numTotalItems, runtime){\r\n        /** @type {Array<PackedCargo>} */\r\n        this.packed = [];\r\n\r\n        /** @type {Array<UnpackedCargo>} */\r\n        this.unpacked = [];\r\n\r\n        this.numTotalItems = numTotalItems || 0;\r\n\r\n        this.runtime = runtime || -1;\r\n    }\r\n}\r\n\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate',\r\n    packFailed: 'packFailed'\r\n};\r\n\r\nconst _solverParams = Symbol('solverParams');\r\n\r\nclass Packer extends Signaler {\r\n    /**\r\n     * @param {PackerParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n\r\n        this.solverExecutionsCount = 0;\r\n    }\r\n\r\n    /** @param {SolverParams} params */\r\n    Solve(params){\r\n        params = params || this[_solverParams];\r\n        this[_solverParams] = params;\r\n\r\n        this.solverExecutionsCount++;\r\n\r\n        let algorithm = params.algorithm;\r\n        let algorithmParams = params.algorithmParams;\r\n        if(algorithm === 'cub')\r\n            this.SolveCUB(algorithmParams);\r\n    }\r\n\r\n    /** @param {import('../packer/cub/CUB').CUBParams} params */\r\n    async SolveCUB(params){\r\n\r\n        if(this.packingSpace.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Packing space not ready');\r\n            return;\r\n        }\r\n\r\n        if(this.cargoList.ready === false){\r\n            this.Dispatch(signals.packFailed, 'Cargo list not ready');\r\n            return;\r\n        }\r\n\r\n        const Container = require('./cub/Components').Container;\r\n        const Item = require('./cub/Components').Item;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n\r\n        var numTotalItems = 0;\r\n\r\n         /** @type {Array<Item>} */\r\n         var items = [];\r\n         var entries = {};\r\n         for(let group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight, entry.quantity);\r\n            items.push(item);\r\n            numTotalItems += entry.quantity;\r\n        }\r\n \r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        const CUB = require('./cub/CUB');\r\n        var startTime = performance.now();\r\n        var result = await CUB.pack(container, items, params);\r\n        var cubRuntime = performance.now() - startTime;\r\n\r\n        var cubRuntime2Dec = Math.round(cubRuntime / 1000 * 100) / 100;\r\n        var packingResult = new PackingResult(numTotalItems, cubRuntime2Dec);\r\n        result.packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.ref.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.x + packedItem.packedWidth / 2,\r\n                packedItem.y + packedItem.packedHeight / 2,\r\n                packedItem.z + packedItem.packedLength / 2\r\n            );\r\n            let orientation = Item.ResolveOrientation(packedItem.orientation);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n\r\n        result.unpackedItems.forEach(unpackedItem => {\r\n            let entry = entries[unpackedItem.id];\r\n            let unpackedQuantity = unpackedItem.quantity;\r\n            let unpackedCargo = new UnpackedCargo(entry, unpackedQuantity);\r\n            packingResult.unpacked.push(unpackedCargo);\r\n        });\r\n\r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    get solveAgain(){\r\n        return this.solverExecutionsCount > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nPacker.PackingResult = PackingResult;\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\r\nimport Container from \"./Container\";\r\n\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    /** @param {Container} container */\r\n    constructor(container){\r\n        super();\r\n        \r\n        this.container = container;\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    get weightCapacity(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nconst signals = {\r\n    init: 'init',\r\n    started: 'started',\r\n    paused: 'paused',\r\n    stopped: 'stopped'\r\n};\r\n\r\nclass SceneSetup extends Signaler {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        /** @type {import('../scene/Renderer').RendererParams} */\r\n        var rendererParams = {clearColor: 0xefefef};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.sceneRenderer.renderer.toneMappingExposure = 1.6;\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: 30, aspect: 1, near: 1 * units, far: 3000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            gridHelper: true,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 100 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        var scope = this;\r\n        return new Promise((resolve, reject) => {\r\n            scope.Dispatch(signals.init);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.cameraController.Update();\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n\r\n        this.Dispatch(signals.started);\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n\r\n        this.Dispatch(signals.paused);\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n\r\n        this.Dispatch(signals.stopped);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    DefaultLights(controller, configure, helpers){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(300 * units, 300 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(ambientLight);\r\n        controller.ambientContainer.add(directionalLight);\r\n\r\n        var directionalLightComplem = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLightComplem.position.set(-200 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(directionalLightComplem);\r\n\r\n        if(this.ux.params.configure && configure){\r\n            let Smart = require('../utils/cik/config/Smart').default;\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            let Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n            let dl = directionalLight;\r\n            let smart = new Smart(dl, 'Directional light');\r\n            smart.MakeShortcut('Configure');\r\n            \r\n            let lightController = ['color', 'intensity', 'castShadow'];\r\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\r\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\r\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\r\n\r\n            let dlHelper, dlCameraHelper;\r\n            if(helpers){\r\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\r\n                this.sceneController.AddDefault(dlHelper);\r\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\r\n                this.sceneController.AddDefault(dlCameraHelper);\r\n            }\r\n\r\n            let sceneRenderer = this.sceneRenderer;\r\n            global.sceneRenderer = sceneRenderer;\r\n            let mapSize = dl.shadow.mapSize.clone();\r\n            function onGUIChanged(){\r\n                dl.shadow.camera.updateProjectionMatrix();\r\n                sceneRenderer.UpdateShadowMaps();\r\n                if(dl.shadow.map){\r\n                    if(dl.shadow.mapSize.manhattanDistanceTo(mapSize) > 0.0001){\r\n                        mapSize.copy(dl.shadow.mapSize);\r\n                        dl.shadow.map.dispose();\r\n                        dl.shadow.map = null;\r\n                    }\r\n                }\r\n\r\n                if(helpers){\r\n                    dlHelper.update();\r\n                    dlCameraHelper.update();\r\n                }\r\n            }\r\n\r\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\r\n                ...lightController,\r\n                ...shadowControllers,\r\n                ...shadowCameraControllers\r\n            );\r\n        }\r\n\r\n        return [ambientLight, directionalLight, directionalLightComplem];\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            function onGUIChanged(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            smart.MakeShortcut('Configure');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","import Utils from \"./utils/cik/Utils\";\r\nimport Visualization from \"./components/Visualization\";\r\nimport User from \"./components/User\";\r\nimport App from \"./App\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud default = true, create a hud controller (Scene, camera, loop, etc.)\r\n * @property {Boolean} configure default = false, execute helpers that allow configuration\r\n * @property {Number} units default = 1, conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n * @property {Boolean} autoUpdatePack default = true, will auto-update the packing if entries are modified or deleted\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1,\r\n    autoUpdatePack: true\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    \r\n        /** Interface with visual elements */\r\n\t\tthis.visualization = new Visualization(app);\r\n\r\n\t\t/** Interface with user input/output */\r\n        this.user = new User(app);\r\n    }\r\n\r\n}\r\n\r\nUX.User = User;\r\nUX.Visualization = Visualization;\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport FloatingShelf from \"./components/FloatingShelf\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\nimport RaycastGroup, { RaycastCallback } from \"../utils/cik/input/RaycastGroup\";\r\nimport Outline from \"./components/Outline\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} outlineOffset\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nconst typeofString = 'string';\r\n\r\nconst _selectedEntryUID = Symbol('seUID');\r\n\r\n/** @type {Map<CargoView, TextLabelView>} */\r\nvar labels = new Map();\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort',\r\n    select: 'select',\r\n    deselect: 'deselect',\r\n    interact: 'interact'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {\r\n    outlineOffset: 4\r\n};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.templatesView = new THREE.Object3D();\r\n        this.view.add(this.templatesView);\r\n\r\n        /**\r\n         * @type {Map<CargoGroup, CargoView>}\r\n         */\r\n        this.cargoTemplateViews = new Map();\r\n\r\n        let units = this.params.ux.params.units;\r\n\r\n        // Shelf\r\n        /** @type {import('./components/FloatingShelf').FloatingShelfParams} */\r\n        let fsParams = {padding: new THREE.Vector3(10 * units, (this.params.outlineOffset * units + 1) * units, 10 * units), colorHex: Asset.ColorTemplates('Containers').Apply(0x000000)};\r\n        this.floatingShelf = new FloatingShelf(this.templatesView, fsParams);\r\n        this.view.add(this.floatingShelf.view);\r\n\r\n        // Interaction\r\n        this.raycastGroupItems = [];\r\n        this.raycastGroup = new RaycastGroup(this.raycastGroupItems, this.OnInteract.bind(this), \r\n            /** @param {CargoView} item */\r\n            function(item){\r\n                return item.view;\r\n            },\r\n            false,\r\n            true);\r\n\r\n        this.outline = new Outline({color: 0xffffff, opacity: 1, offsetFactor: this.params.outlineOffset * units});\r\n        this.view.add(this.outline.view);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        let units = this.params.ux.params.units;\r\n\r\n        let templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n\r\n                let ticketParams = { width: 50 * units, height: 20 * units };\r\n\r\n                const height = 96;\r\n                let width = Math.floor( ticketParams.width / ticketParams.height * height );\r\n                /** @type {import('./TextLabelView').TLVParams} */\r\n                let tlvParams = { font: '64px sans-serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                    textAlign: 'left', sidePadding: 30, width: width, height: height\r\n                };\r\n\r\n                let labelView = new TextLabelView(tlvParams);\r\n                labelView.view.rotateY( 90 * Math.PI / 180 );\r\n                labelView.view.rotateX( -90 * Math.PI / 180 );\r\n                labelView.view.scale.y = ticketParams.height;\r\n                labelView.view.scale.x = ticketParams.width;\r\n                /** @type {BoxEntry} */\r\n                let boxEntry = group.entry;\r\n                labelView.view.position.z = ticketParams.width / 2;\r\n                this.view.add(labelView.view);\r\n\r\n                labelView.UpdateText(boxEntry.quantity);\r\n\r\n                labels.set(templateCargoView, labelView);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.raycastGroupItems.push(templateCargoView);\r\n        this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Update(group){\r\n        let templateCargoView = this.cargoTemplateViews.get(group);\r\n        templateCargoView.ReflectEntry();\r\n\r\n        this.Sort();\r\n        this.floatingShelf.Update();\r\n\r\n        if(this[_selectedEntryUID] === group.entry.uid) this.SetOutline(templateCargoView);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n\r\n            let raycastGroupIndex = this.raycastGroupItems.indexOf(templateCargoView);\r\n            if(raycastGroupIndex !== -1) this.raycastGroupItems.splice(raycastGroupIndex, 1);\r\n            this.raycastGroup.UpdateItems(this.raycastGroupItems);\r\n\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            if(this[_selectedEntryUID] === group.entry.uid) this.outline.box = false;\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * RaycastCallback\r\n     * @param {CargoView} cargoView\r\n     * @param {THREE.Intersection} intersection\r\n     */\r\n    OnInteract(cargoView, intersection){\r\n        this.Dispatch(signals.interact, cargoView.entry);\r\n    }\r\n\r\n    /** @param {CargoView} cargoView */\r\n    Select(entryUID){\r\n\r\n        this[_selectedEntryUID] = entryUID;\r\n\r\n        if(!entryUID){\r\n            this.outline.box = false;\r\n            this.Dispatch(signals.deselect);\r\n        }\r\n        else{\r\n            let cargoView = this.GetTemplate(entryUID);\r\n            this.SetOutline(cargoView);\r\n            this.Dispatch(signals.select, cargoView.entry);\r\n        }\r\n    }\r\n\r\n    /** @param {CargoView} target */\r\n    SetOutline(target){\r\n        this.outline.box = target instanceof CargoBoxView ? target.mesh : target.view;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoView} cargoView \r\n     * @param {string} value \r\n     * @param {string} textColor css\r\n     */\r\n    UpdateLabel(cargoView, value, textColor){\r\n        let textLabelView = labels.get(cargoView);\r\n        if(textLabelView){\r\n            if(textColor) textLabelView.params.fontColor = textColor;\r\n            textLabelView.UpdateText(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.view.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 5 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(start, 0, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.x / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(start + offset, tempVec.y / 2 + padding, -tempVec.z / 2);\r\n\r\n            let labelView = labels.get(cargoView.value);\r\n            labelView.view.position.x = cargoView.value.position.x;\r\n            labelView.view.position.y = padding + 1 * units;\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport TextLabelView from \"./components/TextLabelView\";\r\n\r\n/**\r\n * @typedef CargoViewLabelParams\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new Asset.TransparentMaterialType({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\nconst _focus = Symbol('focus');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /** @type {THREE.Mesh} */\r\n        this.mesh;\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this[_focus] = 1;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        this[_focus] = value;\r\n    }\r\n\r\n    get focus(){ return this[_focus]; }\r\n\r\n    ReflectEntry(){\r\n        \r\n    }\r\n\r\n    /** @param {string} value @param {CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        const height = 64;\r\n        let width = Math.floor( params.width / params.height * height );\r\n        if(this.labelView === undefined){\r\n            /** @type {import('./TextLabelView').TLVParams} */\r\n            let tlvParams = { font: '32px sans serif', backColor: 'rgb(0, 0, 0)', fontColor: 'rgb(255, 255, 255)', \r\n                textAlign: 'right', sidePadding: 16, width: width, height: height\r\n            };\r\n            let ratioToX = 64\r\n\r\n            this.labelView = new TextLabelView(tlvParams);\r\n            this.labelView.view.rotateY( 90 * Math.PI / 180 );\r\n            this.labelView.view.rotateX( -90 * Math.PI / 180 );\r\n            this.view.add(this.labelView.view);\r\n        }\r\n\r\n        this.labelView.UpdateText(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        /** @type {Number} */\r\n        this.width = width;\r\n        /** @type {Number} */\r\n        this.length = length;\r\n        /** @type {Number} */\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height);\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n\r\n        /** @type {Array<Cargo>} */\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\nconst serializeModes = Config.serializeModes;\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\nclass Smart {\r\n    /**\r\n     * @param {*} target \r\n     * @param {string} label \r\n     */\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.visible = false;\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.visible = true;\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {string} folderName \r\n     * @param {*} target \r\n     * @param {Function} guiChanged \r\n     * @param {serializeModes} serializeMode\r\n     * @param {Array<string|Config.Controller>} args \r\n     */\r\n    Config(folderName, target, guiChanged, serializeMode, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     */\r\n    MakeShortcut(category){\r\n        Smart.MakeShortcut(category, this);\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Smart} target \r\n     */\r\n    static MakeShortcut(category, target){\r\n        Config.MakeShortcut(category, target.label, function(){\r\n            if(target.visible){\r\n                target.Hide();\r\n            }\r\n            else{\r\n                target.Show();\r\n            }\r\n        });\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved',\r\n    groupModified: 'groupModified'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Modify(entry){\r\n        var group = this.groups.get(entry.uid);\r\n        this.Dispatch(signals.groupModified, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\r\n    GetEntry(entryUID){\r\n        if(this.groups.has(entryUID)) return this.groups.get(entryUID).entry;\r\n    }\r\n\r\n    get ready(){\r\n        return this.groups.size > 0;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    /** @param {Container} container */\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /** @returns {Container} */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex !== -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    get ready(){\r\n        return this[_currentIndex] !== -1;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","\r\nconst typeofNumber = 'number';\r\n\r\nconst _maxHeight = Symbol('maxHeight');\r\nconst _validOrientations = Symbol('validOrientations');\r\n\r\nconst orientations = [ 'xyz', 'zyx', 'yxz', 'yzx', 'zxy', 'xzy' ];\r\nvar dimensions = [0, 0, 0];\r\n\r\nclass Item{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weight \r\n     * @param {Number} quantity \r\n     * @param {Array<Number|string>} validOrientations\r\n     */\r\n    constructor(id, width, height, length, weight, quantity, validOrientations){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weight = weight;\r\n        /** @type {Number} */\r\n        this.volume = width * height * length;\r\n        this.quantity = quantity;\r\n\r\n        this.validOrientations = validOrientations;\r\n    }\r\n\r\n    /** @returns {Array<Number>} */\r\n    get validOrientations(){ return this[_validOrientations]; }\r\n    set validOrientations(value){\r\n        if(value === undefined) value = orientations;\r\n\r\n        let validOrientations = [];\r\n        for(let i = 0; i < value.length; i++){\r\n            let vo = value[i];\r\n            let orientation = (typeof vo === typeofNumber) ? vo : orientations.indexOf(vo.toLowerCase());\r\n            if(orientation !== -1) validOrientations.push(orientation);\r\n        }\r\n\r\n        this[_validOrientations] = validOrientations;\r\n        this[_maxHeight] = undefined;\r\n    }\r\n\r\n    get xyz(){ dimensions[0] = this.width; dimensions[1] = this.height; dimensions[2] = this.length; return dimensions; }\r\n    get zyx(){ dimensions[0] = this.length; dimensions[1] = this.height; dimensions[2] = this.width; return dimensions; }\r\n    get yxz(){ dimensions[0] = this.height; dimensions[1] = this.width; dimensions[2] = this.length; return dimensions; }\r\n    get yzx(){ dimensions[0] = this.height; dimensions[1] = this.length; dimensions[2] = this.width; return dimensions; }\r\n    get zxy(){ dimensions[0] = this.length; dimensions[1] = this.width; dimensions[2] = this.height; return dimensions; }\r\n    get xzy(){ dimensions[0] = this.width; dimensions[1] = this.length; dimensions[2] = this.height; return dimensions; }\r\n\r\n    /** @returns {Number} */\r\n    get maxHeight(){\r\n        if(this[_maxHeight] === undefined){\r\n            let maxHeight = 0;\r\n            for(let i = 0; i < this.validOrientations.length; i++){\r\n                let dimensions = this.GetOrientedDimensions(this.validOrientations[i]);\r\n                if(dimensions[1] > maxHeight) maxHeight = dimensions[1];\r\n            }\r\n            this[_maxHeight] = maxHeight;\r\n        }\r\n        \r\n        return this[_maxHeight];\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    GetOrientedDimensions(orientation){\r\n        switch(orientation){\r\n            case 0: return this.xyz;\r\n            case 1: return this.zyx;\r\n            case 2: return this.yxz;\r\n            case 3: return this.yzx;\r\n            case 4: return this.zxy;\r\n            case 5: return this.xzy;\r\n        }\r\n    }\r\n\r\n    /** @param {Number} orientation */\r\n    static ResolveOrientation(orientation){\r\n        return orientations[orientation];\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static VolumeSort(a, b){\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Item} a \r\n     * @param {Item} b \r\n     */\r\n    static HeightSort(a, b){\r\n        if(a.maxHeight < b.maxHeight) return -1;\r\n        if(a.maxHeight > b.maxHeight) return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass Container{\r\n    /**\r\n     * @param {string} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     * @param {Number} weightCapacity \r\n     */\r\n    constructor(id, width, height, length, weightCapacity){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length;\r\n        this.weightCapacity = weightCapacity;\r\n    }\r\n}\r\n\r\nexport {\r\n    Item,\r\n    Container\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/Components.js","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\n/**\r\n * RaycastCallback\r\n * \r\n * @callback RaycastCallback\r\n * @param {Object} obj\r\n * @param {THREE.Intersection} intersection\r\n */\r\n\r\n /**\r\n  * Mapping function\r\n  * \r\n  * @callback RaycastMapping\r\n  * @param {Object} obj\r\n  */\r\n\r\nclass RaycastGroup {\r\n\r\n    /**\r\n     * \r\n     * @param {Array<THREE.Object3D>} items \r\n     * @param {RaycastCallback} callback \r\n     * @param {RaycastMapping} collectionQuery \r\n     * @param {Boolean} updateProperty \r\n     * @param {Boolean} recursive \r\n     */\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive){\r\n        /**\r\n         * @type {Boolean}\r\n         */\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    UpdateRaycastItems(){\r\n        this.raycastItems.length = 0;\r\n        for(var i = 0; i < this.items.length; i++){\r\n            let raycastItem = this.collectionQuery(this.items[i]);\r\n            if(raycastItem) this.raycastItems.push(raycastItem);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        \r\n        if(this.updateProperty){\r\n            UpdateRaycastItems();\r\n        }\r\n        \r\n        var raycastItems = this.raycastItems;\r\n        \r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            if(this.collectionQuery){\r\n                var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n                if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n            }\r\n            else{\r\n                this.callback(intersects[0].object, intersects[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nvar tempVec3 = new THREE.Vector3(),\r\n    tempVec3_b = new THREE.Vector3();\r\n\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\nclass Camera {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target.copy(lookTarget);\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.saveState();\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.reset();\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.enabled && this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(!this.enabled && this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    Frame(box3, distanceMultiplier){\r\n        if(distanceMultiplier === undefined) distanceMultiplier = .75;\r\n\r\n        var fov = this.camera.fov * (Math.PI / 180);\r\n\r\n        var extent = tempVec3;\r\n        box3.getSize(extent);\r\n        var frameSize = Math.max(extent.x, extent.y, extent.z);\r\n        var distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\r\n        \r\n        var center = tempVec3_b;\r\n        box3.getCenter(center);\r\n        \r\n        var position = tempVec3;\r\n        position.subVectors(this.camera.position, center).normalize().multiplyScalar(distance).add(center);\r\n        position.y = Math.abs(position.y);\r\n\r\n        this.camera.position.copy(position);\r\n        this.SetTarget(center);\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls.enabled;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new Asset.SolidMaterialType({roughness: 1, metalness: 0, flatShading: true});\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\nfunction nextColor(){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nconst _materialSettings = Symbol('matSet');\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n        material.color = nextColor();\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_materialSettings]) Asset.RestoreMaterial(this.mesh.material, this[_materialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_materialSettings] === undefined){\r\n                this.mesh.material = this.mesh.material.clone();\r\n                this[_materialSettings] = {};\r\n                Asset.SetMaterialFocus(this.mesh.material, value, this[_materialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.mesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n    }\r\n\r\n    ReflectEntry(){\r\n        this.entry = this.entry;\r\n    }\r\n\r\n    /** \r\n     * @param {string} value \r\n     * @param {import('./CargoView').CargoViewLabelParams} params */\r\n    SetLabel(value, params){\r\n        super.SetLabel(value, params);\r\n\r\n        this.labelView.view.scale.y = params.height;\r\n        this.labelView.view.scale.x = params.width;\r\n        this.labelView.view.position.z = params.width / 2 + this.entry.dimensions.length / 2;\r\n        this.labelView.view.position.y = .001;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Signaler from \"../../utils/cik/Signaler\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\nvar tlWatchTimer, tlWatchEntries;\r\nfunction tlWatchUpdater(){\r\n    for(let i = 0; i < tlWatchEntries.length; i++){\r\n        let entry = tlWatchEntries[i];\r\n        let newValue = entry.owner[entry.propertyName];\r\n        if(newValue !== entry.savedValue){\r\n            entry.savedValue = newValue;\r\n            entry.tl.value = newValue;\r\n        }\r\n    };\r\n}\r\nfunction addTLWatch(tl, owner, propertyName){\r\n    if(tlWatchTimer === undefined){\r\n        tlWatchEntries = [];\r\n        tlWatchTimer = setInterval(tlWatchUpdater, 200);\r\n    }\r\n    tlWatchEntries.push({tl: tl, owner: owner, propertyName: propertyName, savedValue: null});\r\n}\r\n\r\nconst _value = Symbol('value');\r\nconst typeofString = 'string';\r\n\r\nconst signals = {\r\n    change: 'change'\r\n};\r\n\r\nclass TextLabel extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        this[_value] = '';\r\n    }\r\n\r\n    get value(){\r\n        return this[_value];\r\n    }\r\n\r\n    /** @param {string} v */\r\n    set value(v){\r\n        if(v !== typeofString) v = this.GetString(v);\r\n\r\n        let changed = this[_value] !== v;\r\n        this[_value] = v;\r\n        if(changed) this.Dispatch(signals.change, this);\r\n    }\r\n\r\n    GetString(v){\r\n        return v.ToString ? v.ToString() : v.toString();\r\n    }\r\n\r\n    Watch(owner, propertyName){\r\n        addTLWatch(this, owner, propertyName);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nconst defaultGeometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n\r\n/**\r\n * @typedef TLVParams\r\n * @property {string} font css 32px sans-serif\r\n * @property {string} textAlign start, end, left, right or center\r\n * @property {string} sidePadding px\r\n * @property {Number} fontColor css\r\n * @property {Number} backColor css\r\n * @property {Number} width px\r\n * @property {Number} height px\r\n */\r\n/** @type {TLVParams} */\r\nconst defaultParams = {\r\n    font: '32px sans-serif',\r\n    textAlign: 'center',\r\n    sidePadding: 16,\r\n    fontColor: 0x000000,\r\n    backColor: 0xffffff,\r\n    width: 256,\r\n    height: 64\r\n};\r\n\r\nclass TextLabelView{\r\n    \r\n    /** @param {TLVParams} params */\r\n    constructor(params){\r\n        \r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        let material = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide});\r\n        this.view = new THREE.Mesh(defaultGeometry, material);\r\n    }\r\n\r\n    /** @param {TextLabel} value */\r\n    set textLabel(value){\r\n        value.On(TextLabel.signals.change, this.OnChange.bind(this));\r\n    }\r\n\r\n    /** @param {TextLabel} textLabel */\r\n    OnChange(textLabel){\r\n        let text = textLabel.value;\r\n        this.UpdateText(text);\r\n    }\r\n\r\n    /** @param {string} text */\r\n    UpdateText(text){\r\n        if(this.canvas2d === undefined)\r\n            this.canvas2d = document.createElement('canvas');\r\n\r\n        this.canvas2d.width = this.params.width;\r\n        this.canvas2d.height = this.params.height;\r\n\r\n        let context2d = this.canvas2d.getContext('2d');\r\n            context2d.fillStyle = this.params.backColor;\r\n            context2d.fillRect(0, 0, this.params.width + 2, this.params.height + 2);\r\n            context2d.fillStyle = this.params.fontColor;\r\n            context2d.font = this.params.font;\r\n            context2d.textAlign = this.params.textAlign;\r\n            context2d.textBaseline = 'middle';\r\n\r\n        let x = this.params.textAlign === 'start' || this.params.textAlign === 'left' ? this.params.sidePadding :\r\n            ( this.params.textAlign === 'end' || this.params.textAlign === 'right' ? this.params.width - this.params.sidePadding :\r\n            ( this.params.width / 2 ) );\r\n        context2d.fillText(text, x, this.params.height / 2);\r\n\r\n        //\r\n        let mesh = this.view;\r\n        /** @type {THREE.MeshBasicMaterial} */\r\n        let material = mesh.material;\r\n        if(!material.map){\r\n            material.map = new THREE.CanvasTexture(this.canvas2d);\r\n            material.map.minFilter = THREE.LinearFilter;\r\n            material.map.anisotropy = 1.4;\r\n        }\r\n        else{\r\n            material.map.image = this.canvas2d;\r\n        }\r\n        material.map.needsUpdate = true;\r\n    }\r\n\r\n}\r\n\r\nTextLabelView.Label = TextLabel;\r\n\r\nexport default TextLabelView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/TextLabelView.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","import { Element } from \"./UIUtils\";\r\n\r\nElement.CreateCSS([\r\n    '.tooltip .tooltiptext {',\r\n    '    visibility: hidden;',\r\n    '    position: absolute;',\r\n    '    width: 120px;',\r\n    '    background-color: #111;',\r\n    '    color: #fff;',\r\n    '    text-align: center;',\r\n    '    padding: 2px 0;',\r\n    '    border-radius: 2px;',\r\n    '    z-index: 1;',\r\n    '    opacity: 0;',\r\n    '    transition: opacity .6s;',\r\n    '}',\r\n\r\n    '.tooltip-top {',\r\n    '    bottom: 125%;',\r\n    '    left: 50%;',\r\n    '    margin-left: -60px;',\r\n    '}',\r\n    \r\n    '.tooltip:hover .tooltiptext {',\r\n    '    visibility: visible;',\r\n    '    opacity: 1;',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n};\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n    get: function(){\r\n        if(!this._onGUIEvent)\r\n            this._onGUIEvent = [];\r\n        return this._onGUIEvent;\r\n    }\r\n});\r\n\r\n// update all\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n    var gui = this;\r\n    for (var i in gui.__controllers) {\r\n        var controller = gui.__controllers[i];\r\n        controller.updateDisplay();\r\n    }\r\n\r\n    var folders = Object.values(gui.__folders);\r\n    for(i = 0; i < folders.length; i++){\r\n        folders[i].updateAll();\r\n    }\r\n};\r\n\r\n// find\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n    var gui = this, controller, i;\r\n\r\n    if(property){ // 2 arguments\r\n        for (i = 0; i < gui.__controllers.length; i++){\r\n            controller = gui.__controllers[i];\r\n            if (controller.object == object && controller.property == property)\r\n                return controller;\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            controller = folders[i].find(object, property);\r\n            if(controller) return controller;\r\n        }\r\n    }\r\n    else{\r\n        property = object; // 1 argument\r\n\r\n        var folderKeys = Object.keys(gui.__folders);\r\n        for(i = 0; i < folderKeys.length; i++){\r\n            var folderName = folderKeys[i];\r\n            var folder = gui.__folders[folderName];\r\n            if(folderName === property)\r\n                return folder;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n// On open event\r\n//if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n    get: function(){\r\n        return !this.closed;\r\n    },\r\n\r\n    set: function(value){\r\n        for(var i = 0; i < this.onGUIEvent.length; i++){\r\n            this.onGUIEvent[i](value ? 'open' : 'close');\r\n        }\r\n    }\r\n});\r\n\r\n// Disabled\r\nfunction blockEvent(event){\r\n    event.stopPropagation();\r\n}\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n    get: function(){\r\n        return this.domElement.hasAttribute(\"disabled\");\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n            this.domElement.addEventListener(\"click\", blockEvent, true);\r\n            Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n        else{\r\n            this.domElement.removeAttribute(\"disabled\");\r\n            this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n            Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.disabled = !value;\r\n};\r\n\r\n// Tooltip\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n    get: function(){\r\n        return this._tooltip.innerHTML;\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            if(this._tooltip === undefined) {\r\n                this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                /**\r\n                 * @type {HTMLElement}\r\n                 */\r\n                var container = this.domElement.parentElement.parentElement;\r\n                container.classList.add('tooltip');\r\n                container.appendChild(this._tooltip);\r\n            }\r\n            this._tooltip.innerHTML = value;\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.tooltip = value;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import AFitTest from \"../packer/afit/AFitTest\";\r\n\r\nfunction delay(time, callback){\r\n    setTimeout(callback, time);\r\n}\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35, map: new THREE.TextureLoader().load('../resources/textures/checkers.jpg', function(map){\r\n    map.wrapS = map.wrapT = THREE.RepeatWrapping; \r\n})});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nconst alphaHexMask = 256 * 256 * 256;\r\n\r\n/** @type {THREE.Object3D} */\r\nvar view;\r\n\r\n/** @type {Map<string, *>} */\r\nvar debugObjects = new Map();\r\n\r\nvar tVec3 = new THREE.Vector3(),\r\n    tPos = new THREE.Vector3(),\r\n    tScale = new THREE.Vector3();\r\n\r\nclass DebugViz {\r\n\r\n    /**\r\n     * @param {THREE.Object3D} parent\r\n     */\r\n    static SetViewParent(parent){\r\n        view = new THREE.Object3D();\r\n        view.name = 'DebugViz view';\r\n        console.log(view.name + ' created...');\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        parent.add(view);\r\n    }\r\n\r\n    static get view(){ return view; }\r\n\r\n    /**\r\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\r\n     * @param {Number} [color] hex color\r\n     * @param {Number} [duration] in milliseconds\r\n     * @param {Boolean} [checkered] checkers map\r\n     */\r\n    static DrawVolume(x, y, z, w, h, l, color, duration, wireframe, checkered){\r\n        tPos.set(x, y, z);\r\n        tScale.set(w, h, l);\r\n\r\n        /** @type {THREE.Mesh} */\r\n        var volume = debugBox.clone();\r\n        view.add(volume);\r\n\r\n        volume.position.copy(tPos);\r\n        volume.scale.copy(tScale);\r\n\r\n        if(color){\r\n            /** @type {THREE.MeshStandardMaterial} */\r\n            let material = volume.material.clone();\r\n            volume.material = material;\r\n            material.color.setHex(color && 0xffffff);\r\n            if(wireframe === true){\r\n                material.wireframe = true;\r\n            }\r\n            else{\r\n                material.opacity = Math.floor(color / alphaHexMask) / 256;\r\n                material.transparent = material.opacity > 0 && material.opacity < .99;\r\n            }\r\n\r\n            if(!checkered){\r\n                material.map = null;\r\n            }\r\n            else{\r\n                material.map.repeat.set(10, 10);\r\n            }\r\n        }\r\n\r\n        let uid = THREE.Math.generateUUID();\r\n        debugObjects.set(uid, volume);\r\n\r\n        if(duration > 0){\r\n            delay(duration, function(){\r\n                DebugViz.RemoveObjectByUID(uid);\r\n            });\r\n        }\r\n\r\n        return uid;\r\n    }\r\n\r\n    /**\r\n     * @param {string} uid \r\n     */\r\n    static RemoveObjectByUID(uid){\r\n        var object = debugObjects.get(uid);\r\n        if(object instanceof THREE.Object3D && object.parent){\r\n            object.parent.remove(object);\r\n        }\r\n    }\r\n\r\n    static ClearAll(){\r\n        for(var uid of debugObjects.keys()){\r\n            DebugViz.RemoveObjectByUID(uid);\r\n        }\r\n    }\r\n\r\n    /** @param {Boolean} visible */\r\n    static SetPackingSpaceVisibility(visible){\r\n        Debug.app.view.packingSpaceView.view.visible = visible;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nclass Debug {\r\n\r\n    static MaterialEdit(callback){\r\n        let objects = Debug.app.view.packResultView.cargoViews;\r\n        objects.forEach(o => {\r\n            let material = o.mesh.material;\r\n            callback(material);\r\n            material.needsUpdate = true;\r\n        });\r\n    }\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\nDebug.Viz = DebugViz;\r\n\r\n/** @type {import('../../FreightPacker').default} */\r\nDebug.api;\r\n/** @type {import('../App').default} */\r\nDebug.app;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Container} container\r\n     */\r\n    Add(container){\r\n        let containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    Clear(){\r\n        for(let i = 0; i < this.containerViews.length; i++){\r\n            let cv = this.containerViews[i];\r\n            this.view.remove(cv.view);\r\n        }\r\n        this.containerViews.length = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(let iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(let iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nclass ContainerBox{\r\n    /** @param {THREE.Mesh} mesh */\r\n    constructor(mesh){\r\n        this.mesh = mesh;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, ContainerBox>}\r\n     */\r\n    var boxes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .2;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        boxes.set(cv, new ContainerBox(mesh));\r\n    });\r\n\r\n    return boxes;\r\n}\r\n\r\nvar tempVec3 = new THREE.Vector3();\r\n\r\n/** @type {WeakMap<Container, ContainerView>} */\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        // Store original dimensions\r\n        this.initializationBox3 = new THREE.Box3();\r\n        this.initializationBox3.setFromObject(view);\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        Asset.StandardSceneObject(this.view);\r\n        Asset.ColorTemplates('Containers').Apply(this.view);\r\n\r\n        this.containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, box] of this.containerBoxes){\r\n            box.mesh.position.add(cv.position);\r\n            this.view.add(box.mesh);\r\n        }\r\n\r\n    }\r\n\r\n    //** @param {Input} input @param {Camera} cameraController */\r\n    /*InitSliderBoxes(input, cameraController, changeCallback, stopCallback){\r\n        for(var box of this.containerBoxes.values()){\r\n            box.UseInput(input, cameraController);\r\n            box.On(sliderSignals.change, changeCallback);\r\n            box.On(sliderSignals.stop, stopCallback);\r\n        }\r\n    }*/\r\n\r\n    /**\r\n     * @param {Boolean} visible\r\n     * @param {THREE.Vector3} [padding]\r\n     */\r\n    PlatformVisibility(visible, padding){\r\n\r\n        if(visible && this.platformMesh === undefined){\r\n\r\n            if(padding === undefined) padding = new THREE.Vector3(0, .01, 0);\r\n        \r\n            this.initializationBox3.getSize(tempVec3);\r\n\r\n            let planeGeom = new THREE.BoxGeometry(tempVec3.x + padding.x * 2, padding.y, tempVec3.z + padding.z * 2, 1, 1, 1);\r\n            let planeMaterial = new Asset.CreateSolidMaterialMatte(Asset.ColorTemplates('Containers').Apply(0xffffff));\r\n            this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n            Asset.ReceiveShadow(this.platformMesh);\r\n\r\n            this.platformMesh.position.y = .001;\r\n            this.view.add(this.platformMesh);\r\n        }\r\n\r\n        this.platformMesh.visible = visible;\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( ! view ){\r\n            let meshes = createContainerBoxes(container);\r\n            let view = new THREE.Object3D();\r\n            for(var [cv, mesh] of meshes){\r\n                mesh.position.add(cv.position);\r\n                view.add(mesh);\r\n            }\r\n\r\n            view = new ContainerView(container, view);\r\n            views.set(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","import Logger from '../utils/cik/Logger';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\nimport LightDispatcher from './LightDispatcher';\r\nimport App from '../App';\r\nimport CargoList from '../packer/CargoList';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst _cargoList = Symbol('cargoList');\r\n\r\nconst signals = {\r\n    update: 'update',\r\n    abort: 'abort',\r\n    insert: 'insert',\r\n    modify: 'modify',\r\n    remove: 'remove'\r\n};\r\n\r\n/**\r\n * @typedef {Object} CargoInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends LightDispatcher {\r\n\r\n    /**\r\n     * @param {CargoInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n\r\n        this[_cargoList] = app.packer.cargoList;\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        return new BoxEntry();\r\n    }\r\n\r\n    /** @param {string} entryUID @returns {BoxEntry} the entry if it exists */\r\n    GetEntry(entryUID){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entry = cargoList.GetEntry(entryUID);\r\n        return entry;\r\n    }\r\n\r\n    /** @returns {Array<BoxEntry>} all entries or an empty array */\r\n    GetEntries(){\r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let entries = [];\r\n        cargoList.groups.forEach(value => entries.push(value.entry));\r\n\r\n        return entries;\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.update, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.abort);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Add, entry rejected, dimensions != Volume:', entry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                let commitedEntry = entry.Clone();\r\n                let uid = commitedEntry.SetUID();\r\n\r\n                this.Dispatch(signals.insert, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Modify an existing box entry\r\n     * @param {string} entryUID\r\n     * @param {BoxEntry} boxEntry\r\n     * @returns {Boolean} success\r\n     */\r\n    Modify(entryUID, boxEntry){\r\n        let existing = this.GetEntry(entryUID);\r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Modify, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        if(BoxEntry.Assert(boxEntry)){\r\n\r\n            if( Dimensions.IsVolume(boxEntry.dimensions.Abs()) === false ){\r\n                Logger.Warn('CargoInput.Modify, entry rejected, dimensions != Volume:', boxEntry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                existing.Copy(boxEntry);\r\n\r\n                this.Dispatch(signals.modify, existing);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in CargoInput.Modify, error/entry:', error, boxEntry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in CargoInput.Modify, entry:', boxEntry);\r\n        return false;\r\n    }\r\n\r\n    /** Removes an existing box entry\r\n     * @param {string} entryUID\r\n     * @returns {Boolean} success\r\n     */\r\n    Remove(entryUID){\r\n        \r\n        /** @type {CargoList} */\r\n        let cargoList = this[_cargoList];\r\n        let existing = cargoList.GetEntry(entryUID);\r\n        \r\n        if(!existing){\r\n            Logger.Warn('CargoInput.Remove, entry not found for:', entryUID);\r\n            return false;\r\n        }\r\n\r\n        this.Dispatch(signals.remove, existing);\r\n        return true;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nCargoInput.BoxEntry = BoxEntry;\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {THREE.Geometry} jsonObject.geometry\r\n * @property {Container} jsonObject.container\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded',\r\n    sliderValueChange: 'sliderValueChange',\r\n    sliderValueStop: 'sliderValueStop'\r\n};\r\n\r\n/**\r\n * @typedef {Object} PackingSpaceInputParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\nclass PackingSpaceInput extends LightDispatcher {\r\n    /**\r\n     * @param {PackingSpaceInputParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = params;\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Bind(value){\r\n        /** @type {App} */\r\n        let app = value;\r\n    }\r\n\r\n    /**\r\n     * @param {PackingSpaceJSON} jsonObject \r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Load(jsonObject){\r\n\r\n        let data;\r\n        try{\r\n            data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        }\r\n        catch(error){\r\n            Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject:', error, jsonObject);\r\n            return false;\r\n        }\r\n\r\n        if(data.container){\r\n            let container;\r\n            try{\r\n                container = Container.FromJSON(data.container);\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.container:', error, data.container);\r\n                return false;\r\n            }\r\n\r\n            if(!container.uid) container.SetUID();\r\n            let uid = container.uid;\r\n            \r\n            let model;\r\n            if(data.view){\r\n                try{\r\n                    model = Asset.FromJSON(data.view);\r\n                }\r\n                catch(error){\r\n                    Logger.Warn('Error in PackingSpaceInput.Load, error/jsonObject.view:', error, data.view);\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if(model){\r\n                let containerView = new ContainerView(container, model);\r\n                let units = this.params.ux.params.units;\r\n                let padding = 60 * units;\r\n                let thickness = 2 * units;\r\n                containerView.PlatformVisibility(true, new THREE.Vector3(padding, thickness, padding));\r\n            }\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n            return uid;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport Packer from \"../packer/Packer\";\r\n\r\n/** @typedef {import('../packer/Packer').SolverParams} SolverParams\r\n */\r\n\r\n/** @typedef {import('../packer/cub/CUB').CUBParams} CUBParams\r\n */\r\n\r\nclass ResultSpace{\r\n    /** @param {string} uid */\r\n    constructor(uid){\r\n        this.uid = uid;\r\n    }\r\n}\r\n\r\nclass ResultEntry{\r\n    /** @param {string} uid @param {ResultSpace} space @param {Number} quantity */\r\n    constructor(uid, space, quantity){\r\n        this.uid = uid;\r\n        this.space = space;\r\n        this.quantity = quantity || 0;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n        /** @type {Array<ResultSpace>} */\r\n        this.packingSpaces = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.packed = [];\r\n        /** @type {Array<ResultEntry>} */\r\n        this.unpacked = [];\r\n\r\n        this.totalPacked = 0;\r\n        this.totalUnpacked = 0;\r\n        /** algorithm runtime in seconds */\r\n        this.solveDuration = 1;\r\n    }\r\n}\r\n\r\n/** @param {Packer.PackingResult} packingResult */\r\nfunction toInterfaceResults(packingResult){\r\n    let result = new PackingResult();\r\n    \r\n    /** @param {string} containerUID */\r\n    function getSpace(containerUID){\r\n        for(let i = 0; i < result.packingSpaces.length; i++){\r\n            if(result.packingSpaces[i].uid === containerUID){\r\n                return result.packingSpaces[i];\r\n            }\r\n        }\r\n\r\n        let ps = new ResultSpace(containerUID);\r\n        result.packingSpaces.push(ps);\r\n        return ps;\r\n    }\r\n\r\n    let totalPacked = 0,\r\n        totalUnpacked = 0;\r\n\r\n    /** @param {ResultEntry} resultEntry @param {Array<ResultEntry>} list */\r\n    function packEntry(resultEntry, list){\r\n        let isFirst = true;\r\n        for(let i = 0; i < list.length; i++){\r\n            if(list[i].uid === resultEntry.uid){\r\n                isFirst = false;\r\n                list[i].quantity ++;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if(isFirst){\r\n            resultEntry.quantity = 1;\r\n            list.push(resultEntry);\r\n        }\r\n    }\r\n\r\n    packingResult.packed.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = getSpace(p.containingVolume.container.uid);\r\n        packEntry(new ResultEntry(uid, space), result.packed);\r\n        totalPacked++;\r\n    });\r\n\r\n    packingResult.unpacked.forEach(p => {\r\n        let uid = p.entry.uid;\r\n        let space = null;\r\n        let unpackedQuantity = p.unpackedQuantity;\r\n        result.unpacked.push(new ResultEntry(uid, space, unpackedQuantity));\r\n        totalUnpacked += unpackedQuantity;\r\n    });\r\n\r\n    result.totalPacked = totalPacked;\r\n    result.totalUnpacked = totalUnpacked;\r\n    result.solveDuration = packingResult.runtime;\r\n\r\n    return result;\r\n}\r\n\r\nconst signals = {\r\n    solveRequest: 'solveRequest',\r\n    solved: 'solved',\r\n    failed: 'failed'\r\n};\r\n\r\nclass PackerInterface extends LightDispatcher {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n    }\r\n\r\n    /** @param {SolverParams} params */\r\n    Solve(params){\r\n        this.Dispatch(signals.solveRequest, params);\r\n    }\r\n\r\n    /** @ignore ignore */\r\n    _Notify(...args){\r\n        let value = args[0];\r\n        switch(value){\r\n            case signals.solved:\r\n                let packingResult = args[1];\r\n                let result = toInterfaceResults(packingResult);\r\n                this.Dispatch(signals.solved, result);\r\n                break;\r\n            case signals.failed:\r\n                let error = args[1];\r\n                this.Dispatch(signals.failed, error);\r\n                break;\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App, { AppParams } from './api/App';\r\nimport CargoInput, { CargoInputParams } from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput, { PackingSpaceInputParams } from './api/components/PackingSpaceInput';\r\nimport UX, { UXParams } from './api/UX';\r\nimport PackerInterface from './api/components/PackerInterface';\r\nimport LightDispatcher from './api/components/LightDispatcher';\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug\r\n * @property {UXParams} uxParams\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default,\r\n\tConfig: require('./api/utils/cik/config/Config').default\r\n};\r\n\r\n/** @param {FreightPacker|App} domain */\r\nfunction devSetup(domain){\r\n\tif(domain instanceof FreightPacker){\r\n\t\tlet fp = domain;\r\n\t\tglobal.fp = fp;\r\n\t\tFreightPacker.utils.Debug.api = fp;\r\n\t\tlet params = fp.params;\r\n\t\tif(params.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\r\n\t\t//require('./api/debug/Tester').testPool();\r\n\t\t//utils.Debug.CLPTest.Test1();\r\n\t}\r\n\r\n\tif(domain instanceof App){\r\n\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\r\n\t\tlet app = domain;\r\n\t\tFreightPacker.utils.Debug.app = app;\r\n\t\tapp.sceneSetup.OnIncludingPrior(SceneSetup.signals.init, function(){\r\n\t\t\tFreightPacker.utils.Debug.Viz.SetViewParent(app.sceneSetup.sceneController.scene);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/** @param {FreightPacker} fp */\r\nfunction auto(fp){\r\n\t\r\n}\r\n\r\nconst signals = {\r\n\tready: 'ready'\r\n};\r\n\r\nclass FreightPacker extends LightDispatcher {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tsuper();\r\n\t\tlet scope = this;\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tdevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.uxParams);\r\n\r\n\t\t/** @type {CargoInputParams} */\r\n\t\tlet cargoInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: description fields (label, etc.), dimensions and constraints */\r\n\t\tthis.cargoInput = new CargoInput(cargoInputParams);\r\n\r\n\t\t/** @type {PackingSpaceInputParams} */\r\n\t\tlet packingSpaceInputParams = {ux: this.ux};\r\n\r\n\t\t/** Handles input of: packing spaces configurations and assets */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput(packingSpaceInputParams);\r\n\r\n\t\t/** Manual solving and notification */\r\n\t\tthis.packer = new PackerInterface();\r\n\r\n\t\t/** @type {AppParams} */\r\n\t\tlet appParams = {ux: this.ux, cargoInput: this.cargoInput, packingSpaceInput: this.packingSpaceInput, packerInterface: this.packer};\r\n\t\tlet app = new App(containerDiv, appParams);\r\n\t\t\tapp.On(App.signals.start, function(){\r\n\t\t\t\tscope.Dispatch(signals.ready);\r\n\t\t\t});\r\n\r\n\t\tdevSetup(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tauto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tlet webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get signals(){\r\n\t\treturn signals;\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n}\r\n\r\nFreightPacker.UX = UX;\r\nFreightPacker.CargoInput = CargoInput;\r\nFreightPacker.PackingSpaceInput = PackingSpaceInput;\r\nFreightPacker.Packer = PackerInterface;\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\nimport RaycastGroup from \"./RaycastGroup\";\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    /**\r\n     * @param {string} event Update Update25 Update10 OnMouseDown OnDoubleClick OnMouseUp OnRightClick OnClick\r\n     * @param {string} groupID \r\n     * @param {RaycastGroup} group \r\n     */\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef RendererParams\r\n * @property {Boolean} antialias\r\n * @property {Boolean} shadows\r\n * @property {Boolean} shadowsAutoUpdate\r\n * @property {Number} clearColor - hex color 0xff7f00\r\n * @property {Number} renderSizeMul\r\n * @property {Boolean} composer\r\n */\r\n\r\n/** @type {RendererParams} */\r\nconst defaultParams = {\r\n    antialias: true,\r\n    shadows: true,\r\n    shadowMapType: THREE.PCFSoftShadowMap,\r\n    shadowsAutoUpdate: true,\r\n    clearColor: 0xcfcfcf,\r\n    renderSizeMul: 1,\r\n    composer: false\r\n};\r\n\r\nclass Renderer {\r\n    /**\r\n     * @param {RendererParams} params \r\n     */\r\n    constructor(params) {\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        this.renderer.shadowMap.enabled = this.params.shadows;\r\n        this.renderer.shadowMap.type = this.params.shadowMapType;\r\n        this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.Uncharted2ToneMapping;\r\n        this.renderer.toneMappingExposure = 1.4;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 80, 400), new THREE.Euler(-0.1, 0, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import App from \"../App\";\r\nimport LightDispatcher from \"./LightDispatcher\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst typeofNumber = 'number';\r\n\r\nclass PackResults {\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n\r\n        this[_app] = app;\r\n    }\r\n\r\n    get animationDuration(){ \r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        return app.view.packResultView.params.animationDuration;\r\n    }\r\n    set animationDuration(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.animationDuration error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.params.animationDuration = value; \r\n    }\r\n\r\n    /** \r\n     * 0: None - 1: All (over y span)\r\n     * @param {Number} value\r\n     */\r\n    SliceResults(value){\r\n\r\n        if(typeof value !== typeofNumber){\r\n            Logger.Warn('PackResults.SliceResults error, parameter is not a number:', value);\r\n            return;\r\n        }\r\n\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n        app.view.packResultView.Slice(value);\r\n    }\r\n\r\n}\r\n\r\nconst visualizationSignals = {\r\n    \r\n};\r\n\r\nclass Visualization extends LightDispatcher{\r\n    \r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        this.packResults = new PackResults(app);\r\n    }\r\n\r\n    /** Selects an entry in the scene, optionally highlighting packed instances\r\n     *  @param {string | Boolean} [entryUID] default = false (deselect) @param {Boolean} [highlightPackedInstances] default = true */\r\n    SelectEntry(entryUID, highlightPackedInstances){\r\n        /** @type {App} */\r\n        let app = this[_app];\r\n\r\n        if(entryUID && !app.packer.cargoList.GetEntry(entryUID)){\r\n            Logger.Warn('Visualization.SelectEntry failed, entry not found for:', entryUID);\r\n            return;\r\n        }\r\n\r\n        app.view.cargoListView.Select(entryUID);\r\n\r\n        if(highlightPackedInstances === undefined) highlightPackedInstances = true;\r\n        if(highlightPackedInstances || !entryUID) app.view.packResultView.SelectEntry(entryUID);\r\n    }\r\n\r\n    static get signals(){\r\n        return visualizationSignals;\r\n    }\r\n}\r\n\r\nexport default Visualization;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/Visualization.js","import LightDispatcher from \"./LightDispatcher\";\r\nimport App from \"../App\";\r\nimport CargoListView from \"../view/CargoListView\";\r\nimport CargoEntry from \"./common/CargoEntry\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    boxEntryInteract: 'beInteract0'\r\n};\r\n\r\nclass User extends LightDispatcher{\r\n    /** @param {App} app */\r\n    constructor(app){\r\n        super();\r\n\r\n        this[_app] = app;\r\n\r\n        let scope = this;\r\n        /** @param {CargoEntry} cargoEntry */\r\n        function onCargoInteract(cargoEntry){\r\n            scope.Dispatch(signals.boxEntryInteract, cargoEntry.uid);\r\n        }\r\n\r\n        app.view.cargoListView.On(CargoListView.signals.interact, onCargoInteract);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/User.js","\r\nconst typeofNumber = 'number';\r\n\r\n/** @param {THREE.Color} source @param {Array<THREE.Color>} colors */\r\nfunction findNearest(source, colors){\r\n    var dMin = Number.MAX_SAFE_INTEGER;\r\n    var nearest = source;\r\n    colors.forEach(color => {\r\n        let vx = color.r - source.r,\r\n            vy = color.g - source.g,\r\n            vz = color.b - source.b;\r\n        let d = vx * vx + vy * vy + vz * vz;\r\n        if(d < dMin){\r\n            dMin = d;\r\n            nearest = color;\r\n        }\r\n    });\r\n\r\n    return nearest;\r\n}\r\n\r\nvar tempColor = new THREE.Color();\r\n\r\nclass ColorTemplate{\r\n    /**\r\n     * @param {Array<string|THREE.Color>} colors \r\n     */\r\n    constructor(...colors){\r\n        /** @type {Array<THREE.Color>} */\r\n        this.colors = [];\r\n        colors.forEach(color => {\r\n            if( !(color instanceof THREE.Color) ) color = new THREE.Color(color);\r\n            this.colors.push(color);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @returns {T}\r\n     */\r\n    Apply(target){\r\n        var scope = this;\r\n        if(typeof target === typeofNumber){\r\n            let mapColor = findNearest(tempColor.setHex(target), this.colors);\r\n            target = mapColor.getHex();\r\n        }\r\n        else if(target instanceof THREE.Color){\r\n            let mapColor = findNearest(target, this.colors);\r\n            target.copy(mapColor);\r\n        }\r\n        else if(target instanceof THREE.Material){\r\n            let color = target.color;\r\n            if(color instanceof THREE.Color){\r\n                let mapColor = findNearest(color, this.colors);\r\n                color.copy(mapColor);\r\n            }\r\n        }\r\n        else if(target instanceof THREE.Object3D){\r\n            target.traverse(function(child){\r\n                if(child instanceof THREE.Mesh){\r\n                    scope.Apply(child.material);\r\n                }\r\n            });\r\n        }\r\n        return target;\r\n    }\r\n}\r\n\r\nexport default ColorTemplate;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/ColorTemplate.js","\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Copy(){\r\n        Logger.Warn('PackingProperty.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        \r\n    }\r\n\r\n    /**\r\n     * @param {SupportsStacking} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new SupportsStacking();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        Logger.Warn('Constraint.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Utils from \"../../utils/cik/Utils\";\r\nimport Asset from \"../../components/assets/Asset\";\r\n\r\n/** @typedef FloatingShelfParams @property {THREE.Vector3} padding x z for padding, y for thickness @property {Number} colorHex */\r\n/** @type {FloatingShelfParams} */\r\nconst defaultParams = {\r\n    padding: new THREE.Vector3(0, .001, 0),\r\n    colorHex: 0xffffff\r\n};\r\n\r\nvar box3 = new THREE.Box3();\r\nvar vec3 = new THREE.Vector3();\r\n\r\nclass FloatingShelf{\r\n    /** @param {THREE.Object3D} targetView @param {FloatingShelfParams} params */\r\n    constructor(targetView, params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.targetView = targetView;\r\n        this.view = new THREE.Object3D();\r\n\r\n        let planeGeom = new THREE.BoxGeometry(1, 1, 1, 1, 1, 1);\r\n        let planeMaterial = new Asset.CreateSolidMaterialMatte(this.params.colorHex);\r\n        this.platformMesh = new THREE.Mesh(planeGeom, planeMaterial);\r\n        Asset.ReceiveShadow(this.platformMesh);\r\n\r\n        this.view.add(this.platformMesh);\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Update(){\r\n        box3.setFromObject(this.targetView);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.targetView.matrixWorld);\r\n        box3.applyMatrix4(worldToLocal);\r\n        box3.getSize(vec3);\r\n        let height = vec3.y;\r\n\r\n        let padding = this.params.padding;\r\n        let thickness = Math.max(.0001, padding.y);\r\n        this.platformMesh.scale.set(Math.max(.0001, vec3.x + padding.x * 2), thickness, Math.max(.0001, vec3.z + padding.z * 2));\r\n\r\n        box3.getCenter(vec3);\r\n        this.platformMesh.position.set(vec3.x, vec3.y - height / 2 - thickness, vec3.z);\r\n    }\r\n}\r\n\r\nexport default FloatingShelf;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/FloatingShelf.js","import Utils from \"../../utils/cik/Utils\";\r\n\r\n\r\nconst cubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst outlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide, depthWrite:false, depthTest:true});\r\nconst boxOutlineMaterial = new THREE.MeshBasicMaterial({side: THREE.BackSide});\r\n\r\n/** @typedef OutlineParams @property {Number} color @property {Number} opacity @property {Number} offsetFactor @property {Number} offsetUnits */\r\n/** @type {OutlineParams} */\r\nconst defaultParams = {\r\n    color: 0x000000,\r\n    opacity: 1,\r\n    offsetFactor: 1,\r\n    offsetUnits: 1\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass Outline{\r\n\r\n    /** @param {OutlineParams} params */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        /** @type {Map<THREE.Object3D, THREE.Object3D>} */\r\n        this.outlines = new Map();\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set object3d(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.material === undefined) this.material = outlineMaterial.clone();\r\n        let material = this.material;\r\n            material.color.setHex(this.params.color);\r\n            material.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n            material.transparent = true;//material.opacity < .999;\r\n            material.polygonOffset = true;\r\n            material.polygonOffsetFactor = -this.params.offsetFactor;\r\n            material.polygonOffsetUnits = this.params.offsetUnits;\r\n\r\n        let outline = this.outlines.get(value);\r\n        if(!outline){\r\n            outline = value.clone(true);\r\n            if(outline instanceof THREE.Mesh){\r\n                outline.material = material;\r\n            }\r\n            else{\r\n                outline.children.forEach(oChild => oChild.traverse(function(child){\r\n                    if(child instanceof THREE.Mesh){\r\n                        let outlineReady = child.clone();\r\n                        outlineReady.material = material;\r\n                        if(child.parent){\r\n                            // Assuming end of hierarchical tree\r\n                            child.parent.add(outlineReady);\r\n                            child.parent.remove(child);\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n\r\n            this.outlines.set(value, outline);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        outline.matrixWorld.copy(value.matrixWorld);\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(outline);\r\n    }\r\n\r\n    /** @param {THREE.Object3D} value */\r\n    set box(value){\r\n        if(!value) return this.Disable();\r\n\r\n        this.view.visible = true;\r\n\r\n        if(this.boxMaterial === undefined) this.boxMaterial = boxOutlineMaterial.clone();\r\n        this.boxMaterial.color.setHex(this.params.color);\r\n        this.boxMaterial.opacity = THREE.Math.clamp(this.params.opacity, 0, 1);\r\n        this.boxMaterial.transparent = this.boxMaterial.opacity < .999;\r\n\r\n        if(this.boxMesh === undefined){\r\n            this.boxMesh = new THREE.Mesh(cubeGeometry, this.boxMaterial);\r\n        }\r\n\r\n        value.updateMatrixWorld();\r\n        tempBox3.setFromObject(value);\r\n        tempBox3.getSize(this.view.scale);\r\n        this.view.scale.addScalar(this.params.offsetFactor);\r\n        tempBox3.getCenter(this.view.position);\r\n\r\n        let parent = this.view.parent;\r\n        if(parent){\r\n            parent.updateMatrixWorld();\r\n            let inverse = tempMatrix4.getInverse(parent.matrixWorld);\r\n            this.view.applyMatrix(inverse);\r\n        }\r\n\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n        this.view.add(this.boxMesh);\r\n    }\r\n\r\n    Disable(){\r\n        this.view.visible = false;\r\n    }\r\n    \r\n}\r\n\r\nexport default Outline;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/components/Outline.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nconst type = 'Volume';\r\nconst _box3 = Symbol('box3');\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n\r\n        this[_box3] = new THREE.Box3();\r\n    }\r\n\r\n    /** @returns {THREE.Box3} */\r\n    get box3(){\r\n        /** @type {THREE.Box3} */\r\n        let b = this[_box3];\r\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\r\n        return b;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","/** @author chadiik <http://chadiik.com/> */\r\n\r\nimport { Container, Item } from \"./Components\";\r\nimport Debug from \"../../debug/Debug\";\r\nimport { rectanglesFromPoints, linesIntersect, rectangleContainsPoint, rectangleContainsRectangle, reduceRectangles } from \"./Math2D\";\r\nimport Utils from \"../../utils/cik/Utils\";\r\n\r\nconst debugging = false;\r\n\r\nvar running = true;\r\nif(debugging){\r\n    Debug.app.sceneSetup.input.ListenKeys(['right', 'space']);\r\n}\r\n\r\nfunction sleep(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force) setTimeout(resolve, ms);\r\n        else resolve();\r\n    });\r\n}\r\n\r\nfunction click(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('mouseup', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('mouseup', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\nfunction keypress(ms, force) {\r\n    return new Promise(resolve => {\r\n        if(debugging || force){\r\n            let tid = undefined;\r\n            function execute(){\r\n                if(tid !== undefined) clearTimeout(tid);\r\n                removeEventListener('keydown', execute);\r\n                resolve();\r\n            }\r\n            if(ms && ms > 0) tid = setTimeout(execute, ms);\r\n            addEventListener('keydown', execute);\r\n        }\r\n        else{\r\n            resolve();\r\n        }\r\n    });\r\n}\r\n\r\nfunction debugLog(...args){\r\n    console.log(...args);\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nfunction debugRegion(region, color, solid, duration, checkered){\r\n    var x = region.x, y = region.y, z = region.z, w = region.width, h = region.height, l = region.length;\r\n    var debugUID = Debug.Viz.DrawVolume(x + w/2, y + h/2, z + l/2, w, h, l, color || 0xaaffff, duration || -1, !Boolean(solid), checkered);\r\n    return debugUID;\r\n}\r\n\r\n/**\r\n * @param {Region} region * @param {Number} color \r\n */\r\nasync function debugRegionBlink(region, color, solid, checkered, blinks, onDuration, offDuration){\r\n    for(let i = 0; i < blinks; i++){\r\n        debugRegion(region, color, solid, onDuration, checkered);\r\n        await sleep(onDuration + offDuration);\r\n    }\r\n}\r\n\r\n/** @param {Array<string>} */\r\nfunction debugClear(uids){\r\n    if(uids){\r\n        uids.forEach(uid => {\r\n            Debug.Viz.RemoveObjectByUID(uid);\r\n        });\r\n    }\r\n    else{\r\n        Debug.Viz.ClearAll();\r\n    }\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst smallValue = .000001;\r\nconst smallValueSqrt = .001;\r\n\r\nclass Region{\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    constructor(x, y, z, width, height, length, preferredX){\r\n        this.Set(x, y, z, width, height, length, preferredX);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x * @param {Number} y * @param {Number} z * @param {Number} width * @param {Number} height * @param {Number} length * @param {Number} preferredX \r\n     */\r\n    Set(x, y, z, width, height, length, preferredX){\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.width = width; this.height = height; this.length = length;\r\n        this.preferredX = preferredX;\r\n        return this;\r\n    }\r\n\r\n    /** @param {Region} region */\r\n    Copy(region){\r\n        this.Set(region.x, region.y, region.z, region.width, region.height, region.length, region.preferredX);\r\n        return this;\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before calculating corners \r\n     * @returns {Array<Number>} 8 corners, length = 24 + center point [24, 25, 26]\r\n     */\r\n    GetCorners(offset){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n\r\n        tempCorners[0] = x;       tempCorners[1] = y;       tempCorners[2] = z;         // 0:\r\n        tempCorners[3] = x + w;   tempCorners[4] = y;       tempCorners[5] = z;         // 0:w\r\n        tempCorners[6] = x;       tempCorners[7] = y + h;   tempCorners[8] = z;         // 0:h\r\n        tempCorners[9] = x + w;   tempCorners[10] = y + h;  tempCorners[11] = z;        // 0:wh\r\n\r\n        tempCorners[12] = x;      tempCorners[13] = y;      tempCorners[14] = z + l;    // 1:\r\n        tempCorners[15] = x + w;  tempCorners[16] = y;      tempCorners[17] = z + l;    // 1:w\r\n        tempCorners[18] = x;      tempCorners[19] = y + h;  tempCorners[20] = z + l;    // 1:h\r\n        tempCorners[21] = x + w;  tempCorners[22] = y + h;  tempCorners[23] = z + l;    // 1:wh\r\n\r\n        tempCorners[24] = x + w/2;tempCorners[25] = y + h/2;tempCorners[26] = z + l/2;  // center\r\n\r\n        return tempCorners;\r\n    }\r\n\r\n    /**\r\n     * @param {Array} result\r\n     * @returns {Array<Number>} 4 corners, length = 12\r\n     */\r\n    GetFloorPoints(result){\r\n        if(result === undefined) result = tempPoints;\r\n        var x = this.x, y = this.y, z = this.z, w = this.width, l = this.length;\r\n\r\n        result[0] = x;         result[1] = y;     result[2] = z;\r\n        result[3] = x + w;     result[4] = y;     result[5] = z;\r\n        result[6] = x + w;     result[7] = y;     result[8] = z + l;\r\n        result[9] = x;         result[10] = y;    result[11] = z + l;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} offset offsets the region by this before checking * @param {Number} px * @param {Number} py * @param {Number} pz \r\n     */\r\n    ContainsPoint(offset, px, py, pz){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        return px > x && px < x + w\r\n            && py > y && py < y + h\r\n            && pz > z && pz < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\n    ContainsRegion(offset, subRegion){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n        var rx = subRegion.x, ry = subRegion.y, rz = subRegion.z, rw = subRegion.width, rh = subRegion.height, rl = subRegion.length;\r\n        return rx > x && rx + rw < x + w\r\n            && ry > y && ry + rh < y + h\r\n            && rz > z && rz + rl < z + l;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Region} other */\r\n    Intersects(offset, other){\r\n        var x = this.x - offset, y = this.y - offset, z = this.z - offset, w = this.width + offset * 2, h = this.height + offset * 2, l = this.length + offset * 2;\r\n    \r\n        return x <= other.x + other.width && x + w >= other.x\r\n                && y <= other.y + other.height && y + h >= other.y \r\n                && z <= other.z + other.length && z + l >= other.z;\r\n    }\r\n\r\n    /** @param {Number} offset offsets the region by this before checking * @param {Number} width * @param {Number} height * @param {Number} length\r\n     * @param {Region} [result]\r\n     */\r\n    FitTest(offset, width, height, length, result){\r\n        if(!result) result = tempRegion;\r\n        // Check that all dimensions fit\r\n        var fit = width < this.width + offset * 2 && height < this.height + offset * 2 && length < this.length + offset * 2;\r\n        if(fit){\r\n            // Calculate x based on preferred side\r\n            let x = this.preferredX !== 0 ? this.x + this.width - width : this.x;\r\n            result.Set(x, this.y, this.z, width, height, length, this.preferredX);\r\n            return result;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Number} minRegionAxis @param {Boolean} skipTop */\r\n    Subtract(region, minRegionAxis, skipTop){\r\n        var newRegions;\r\n        \r\n        // Calculate a new east region\r\n        let axis = region.x + region.width;\r\n        let size = this.x + this.width - axis;\r\n        if(size > minRegionAxis){\r\n            let east = new Region(axis, this.y, this.z, size, this.height, this.length, 0);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(east);\r\n        }\r\n\r\n        // Calculate a new west region\r\n        axis = this.x;\r\n        size = region.x - axis;\r\n        if(size > minRegionAxis){\r\n            let west = new Region(axis, this.y, this.z, size, this.height, this.length, 1);\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(west);\r\n        }\r\n\r\n        if( !skipTop ){\r\n            // Calculate a new over/up region\r\n            axis = region.y + region.height;\r\n            size = this.y + this.height - axis;\r\n            if(size > minRegionAxis){\r\n                let over = new Region(region.x, axis, region.z, region.width, size, region.length, 0); // todo: add overhang var? // togglePreferredX based on pre-packed weight distribution?\r\n                if(newRegions === undefined) newRegions = [];\r\n                newRegions.push(over);\r\n            }\r\n        }\r\n\r\n        // Calculate a new south region\r\n        axis = this.z;\r\n        size = region.z - axis;\r\n        if(false && size > minRegionAxis){\r\n            let south = new Region(this.x, this.y, axis, this.width, this.height, size, 0); // todo togglePreferredX based on pre-packed weight distribution?\r\n            if(newRegions === undefined) newRegions = [];\r\n            newRegions.push(south);\r\n        }\r\n\r\n        // Set this as new north/front region\r\n        axis = region.z + region.length;\r\n        size = this.z + this.length - axis;\r\n        this.z = axis;\r\n        this.length = size;\r\n\r\n        return newRegions;\r\n    }\r\n\r\n    /** @param {Region} other */\r\n    ConnectFloorRects(other){\r\n        var ptsA = this.GetFloorPoints(tempPoints),\r\n            ptsB = other.GetFloorPoints(tempPoints2);\r\n\r\n        var adjacent = 0;\r\n        var intersections = [];\r\n        for(let iA = 0; iA < 12; iA += 3){\r\n            let nextA = iA + 3 === 12 ? 0 : iA + 3;\r\n            let ax = ptsA[iA], az = ptsA[iA + 2], nax = ptsA[nextA], naz = ptsA[nextA + 2];\r\n\r\n            for(let iB = 0; iB < 12; iB += 3){\r\n                let nextB = iB + 3 === 12 ? 0 : iB + 3;\r\n                let bx = ptsB[iB], bz = ptsB[iB + 2], nbx = ptsB[nextB], nbz = ptsB[nextB + 2];\r\n\r\n                if(\r\n                    rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], bx, bz)\r\n                    || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], ax, az)\r\n                ){\r\n                    adjacent++;\r\n                }\r\n\r\n                let intersection = linesIntersect(ax, az, nax, naz, bx, bz, nbx, nbz);\r\n                if(intersection &&\r\n                    (\r\n                        rectangleContainsPoint(smallValue, ptsA[0], ptsA[2], ptsA[6] - ptsA[0], ptsA[8] - ptsA[2], intersection.x, intersection.y)\r\n                        || rectangleContainsPoint(smallValue, ptsB[0], ptsB[2], ptsB[6] - ptsB[0], ptsB[8] - ptsB[2], intersection.x, intersection.y)\r\n                    )\r\n                ){\r\n                    intersections.push(intersection);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(adjacent > 1){\r\n            for(let i = 0; i < 12; i += 3) intersections.push({x: ptsA[i], y: ptsA[i + 2]}, {x: ptsB[i], y: ptsB[i + 2]});\r\n        }\r\n        else{\r\n            intersections.length = 0;\r\n        }\r\n\r\n        var rectangles = rectanglesFromPoints(intersections);\r\n\r\n        let rectA = { p1: {x: ptsA[0], y: ptsA[2]}, p2: {x: ptsA[3], y: ptsA[5]}, p3: {x: ptsA[6], y: ptsA[8]}, p4: {x: ptsA[9], y: ptsA[11]} };\r\n        let rectB = { p1: {x: ptsB[0], y: ptsB[2]}, p2: {x: ptsB[3], y: ptsB[5]}, p3: {x: ptsB[6], y: ptsB[8]}, p4: {x: ptsB[9], y: ptsB[11]} };\r\n        rectangles.push(rectA, rectB);\r\n\r\n        reduceRectangles(rectangles);\r\n        \r\n        return rectangles;\r\n    }\r\n\r\n    /**\r\n     * Deepest to front, smallest to largest\r\n     * @param {Region} a * @param {Region} b \r\n     */\r\n    static SortDeepestSmallest(a, b){\r\n        if(a.z < b.z) return -1;\r\n        if(a.z > b.z)return 1;\r\n        if(a.volume < b.volume) return -1;\r\n        if(a.volume > b.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nvar tempRegion = new Region();\r\nvar tempRegion2 = new Region();\r\nvar tempRegion3 = new Region();\r\nvar tempCorners = [0];\r\nvar tempPoints = [0];\r\nvar tempPoints2 = [0];\r\n\r\nclass PackedItem{\r\n\r\n    /**\r\n     * @param {Item} ref \r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @param {Number} z\r\n     * @param {Number} packedWidth\r\n     * @param {Number} packedHeight\r\n     * @param {Number} packedLength\r\n     * @param {Number} orientation \r\n     */\r\n    constructor(ref, x, y, z, packedWidth, packedHeight, packedLength, orientation){\r\n        this.ref = ref;\r\n        this.x = x; this.y = y; this.z = z;\r\n        this.packedWidth = packedWidth; this.packedHeight = packedHeight; this.packedLength = packedLength;\r\n        this.orientation = orientation;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static DepthSort(a, b){\r\n        let az = a.z + a.packedLength,\r\n            bz = b.z + b.packedLength;\r\n        if(az + smallValue < bz) return -1;\r\n        if(az > bz + smallValue) return 1;\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /** @param {PackedItem} a * @param {PackedItem} b */\r\n    static Sort(a, b){\r\n        if(a.z + smallValue < b.z){\r\n            if(a.z + a.packedLength > b.z && a.y > b.y) return 1;\r\n            return -1;\r\n        }\r\n        if(b.z + smallValue < a.z){\r\n            if(b.z + b.packedLength > a.z && b.y > a.y) return 1;\r\n            return 1;\r\n        }\r\n        if(a.y < b.y) return -1;\r\n        if(a.y > b.y) return 1;\r\n        if(a.ref.volume > b.ref.volume + smallValue) return -1;\r\n        if(a.ref.volume + smallValue < b.ref.volume) return 1;\r\n        return 0;\r\n    }\r\n}\r\n\r\nclass PackedContainer{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {CUBParams} params\r\n     */\r\n    constructor(container, params){\r\n        this.container = container;\r\n        this.params = params;\r\n        \r\n        /** @type {Array<PackedItem>} */\r\n        this.packedItems = [];\r\n        /** @type {Array<Item>} */\r\n        this.unpackedItems = [];\r\n\r\n        var firstRegion = new Region(0, 0, 0, container.width, container.height, container.length, 0);\r\n        /** @type {Array<Region>} */\r\n        this.regions = [firstRegion];\r\n\r\n        /** @type {Array<PackedItem>} */\r\n        this.tops = [];\r\n\r\n        this.cumulatedWeight = 0;\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    set items(items){\r\n        this.assistant = new PackingAssistant(items, this);\r\n    }\r\n\r\n    /** @param {PackedItem} item */\r\n    SetPacked(item){\r\n        this.cumulatedWeight += item.ref.weight;\r\n        this.packedItems.push(item);\r\n        this.tops.push(item);\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    SetUnpacked(item){\r\n        this.unpackedItems.push(item);\r\n    }\r\n\r\n    /** @param {Number} weight */\r\n    WeightPass(weight){\r\n        return this.cumulatedWeight + weight <= this.container.weightCapacity;\r\n    }\r\n\r\n    /** @param {Region} region * @param {Region} fit * @returns {Boolean} false if region has been deleted */\r\n    Occupy(region, fit){\r\n\r\n        // Subtracts fit from region and calculates new bounding regions\r\n        var newRegions = region.Subtract(fit, this.assistant.minRegionAxis, this.params.skipTop);\r\n\r\n        // Add new bounding regions if any\r\n        if(newRegions) this.regions.push(...newRegions);\r\n\r\n        // Check that region is still valid, otherwise remove it\r\n        if(region.length < this.assistant.minRegionAxis){\r\n            let regionIndex = this.regions.indexOf(region);\r\n            this.regions.splice(regionIndex, 1);\r\n            return false;\r\n        }\r\n\r\n        var debugUIDs = [];\r\n        if(!newRegions) newRegions = [];\r\n        newRegions.push(region);\r\n        newRegions.forEach(region => {\r\n            debugUIDs.push(debugRegion(region, 0xffff0000, true, -1, true));\r\n        });\r\n\r\n        debugClear(debugUIDs);\r\n\r\n        return true;\r\n    }\r\n\r\n    static SortByN(a, b){\r\n        if(isNaN(a.n) || isNaN(b.n)) return 0;\r\n\r\n        if(a.n < b.n) return -1;\r\n        if(a.n > b.n) return 1;\r\n        return 0;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    GetPlacementWithHighestScore(item){\r\n        var numRegions = this.regions.length;\r\n        var volumeItem = item.volume;\r\n        var validOrientations = item.validOrientations;\r\n\r\n        /** @typedef PlacementScore @property {Number} region region index @property {Number} orientation orientation index @property {Number} n score */\r\n        /** @type {Array<PlacementScore>} */\r\n        var regionScoreTable = [],\r\n            orientationScoreTable = [];\r\n        var testSuccessfulRegions = 4;\r\n        // Try to fit in sorted regions\r\n        for(let iRegion = 0; iRegion < numRegions && testSuccessfulRegions > 0; iRegion++){\r\n            let region = this.regions[iRegion];\r\n\r\n            if(region.volume > volumeItem){\r\n                let dummyRegion = tempRegion2.Copy(region);\r\n\r\n                orientationScoreTable.length = 0;\r\n                for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                    let orientation = validOrientations[iOrient];\r\n\r\n                    let dimensions = item.GetOrientedDimensions(orientation);\r\n                    let regionFitTest = region.FitTest(smallValue, dimensions[0], dimensions[1], dimensions[2]);\r\n                    if(regionFitTest !== false){\r\n\r\n                        testSuccessfulRegions--;\r\n\r\n                        // Subtracts fit from region and calculates new bounding regions\r\n                        let newRegions = dummyRegion.Subtract(regionFitTest, this.assistant.minRegionAxis, this.params.skipTop);\r\n                        if(newRegions === undefined) newRegions = [];\r\n                        if(dummyRegion.length > this.assistant.minRegionAxis)\r\n                            newRegions.push(dummyRegion);\r\n\r\n                        let orientationScore = {\r\n                            region: iRegion,\r\n                            orientation: orientation, \r\n                            n: this.assistant.RateFit(item, regionFitTest, newRegions)\r\n                        };\r\n                        orientationScoreTable.push(orientationScore);\r\n                    }\r\n                }\r\n\r\n                if(orientationScoreTable.length > 0){\r\n                    orientationScoreTable.sort(PackedContainer.SortByN);\r\n                    let regionScore = orientationScoreTable.pop();\r\n                    regionScoreTable.push(regionScore);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(regionScoreTable.length === 0){\r\n            return false;\r\n        }\r\n\r\n        regionScoreTable.sort(PackedContainer.SortByN);\r\n        let highestScore = regionScoreTable.pop();\r\n        return highestScore;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    FitLessWaste(item){\r\n        \r\n        let highestScore = this.GetPlacementWithHighestScore(item);\r\n\r\n        if(highestScore === false){\r\n            console.log('revertedToRegular');\r\n            return this.FitRegular(item);\r\n        }\r\n\r\n        let region = this.regions[highestScore.region];\r\n        let orientation = item.validOrientations[highestScore.orientation];\r\n        let dimensions = item.GetOrientedDimensions(orientation);\r\n        let regionFitTest = region.FitTest(smallValue, dimensions[0], dimensions[1], dimensions[2]);\r\n        if(regionFitTest !== false){\r\n            return this.CommitFit(item, region, regionFitTest, orientation);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    GetFirstFit(item){\r\n        var validOrientations = item.validOrientations;\r\n        var numRegions = this.regions.length;\r\n\r\n        // Try to fit in sorted regions\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let region = this.regions[iRegion];\r\n\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n\r\n                // Fit test (success: Region, failure: false)\r\n                let regionFitTest = region.FitTest(smallValue, dimensions[0], dimensions[1], dimensions[2]);\r\n                if(regionFitTest !== false){\r\n                    /** @typedef Placement @property {Number} region region index @property {Number} orientation orientation index */\r\n                    /** @type {Placement} */\r\n                    let result = {region: iRegion, orientation: orientation};\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item */\r\n    FitRegular(item){\r\n\r\n        var firstFit = this.GetFirstFit(item);\r\n        if(firstFit){\r\n\r\n            let region = this.regions[firstFit.region];\r\n            let orientation = item.validOrientations[firstFit.orientation];\r\n            let dimensions = item.GetOrientedDimensions(orientation);\r\n\r\n            let regionFitTest = region.FitTest(smallValue, dimensions[0], dimensions[1], dimensions[2]);\r\n            if(regionFitTest !== false){\r\n\r\n                return this.CommitFit(item, region, regionFitTest, orientation);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @param {Item} item @param {Region} containingRegion @param {Region} placement @param {Number} orientation */\r\n    CommitFit(item, containingRegion, placement, orientation){\r\n        \r\n        let numPackedItems = this.packedItems.length;\r\n\r\n        // Make sure that the new 'packed item to be' does not collide with a previous one\r\n        for(let iPacked = 0; iPacked < numPackedItems; iPacked++){\r\n            let packedItem = this.packedItems[iPacked];\r\n            // Creates temporary region for following calculations\r\n            let packedRegion = tempRegion2.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n            \r\n            let intersects = packedRegion.Intersects(-smallValue, placement);\r\n            if(intersects){\r\n                console.log('revertedToRegular');\r\n                return this.FitRegular(item);\r\n            }\r\n        }\r\n\r\n        // Create a new packed item\r\n        let packedItem = new PackedItem(item, placement.x, placement.y, placement.z, placement.width, placement.height, placement.length, orientation);\r\n        /**/let debugUID = debugRegion(placement, 0xffff0000, true);\r\n\r\n        // Reserve the tested sub region: regionFitTest from the containing region: region\r\n        let regionRemains = this.Occupy(containingRegion, placement);\r\n\r\n        /**/debugClear([debugUID]);\r\n        debugRegion(placement, 0xffffffff, false);\r\n\r\n        return packedItem;\r\n    }\r\n\r\n    ProcessRegionsPreferredX(){\r\n        var regions = this.regions,\r\n            numRegions = regions.length;\r\n        var containerWidth = this.container.width;\r\n\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(Math.abs(region.x) < smallValue) region.preferredX = 0;\r\n            else if(Math.abs(region.x + region.width - containerWidth) < smallValue) region.preferredX = 1;\r\n        }\r\n    }\r\n\r\n    ProcessRegionsMergeExpand(){\r\n        var regions = this.regions,\r\n            numRegions = regions.length;\r\n\r\n        var toInt = 1 / smallValue;\r\n        function coordID(value){\r\n            return Math.floor(value * toInt);\r\n        }\r\n\r\n        /** @typedef Level @property {Number} y @property {Array<import('./Math2D').Rectangle>} rectangles */\r\n        /** @type {Array<Level>} */\r\n        var levels = {};\r\n\r\n        var neighbours = [], rectangles = [];\r\n        for(let iRegion = 0; iRegion < numRegions; iRegion++){\r\n            let regionA = regions[iRegion];\r\n            neighbours.length = 0;\r\n            neighbours.push(iRegion);\r\n            \r\n            for(let jRegion = iRegion + 1; jRegion < numRegions; jRegion++){\r\n                let regionB = regions[jRegion];\r\n\r\n                if(Math.abs(regionA.y - regionB.y) < smallValue){\r\n                    let intersects = regionA.Intersects(smallValue, regionB);\r\n                    if(intersects){\r\n                        neighbours.push(jRegion);\r\n                    }\r\n                }\r\n            }\r\n\r\n            let numNeighbours = neighbours.length;\r\n            if(numNeighbours > 1){\r\n                rectangles.length = 0;\r\n\r\n                for(let iNeighbour = 0; iNeighbour < numNeighbours; iNeighbour++){\r\n                    let neighbourA = regions[neighbours[iNeighbour]];\r\n\r\n                    for(let jNeighbour = iNeighbour + 1; jNeighbour < numNeighbours; jNeighbour++){\r\n                        let neighbourB = regions[neighbours[jNeighbour]];\r\n\r\n                        rectangles.push(...neighbourA.ConnectFloorRects(neighbourB));\r\n                    }\r\n                }\r\n\r\n                if(rectangles.length > 0){\r\n                    let yCat = coordID(regionA.y);\r\n                    if(levels[yCat] === undefined) levels[yCat] = {y: regionA.y, rectangles: []};\r\n                    levels[yCat].rectangles.push(...rectangles);\r\n                }\r\n            }\r\n        }\r\n\r\n        var levelsYCats = Object.keys(levels);\r\n        for(let iYCat = 0, numYCats = levelsYCats.length; iYCat < numYCats; iYCat++){\r\n            /** @type {Level} */\r\n            let level = levels[levelsYCats[iYCat]];\r\n            let rectangles = level.rectangles;\r\n            let regionY = level.y;\r\n            let regionHeight = this.container.height - regionY;\r\n            \r\n            reduceRectangles(rectangles);\r\n            for(let iRect = 0, numRects = rectangles.length; iRect < numRects; iRect++){\r\n                let rect = rectangles[iRect];\r\n                let rx = rect.p1.x, ry = rect.p1.y;\r\n                let rw = rect.p3.x - rx, rh = rect.p3.y - ry;\r\n\r\n                // Calculate preferred packing side based on center point relative to container\r\n                let preferredX = (rx.x + rw / 2) < (this.container.width / 2) ? 0 : 1;\r\n                let newRegion = new Region(rx, regionY, ry, rw, regionHeight, rh, preferredX);\r\n                this.regions.push(newRegion);\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsForZeroRegions(){\r\n        var regions = this.regions;\r\n        var minRegionAxis = this.assistant.minRegionAxis;\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n            if(region.width < minRegionAxis || region.height < minRegionAxis || region.length < minRegionAxis){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsPerPackedItem(packedItem, harsh){\r\n        var regions = this.regions;\r\n        let itemVolume = packedItem.ref.volume;\r\n        \r\n        // Creates temporary region for following calculations\r\n        let packedRegion = tempRegion.Set(packedItem.x, packedItem.y, packedItem.z, packedItem.packedWidth, packedItem.packedHeight, packedItem.packedLength, 0);\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let region = regions[iRegion];\r\n\r\n            if(itemVolume > region.volume && packedRegion.ContainsRegion(smallValue, region)){\r\n                regions.splice(iRegion, 1);\r\n                iRegion--;\r\n                console.log('Contained region' + iRegion + ' deleted');\r\n                continue;\r\n            }\r\n\r\n            if(packedRegion.Intersects(-smallValue, region)){\r\n\r\n                if(harsh){\r\n                    console.log('\\tIntersecting region' + iRegion + ' deleted (!)');\r\n                    regions.slice(iRegion, 1);\r\n                    iRegion--;\r\n                    continue;\r\n                }\r\n                \r\n                let regionRemains = this.Occupy(region, packedRegion);\r\n                iRegion --;\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegionsForPackedItems(harsh){\r\n        var packedItems = this.packedItems,\r\n            numPackedItems = packedItems.length;\r\n\r\n        for(let iItem = 0; iItem < numPackedItems; iItem++){\r\n            let packedItem = packedItems[iItem];\r\n            this.ProcessRegionsPerPackedItem(packedItem, harsh);\r\n        }\r\n    }\r\n\r\n    ProcessRegionsEnclosed(){\r\n        var regions = this.regions;\r\n\r\n        for(let iRegion = 0; iRegion < regions.length; iRegion++){\r\n            let regionA = regions[iRegion];\r\n            let volumeA = regionA.volume;\r\n\r\n            for(let jRegion = iRegion + 1; jRegion < regions.length; jRegion++){\r\n                let regionB = regions[jRegion];\r\n                let volumeB = regionB.volume;\r\n\r\n                if(volumeA < volumeB){\r\n                    // If a A is completely contained within B, remove the A\r\n                    if(regionB.ContainsRegion(smallValue, regionA)){\r\n                        regions.splice(iRegion, 1);\r\n                        iRegion--;\r\n                        break;\r\n                    }\r\n                }\r\n                else{\r\n                    // If a B is completely contained within A, remove the B\r\n                    if(regionA.ContainsRegion(smallValue, regionB)){\r\n                        regions.splice(jRegion, 1);\r\n                        jRegion--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    ProcessRegions(){\r\n        var regions = this.regions;\r\n\r\n        if(global.processRegionsCount === undefined) global.processRegionsCount = 0;\r\n\r\n        // Recalculate preferred insertion side per region (left or right)\r\n        this.ProcessRegionsPreferredX();\r\n\r\n        // Removes regions that are completely enclosed in packed volumes, and correct any intersecting ones\r\n        this.ProcessRegionsForPackedItems();\r\n\r\n        // Merge and expand free regions (can span several packed item tops)\r\n        this.ProcessRegionsMergeExpand();\r\n\r\n        // Removes unuseable regions\r\n        this.ProcessRegionsForZeroRegions();\r\n\r\n        // Removes regions that are completely enclosed in larger regions\r\n        this.ProcessRegionsEnclosed();\r\n\r\n        // Sort by z (first) and volume (second)\r\n        regions.sort(Region.SortDeepestSmallest);\r\n\r\n        this.packedItems.sort(PackedItem.Sort);\r\n    }\r\n}\r\n\r\nclass PackingAssistant{\r\n    /**\r\n     * @param {Array<Item>} items \r\n     * @param {PackedContainer} packedContainer \r\n     */\r\n    constructor(items, packedContainer){\r\n\r\n        global.assistant = this;\r\n        this.debugRegion = function(regionIndex){\r\n\r\n        }\r\n\r\n        this.params = {\r\n            minDimensionsNoWasteFactor: [1, 1, 1]\r\n        };\r\n\r\n        this.workingItems = items;\r\n        this.packedContainer = packedContainer;\r\n        this.workingRegions = this.packedContainer.regions;\r\n\r\n        this.minRegionAxis = smallValue;\r\n\r\n        this.workingItemsSortFunction = Item.VolumeSort;\r\n\r\n        // Sort items by volume ascending\r\n        this.workingItems.sort(this.workingItemsSortFunction);\r\n\r\n        var minDimensionsSearchSet = this.workingItems;\r\n        //minDimensionsSearchSet = [this.workingItems[0]];\r\n        this.minDimensions = this.GetMinDimensionsOverall(minDimensionsSearchSet);\r\n    }\r\n\r\n    /** @param {Array<Item>} items */\r\n    GetMinDimensionsOverall(items){\r\n        var minDimensions = [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER];\r\n\r\n        for(let iItem = 0, numItems = items.length; iItem < numItems; iItem++){\r\n            let item = items[iItem];\r\n            var validOrientations = item.validOrientations;\r\n            for(let iOrient = 0; iOrient < validOrientations.length; iOrient++){\r\n                let orientation = validOrientations[iOrient];\r\n                let dimensions = item.GetOrientedDimensions(orientation);\r\n                if(dimensions[0] < minDimensions[0]) minDimensions[0] = dimensions[0];\r\n                if(dimensions[1] < minDimensions[1]) minDimensions[1] = dimensions[1];\r\n                if(dimensions[2] < minDimensions[2]) minDimensions[2] = dimensions[2];\r\n            }\r\n        }\r\n\r\n        return minDimensions;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Item} fittedItem \r\n     * @param {Region} fit \r\n     * @param {Array<Region>} newRegions \r\n     */\r\n    RateFit(fittedItem, fit, newRegions){\r\n        \r\n        // Try out a recursive deep rate fit\r\n\r\n        var containerLength = this.packedContainer.container.length;\r\n        var minDimensions = this.minDimensions;\r\n        var minDimensionsNoWasteFactor = this.params.minDimensionsNoWasteFactor;\r\n\r\n        var minZScore = 1 - (fit.z + fit.length) / containerLength; // 0-1\r\n\r\n        // new regions usability score\r\n        var minWasteScore = 1; // have completely filled the region if newRegions.length === 0\r\n        if(newRegions.length > 0){\r\n            minWasteScore = 0;\r\n            for(let iRegion = 0; iRegion < newRegions.length; iRegion++){\r\n                let region = newRegions[iRegion];\r\n                \r\n                let scoreW = 0, scoreH = 0, scoreL = 0;\r\n                if(region.width >= minDimensions[0] && (region.width - minDimensions[0]) < minDimensions[0] * minDimensionsNoWasteFactor[0]) scoreW += 1;\r\n                if(region.height >= minDimensions[1] && (region.width - minDimensions[1]) < minDimensions[1] * minDimensionsNoWasteFactor[1]) scoreH += 1;\r\n                if(region.length >= minDimensions[2] && (region.width - minDimensions[2]) < minDimensions[2] * minDimensionsNoWasteFactor[2]) scoreL += 1;\r\n                \r\n                minWasteScore += scoreW * .5 + scoreH * .3 + scoreL * .2;\r\n            }\r\n            minWasteScore /= newRegions.length;\r\n        }\r\n\r\n        var minZ_weight = this.packedContainer.params.minZ_weight;\r\n        var minWaste_weight = this.packedContainer.params.minWaste_weight;\r\n        var score = minZScore * minZ_weight + minWasteScore * minWaste_weight;\r\n        return score;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef CUBParams\r\n * @property {Number} minZ_weight\r\n * @property {Number} minWaste_weight\r\n * @property {Boolean} skipTop\r\n */\r\n\r\n/** @type {CUBParams} */\r\nconst defaultParams = {\r\n    minZ_weight: .9,\r\n    minWaste_weight: .1,\r\n    skipTop: false\r\n};\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n * @param {Array<Item>} items // this array (and content) will be changed/emptied\r\n * @param {CUBParams} params \r\n */\r\nasync function pack(container, items, params){\r\n\r\n    this.params = Utils.AssignUndefined(params, defaultParams);\r\n    console.log('CUBParams:', this.params);\r\n\r\n    Debug.Viz.SetPackingSpaceVisibility(false);\r\n\r\n    var packedContainer = new PackedContainer(container, this.params);\r\n    packedContainer.items = items;\r\n\r\n    var iItem = items.length - 1;\r\n\r\n    // Helper function\r\n    function unpackItem(index){\r\n        let item = items[index];\r\n        packedContainer.SetUnpacked(item);\r\n        items.splice(index, 1);\r\n        iItem--;\r\n    }\r\n\r\n    // Helper function\r\n    /** @param {Number} index * @param {PackedItem} item */\r\n    function packItem(index, item){\r\n        packedContainer.SetPacked(item);\r\n        \r\n        item.ref.quantity--;\r\n        if(item.ref.quantity === 0){\r\n            items.splice(index, 1);\r\n            iItem--;\r\n        }\r\n    }\r\n\r\n    while(items.length > 0){\r\n        let item = items[iItem];\r\n\r\n        // Clean-up regions\r\n        packedContainer.ProcessRegions();\r\n        /**/await sleep(16);\r\n\r\n        // Check if container supports this item's weight\r\n        let weightPass = packedContainer.WeightPass(item.weight);\r\n        if( weightPass === false ){\r\n\r\n            /**/debugLog('weight pass failed.');\r\n            unpackItem(iItem);\r\n        }\r\n        else{\r\n\r\n            // Try to pack item\r\n            let packedItem = packedContainer.FitLessWaste(item);\r\n            if( packedItem === false ){\r\n\r\n                /**/debugLog('item fitting failed.');\r\n                unpackItem(iItem);\r\n            }\r\n            else{\r\n\r\n                packItem(iItem, packedItem);\r\n            }\r\n        }\r\n\r\n        /**/await sleep(16);\r\n    }\r\n\r\n    packedContainer.packedItems.sort(PackedItem.Sort);\r\n\r\n    debugClear();\r\n    Debug.Viz.SetPackingSpaceVisibility(true);\r\n\r\n    return packedContainer;\r\n}\r\n\r\nexport {\r\n    pack\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/CUB.js","import Item from \"./components/Item\";\r\nimport Container from \"./components/Container\";\r\n\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 28, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 23, Height: 34, Quantity: 20 },\r\n            { ID: 1005, Name: 'Item6', Length: 45,  Width: 20, Height: 30, Quantity: 30 },\r\n            { ID: 1005, Name: 'Item6', Length: 35,  Width: 22, Height: 18, Quantity: 27 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n\r\n    /** \r\n     * @param {Item} item\r\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n     */\r\n    static ResolveOrientation(item){\r\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\r\n\r\n        if(almost(item.PackDimX, w)){ // x\r\n            if(almost(item.PackDimY, h)){ // y\r\n                return 'xyz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'xzy';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, h)){ // y\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'yxz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'yzx';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, l)){ // z\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'zxy';\r\n            }\r\n            else if(almost(item.PackDimY, h)){ // y\r\n                return 'zyx';\r\n            }\r\n        }\r\n\r\n        return 'xyz';\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","\r\n/** @typedef Vec2 @property {Number} x @property {Number} y */\r\n/** @typedef Rectangle @property {Vec2} p1 @property {Vec2} p2 @property {Vec2} p3 @property {Vec2} p4 */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst smallValue = .000001;\r\nconst smallValueSqrt = .001;\r\n\r\n// line intercept math by Paul Bourke http://paulbourke.net/geometry/pointlineplane/\r\n// Determine the intersection point of two line segments\r\n// Return FALSE if the lines don't intersect\r\nfunction segmentIntersect(x1, y1, x2, y2, x3, y3, x4, y4) {\r\n\r\n    // Check if none of the lines are of length 0\r\n    if ((x1 === x2 && y1 === y2) || (x3 === x4 && y3 === y4)) {\r\n        return false;\r\n    }\r\n  \r\n    var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1));\r\n  \r\n    // Lines are parallel\r\n    if (Math.abs(denominator) < epsilon) {\r\n        return false;\r\n    }\r\n  \r\n    var ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator;\r\n    var ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\r\n  \r\n    // is the intersection along the segments\r\n    if (ua > 0 || ua < 1 || ub > 0 || ub < 1) return false;\r\n  \r\n    // Return a object with the x and y coordinates of the intersection\r\n    var x = x1 + ua * (x2 - x1);\r\n    var y = y1 + ua * (y2 - y1);\r\n\r\n    return {x, y};\r\n}\r\n\r\nfunction linesIntersect(ax, ay, bx, by, cx, cy, dx, dy){\r\n    // Line AB represented as a1x + b1y = c1\r\n    var a1 = by - ay,\r\n        b1 = ax - bx;\r\n    var c1 = a1 * ax + b1 * ay;\r\n  \r\n    // Line CD represented as a2x + b2y = c2\r\n    var a2 = dy - cy,\r\n        b2 = cx - dx;\r\n    var c2 = a2 * cx + b2 * cy;\r\n  \r\n    var determinant = a1 * b2 - a2 * b1;\r\n  \r\n    // The lines are parallel\r\n    if (Math.abs(determinant) < smallValue) return false;\r\n\r\n    var x = (b2 * c1 - b1 * c2) / determinant;\r\n    var y = (a1 * c2 - a2 * c1) / determinant;\r\n    return {x: x, y: y};\r\n}\r\n\r\nfunction rectangleContainsPoint(offset, rx, ry, rw, rh, px, py){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return px > x && px < x + w\r\n        && py > y && py < y + h;\r\n}\r\n\r\n/** @param {Number} offset offsets the region by this before checking * @param {Region} subRegion */\r\nfunction rectangleContainsRectangle(offset, rx, ry, rw, rh, ox, oy, ow, oh){\r\n    var x = rx - offset, y = ry - offset, w = rw + offset * 2, h = rh + offset * 2;\r\n    return ox > x && ox + ow < x + w\r\n        && oy > y && oy + oh < y + h;\r\n}\r\n\r\n/**\r\n * @param {Array<Vec2>} points\r\n */\r\nfunction rectanglesFromPoints(points){\r\n    // Separate points in lists of 'y' coordinate, grouped by 'x' coordinate\r\n    const toInt = Math.round(1 / smallValue);\r\n    var xs = {};\r\n    points.forEach(point => {\r\n        let xCat = Math.floor(point.x * toInt);\r\n        if(xs[xCat] === undefined) xs[xCat] = {x: point.x, ys: []};\r\n        let ys = xs[xCat].ys;\r\n        let yCat = Math.floor(point.y * toInt);\r\n        let insert = true;\r\n        for(let iY = 0; iY < ys.length; iY++){\r\n            if(ys[iY].yCat === yCat) insert = false;\r\n        }\r\n        if(insert) ys.push({yCat: yCat, y: point.y});\r\n    });\r\n\r\n    //console.log('xs:', xs);\r\n\r\n    // Intersect lists\r\n    function sortYCat(a, b){\r\n        if(a.yCat < b.yCat) return -1;\r\n        if(a.yCat > b.yCat) return 1;\r\n        return 0;\r\n    }\r\n    var xsKeys = Object.keys(xs);\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat = xs[xsKeys[iX]];\r\n        xCat.ys.sort(sortYCat);\r\n    }\r\n\r\n    /** @typedef IntersectedX @property {Number} x1 @property {Number} x2 @property {Array<Number>} ys */\r\n    /** @type {Array<IntersectedX>} */\r\n    var intersectedXs = [];\r\n    for(let iX = 0; iX < xsKeys.length; iX++){\r\n        let xCat1 = xs[xsKeys[iX]];\r\n        let ys1 = xCat1.ys;\r\n        for(let iX2 = iX + 1; iX2 < xsKeys.length; iX2++){\r\n            let xCat2 = xs[xsKeys[iX2]];\r\n            let ys2 = xCat2.ys;\r\n\r\n            let yIntersect = [];\r\n            let xIntersect = {x1: xCat1.x, x2: xCat2.x, ys: yIntersect};\r\n            for(let iY1 = 0; iY1 < ys1.length; iY1++){\r\n                for(let iY2 = 0; iY2 < ys2.length; iY2++){\r\n                    if(ys1[iY1].yCat === ys2[iY2].yCat){\r\n                        yIntersect.push(ys1[iY1].y);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(yIntersect.length > 1) intersectedXs.push(xIntersect);\r\n        }\r\n    }\r\n\r\n    //console.log(intersectedXs);\r\n\r\n    /** @type {Array<Rectangle>} */\r\n    var rectangles = [];\r\n    for(let iIX = 0; iIX < intersectedXs.length; iIX++){\r\n        let intersectedX = intersectedXs[iIX];\r\n        let ys = intersectedX.ys;\r\n        let x1 = intersectedX.x1, x2 = intersectedX.x2;\r\n        for(let iY1 = 0; iY1 < ys.length; iY1++){\r\n            for(let iY2 = iY1 + 1; iY2 < ys.length; iY2++){\r\n                let p1 = {x: x1, y: ys[iY1]},\r\n                    p2 = {x: x2, y: ys[iY1]},\r\n                    p3 = {x: x2, y: ys[iY2]},\r\n                    p4 = {x: x1, y: ys[iY2]};\r\n                \r\n                let rectangle = {p1: p1, p2: p2, p3: p3, p4: p4};\r\n                rectangles.push(rectangle);\r\n            }\r\n        }\r\n    }\r\n\r\n    return rectangles;\r\n}\r\n\r\n/**\r\n * @param {Array<Rectangle>} rectangles \r\n * @returns {Array<Rectangle>} the array is edited in-place\r\n */\r\nfunction reduceRectangles(rectangles){\r\n    for(let iRect = 0; iRect < rectangles.length; iRect++){\r\n        let ra = rectangles[iRect];\r\n        let ax = ra.p1.x, ay = ra.p1.y;\r\n        let aw = ra.p3.x - ax, ah = ra.p3.y - ay;\r\n        for(let jRect = 0; jRect < rectangles.length; jRect++){\r\n            if(iRect !== jRect){\r\n                let rb = rectangles[jRect];\r\n                let bx = rb.p1.x, by = rb.p1.y;\r\n                let bw = rb.p3.x - bx, bh = rb.p3.y - by;\r\n                if(rectangleContainsRectangle(smallValue, ax, ay, aw, ah, bx, by, bw, bh)){\r\n                    rectangles.splice(jRect, 1);\r\n                    jRect--;\r\n                    iRect = Math.max(0, jRect - 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return rectangles;\r\n}\r\n\r\n/** @param {Number} ax @param {Number} ay @param {Number} bx @param {Number} by @param {Number} x @param {Number} y */\r\nfunction segmentContainsPoint(ax, ay, bx, by, x, y){\r\n    var vx = bx - ax, vy = by - ay,\r\n        vxa = x - ax, vya = y - ay,\r\n        vxb = x - bx, vyb = y - by;\r\n    var d = Math.sqrt(vx * vx + vy * vy),\r\n        da = Math.sqrt(vxa * vxa + vya * vya),\r\n        db = Math.sqrt(vxb * vxb + vyb * vyb);\r\n    return Math.abs( d - (da + db) ) < smallValueSqrt;\r\n}\r\n\r\nexport {\r\n    linesIntersect,\r\n    rectangleContainsPoint,\r\n    rectangleContainsRectangle,\r\n    reduceRectangles,\r\n    rectanglesFromPoints\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/cub/Math2D.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\nimport Container from \"../packer/container/Container\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Object} cargoListView\r\n * @property {Number} cargoListView.paddingZ\r\n * @property {Number} cargoListView.paddingY\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    cargoListView: {\r\n        paddingZ: 120,\r\n        paddingY: 40,\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {\r\n            animationDuration: 1\r\n        }\r\n    }\r\n};\r\n\r\nvar tempBox3 = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, params){\r\n\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var scope = this;\r\n        var units = this.params.ux.params.units;\r\n\r\n        // Fill lights\r\n        if(true){\r\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, true);\r\n\r\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\r\n            let dlData = {\"color\":\"0xfceeee\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.00001,\"shadow.radius\":4,\"shadow.mapSize.x\":4096,\"shadow.mapSize.y\":4096,\"shadow.camera.left\":-400,\"shadow.camera.top\":300,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-300,\"shadow.camera.near\":20,\"shadow.camera.far\":800};\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            Config.Load(dl, dlData);\r\n\r\n            if(this.sceneSetup.ux.params.hud){\r\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\r\n            }\r\n\r\n            let dlComp = lights.filter(light => light instanceof THREE.DirectionalLight)[1];\r\n            dlComp.castShadow = true;\r\n        }\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        /** @param {Container} container */\r\n        function onContainerAdded(container){\r\n            /** @type {THREE.Box3} */\r\n            let box3 = container.combinedVolume.box3;\r\n            scope.sceneSetup.cameraController.Frame(box3, .7);\r\n            scope.packingSpaceView.Add(container);\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getSize(tempVec);\r\n            console.log('container box3:', tempBox3);\r\n            let containerSize = Math.max(tempVec.x, tempVec.y, tempVec.z);\r\n            scope.cargoListView.view.position.z = containerSize / 2 + scope.params.cargoListView.paddingZ * units;\r\n            scope.cargoListView.view.position.y = scope.params.cargoListView.paddingY * units;\r\n        }\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n\r\n        this.sceneSetup.input.AddRaycastGroup('OnClick', 'cargoListView', this.cargoListView.raycastGroup);\r\n        console.log('_raycastGroups:', this.sceneSetup.input._raycastGroups);\r\n\r\n        this.sceneSetup.sceneController.AddDefault(this.cargoListView.view);\r\n\r\n        function onCargoListViewChanged(){\r\n            tempBox3.setFromObject(scope.cargoListView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let listViewCenterX = tempVec.x;\r\n            scope.cargoListView.view.getWorldPosition(tempVec);\r\n            let offsetX = listViewCenterX - tempVec.x;\r\n\r\n            tempBox3.setFromObject(scope.packingSpaceView.view);\r\n            tempBox3.getCenter(tempVec);\r\n            let centerX = tempVec.x;\r\n\r\n            scope.cargoListView.view.position.x = centerX - offsetX;\r\n        }\r\n        function onCargoGroupAdded(group){\r\n            scope.cargoListView.Add(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        function onCargoGroupRemoved(group){\r\n            scope.cargoListView.Remove(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoGroupRemoved);\r\n        function onCargoGroupModified(group){\r\n            scope.cargoListView.Update(group);\r\n            onCargoListViewChanged();\r\n        }\r\n        packer.cargoList.On(CargoList.signals.groupModified, onCargoGroupModified);\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        /** @param {Packer.PackingResult} packingResult */\r\n        async function onPackUpdate(packingResult){\r\n            await scope.packResultView.DisplayPackingResult(packingResult);\r\n        }\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        if(this.params.ux.params.hud){\r\n            this.HUDSetup();\r\n        }\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var scope = this;\r\n\r\n\r\n    }\r\n\r\n    ClearPackingResults(){\r\n        this.packResultView.Clear();\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.view);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Tween from '../utils/cik/Tween';\r\nimport Packer from '../packer/Packer';\r\nimport BoxEntry from '../components/box/BoxEntry';\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Number} animationDuration\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    let packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nfunction getOrientationAngles(orientation){\r\n    switch(orientation){\r\n        case 'xyz': return  [0,     0,      0];\r\n        case 'xzy': return  [90,    0,      0];\r\n        case 'yxz': return  [0,     0,      90];\r\n        case 'yzx': return  [90,    0,      90];\r\n        case 'zxy': return  [90,    -90,    0];\r\n        case 'zyx': return  [0,     -90,    0];\r\n    }\r\n}\r\n\r\n/**\r\n * @param {string} orientation \r\n */\r\nfunction getOrientationEuler(orientation){\r\n    const rad = Math.PI / 180.0;\r\n    let a = getOrientationAngles(orientation);\r\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\r\n}\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass PackResultView{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        /** @type {Array<CargoView} */\r\n        this.cargoViews = [];\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Packer.PackingResult} packingResult\r\n     */\r\n    async DisplayPackingResult(packingResult){\r\n\r\n        let units = this.params.ux.params.units;\r\n        \r\n        let containingVolume = packingResult.packed[0].containingVolume;\r\n        let matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        let offset = new THREE.Vector3();\r\n        let orientation = new THREE.Quaternion();\r\n        let scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n        /** @type {Map<CargoView, Number>} */\r\n        let packedQuantities = new Map();\r\n\r\n        let animatingViews = this.animatingViews;\r\n        let view = this.view;\r\n        let onTweenComplete = this.OnCargoFirstTweenComplete.bind(this);\r\n        let zEntry = containingVolume.dimensions.length;\r\n        let numPackedItems = packingResult.packed.length;\r\n        let delayPerItem = this.params.animationDuration * 1000 / numPackedItems;\r\n        for(let i = 0; i < numPackedItems; i++){\r\n            let item = packingResult.packed[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            let packedQuantity = packedQuantities.get(cargoViewTemplate);\r\n            let totalQuantity = cargoViewTemplate.entry.quantity;\r\n            if(packedQuantity === undefined) packedQuantities.set(cargoViewTemplate, packedQuantity = 0);\r\n            packedQuantities.set(cargoViewTemplate, ++packedQuantity);\r\n            let textColor = packedQuantity === totalQuantity ? 'rgb(255, 255, 255)' : 'rgb(255, 0, 0)';\r\n            this.cargoListView.UpdateLabel(cargoViewTemplate, packedQuantity + '/' + totalQuantity, textColor);\r\n\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            this.cargoViews.push(packedCargoView);\r\n\r\n            let rotation = getOrientationEuler(item.orientation);\r\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\r\n\r\n            let x = item.position.x + offset.x,\r\n                y = item.position.y + offset.y,\r\n                z = item.position.z + offset.z;\r\n\r\n            let posTweenCombo = Tween.Combo.Request3(Tween.functions.ease.easeOutQuad,\r\n                x, y, zEntry, \r\n                0, 0, z - zEntry,\r\n                .5\r\n            );\r\n            \r\n            posTweenCombo.extraData = packedCargoView;\r\n            posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n            posTweenCombo.onComplete = onTweenComplete;\r\n            posTweenCombo.Update(0);\r\n            animatingViews.push(posTweenCombo);\r\n    \r\n            view.add(packedCargoView.view);\r\n            await sleep(delayPerItem);\r\n        }\r\n\r\n        await sleep(500);\r\n\r\n        let unpackedOffset = 6 * units;\r\n        for(let i = 0, numUnpackedItems = packingResult.unpacked.length; i < numUnpackedItems; i++){\r\n            let item = packingResult.unpacked[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n\r\n            if(i === 0) unpackedOffset += item.entry.dimensions.width / 2;\r\n\r\n            for(let j = 0; j < item.unpackedQuantity; j++){\r\n                let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n                this.cargoViews.push(packedCargoView);\r\n                \r\n                let x = containingVolume.dimensions.width * 1.5 + unpackedOffset + offset.x,\r\n                    y = item.entry.dimensions.height / 2 + offset.y,\r\n                    z = item.entry.dimensions.length * j + offset.z;\r\n\r\n                let posTweenCombo = Tween.Combo.Request3(Tween.functions.ease.easeOutQuad,\r\n                    x, y, zEntry, \r\n                    0, 0, z - zEntry,\r\n                    .5\r\n                );\r\n                \r\n                posTweenCombo.extraData = packedCargoView;\r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenComplete;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n        \r\n                view.add(packedCargoView.view);\r\n                await sleep(delayPerItem * .5);\r\n            }\r\n\r\n            unpackedOffset += item.entry.dimensions.width + 6 * units;\r\n        }\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnCargoFirstTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        this.OnTweenComplete(tween);\r\n        let scaleTweenCombo = Tween.Combo.Request3(Tween.functions.special.pingPong,\r\n            1, 1, 1, \r\n            .1, .1, .1,\r\n            .1\r\n        );\r\n        \r\n        scaleTweenCombo.extraData = packedCargoView;\r\n        scaleTweenCombo.Hook(packedCargoView.view.scale, 'x', 'y', 'z');\r\n        scaleTweenCombo.onComplete = this.OnTweenComplete.bind(this);;\r\n        scaleTweenCombo.Update(0);\r\n        this.animatingViews.push(scaleTweenCombo);\r\n    }\r\n\r\n    /** @param {Tween|Tween.Combo} tween */\r\n    OnTweenComplete(tween){\r\n        let packedCargoView = tween.extraData;\r\n        packedCargoView.view.scale.set(1, 1, 1);\r\n        let index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    SelectEntry(entryUID){\r\n        if(!entryUID){\r\n            this.DisableHighlights();\r\n        }\r\n        else{\r\n            this.Highlight(entryUID);\r\n        }\r\n    }\r\n\r\n    DisableHighlights(){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            this.cargoViews[i].focus = 1;\r\n        }\r\n    }\r\n\r\n    /** @param {string} entryUID */\r\n    Highlight(entryUID){\r\n        for(let i = 0, numCargoViews = this.cargoViews.length; i < numCargoViews; i++){\r\n            let cargoView = this.cargoViews[i];\r\n\r\n            let cvEntry = cargoView.entry;\r\n            if(cvEntry.uid === entryUID){\r\n                cargoView.focus = 1.75;\r\n            }\r\n            else{\r\n                cargoView.focus = .25;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    Slice(value){\r\n        if(value >= 1){\r\n            this.view.children.forEach(child => {\r\n                child.visible = true;\r\n            });\r\n            return;\r\n        }\r\n\r\n        let minY = Number.MAX_SAFE_INTEGER, maxY = Number.MIN_SAFE_INTEGER;\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n            let high = tempVec.y + halfHeight;\r\n            if(low < minY) minY = low;\r\n            if(high > maxY) maxY = high;\r\n        });\r\n\r\n        let y = minY + value * (maxY - minY);\r\n\r\n        //console.log('slice ' + y.toFixed(2) + ' between ' + minY.toFixed(2) + ' and ' + maxY.toFixed(2));\r\n\r\n        this.view.children.forEach(child => {\r\n            tempBox.setFromObject(child);\r\n            tempBox.getSize(tempVec);\r\n            let halfHeight = tempVec.y / 2;\r\n            tempBox.getCenter(tempVec);\r\n            let low = tempVec.y - halfHeight;\r\n\r\n            if(low < y) child.visible = true;\r\n            else child.visible = false;\r\n        });\r\n    }\r\n\r\n    Clear(){\r\n        this.animatingViews.length = 0;\r\n        this.cargoViews.length = 0;\r\n        while(this.view.children.length > 0) this.view.remove(this.view.children[this.view.children.length - 1]);\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Asset from \"../components/assets/Asset\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff, flatShading: true});\r\n\r\nconst _wireMaterialSettings = Symbol('wireMatSet');\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 1;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n        meshMaterial.blending = THREE.NormalBlending;\r\n        meshMaterial.depthTest = true;\r\n        meshMaterial.depthWrite = false;\r\n\r\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.renderOrder = Number.MAX_SAFE_INTEGER - 1;\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /** @param {Number} value */\r\n    set focus(value){\r\n        super.focus = value;\r\n\r\n        if(this[_wireMaterialSettings]) Asset.RestoreMaterial(this.wireMesh.material, this[_wireMaterialSettings]);\r\n\r\n        if(Math.abs(1 - value) > .0001){\r\n            if(this[_wireMaterialSettings] === undefined){\r\n                this.wireMesh.material = this.wireMesh.material.clone();\r\n                this[_wireMaterialSettings] = {};\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value, this[_wireMaterialSettings]);\r\n            }\r\n            else{\r\n                Asset.SetMaterialFocus(this.wireMesh.material, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    get focus(){ return super.focus; }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n        this.wireMesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutQuad: function (t, b, c, d) {\r\n            return -c *(t/=d)*(t-2) + b;\r\n        },\r\n\r\n        /** @type {TweenCallback} */\r\n        easeOutCubic: function (t, b, c, d) {\r\n            return c*((t=t/d-1)*t*t + 1) + b;\r\n        }\r\n    },\r\n\r\n    special: {\r\n        /** @type {TweenCallback} */\r\n        pingPong: function (t, b, c, d) {\r\n            return Math.sin(t / d * Math.PI) * c + b;\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => {\r\n            tween.Unhook();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, startValue0, startValue1, startValue2, delta0, delta1, delta2, duration){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.startTime = clock.getElapsedTime();\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js"],"sourceRoot":""}