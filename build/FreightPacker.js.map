{"version":3,"sources":["webpack:///webpack/bootstrap 6f9d31c895237c5f446c","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/utils/cik/config/datGUIConsole.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/api/utils/cik/config/Config.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/view/SceneSetup.js","webpack:///./src/api/UX.js","webpack:///./src/api/utils/cik/config/Smart.js","webpack:///./src/api/utils/cik/config/Control3D.js","webpack:///./src/api/packer/CargoGroup.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/afit/components/Container.js","webpack:///./src/api/packer/afit/components/Item.js","webpack:///./src/api/view/CargoView.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/App.js","webpack:///./src/api/utils/cik/input/UpdateComponent.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/utils/cik/config/UIUtils.js","webpack:///./src/api/utils/cik/config/datGUIExtensions.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/api/packer/afit/AFit.js","webpack:///./src/api/packer/clp/CLPSolver.js","webpack:///./src/api/packer/clp/Workbook.js","webpack:///./src/api/packer/sim/Bin.js","webpack:///./src/api/packer/sim/Item.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/view/CargoBoxView.js","webpack:///./src/api/view/PackingSpaceView.js","webpack:///./src/api/view/ContainerView.js","webpack:///./src/api/components/assets/Asset.js","webpack:///./src/api/utils/cik/Pool.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/PackingSpaceInput.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/view/HUDView.js","webpack:///./src/api/scene/Transform.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/packer/aas/AASOrientation.js","webpack:///./src/api/packer/sim/Packer.js","webpack:///./src/api/packer/brb/BRB.js","webpack:///./src/api/view/View.js","webpack:///./src/api/utils/cik/Utils3D.js","webpack:///./src/api/view/PackResultView.js","webpack:///./src/api/view/PackedCargoBoxView.js","webpack:///./src/api/utils/cik/Tween.js","webpack:///./src/api/components/PackerInterface.js","webpack:///./src/api/debug/Debug.js","webpack:///./src/api/packer/afit/AFitTest.js","webpack:///./src/api/packer/clp/CLPTest.js"],"names":["trimVariableRegex","RegExp","twopi","Math","PI","goldenRatio","sqrt","goldenRatioConjugate","Utils","object","constructor","classProperties","instanceProperties","prototype","def","Object","assign","defineProperties","getOwnPropertyDescriptors","target","source","undefined","keys","forEach","key","obj","JSON","parse","stringify","element","style","window","getComputedStyle","marginLeft","parseFloat","marginTop","paddingLeft","paddingTop","x","y","input","replace","str","length","substring","i","len","divisions","callback","da","a","cos","b","sin","nc","ns","t","c","d","color","THREE","Color","r","g","z","set","base","vector","fixed","toFixed","w","defaultGUIParams","publish","dat","guis","controllers","Controller","label","onChangeCallback","onChange","valueProp","get","value","defineProperty","list","isFunction","step","listen","updateDisplay","GUI","params","data","__controllers","__folders","AssignUndefined","push","add","controller","toString","addFolder","folder","open","domElement","document","createElement","result","iKey","listProp","destroy","index","indexOf","splice","Signaler","signals","event","callbacks","args","logType","trace","normal","warn","logTypeLabel","defaultPrintFilter","programStartTime","Date","now","messages","warnOnce","Message","type","timestamp","content","arg","json","substr","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","groupEnd","log","id","Log","Warn","filter","output","ToString","active","serializeModes","none","property","min","max","properties","createKeyInfo","isFolderGrouped","propertyPath","split","slice","join","shift","owner","getKey","reduce","setKey","val","endKey","isColor","setHex","download","filename","file","Blob","navigator","msSaveOrOpenBlob","url","URL","createObjectURL","href","body","appendChild","click","setTimeout","removeChild","revokeObjectURL","defaultEditParams","save","debug","Shortcut","Config","shortcutsGUI","shortcuts","Map","instances","ignoreKeys","isController","keyInfo","keyValue","ignoredKey","saveValue","Number","parseInt","toJSON","Update","Snapshot","guiChanged","gui","require","default","autoPlace","editing","updateAll","find","addFunction","addColor","call","scope","editor","Save","Debug","Serialize","defaultsFolder","serializeMode","unrolled","subProperties","subProperty","has","category","shortcut","Add","_weight","Symbol","CargoEntry","quantity","uid","descriptions","generateUUID","entry","Container","volumes","WarnOnce","volume","numVolumes","container","containingVolume","ContainingVolume","FromJSON","almost","n1","n2","abs","PackedCargo","position","orientation","PackingResult","packed","sumOfVolumes","items","sum","Volume","_afit","defaultParams","packUpdate","Packer","packingSpace","cargoList","SolveSim","SolveBRB","SolveAFit","afit","Item","current","dimensions","width","height","entries","groups","values","group","item","startTime","performance","Solve","PackTimeInMilliseconds","ceil","containerVolume","Length","Width","Height","itemVolumePacked","PackedItems","itemVolumeUnpacked","UnpackedItems","PercentContainerVolumePacked","floor","PercentItemVolumePacked","packingResult","packedItem","IsPacked","ID","Vector3","CoordX","PackDimX","CoordY","PackDimY","CoordZ","PackDimZ","ResolveOrientation","packedCargo","Dispatch","CLPSolver","mandatory","weightCapacity","cost","itemType","xyRotatable","yzRotatable","profit","weight","findEntry","l","h","matches","matched","onSolution","solution","packedItems","item_type","opposite_x","origin_x","opposite_y","origin_y","opposite_z","origin_z","ContainerItem","rotation","solverOptions","itemSortCriterion","showProgress","cpuTimeLimit","signaler","On","Execute","depth","AASOrientation","resolve","Bin","SimPacker","bin","iQtt","simPacker","pack","bins","name","getDimension","getRotationTypeString","BRB","failed","iPackings","collectPlacements","placement","containerOffset","p","packedDimensions","ed","resolveOrientation","collectPackings","packing","placements","packings","SetUID","_vec3","epsilon","pow","numberType","Dimensions","Set","Assert","numEntries","getDefaultLabel","BoxEntry","stacking","translation","Reset","TextField","defaultContent","clear","Copy","field","own","Clone","SupportsStacking","RotationConstraint","TranslationConstraint","init","started","paused","stopped","SceneSetup","containerDiv","ux","quality","Common","units","controllerParams","sceneController","rendererParams","sceneRenderer","renderer","cameraParams","fov","aspect","near","far","cameraController","OrbitControls","camera","sceneRendererRef","appCameraRef","onResize","screen","ReconfigureViewport","hud","hudParams","hudCameraParams","hudCameraRef","AdjustCamera","autoClear","setupParams","gridHelper","SetTarget","GridHelper","AddDefault","configure","Configure","Promise","reject","scene1","scene","camera1","scene2","camera2","animationFrameID","requestAnimationFrame","Render","clearDepth","screenNeedsUpdate","cameraNeedsUpdate","cancelAnimationFrame","Dispose","helpers","ambientLight","AmbientLight","directionalLight","DirectionalLight","ambientContainer","onGUIChanged","dl","shadow","updateProjectionMatrix","dlHelper","update","dlCameraHelper","Smart","Control3D","smart","MakeShortcut","lightController","shadowControllers","shadowCameraControllers","Unroll","DirectionalLightHelper","CameraHelper","appControl3D","control","hudControl3D","toggle","toggleOrbitOwner","orbitControls","Hold","Release","hudCam","print","config","VecToString","rotationProperties","rotationControllers","Multiple","UX","onFocus","onFocusLost","draggable","closeBtn","onclick","Hide","ui","Element","Delete","UpdateGUI","visible","SetCurrent","oldPos","GetPosition","SetPosition","Show","AddStyle","styles","UIWiggleAnim","folderName","Track","Edit","iFocus","folders","spaces","world","local","modes","translate","rotate","scale","defaultControls","TransformControls","addEventListener","bind","traverse","child","renderOrder","attach","detach","Detach","space","setMode","CargoGroup","cargoes","template","currentQuantity","containerAdded","_currentIndex","PackingSpace","containers","currentIndex","dim1","dim2","dim3","Dim1","Dim2","Dim3","Quantity","dummyGeometry","SphereBufferGeometry","dummyMaterial","MeshStandardMaterial","transparent","opacity","_entry","CargoView","mesh","view","copy","cargoView","Mesh","App","components","packerParams","packer","sceneSetup","Init","then","Start","viewParams","cargoInput","CargoInput","completed","boxEntry","packingSpaceInput","PackingSpaceInput","containerLoaded","AddContainer","onPackUpdate","UpdateComponent","interval","lastUpdateTime","itemsContainer","Object3D","miscContainer","defaults","Scene","objName","getObjectByName","remove","tempVec3","tempVec3_b","Camera","PerspectiveCamera","fpsControls","Navigation","FirstPerson","enabled","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","v","subVectors","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","normalize","box3","distanceMultiplier","extent","getSize","frameSize","distance","center","getCenter","stopPropagation","e","stylesheet","createCSS","css","getElementsByTagName","Array","innerHTML","UIFitContent","UIHideMenu","UIDraggable","UIDHeader","UIDCloseButton","_domElement","removeEventListener","RemoveStyle","text","attributes","_span","_Span","crel","eStyle","cssText","widths","small","medium","large","Draggable","title","dom","move","xpos","ypos","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","posX","clientX","posY","clientY","aX","aY","startMoving","parentNode","divTop","divLeft","cursor","stopMoving","random","domStyle","head","header","onmousedown","onmouseup","close","Close","EnableChildInput","elt","CreateCSS","datDisabled","_onGUIEvent","folderKeys","closed","onGUIEvent","blockEvent","hasAttribute","setAttribute","parentElement","removeAttribute","enumerable","enable","disabled","_tooltip","class","classList","setTooltip","tooltip","stringType","groupAdded","groupRemoved","CargoList","delete","ScrapPad","CumX","CumZ","Post","Pre","Layer","layerEval","LayerDim","LayerEval","l1","l2","IsCompletePack","MAX_SAFE_INTEGER","itemsToPack","itemsPackedInOrder","layers","scrapfirst","smallestZ","trash","evened","hundredPercentPacked","layerDone","packingBest","quit","bboxi","bestIteration","bestVariant","boxi","cboxi","layerListLen","packedItemCount","bbfx","bbfy","bbfz","bboxx","bboxy","bboxz","bfx","bfy","bfz","boxx","boxy","boxz","cboxx","cboxy","cboxz","layerinlayer","layerThickness","lilz","packedVolume","packedy","prelayer","prepackedy","preremainpy","px","py","pz","remainpy","remainpz","itemsToPackCount","totalItemVolume","totalContainerVolume","AFit","Initialize","ExecuteIterations","Report","hmx","hy","hmy","hz","hmz","itelayer","layersIndex","bestVolume","containerOrientationVariant","ListCanditLayers","sort","SortByEval","PackLayer","FindLayer","MAX_VALUE","AnalyzeBox","thickness","exdim","dimdif","dimen2","dimen3","layereval","maxEvaluations","scrapmemb","iItems","numItems","newItem","same","k","packCoordX","packCoordY","packCoordZ","packDimX","packDimY","packDimZ","lenx","lenz","lpz","FindSmallestZ","FindBox","CheckFound","VolumeCheck","OutputBoxList","item_type_data","xy_rotatable","yz_rotatable","number_requested","sort_criterion","item_list_data","num_item_types","total_number_of_items","item_types","item_list","container_type_data","type_id","volume_capacity","weight_capacity","number_available","container_list_data","num_container_types","container_types","container_list","compatibility_data","item_to_item","container_to_item","index2","compatibility_list","item_location","next_to_item_type","item_in_container","rotationNum","orientations_base1","container_data","item_cnt","addition_point_count","volume_packed","weight_packed","addition_points","repack_item_count","solution_data","feasible","num_containers","net_profit","total_volume","total_weight","total_distance","total_x_moment","total_yz_moment","rotation_order","item_type_order","unpacked_item_count","instance_data","front_side_support","item_item_compatibility_worksheet","container_item_compatibility_worksheet","instance","solver_option_data","CPU_time_limit","item_sort_criterion","show_progress","solver_options","SortContainers","random_reorder_probability","j","candidate_index","max_mandatory","max_volume_packed","min_ratio","swap_container","containerGet","container2","PerturbSolution","container_id","percent_time_left","swap_long","operator_selection","container_emptying_probability","item_removal_probability","repack_flag","continue_flag","max_z","jType","itemsGet","unpacked_item_countGet","item_typesGet","jItem","repack_item_countGet","item_type_orderGet","AddItemToContainer","container_index","item_type_index","add_type","item_cohesion","rotation_index","min_x","min_y","min_z","candidate_position","current_rotation","candidate_rotation","area_supported","area_required","intersection_right","intersection_left","intersection_top","intersection_bottom","support_flag","GoTo","container_to_itemGet","item_to_itemGet","addition_pointsGet","next_iteration","GetSolverOptions","options","ThisWorkbook","Worksheets","Activate","Cells","Value","GetItemData","itemsData","numItemTypes","max_volume","max_weight","unshift","GetContainerData","containersData","numContainerTypes","container_typesGet","GetCompatibilityData","InitializeSolution","GetInstanceData","CheckWorksheetExistence","WriteSolution","offset","Range","ClearContents","CLP_Solver","WorksheetExists","reply","Application","Alert","Confirm","SortItems","incumbent","best_known","iteration","nonempty_container_cnt","start_time","end_time","selected_rotation","fcData","FeasibilityCheckData","infeasibility_count","infeasibility_string","ScreenUpdating","StatusBar","CalculateDispersion","CalculateDistance","selected_item_index","swap_item","feasibility_flag","Clear","volume_capacity_required","volume_capacity_available","weight_capacity_required","weight_capacity_available","max_width","max_heigth","max_length","swap_item_type","item_flag","container_count","typeofString","colLabels","updated","CellEntry","col","row","calculate","_value","Worksheet","toLowerCase","cellsFN","cell1","cell2","cells","total","cell","isNaN","newEntry","rows","rowData","rowResult","colData","Workbook","worksheets","worksheet","Print","solverSheet","itemsSheet","containersSheet","solutionSheet","CellsRange","_range","minCol","maxCol","minRow","maxRow","msg","defaultValue","mw","maxWeight","getWidth","getHeight","getDepth","getWeight","getMaxWeight","getPackedWeight","box","fit","rotationType","_j","intersect","RotationType_WHD","RotationType_HWD","RotationType_HDW","RotationType_DHW","RotationType_DWH","RotationType_WDH","WidthAxis","HeightAxis","DepthAxis","StartPosition","RotationTypeStrings","wg","getRotationType","i2","rectIntersect","i1","d1","d2","cx1","cy1","cx2","cy2","ix","iy","tempBox","Box3","tempVec","CargoListView","templatesView","cargoTemplateViews","templateCargoView","Dummy","Sort","cargoGroup","SortMapBySize","updateMatrixWorld","worldToLocal","Matrix4","getInverse","matrixWorld","padding","start","next","done","setFromObject","applyMatrix4","halfSize","Compare","unitCubeGeometry","BoxBufferGeometry","materialTemplate","brightnessRange","hueBase","nextColor","setHSL","GoldenSeries","CargoBoxView","material","clone","vec3","s","SetScale","yRotation","makeRotationY","tempMatrix4","PackingSpaceView","containerViews","containerView","ContainerView","Request","containingVolumeUID","iCView","iCVolume","FindContainingVolume","identity","makeTranslation","createContainerBoxes","meshes","Asset","CreateMesh","cv","side","BackSide","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","views","WeakMap","StandardSceneObject","containerBoxes","defaultGeometry","CubeGeometry","defaultMeshMaterial","objectLoader","ObjectLoader","jsonLoader","JSONLoader","geometry","texturePath","castShadow","receiveShadow","_new","_reset","Pool","fnNew","fnReset","objects","aborted","error","IsVolume","Abs","commitedEntry","jsonObject","model","global","FreightPacker","utils","DevSetup","app","Auto","webgl","Capabilities","IsWebGLReady","domain","fp","toConsole","traceToConsole","Viz","canvas","gl","getContext","WebGLRenderingContext","defaultKeysListen","concat","Input","domContainer","_camera","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","ComputeScreen","raycaster","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","updateComponents","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","onDrag","onDragEvent","mouseEvent","sx","sy","dx","dy","minDist","onDragStatus","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","OnScroll","OnResize","keyboard","keypress","Listener","on","simple_combo","unregister","unregister_combo","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","button","UpdateScreenAndMouse","getElapsedTime","_dridMouseDown","AbortDelayedAction","_status","DelayedAction","_mouseDownDelayed","UpdateRaycast","ExecuteDelayedMD","distanceToSquared","noMouseDrag","m","vx","vy","clamp","preventDefault","delta","wheelDelta","detail","lerp","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","updateComponent","OnMouseDrag","LerpZoom","action","delay","drid","clearTimeout","_repeats","setInterval","clearInterval","recursive","intersects","intersectObjects","intersectObject","groupID","setFromCamera","raycastGroupsKeys","numRaycastGroups","reverse","iGroup","Raycast","Quality","testCallback","composer","antialias","shadows","renderSizeMul","Boolean","OnTestComplete","PCFSoftShadowMap","shadowsAutoUpdate","clearColor","Renderer","WebGLRenderer","shadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","UseCamera","defaultCamTRS","Euler","HUDView","cameraTransform","Apply","_position","_rotation","Transform","transform","PackingItem","Cargo","cargo","_box3","setFromCenterAndSize","_enabled","PackingProperty","prop","Constraint","dw","dh","unfitItems","_i","weighItem","putItem","getVolume","b2","unpacked","getBiggerBinThan","packToBin","fitted","lookup","_pt","pv","ib","findFittedBin","unfitItem","volumeSort","iItem","iPacking","debugAs","iSpace","place","breakUpSpace","rnsort","sleep","ms","debugLog","debugPacking","debugSpace","debugPlacement","placePermutations","sd","spaceDim","spacePos","placementDim","av","bv","itemDimensions","pw","ph","cargoListView","bottomLeft","packResultView","View","lights","DefaultLights","light","dlData","Load","packingSpaceView","onContainerAdded","union","Frame","onCargoGroupAdded","onCargoRemoved","Remove","HUDSetup","DisplayPackingResult","clv","cargoListViewRect","Utils3D","Rect","clvRectIgnore","Offset","viewportPointA","viewportPointB","dragOffset","onSort","sortResult","Project","sub","ratio","dragEvent","ContainsPoint","clvMin","clvMax","ignoredAreas","onScreenResize","ToNDC","Unproject","Toggle","vec","viewportPoint","axis","unproject","worldPoint","project","rect","poolNewFN","packedCargoView","Extend","poolResetFN","getOrientationAngles","getOrientationEuler","rad","PackResultView","pool","animatingViews","matrix","GetMatrix","decompose","onTweenCompleted","OnTweenCompleted","cargoViewTemplate","GetTemplate","SetRotationAngles","zEntry","posTweenCombo","Tween","Combo","Request3","functions","linear","Hook","onComplete","numPackedItems","tween","Unhook","Return","animatingView","unitCubeEdgeGeometry","EdgesGeometry","wireframeMaterialTemplate","LineBasicMaterial","PackedCargoBoxView","meshMaterial","wireMesh","LineSegments","TweenCallback","time","startValue","duration","TweenCompletedCallback","ease","easeOutElastic","ts","tc","TweenComboCompletedCallback","TweenCombo","tweens","startValue0","startValue1","startValue2","delta0","delta1","delta2","tween0","tween1","tween2","combo","endValue","_app","PackerInterface","debugGeometry","debugMaterial","debugBox","DebugBox","size","debugObjects","tVec3","tPos","tScale","DebugViz","parent","RemoveObjectByUID","Box","toItems","o","TestData","AFitTest","aFitPacker","containerData","Name","noYes","sortCriterion","packPriority","fillPriority","containersDataSrc","itemsDataSrc","itemData","numContainers","Sum","itemName","Find","test1Data","Test1"],"mappings":"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","file":"FreightPacker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6f9d31c895237c5f446c","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\nconst goldenRatio = (1 + Math.sqrt(5)) / 2;\r\nconst goldenRatioConjugate = goldenRatio - 1;\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    /**\r\n     * @template T\r\n     * @param {T} target \r\n     * @param {Object} source \r\n     * @returns {T}\r\n     */\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n\r\n    /**\r\n     * Returns the next value [0, 1] in the golden series\r\n     * @param {Number} base \r\n     */\r\n    static GoldenSeries(base){\r\n\t\treturn (base + goldenRatioConjugate) % 1;\r\n    }\r\n\r\n    static VecToString(vector, fixed){\r\n        fixed = fixed || 8;\r\n        return vector.x.toFixed(fixed) + ', ' + vector.y.toFixed(fixed) + (vector.z !== undefined ? ', ' + vector.z.toFixed(fixed) + (vector.w !== undefined ? ', ' + vector.w.toFixed(fixed) : '') : '');\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","\r\n// dat.GUI console mirroring\r\n// Access with >> dat.list\r\n\r\nimport Utils from \"../Utils\";\r\n\r\nvar defaultGUIParams = {publish: true, key: ''};\r\n\r\nvar dat = {\r\n    guis: [],\r\n\r\n    controllers: {\r\n        Controller: function(target, key){\r\n\r\n            this.label = key;\r\n\r\n            var onChangeCallback;\r\n            this.onChange = function(callback){\r\n                onChangeCallback = callback;\r\n            };\r\n\r\n            let valueProp = {\r\n                get: function(){\r\n                    return target[key];\r\n                },\r\n                set: function(value){\r\n                    target[key] = value;\r\n                    if(onChangeCallback)\r\n                        onChangeCallback();\r\n                }\r\n            };\r\n            Object.defineProperty(this, 'value', valueProp);\r\n\r\n            Object.defineProperties(this, {\r\n                list: {\r\n                    get: (function(){\r\n                        let isFunction = typeof target[key] === 'function';\r\n                        if(isFunction){\r\n                            return function(){\r\n                                return {\r\n                                    get: function(){\r\n                                        target[key]();\r\n                                        return target[key];\r\n                                    }\r\n                                };\r\n                            };\r\n                        }\r\n                        else{\r\n                            return function(){\r\n                                return valueProp;\r\n                            };\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n\r\n            this.step = function(){return this;};\r\n            this.listen = function(){return this;};\r\n            this.updateDisplay = function(){return this;};\r\n        }\r\n    },\r\n\r\n    GUI: function(params){\r\n        this.i = 0;\r\n        this.data = {};\r\n        this.__controllers = [];\r\n        this.__folders = [];\r\n\r\n        params = Utils.AssignUndefined(params, defaultGUIParams);\r\n\r\n        this.label = params.label;\r\n\r\n        if(params.publish)\r\n            dat.guis.push(this);\r\n\r\n        this.add = function(target, key){\r\n            let controller = new dat.controllers.Controller(target, key);\r\n            this.__controllers.push(controller);\r\n            let isFunction = typeof target[key] === 'function';\r\n            this.data[(this.i++).toString() + ') ' + controller.label + (isFunction ? '()' : '')] = controller;\r\n            return controller;\r\n        };\r\n\r\n        this.addFolder = function(label){\r\n            let folder = new dat.GUI({publish: false, key: label});\r\n            this.__folders.push(folder);\r\n            this.data[(this.i++).toString() + ') >> ' + label] = folder;\r\n            return folder;\r\n        };\r\n\r\n        this.open = function(){return this;};\r\n\r\n        Object.defineProperties(this, {\r\n            domElement: {\r\n                get: function(){\r\n                    return document.createElement('div');\r\n                }\r\n            },\r\n            list: {\r\n                get: function(){\r\n                    let result = {};\r\n                    let keys = Object.keys(this.data);\r\n                    let data = this.data;\r\n                    for(var iKey = 0; iKey < keys.length; iKey++){\r\n                        let key = keys[iKey];\r\n                        let listProp = data[key].list;\r\n                        Object.defineProperty(result, key, listProp.get ? \r\n                            listProp :\r\n                            {\r\n                                get: function(){\r\n                                    return listProp;\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                    return result;\r\n                }\r\n            }\r\n        });\r\n\r\n        this.destroy = function(){\r\n            var index = dat.guis.indexOf(this);\r\n            if(index !== -1)\r\n                dat.guis.splice(index, 1);\r\n        };\r\n    }\r\n};\r\n\r\nObject.defineProperties(dat, {\r\n    list: {\r\n        get: function(){\r\n            let result = [];\r\n            for(var i = 0; i < this.guis.length; i++){\r\n                result[i] = this.guis[i].list;\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n});\r\n\r\nexport default dat;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIConsole.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import Utils from \"./Utils\";\r\n\r\nconst logType = {\r\n    trace: 0,\r\n    normal: 1,\r\n    warn: 2\r\n};\r\n\r\nconst logTypeLabel = {\r\n    0: 'Trace',\r\n    1: 'Log',\r\n    2: 'Warn'\r\n};\r\n\r\nconst defaultPrintFilter = {\r\n    0: true,\r\n    1: true,\r\n    2: true\r\n};\r\n\r\nvar programStartTime = Date.now();\r\nvar messages = [];\r\nvar warnOnce = {};\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        this.timestamp = Date.now();\r\n        this.content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                this.content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.stringify(arg).substr(0, 2000);\r\n                    this.content.push(json);\r\n                }\r\n                catch(err){\r\n                    this.content.push('  parse error: ' + err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n        return ((this.timestamp - programStartTime) / 1000).toFixed(2) + ' ' + logTypeLabel[this.type];\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.trace, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.normal, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.log(...args);\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(logType.warn, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static LogOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Log(...args);\r\n        }\r\n    }\r\n\r\n    static WarnOnce(id, ...args){\r\n        if(this._active && !warnOnce[id]){\r\n            warnOnce[id] = true;\r\n            Logger.Warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        Utils.AssignUndefined(filter, defaultPrintFilter);\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import Utils from \"../Utils\";\r\n\r\nconst serializeModes = {\r\n    none: 'none',\r\n    json: 'json'\r\n};\r\n\r\n/**\r\n * @typedef ConfigParams\r\n * @property {Boolean} debug\r\n * @property {Boolean} save\r\n * @property {serializeModes} serializeMode\r\n */\r\n\r\n\r\nclass Controller {\r\n    constructor(property, min, max, step, onChange){\r\n        this.property = property;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.step = step;\r\n        this.onChange = onChange;\r\n    }\r\n\r\n    /**\r\n     * @returns {Array<Controller>}\r\n     */\r\n    static Multiple(properties, min, max, step, onChange){\r\n        var controllers = [];\r\n        properties.forEach(property => {\r\n            controllers.push(new Controller(property, min, max, step, onChange));\r\n        });\r\n        return controllers;\r\n    }\r\n}\r\n\r\nfunction createKeyInfo(obj, key){\r\n    var isFolderGrouped = key[0] == \"#\";\r\n    if(isFolderGrouped)\r\n        key = key.substr(1);\r\n    \r\n    var propertyPath = key;\r\n    \r\n    key = key.split('.');\r\n    var folder = isFolderGrouped ? key.slice(0, key.length - 1).join('.') : undefined;\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    return {\r\n        id: (folder ? folder + '.' : '') + key[0],\r\n        folder: folder,\r\n        owner: obj,\r\n        key: key[0],\r\n        propertyPath: propertyPath\r\n    };\r\n}\r\n\r\nfunction getKey(obj, key){\r\n    return key.split('.').reduce(function(a, b){\r\n        return a && a[b];\r\n    }, obj);\r\n}\r\n\r\nfunction setKey(obj, key, val){\r\n    key = key.split('.');\r\n    while (key.length > 1) obj = obj[key.shift()];\r\n    var endKey = key.shift();\r\n    if(obj[endKey].isColor){\r\n        obj[endKey].setHex(val);\r\n    }\r\n    else{\r\n        obj[endKey] = val;\r\n    }\r\n    return obj[endKey];\r\n}\r\n\r\nfunction download(data, filename, type) {\r\n    // https://stackoverflow.com/a/30832210/1712403\r\n    var file = new Blob([data], {type: (type || 'text/plain')});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nconst defaultEditParams = {\r\n    save: true, debug: true\r\n};\r\n\r\n/** \r\n * @typedef GUI\r\n * @property {HTMLElement} domElement\r\n */\r\n\r\nclass Shortcut{\r\n    /**\r\n     * @param {string} label \r\n     */\r\n    constructor(label){\r\n        this.label = label;\r\n\r\n        ///** @type {Map<string, GUI>} */\r\n        //this.folders = new Map();\r\n\r\n        this.controller = {};\r\n    }\r\n\r\n    Add(label, target){\r\n        label = label.replace(new RegExp(' ', 'g'), '_');\r\n        this.controller[label] = target;\r\n        Config.shortcutsGUI.add(this.controller, label);\r\n        console.log('added ' + label + ' shortcut to ' + this.label);\r\n    }\r\n}\r\n\r\n/** @type {GUI} */\r\nvar shortcutsGUI;\r\n\r\n/** @type {Map<string, Shortcut>} */\r\nvar shortcuts = new Map();\r\n\r\n/** @type {Map<Object, Config>} */\r\nvar instances = new Map();\r\n\r\n\r\nclass Config {\r\n    constructor(target){\r\n        if(!Config.debug) \r\n            Config.debug = instances;\r\n        instances.set(target, this);\r\n\r\n        this.target = target;\r\n        this.keys = [];\r\n    }\r\n\r\n    Track(...args){\r\n        var keys = this.keys;\r\n        args.forEach(key => {\r\n            keys.push(key);\r\n        });\r\n    }\r\n\r\n    Snapshot(ignoreKeys){\r\n        var data = {};\r\n        var target = this.target;\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            var keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                data[keyInfo.id] = keyValue;\r\n            }\r\n            else if(ignoreKeys !== undefined){\r\n                var warn = true;\r\n                ignoreKeys.forEach(ignoredKey => {\r\n                    if(ignoredKey === keyInfo.id){\r\n                        warn = false;\r\n                    }\r\n                });\r\n                if(warn) console.log('Config.Snapshot warning: \"' + keyInfo.id + '\" changes will be lost');\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Serialize(){\r\n        var data = {};\r\n        this.keys.forEach(key => {\r\n            let isController = key instanceof Controller;\r\n            let keyInfo = createKeyInfo(this.target, isController ? key.property : key);\r\n            let keyValue = keyInfo.owner[keyInfo.key];\r\n            if(typeof keyValue !== 'function'){\r\n                var saveValue = keyInfo.owner[keyInfo.key].isColor ? '0x' + Number.parseInt(keyValue.toJSON()).toString(16) : keyValue;\r\n                data[keyInfo.propertyPath] = saveValue;\r\n            }\r\n        });\r\n        return data;\r\n    }\r\n\r\n    Save(){\r\n        if(this.Update){\r\n            this.Update();\r\n            this.data = this.Snapshot();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Function} guiChanged \r\n     * @param {string} label \r\n     * @param {string} gui - or a dat.GUI object\r\n     * @param {ConfigParams} params \r\n     */\r\n    Edit(guiChanged, label, gui, params){\r\n\r\n        params = Utils.AssignUndefined(params, defaultEditParams);\r\n\r\n        var controllers = [];\r\n        var target = this.target;\r\n        if(gui === undefined) {\r\n            \r\n            gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n                autoPlace: true\r\n            });\r\n        }\r\n        else if(label){\r\n            gui = gui.addFolder(label);\r\n        }\r\n\r\n        if(this.editing === undefined){\r\n            this.editing = {};\r\n \r\n            this.Update = function(){\r\n                require(\"./datGUIExtensions\");\r\n                \r\n                gui.updateAll();\r\n                guiChanged();\r\n            };\r\n \r\n            gui.add(this, 'Update');\r\n        }\r\n\r\n        this.keys.forEach(key => {\r\n            var isController = key instanceof Controller;\r\n            var keyInfo = createKeyInfo(target, isController ? key.property : key);\r\n            if(this.editing[keyInfo.id] !== true){\r\n                var folder = gui;\r\n                if(keyInfo.folder){\r\n                    require(\"./datGUIExtensions\");\r\n\r\n                    if(gui.find)\r\n                        folder = gui.find(keyInfo.folder);\r\n                    else\r\n                        console.warn('gui extensions not found!');\r\n                        \r\n                    if(!folder)\r\n                        folder = gui.addFolder(keyInfo.folder);\r\n                }\r\n                var addFunction = keyInfo.owner[keyInfo.key].isColor ? folder.addColor : folder.add;\r\n                controllers.push(\r\n                    ( isController && key.min !== undefined ? \r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key, key.min, key.max, key.step\r\n                        ) :\r\n                        addFunction.call(folder, \r\n                            keyInfo.owner, keyInfo.key\r\n                        )\r\n                    ) .onChange(key.onChange === undefined ? guiChanged : \r\n                        (function(){\r\n                            key.onChange.call(keyInfo.owner);\r\n                            guiChanged();\r\n                        })\r\n                    )\r\n                );\r\n                this.editing[keyInfo.id] = true;\r\n            }\r\n        });\r\n\r\n        var scope = this;\r\n        var editor = {\r\n            Save: function(){\r\n                scope.Save();\r\n                var filename = label !== undefined ? (label + (label.indexOf('.json') === -1 ? '.json' : '')) : 'config.json';\r\n                download(scope.data, filename);\r\n            },\r\n\r\n            Debug: function(){\r\n                console.log(scope.target);\r\n            },\r\n\r\n            Serialize: function(){\r\n                if(scope.Update){\r\n                    scope.Update();\r\n                    var data = scope.Serialize();\r\n                    var json = JSON.stringify(data);\r\n                    console.log(data, json);\r\n                }\r\n            }\r\n        }\r\n        if(params.save){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Save'] !== true){\r\n                this.defaultsFolder.add(editor, 'Save');\r\n                this.editing['editor.Save'] = true;\r\n            }\r\n        }\r\n        if(params.debug){\r\n            if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n            if(this.editing['editor.Debug'] !== true){\r\n                this.defaultsFolder.add(editor, 'Debug');\r\n                this.editing['editor.Debug'] = true;\r\n            }\r\n        }\r\n\r\n        switch(params.serializeMode){\r\n            default: break;\r\n            case serializeModes.json:\r\n                if(this.defaultsFolder === undefined) this.defaultsFolder = gui.addFolder('...');\r\n                if(this.editing['editor.Serialize'] !== true){\r\n                    this.defaultsFolder.add(editor, 'Serialize');\r\n                    this.editing['editor.Serialize'] = true;\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.gui = gui;\r\n    }\r\n\r\n    toJSON(){\r\n        if(this.data === undefined) console.warn(this.target, 'is being saved with undefined data.');\r\n        return this.data;\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    static get shortcuts(){\r\n        return shortcuts;\r\n    }\r\n\r\n    static get shortcutsGUI(){\r\n        if(shortcutsGUI === undefined) shortcutsGUI = new (window.dat || require(\"./datGUIConsole\").default).GUI({\r\n            autoPlace: false\r\n        });\r\n        return shortcutsGUI;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {string} property - #property marks a folder\r\n     * @param {Array<string>} subProperties \r\n     * @returns returns the subProperties full paths\r\n     */\r\n    static Unroll(property, ...subProperties){\r\n        var unrolled = [];\r\n        subProperties.forEach(subProperty => {\r\n            unrolled.push(property + '.' + subProperty);\r\n        });\r\n        return unrolled;\r\n    }\r\n\r\n    /**\r\n     * @param {*} target \r\n     * @param {*} data \r\n     */\r\n    static Load(target, data){\r\n        var keys = Object.keys(data);\r\n        keys.forEach(key => {\r\n            setKey(target, key, data[key]);\r\n        });\r\n\r\n        if(instances.has(target) && instances.get(target).Update)\r\n            instances.get(target).Update();\r\n    }\r\n\r\n    /**\r\n     * @param {string} category\r\n     * @param {string} label \r\n     * @param {Function} target \r\n     */\r\n    static MakeShortcut(category, label, target){\r\n        if(shortcuts.has(category) === false) shortcuts.set(category, new Shortcut(category));\r\n        var shortcut = shortcuts.get(category);\r\n        shortcut.Add(label, target);\r\n    }\r\n}\r\n\r\nConfig.Controller = Controller;\r\n\r\nexport default Config;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Config.js","import TextField from \"./TextField\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst _weight = Symbol('weight');\r\n\r\nclass CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.quantity = 0;\r\n        this.properties = {};\r\n        this.uid = '';\r\n        this[_weight] = 0;\r\n\r\n        /**\r\n         * @type {Map<string, TextField>}\r\n         */\r\n        this.descriptions = new Map();\r\n    }\r\n\r\n    /** @returns {Number} */\r\n    get weight(){ return this[_weight]; }\r\n    set weight(value){ this[_weight] = value; }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    Copy(entry){\r\n        Logger.Warn('CargoEntry.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('CargoEntry.Clone is not implemented');\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","import ContainingVolume from \"./ContainingVolume\";\r\nimport Logger from \"../../utils/cik/Logger\";\r\n\r\nconst type = 'Container';\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n\r\n        Logger.WarnOnce('Container.constructor', 'weight, label not implemented');\r\n    }\r\n\r\n    Add(volume){\r\n        this.volumes.push(volume);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        var result = type + '[';\r\n        for(var i = 0, numVolumes = this.volumes.length; i < numVolumes; i++){\r\n            result += this.volumes[i].ToString() + (i < numVolumes - 1 ? ', ' : ']');\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var container = new Container();\r\n        for(var i = 0, numVolumes = data.volumes.length; i < numVolumes; i++){\r\n            var containingVolume = ContainingVolume.FromJSON(data.volumes[i]);\r\n            container.Add(containingVolume);\r\n        }\r\n\r\n        return container;\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\nimport AFit from \"./afit/AFit\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"./container/ContainingVolume\";\r\nimport Dimensions from \"../components/box/Dimensions\";\r\n\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\n/**\r\n * @typedef {Object} PackerParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n///** @typedef {import('./afit/AFit').PackingResult} PackingResult */\r\n\r\nclass PackedCargo{\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     * @param {ContainingVolume} containingVolume \r\n     * @param {THREE.Vector3} position \r\n     */\r\n    constructor(entry, containingVolume, position, orientation){\r\n        this.entry = entry;\r\n        this.containingVolume = containingVolume;\r\n        this.position = position;\r\n        this.orientation = orientation;\r\n    }\r\n}\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n        /** @type {Array<PackedCargo>} */\r\n        this.packed = [];\r\n    }\r\n}\r\n\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\nconst _afit = Symbol('afit');\r\nconst defaultParams = {};\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass Packer extends Signaler {\r\n    /**\r\n     * @param {PackerParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this[_afit] = new AFit();\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n    }\r\n\r\n    Solve(arg){\r\n        if(arg === 'sim')\r\n            this.SolveSim();\r\n        else if(arg === 'brb')\r\n            this.SolveBRB();\r\n        else\r\n            this.SolveAFit();\r\n    }\r\n\r\n    SolveAFit(){\r\n        /** @type {AFit} */\r\n        var afit = this[_afit];\r\n\r\n        var Container = require('./afit/components/Container').default;\r\n        var Item = require('./afit/components/Item').default;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        var container = new Container(containingVolume.uid, d.width, d.length, d.height);\r\n\r\n        /** @type {Array<Box>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            let item = new Item(entry.uid, d.width, d.length, d.height, entry.quantity);\r\n            items.push(item);\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var startTime = performance.now();\r\n        var result = afit.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n\r\n        var packingResult = new PackingResult();\r\n        result.PackedItems.forEach(packedItem => {\r\n            if(packedItem.IsPacked){\r\n                let entry = entries[packedItem.ID];\r\n                let position = new THREE.Vector3(\r\n                    packedItem.CoordX + packedItem.PackDimX / 2,\r\n                    packedItem.CoordY + packedItem.PackDimY / 2,\r\n                    packedItem.CoordZ + packedItem.PackDimZ / 2\r\n                );\r\n                let orientation = Item.ResolveOrientation(packedItem);\r\n                let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n                packingResult.packed.push(packedCargo);\r\n            }\r\n        });\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveCLP(){\r\n\r\n        const CLPSolver = require('./clp/CLPSolver');\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        /** @type {CLPSolver.ContainerData} */\r\n        var container = {\r\n            length: d.length, width: d.width, height: d.height,\r\n            mandatory: 0, weightCapacity: d.volume / 1000, cost: 1,\r\n            quantity: 1\r\n        };\r\n\r\n        /** @type {Array<CLPSolver.ItemData>} */\r\n        var items = [];\r\n        var entries = {};\r\n        /** @type {Array<Dimensions>} */\r\n        var dimensions = [];\r\n        var itemType = 1;\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[itemType++] = entry;\r\n            dimensions.push(entry.dimensions);\r\n            d = entry.dimensions;\r\n\r\n            /** @type {CLPSolver.ItemData} */\r\n            let item = {\r\n                length: d.length, width: d.width, height: d.height,\r\n                xyRotatable: true, yzRotatable: true, mandatory: 1, profit: 0, weight: d.volume / 1000,\r\n                quantity: entry.quantity\r\n            };\r\n            items.push(item);\r\n        }\r\n\r\n        console.log('entries:', entries);\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var scope = this;\r\n\r\n        function findEntry(w, l, h){\r\n            var matches = 0, matched = -1;\r\n            var volume = w * l * h;\r\n            for(var i = 0; i < dimensions.length; i++){\r\n                if(almost(volume, dimensions[i].volume)){\r\n                    matched = i;\r\n                    matches++;\r\n                }\r\n            }\r\n\r\n            if(matches === 1){\r\n                return entries[matched + 1];\r\n            }\r\n\r\n            return undefined;\r\n        }\r\n\r\n        /** @param {CLPSolver.SolutionData} solution */\r\n        function onSolution(solution){\r\n            console.log(solution);\r\n            let packedItems = solution.container.filter(container => container !== null)[0].items;\r\n            var packingResult = new PackingResult();\r\n            packedItems.forEach(packedItem => {\r\n                if(packedItem && packedItem.item_type !== 0){\r\n                    let w = packedItem.opposite_x - packedItem.origin_x,\r\n                        h = packedItem.opposite_y - packedItem.origin_y,\r\n                        l = packedItem.opposite_z - packedItem.origin_z;\r\n                    let entry = entries[packedItem.item_type];\r\n                    let position = new THREE.Vector3(\r\n                        packedItem.origin_x + w / 2,\r\n                        packedItem.origin_y + h / 2,\r\n                        packedItem.origin_z + l / 2\r\n                    );\r\n                    let orientation = CLPSolver.ContainerItem.ResolveOrientation(packedItem.rotation);\r\n                    let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n                    packedCargo.solution = packedItem;\r\n                    packingResult.packed.push(packedCargo);\r\n                }\r\n            });\r\n            scope.Dispatch(signals.packUpdate, packingResult);\r\n        }\r\n\r\n        /** @type {CLPSolver.SolverOptions} */\r\n        const solverOptions = {\r\n            itemSortCriterion: 1,\r\n            showProgress: false,\r\n            cpuTimeLimit: 10\r\n        };\r\n\r\n        CLPSolver.signaler.On(CLPSolver.signals.solution, onSolution);\r\n        CLPSolver.Execute(solverOptions, items, [container]);\r\n    }\r\n\r\n    SolveAAS(){\r\n        const packedItems = [\r\n            { id:\"1003\", position: { x:0, y:0, z:0 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1004\", position: { x:60, y:0, z:0 }, dimensions: { width:30, depth:20, height:40 } },\r\n            { id:\"1004\", position: { x:60, y:20, z:60 }, dimensions: { width:20, depth:30, height:40 } },\r\n            { id:\"1004\", position: { x:80, y:20, z:60 }, dimensions: { width:20, depth:30, height:40 } },\r\n            { id:\"1003\", position: { x:0, y:60, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1004\", position: { x:60, y:60, z:60 }, dimensions: { width:30, depth:20, height:40 } },\r\n            { id:\"1005\", position: { x:60, y:80, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:80, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:120, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:120, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:150, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:120, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:150, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:180, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:180, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:200, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:200, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:240, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:240, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:270, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:240, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:270, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:300, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:60, y:300, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:320, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:320, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1003\", position: { x:0, y:360, z:60 }, dimensions: { width:60, depth:60, height:60 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:440, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:470, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:500, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:530, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:550, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:420, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:440, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:470, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:500, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:530, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:30, y:550, z:60 }, dimensions: { width:30, depth:20, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:360, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:390, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:420, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:450, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:480, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:510, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:60, y:540, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:360, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:390, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:420, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:450, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:480, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:510, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:80, y:540, z:60 }, dimensions: { width:20, depth:30, height:30 } },\r\n            { id:\"1005\", position: { x:0, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:30, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:30, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:0, z:60 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:30, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:30, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:60, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:90, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:120, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:150, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:180, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:210, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:240, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:270, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:300, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:330, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:360, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:390, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:420, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:450, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:480, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:510, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:0, y:540, z:20 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:30, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } },\r\n            { id:\"1005\", position: { x:60, y:0, z:80 }, dimensions: { width:30, depth:30, height:20 } }\r\n        ];\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.label] = entry;\r\n        }\r\n\r\n        const AASOrientation = require('./aas/AASOrientation');\r\n\r\n        console.log('entries:', entries);\r\n        \r\n        var scope = this;\r\n        var packingResult = new PackingResult();\r\n        packedItems.forEach(packedItem => {\r\n            let w = packedItem.dimensions.width,\r\n                h = packedItem.dimensions.height,\r\n                l = packedItem.dimensions.depth;\r\n            /** @type {BoxEntry} */\r\n            let entry = entries[packedItem.id];\r\n            let position = new THREE.Vector3(\r\n                packedItem.position.x + w / 2,\r\n                packedItem.position.z + h / 2,\r\n                packedItem.position.y + l / 2\r\n            );\r\n            let orientation = AASOrientation.resolve(w, l, h, entry.dimensions);\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packedCargo.solution = packedItem;\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n        scope.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveSim(){\r\n        const Bin = require('./sim/Bin').default;\r\n        const Item = require('./sim/Item').default;\r\n        const SimPacker = require('./sim/Packer').default;\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n        var bin = new Bin(containingVolume.uid, d.width, d.height, d.length, containingVolume.weightCapacity);\r\n\r\n        /** @type {Array<Box>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            for(var iQtt = 0; iQtt < entry.quantity; iQtt++){\r\n                let item = new Item(entry.uid, d.width, d.height, d.length, entry.weight);\r\n                items.push(item);\r\n            }\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', bin);\r\n\r\n        var startTime = performance.now();\r\n        var simPacker = new SimPacker([bin], items).pack();\r\n        /** @type {Array<Box>} */\r\n        var packedItems = simPacker.bins[0].items;\r\n        Logger.Log('Solved in ' + Math.ceil(performance.now() - startTime) + ':', packedItems);\r\n\r\n        var packingResult = new PackingResult();\r\n        packedItems.forEach(packedItem => {\r\n            let entry = entries[packedItem.name];\r\n\r\n            let d = packedItem.getDimension();\r\n            let position = new THREE.Vector3(\r\n                packedItem.position[0] + d[0] / 2,\r\n                packedItem.position[1] + d[1] / 2,\r\n                packedItem.position[2] + d[2] / 2\r\n            );\r\n\r\n            let orientation = packedItem.getRotationTypeString();\r\n\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        });\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    SolveBRB(){\r\n\r\n        const BRB = require('./brb/BRB');\r\n\r\n        var containingVolume = this.packingSpace.current.volume;\r\n        console.warn('Currently solves for 1 ContainingVolume', containingVolume);\r\n\r\n        var d = containingVolume.dimensions;\r\n\r\n        /** @type {import('./brb/BRB').Container} */\r\n        var container = {\r\n            dimensions: [d.width, d.height, d.length],\r\n            weight: containingVolume.weightCapacity\r\n        };\r\n\r\n        /** @type {Array<import('./brb/BRB').Item>} */\r\n        var items = [];\r\n        var entries = {};\r\n        for(var group of this.cargoList.groups.values()){\r\n            /** @type {BoxEntry} */\r\n            let entry = group.entry;\r\n            entries[entry.uid] = entry;\r\n            d = entry.dimensions;\r\n            for(var iQtt = 0; iQtt < entry.quantity; iQtt++){\r\n                /** @type {import('./brb/BRB').Item} */\r\n                let item = {\r\n                    id: entry.uid,\r\n                    dimensions: [d.width, d.height, d.length],\r\n                    weight: entry.weight\r\n                };\r\n                items.push(item);\r\n            }\r\n        }\r\n\r\n        Logger.Log('Solving', items, ' in ', container);\r\n\r\n        var startTime = performance.now();\r\n        var result = BRB.pack(container, items);\r\n\r\n        if( result.failed ){\r\n            console.log('BRB packing failed: ' + result.failed);\r\n            return;\r\n        }\r\n        \r\n        Logger.Log('Solved in ' + Math.ceil(performance.now() - startTime) + ':', result);\r\n\r\n        var packingResult = new PackingResult();\r\n        var iPackings = 0;\r\n        /** @param {import('./brb/BRB').Placement} placement */\r\n        function collectPlacements(placement) {\r\n            /** @type {BoxEntry} */\r\n            let entry = entries[placement.id];\r\n\r\n            let containerOffset = iPackings * containingVolume.dimensions.width;\r\n            let p = placement.position;\r\n            let d = placement.dimensions;\r\n            let position = new THREE.Vector3(\r\n                p[0] + d[0] / 2,\r\n                p[1] + d[1] / 2,\r\n                p[2] + d[2] / 2\r\n            );\r\n            position.set(position.z, position.y, position.x);\r\n            position.x += containerOffset;\r\n            let packedDimensions = d;\r\n            packedDimensions = [d[2], d[1], d[0]];\r\n\r\n            let ed = entry.dimensions;\r\n            let orientation = BRB.resolveOrientation(packedDimensions, [ed.width, ed.height, ed.length]);\r\n\r\n            let packedCargo = new PackedCargo(entry, containingVolume, position, orientation);\r\n            packingResult.packed.push(packedCargo);\r\n        }\r\n\r\n        /** @param {import('./brb/BRB').Packing} packing */\r\n        function collectPackings(packing) {\r\n            packing.placements.forEach(collectPlacements);\r\n            iPackings++;\r\n        }\r\n        result.packings.forEach(collectPackings);\r\n        \r\n        this.Dispatch(signals.packUpdate, packingResult);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nPacker.PackingResult = PackingResult;\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Volume from \"./Volume\";\r\n\r\nconst type = 'ContainingVolume';\r\n\r\nclass ContainingVolume extends Volume {\r\n    constructor(){\r\n        super();\r\n\r\n        this.SetUID();\r\n    }\r\n\r\n    get weightCapacity(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @param {string} [uid] - You'll rarely need to provide this\r\n     */\r\n    SetUID(uid){\r\n        this.uid = uid || THREE.Math.generateUUID();\r\n        return this.uid;\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = type;\r\n        return json;\r\n    }\r\n\r\n    ToString(){\r\n        return super.ToString();\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var containingVolume = new ContainingVolume();\r\n        Volume.FromJSON(data, containingVolume);\r\n\r\n        return containingVolume;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","\r\nconst type = 'Dimensions';\r\nconst _vec3 = Symbol('vec3');\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass Dimensions {\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this[_vec3] = new THREE.Vector3();\r\n    }\r\n\r\n    /**\r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: x=width, y=height and z=length\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get vec3(){\r\n        return this[_vec3].set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Abs(){\r\n        if(this.width < 0) this.width = -this.width;\r\n        if(this.length < 0) this.length = -this.length;\r\n        if(this.height < 0) this.height = -this.height;\r\n        return this;\r\n    }\r\n\r\n    Compare(dimensions){\r\n        var d = this.volume - dimensions.volume;\r\n        if(d < -epsilon) return -1;\r\n        if(d > epsilon) return 1;\r\n        return 0;\r\n    }\r\n\r\n    Copy(dimensions){\r\n        this.Set(dimensions.width, dimensions.length, dimensions.height);\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n\r\n    static IsVolume(dimensions){\r\n        return Dimensions.Assert(dimensions) \r\n            && dimensions.width > epsilon\r\n            && dimensions.length > epsilon\r\n            && dimensions.height > epsilon\r\n        ;\r\n    }\r\n\r\n    static FromJSON(data){\r\n        if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n        var dimensions = new Dimensions(data.width, data.length, data.height);\r\n        return dimensions;\r\n    }\r\n\r\n    static Assert(dimensions){\r\n        return dimensions instanceof Dimensions\r\n            && typeof dimensions.width === numberType\r\n            && typeof dimensions.length === numberType\r\n            && typeof dimensions.height === numberType\r\n        ;\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} BoxEntryProperties\r\n * @property {SupportsStacking} stacking\r\n * @property {RotationConstraint} rotation\r\n * @property {TranslationConstraint} translation\r\n */\r\n\r\nvar numEntries = 0;\r\nfunction getDefaultLabel(){\r\n    return 'Box ' + numEntries.toString();\r\n}\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        numEntries++;\r\n\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n        \r\n        /**\r\n         * @type {BoxEntryProperties}\r\n         */\r\n        this.properties;\r\n\r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.set('label', new TextField('label', getDefaultLabel()));\r\n    }\r\n\r\n    set weight(value){ return super.weight; }\r\n    get weight(){\r\n        return this.dimensions.volume / 1000;\r\n    }\r\n\r\n    /**\r\n     * @returns {string}\r\n     */\r\n    get label(){\r\n        var field = this.descriptions.get('label');\r\n        return field ? field.content : undefined;\r\n    }\r\n\r\n    set label(value){\r\n        var field = this.descriptions.get('label');\r\n        if(field)\r\n            field.content = value;\r\n        else\r\n            this.descriptions.set('label', new TextField('label', value));\r\n    }\r\n\r\n    Reset(){\r\n        this.weight = 0;\r\n        this.quantity = 1;\r\n\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n\r\n        var label = this.descriptions.get('label');\r\n        label.content = TextField.defaultContent;\r\n        this.descriptions.clear();\r\n        this.descriptions.set('label', label);\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    Copy(entry){\r\n        this.dimensions.Copy(entry.dimensions);\r\n        this.weight = entry.weight;\r\n        this.quantity = entry.quantity;\r\n\r\n        this.properties.stacking.Copy(entry.properties.stacking);\r\n        this.properties.rotation.Copy(entry.properties.rotation);\r\n        this.properties.translation.Copy(entry.properties.translation);\r\n\r\n        for(var [key, field] of entry.descriptions){\r\n            let own = this.descriptions.get(key);\r\n            if(own)\r\n                own.Copy(field);\r\n            else\r\n                this.descriptions.set(key, field.Clone());\r\n        }\r\n    }\r\n\r\n    Clone(){\r\n        var entry = new BoxEntry();\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.weight = this.weight;\r\n        entry.quantity = this.quantity;\r\n\r\n        entry.properties.stacking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var [key, field] of this.descriptions){\r\n            entry.descriptions.set(key, field.Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions.get('label').content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n\r\n    /**\r\n     * @param {BoxEntry} entry \r\n     */\r\n    static Assert(entry){\r\n        return entry instanceof BoxEntry\r\n            && Dimensions.Assert(entry.dimensions)\r\n            && entry.properties\r\n            && entry.descriptions\r\n            && entry.weight !== undefined\r\n            && entry.quantity !== undefined\r\n                && typeof entry.weight === numberType\r\n                && typeof entry.quantity === numberType\r\n                && SupportsStacking.Assert(entry.properties.stacking)\r\n                && RotationConstraint.Assert(entry.properties.rotation)\r\n                && TranslationConstraint.Assert(entry.properties.translation)\r\n        ;\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from '../scene/Controller';\r\nimport Renderer from '../scene/Renderer';\r\nimport Camera from '../scene/Camera';\r\nimport HUDView from './HUDView';\r\nimport UX from '../UX';\r\nimport Utils from '../utils/cik/Utils';\r\nimport Signaler from '../utils/cik/Signaler';\r\n\r\nconst signals = {\r\n    init: 'init',\r\n    started: 'started',\r\n    paused: 'paused',\r\n    stopped: 'stopped'\r\n};\r\n\r\nclass SceneSetup extends Signaler {\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv \r\n     * @param {UX} ux \r\n     */\r\n    constructor(containerDiv, ux){\r\n        super();\r\n        \r\n        this.domElement = containerDiv;\r\n        this.ux = ux;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = this.ux.params.units;\r\n        var controllerParams = {};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        /** @type {import('../scene/Renderer').RendererParams} */\r\n        var rendererParams = {};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n\r\n        /** @type {import('./Camera').CameraParams} */\r\n        var cameraParams = {fov: 30, aspect: 1, near: 1 * units, far: 3000 * units};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.sceneRenderer.renderer.domElement);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n\r\n        var sceneRendererRef = this.sceneRenderer;\r\n        var appCameraRef = this.cameraController.camera;\r\n        this.input.onResize.push(function(screen){\r\n            sceneRendererRef.ReconfigureViewport(screen, appCameraRef);\r\n        });\r\n\r\n        // hud\r\n        if(this.ux.params.hud){\r\n            /** @type {import('../view/HUDView').HUDViewParams} */\r\n            var hudParams = {ux: this.ux};\r\n            /** @type {import('./Camera').CameraParams} */\r\n            var hudCameraParams = Utils.AssignUndefined({fov: 15}, cameraParams);\r\n            this.hud = new HUDView(hudParams, hudCameraParams);\r\n            var hudCameraRef = this.hud.cameraController.camera;\r\n            this.input.onResize.push(function(screen){\r\n                sceneRendererRef.AdjustCamera(screen, hudCameraRef);\r\n            });\r\n\r\n            this.sceneRenderer.renderer.autoClear = false;\r\n        }\r\n        // /hud\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            gridHelper: true,\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = 100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        if(this.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n\r\n        var scope = this;\r\n        return new Promise((resolve, reject) => {\r\n            scope.Dispatch(signals.init);\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            let scope = this;\r\n            let sceneRenderer = this.sceneRenderer;\r\n            let scene1 = this.sceneController.scene,\r\n                camera1 = this.cameraController.camera;\r\n                \r\n            if(this.ux.params.hud){\r\n                let hud = this.hud;\r\n                let scene2 = hud.scene,\r\n                    camera2 = hud.cameraController.camera;\r\n            \r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n                    hud.cameraController.Update();\r\n\r\n                    sceneRenderer.renderer.clear();\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                    sceneRenderer.renderer.clearDepth();\r\n                    sceneRenderer.Render(scene2, camera2);\r\n                };\r\n            }\r\n            else{\r\n                this.Update = function(timestamp){\r\n                    scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                    scope.input.Update();\r\n                    scope.cameraController.Update();\r\n\r\n                    sceneRenderer.Render(scene1, camera1);\r\n                };\r\n            }\r\n        }\r\n\r\n        this.Update();\r\n        this.input.screenNeedsUpdate = true;\r\n        this.input.cameraNeedsUpdate = true;\r\n\r\n        this.Dispatch(signals.started);\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n\r\n        this.Dispatch(signals.paused);\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n\r\n        this.Dispatch(signals.stopped);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n    DefaultLights(controller, configure, helpers){\r\n\r\n        var units = this.ux.params.units;\r\n\r\n        var ambientLight = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(300 * units, 175 * units, 125 * units);\r\n        \r\n        controller.ambientContainer.add(ambientLight);\r\n        controller.ambientContainer.add(directionalLight);\r\n\r\n        if(this.ux.params.configure && configure){\r\n            let Smart = require('../utils/cik/config/Smart').default;\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            let Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n            let dl = directionalLight;\r\n            let smart = new Smart(dl, 'Directional light');\r\n            smart.MakeShortcut('Configure');\r\n            \r\n            let lightController = ['color', 'intensity', 'castShadow'];\r\n            let shadowControllers = ['shadow.bias', 'shadow.radius', 'shadow.mapSize.x', 'shadow.mapSize.y'];\r\n            //let sc = dl.shadow.camera as THREE.OrthographicCamera;\r\n            let shadowCameraControllers = Config.Unroll('#shadow.camera', 'left', 'top', 'right', 'bottom', 'near', 'far');\r\n\r\n            let dlHelper, dlCameraHelper;\r\n            if(helpers){\r\n                dlHelper = new THREE.DirectionalLightHelper(dl, 5);\r\n                this.sceneController.AddDefault(dlHelper);\r\n                dlCameraHelper = new THREE.CameraHelper(dl.shadow.camera);\r\n                this.sceneController.AddDefault(dlCameraHelper);\r\n            }\r\n\r\n            function onGUIChanged(){\r\n                dl.shadow.camera.updateProjectionMatrix();\r\n\r\n                if(helpers){\r\n                    dlHelper.update();\r\n                    dlCameraHelper.update();\r\n                }\r\n            }\r\n\r\n            smart.Config('Directional light + shadow', dl, onGUIChanged, Smart.serializeModes.json,\r\n                ...lightController,\r\n                ...shadowControllers,\r\n                ...shadowCameraControllers\r\n            );\r\n        }\r\n\r\n        return [ambientLight, directionalLight];\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n\r\n        var appControl3D = Control3D.Configure('app', this.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n        this.sceneController.AddDefault(appControl3D.control);\r\n\r\n        if(this.ux.params.hud){\r\n            var hudControl3D = Control3D.Configure('hud', this.hud.cameraController.camera, this.sceneRenderer.renderer.domElement);\r\n            this.hud.AddDefault(hudControl3D.control);\r\n\r\n            var hud = this.hud;\r\n            function onGUIChanged(){\r\n                console.log('Camera changed');\r\n            }\r\n\r\n            var toggle = false;\r\n            var control = {\r\n                toggleOrbitOwner: function(){\r\n                    if(toggle){\r\n                        if(!hud.cameraController.orbitControls){\r\n                            hud.cameraController.OrbitControls(scope.sceneRenderer.renderer.domElement);\r\n                        }\r\n                        scope.cameraController.Hold();\r\n                        hud.cameraController.Release();\r\n                    }\r\n                    else{\r\n                        scope.cameraController.Release();\r\n                        hud.cameraController.Hold();\r\n                    }\r\n                    toggle = !toggle;\r\n                },\r\n                hudCam: hud.cameraController,\r\n                print: function(){\r\n                    smart.config.Update();\r\n                    console.group('hudCam properties');\r\n                    console.log('position', Utils.VecToString(hud.cameraController.position, 1));\r\n                    console.log('rotation', Utils.VecToString(hud.cameraController.rotation, 3));\r\n                    console.groupEnd();\r\n                }\r\n            };\r\n\r\n            control.toggleOrbitOwner();\r\n            \r\n            var smart = new Smart(this, 'HUDView');\r\n            smart.MakeShortcut('Configure');\r\n            var rotationProperties = Config.Unroll('#hudCam.rotation', 'x', 'y', 'z');\r\n            var rotationControllers = Config.Controller.Multiple(rotationProperties, 0, 2 * Math.PI, 2 * Math.PI / 360);\r\n            smart.Config(null, control, onGUIChanged, Smart.serializeModes.none,\r\n                'toggleOrbitOwner',\r\n                'print',\r\n                'hudCam.camera.fov', \r\n                ...Config.Unroll('#hudCam.position', 'x', 'y', 'z'), \r\n                ...rotationControllers\r\n            );\r\n\r\n            console.log('HUDView config', smart.config.gui.list || smart);\r\n        }\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/SceneSetup.js","import Utils from \"./utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef UXParams\r\n * @property {Boolean} hud - Create a hud controller (Scene, camera, loop, etc.)\r\n * @property {Boolean} configure - Execute helpers that allow configuration\r\n * @property {Number} units - Conversion to unit employed, default=1 for inches, for meters: units=0.0254\r\n */\r\nconst defaultParams = {\r\n    hud: true,\r\n    configure: false,\r\n    units: 1\r\n};\r\n\r\nclass UX{\r\n    /**\r\n     * \r\n     * @param {UXParams} params \r\n     */\r\n    constructor(params){\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n    }\r\n\r\n}\r\n\r\nexport default UX;\n\n\n// WEBPACK FOOTER //\n// ./src/api/UX.js","import { styles, Element, Draggable } from \"./UIUtils\";\r\nimport Config from \"./Config\";\r\n//import dat from \"./datGUIConsole\";\r\n\r\nconst serializeModes = Config.serializeModes;\r\n\r\nvar current = undefined,\r\n    onFocus = [],\r\n    onFocusLost = [];\r\n\r\nclass Smart {\r\n    /**\r\n     * @param {*} target \r\n     * @param {string} label \r\n     */\r\n    constructor(target, label){\r\n        this.target = target;\r\n        this.label = label;\r\n\r\n        var scope = this;\r\n        \r\n        this.gui = new (window.dat || require(\"./datGUIConsole\").default).GUI({autoPlace: false});\r\n        this.draggable = new Draggable(this.label, 250);\r\n        this.draggable.Add(this.gui.domElement);\r\n        this.draggable.closeBtn.onclick = function(){\r\n            scope.Hide();\r\n        };\r\n\r\n        var ui = Element.Add(this.draggable);\r\n        this.draggable.Hide();\r\n\r\n        this.onFocus = [];\r\n        this.onFocusLost = [];\r\n    }\r\n\r\n    Delete(){\r\n        this.Hide();\r\n        this.draggable.Delete();\r\n        this.gui.destroy();\r\n        this.onFocus.length = this.onFocusLost.length = 0;\r\n    }\r\n\r\n    UpdateGUI(){\r\n        Smart.UpdateGUI(this.gui);\r\n    }\r\n\r\n    Hide(){\r\n        this.visible = false;\r\n        this.draggable.Hide();\r\n        Smart.SetCurrent(undefined);\r\n    }\r\n\r\n    Show(){\r\n        if(current !== undefined){\r\n            if(current === this) return;\r\n\r\n            var oldPos = current.draggable.GetPosition();\r\n            this.draggable.SetPosition(oldPos.x, oldPos.y);\r\n\r\n            current.Hide();\r\n        }\r\n        this.visible = true;\r\n        this.draggable.Show();\r\n        Element.AddStyle(this.draggable.domElement, styles.UIWiggleAnim);\r\n        Smart.SetCurrent(this);\r\n\r\n        this.UpdateGUI();\r\n    }\r\n    \r\n    /**\r\n     * \r\n     * @param {string} folderName \r\n     * @param {*} target \r\n     * @param {Function} guiChanged \r\n     * @param {serializeModes} serializeMode\r\n     * @param {Array<string|Config.Controller>} args \r\n     */\r\n    Config(folderName, target, guiChanged, serializeMode, ...args){\r\n        this.config = new Config(target);\r\n        this.config.Track(...args);\r\n        this.config.Edit(guiChanged, folderName, this.gui, {serializeMode: serializeMode, save: false});\r\n        return this.config.gui;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     */\r\n    MakeShortcut(category){\r\n        Smart.MakeShortcut(category, this);\r\n    }\r\n\r\n    static get serializeModes(){\r\n        return serializeModes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Smart} target \r\n     */\r\n    static MakeShortcut(category, target){\r\n        Config.MakeShortcut(category, target.label, function(){\r\n            if(target.visible){\r\n                target.Hide();\r\n            }\r\n            else{\r\n                target.Show();\r\n            }\r\n        });\r\n    }\r\n\r\n    static SetCurrent(current){\r\n        var iFocus;\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocusLost.length; iFocus++){\r\n                onFocusLost[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocusLost.length; iFocus++){\r\n                current.onFocusLost[iFocus]();\r\n            }\r\n        }\r\n\r\n        current = current;\r\n\r\n        if(current !== undefined){\r\n            for(iFocus = 0; iFocus < onFocus.length; iFocus++){\r\n                onFocus[iFocus](current);\r\n            }\r\n            for(iFocus = 0; iFocus < current.onFocus.length; iFocus++){\r\n                current.onFocus[iFocus]();\r\n            }\r\n        }\r\n    }\r\n\r\n    static UpdateGUI(gui){\r\n        for (var i in gui.__controllers) {\r\n            gui.__controllers[i].updateDisplay();\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            this.UpdateGUI(folders[i]);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Smart;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Smart.js","\r\nconst spaces = {\r\n    world: 'world',\r\n    local: 'local'\r\n};\r\n\r\nconst modes = {\r\n    translate: 'translate',\r\n    rotate: 'rotate',\r\n    scale: 'scale'\r\n};\r\n\r\n/**\r\n * @type {Object<Control3D>}\r\n */\r\nvar defaultControls = {};\r\n\r\nclass Control3D {\r\n\r\n    /**\r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     */\r\n    constructor(camera, domElement){\r\n        this.camera = camera;\r\n        this.control = new THREE.TransformControls(this.camera, domElement);\r\n        this.control.addEventListener('change', this.Update.bind(this));\r\n\r\n        this.control.traverse(function(child){\r\n            child.renderOrder = 2;\r\n        });\r\n\r\n        this.visible = false;\r\n    }\r\n\r\n    get visible(){\r\n        return this.control.visible;\r\n    }\r\n\r\n    set visible(value){\r\n        this.control.visible = value;\r\n        if(value === false){\r\n            this.Detach();\r\n        }\r\n    }\r\n\r\n    Attach(target){\r\n        this.control.attach(target);\r\n    }\r\n\r\n    Detach(){\r\n        this.control.detach();\r\n    }\r\n\r\n    Toggle(target){\r\n        if(this.control.object){\r\n            this.control.detach();\r\n        }\r\n        else{\r\n            this.control.attach(target);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.control.update();\r\n    }\r\n\r\n    get space(){\r\n        return this.control.space;\r\n    }\r\n\r\n    set space(value){\r\n        this.control.space = value;\r\n    }\r\n\r\n    // translate || rotate || scale\r\n    set mode(value){\r\n        this.control.setMode(value);\r\n    }\r\n\r\n    static get spaces(){\r\n        return spaces;\r\n    }\r\n\r\n    static get modes(){\r\n        return modes;\r\n    }\r\n\r\n    /**\r\n     * @param {string} id \r\n     * @param {THREE.Camera} camera \r\n     * @param {HTMLElement} domElement \r\n     * @returns {Control3D}\r\n     */\r\n    static Configure(id, camera, domElement){\r\n        var control = new Control3D(camera, domElement);\r\n        defaultControls[id] = control;\r\n        return control;\r\n    }\r\n\r\n    /**\r\n     * @returns {Control3D}\r\n     */\r\n    static Request(id){\r\n        return defaultControls[id];\r\n    }\r\n}\r\n\r\nexport default Control3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/Control3D.js","import CargoEntry from \"../components/common/CargoEntry\";\r\nimport Cargo from \"./Cargo\";\r\n\r\n\r\nclass CargoGroup {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n        this.cargoes = [];\r\n\r\n        this.template = new Cargo(this);\r\n        this.quantity = this.entry.quantity;\r\n    }\r\n\r\n    get quantity(){\r\n        return this.cargoes.length;\r\n    }\r\n\r\n    set quantity(value){\r\n        var currentQuantity = this.cargoes.length;\r\n        if(value < currentQuantity){\r\n            this.cargoes.length = value;\r\n            this.entry.quantity = value;\r\n        }\r\n        else if(value > currentQuantity){\r\n            for(var i = currentQuantity; i < value; i++){\r\n                this.cargoes[i] = this.template.Clone();\r\n            }\r\n        }\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'CargoGroup(' + this.quantity + ' x ' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoGroup.js","import Container from \"./container/Container\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    containerAdded: 'containerAdded'\r\n};\r\n\r\nconst _currentIndex = Symbol('currentIndex');\r\n\r\nclass PackingSpace extends Signaler {\r\n    constructor(){\r\n        super();\r\n        \r\n        this[_currentIndex] = -1;\r\n\r\n        /**\r\n         * @type {Container}\r\n         */\r\n        this.containers = [];\r\n    }\r\n\r\n    AddContainer(container){\r\n        this.containers.push(container);\r\n        this[_currentIndex]++;\r\n\r\n        this.Dispatch(signals.containerAdded, container);\r\n    }\r\n\r\n    /**\r\n     * @returns {Container}\r\n     */\r\n    get current(){\r\n        var currentIndex = this[_currentIndex];\r\n        if(currentIndex != -1){\r\n            return this.containers[currentIndex];\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","\r\nclass Container{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} width \r\n     * @param {Number} length \r\n     * @param {Number} height \r\n     */\r\n    constructor(id, width, length, height){\r\n        this.ID = id;\r\n\r\n        this.Width = length || 0;\r\n        this.Length = width || 0;\r\n        this.Height = height || 0;\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Container.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nclass Item{\r\n    /**\r\n     * @param {Object} id \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     * @param {Number} quantity \r\n     */\r\n    constructor(id, dim1, dim2, dim3, quantity){\r\n        this.ID = id;\r\n        this.IsPacked = false;\r\n        this.Dim1 = dim2;\r\n        this.Dim2 = dim1;\r\n        this.Dim3 = dim3;\r\n        this.CoordX = 0;\r\n        this.CoordY = 0;\r\n        this.CoordZ = 0;\r\n        this.Quantity = quantity;\r\n        this.PackDimX = 0;\r\n        this.PackDimY = 0;\r\n        this.PackDimZ = 0;\r\n        this.Volume = this.Dim1 * this.Dim2 * this.Dim3;\r\n    }\r\n\r\n    /** \r\n     * @param {Item} item\r\n     * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n     */\r\n    static ResolveOrientation(item){\r\n        var w = item.Dim1, l = item.Dim2, h = item.Dim3;\r\n\r\n        if(almost(item.PackDimX, w)){ // x\r\n            if(almost(item.PackDimY, h)){ // y\r\n                return 'xyz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'xzy';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, h)){ // y\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'yxz';\r\n            }\r\n            else if(almost(item.PackDimY, l)){ // z\r\n                return 'yzx';\r\n            }\r\n        }\r\n        else if(almost(item.PackDimX, l)){ // z\r\n            if(almost(item.PackDimY, w)){ // x\r\n                return 'zxy';\r\n            }\r\n            else if(almost(item.PackDimY, h)){ // y\r\n                return 'zyx';\r\n            }\r\n        }\r\n\r\n        return 'xyz';\r\n    }\r\n}\r\n\r\nexport default Item;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/components/Item.js","import CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n\r\nconst dummyGeometry = new THREE.SphereBufferGeometry(1, 4, 4);\r\nconst dummyMaterial = new THREE.MeshStandardMaterial({color: 0xff0000, transparent: true, opacity: .5});\r\n\r\nconst _entry = Symbol('entry');\r\n\r\nclass CargoView {\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    constructor(entry){\r\n\r\n        this[_entry] = entry;\r\n\r\n        /**\r\n         * @type {THREE.Mesh}\r\n         */\r\n        this.mesh;\r\n\r\n        /**\r\n         * @type {THREE.Object3D}\r\n         */\r\n        this.view;\r\n    }\r\n\r\n    /** @returns {CargoEntry} */\r\n    get entry(){ return this[_entry]; }\r\n    set entry(value){\r\n        this[_entry] = value;\r\n    }\r\n\r\n    get position(){\r\n        return this.view.position;\r\n    }\r\n\r\n    set position(value){\r\n        this.view.position.copy(value);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoEntry} entry \r\n     */\r\n    static Dummy(entry){\r\n        var cargoView = new CargoView(entry);\r\n        cargoView.view = new THREE.Mesh(dummyGeometry, dummyMaterial);\r\n        return cargoView;\r\n    }\r\n\r\n}\r\n\r\nexport default CargoView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoView.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 20\n// module chunks = 0","\r\nimport SceneSetup from './view/SceneSetup';\r\nimport Packer from './packer/Packer';\r\nimport View from './view/View';\r\nimport CargoInput from './components/CargoInput';\r\nimport PackingSpaceInput from './components/PackingSpaceInput';\r\nimport UX from './UX';\r\nimport Logger from './utils/cik/Logger';\r\n\r\n/**\r\n * @typedef AppComponents\r\n * @property {CargoInput} cargoInput\r\n * @property {PackingSpaceInput} packingSpaceInput\r\n */\r\n\r\nclass App {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLDivElement} containerDiv\r\n     * @param {UX} ux\r\n     * @param {AppComponents} components \r\n     */\r\n    constructor(containerDiv, ux, components) {\r\n        this.ux = ux;\r\n        this.components = components;\r\n\r\n        /** @type {import('./packer/Packer').PackerParams} */\r\n        var packerParams = {ux: this.ux};\r\n        this.packer = new Packer(packerParams);\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv, this.ux);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        var packer = this.packer;\r\n\r\n        /** @type {import('./view/View').ViewParams} */\r\n        var viewParams = { ux: this.ux };\r\n        this.view = new View(packer, this.sceneSetup, viewParams);\r\n        this.sceneSetup.Start();\r\n\r\n        this.components.cargoInput.On(CargoInput.signals.completed, function(boxEntry){\r\n            packer.cargoList.Add(boxEntry);\r\n        });\r\n\r\n        this.components.packingSpaceInput.On(PackingSpaceInput.signals.containerLoaded, function(container){\r\n            packer.packingSpace.AddContainer(container);\r\n        });\r\n\r\n        /** @param {import('./packer/Packer').PackingResult} packingResult */\r\n        function onPackUpdate(packingResult){\r\n            Logger.Log('Packing result', packingResult);\r\n        }\r\n\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","/*\r\nconst _callback = Symbol('callback');\r\n/** @returns {function} /\r\nget callback(){ return this[_callback]; }\r\nset callback(value){\r\n    this[_callback] = value;\r\n}\r\n*/\r\n\r\nclass UpdateComponent{\r\n    /**\r\n     * \r\n     * @param {Boolean} active \r\n     * @param {Number} interval \r\n     * @param {function(Number)} callback\r\n     */\r\n    constructor(active, interval, callback){\r\n        this.active = active === undefined ? false : active;\r\n        this.interval = interval === undefined ? 1 / 30 : interval;\r\n        this.callback = callback;\r\n        this.lastUpdateTime = 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} now \r\n     */\r\n    Update(now){\r\n        this.lastUpdateTime = now;\r\n        this.callback(now);\r\n    }\r\n}\r\n\r\nexport default UpdateComponent;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/UpdateComponent.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nvar tempVec3 = new THREE.Vector3(),\r\n    tempVec3_b = new THREE.Vector3();\r\n\r\n/**\r\n * @typedef {Object} CameraParams\r\n * @property {Number} fov\r\n * @property {Number} aspect\r\n * @property {Number} near\r\n * @property {Number} far\r\n */\r\n\r\nclass Camera {\r\n    /**\r\n     * @param {CameraParams} params \r\n     */\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target.copy(lookTarget);\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     * @param {Number} [distanceMultiplier]\r\n     */\r\n    Frame(box3, distanceMultiplier){\r\n        if(distanceMultiplier === undefined) distanceMultiplier = .75;\r\n\r\n        var fov = this.camera.fov * (Math.PI / 180);\r\n\r\n        var extent = tempVec3;\r\n        box3.getSize(extent);\r\n        var frameSize = Math.max(extent.x, extent.y, extent.z);\r\n        var distance = Math.abs(frameSize / Math.sin(fov / 2)) * distanceMultiplier;\r\n        \r\n        var center = tempVec3_b;\r\n        box3.getCenter(center);\r\n        \r\n        var position = tempVec3;\r\n        position.subVectors(this.camera.position, center).normalize().multiplyScalar(distance).add(center);\r\n\r\n        this.camera.position.copy(position);\r\n        this.SetTarget(center);\r\n    }\r\n\r\n    /**\r\n     * @returns {Boolean}\r\n     */\r\n    get enabled(){\r\n        return this.controls.enabled;\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nvar stylesheet;\r\n\r\nfunction createCSS(css){\r\n    if(stylesheet === undefined){\r\n        stylesheet = document.createElement('style');\r\n        stylesheet.type = 'text/css';\r\n        document.getElementsByTagName('head')[0].appendChild(stylesheet);\r\n    }\r\n    if(css instanceof Array)\r\n        css = css.join('\\n');\r\n    \r\n    stylesheet.innerHTML += css + '\\n';\r\n}\r\n\r\ncreateCSS([\r\n    '@keyframes wiggle {',\r\n    '    20% { transform: rotate(5deg); }',\r\n    '    50% { transform: rotate(0deg); }',\r\n    '    75% { transform: rotate(-5deg); }',\r\n    '   100% { transform: rotate(0deg); }',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    UIFitContent: 'display: inline-block; padding-bottom: 1em;',\r\n    UIHideMenu: 'display: none !important;',\r\n\r\n    UIDraggable: 'position: absolute; -webkit-user-select: none; -moz-user-select: none; -o-user-select: none; \\\r\n                -ms-user-select: none; -khtml-user-select: none; user-select: none; z-index: 1; padding: 4px;',\r\n    UIDHeader: 'color: #ffffff; display: inline-block; word-wrap: break-word; font-family: Monospace; font-size: 1.2em; height: 100%; width: 100%;',\r\n    UIDCloseButton: 'background-color: rgb(19, 19, 19); border: none; color: white; padding: 8px 2px; text-align: center; \\\r\n                text-decoration: none; margin-left: -38px; margin-right: 10px; font-family: Monospace; font-size: small; cursor: pointer;',\r\n    UIWiggleAnim: 'display: inline-block; animation: wiggle .15s;'\r\n    \r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    EnableChildInput(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n    }\r\n\r\n    Hide(){\r\n        Element.AddStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n    \r\n    Show(){\r\n        Element.RemoveStyle(this.domElement, styles.UIHideMenu);\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static AddStyle(element, style){\r\n        let eStyle = element.style.cssText;\r\n        let index = eStyle.indexOf(style);\r\n        if(index === -1){\r\n            element.style.cssText += style;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     * @param {string} style \r\n     */\r\n    static RemoveStyle(element, style){\r\n        element.style.cssText = element.style.cssText.replace(style, '');\r\n    }\r\n\r\n    static get CreateCSS(){\r\n        return createCSS;\r\n    }\r\n\r\n    static Add(element){\r\n        document.body.appendChild(element.domElement);\r\n    }\r\n}\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor = 'default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8);' + styles.UIFitContent + styles.UIDraggable;\r\n        dom = crel('div', {style: domStyle});\r\n        var head = crel('div', {style: 'display: flex;'});\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, style: styles.UIDHeader}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onclick: close, style: styles.UIDCloseButton}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.EnableChildInput();\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport {\r\n    styles,\r\n    Element,\r\n    Draggable\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/UIUtils.js","import { Element } from \"./UIUtils\";\r\n\r\nElement.CreateCSS([\r\n    '.tooltip .tooltiptext {',\r\n    '    visibility: hidden;',\r\n    '    position: absolute;',\r\n    '    width: 120px;',\r\n    '    background-color: #111;',\r\n    '    color: #fff;',\r\n    '    text-align: center;',\r\n    '    padding: 2px 0;',\r\n    '    border-radius: 2px;',\r\n    '    z-index: 1;',\r\n    '    opacity: 0;',\r\n    '    transition: opacity .6s;',\r\n    '}',\r\n\r\n    '.tooltip-top {',\r\n    '    bottom: 125%;',\r\n    '    left: 50%;',\r\n    '    margin-left: -60px;',\r\n    '}',\r\n    \r\n    '.tooltip:hover .tooltiptext {',\r\n    '    visibility: visible;',\r\n    '    opacity: 1;',\r\n    '}'\r\n]);\r\n\r\nconst styles = {\r\n    datDisabled: 'color: #606060 !important; cursor: not-allowed !important;'\r\n};\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'onGUIEvent', {\r\n    get: function(){\r\n        if(!this._onGUIEvent)\r\n            this._onGUIEvent = [];\r\n        return this._onGUIEvent;\r\n    }\r\n});\r\n\r\n// update all\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.updateAll = function(){\r\n    var gui = this;\r\n    for (var i in gui.__controllers) {\r\n        var controller = gui.__controllers[i];\r\n        controller.updateDisplay();\r\n    }\r\n\r\n    var folders = Object.values(gui.__folders);\r\n    for(i = 0; i < folders.length; i++){\r\n        folders[i].updateAll();\r\n    }\r\n};\r\n\r\n// find\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.find = function(object, property){\r\n    var gui = this, controller, i;\r\n\r\n    if(property){ // 2 arguments\r\n        for (i = 0; i < gui.__controllers.length; i++){\r\n            controller = gui.__controllers[i];\r\n            if (controller.object == object && controller.property == property)\r\n                return controller;\r\n        }\r\n\r\n        var folders = Object.values(gui.__folders);\r\n        for(i = 0; i < folders.length; i++){\r\n            controller = folders[i].find(object, property);\r\n            if(controller) return controller;\r\n        }\r\n    }\r\n    else{\r\n        property = object; // 1 argument\r\n\r\n        var folderKeys = Object.keys(gui.__folders);\r\n        for(i = 0; i < folderKeys.length; i++){\r\n            var folderName = folderKeys[i];\r\n            var folder = gui.__folders[folderName];\r\n            if(folderName === property)\r\n                return folder;\r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n// On open event\r\n//if(_this.opening !== undefined) _this.opening = _this.closed; // chadiik\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).GUI.prototype, 'opening', {\r\n    get: function(){\r\n        return !this.closed;\r\n    },\r\n\r\n    set: function(value){\r\n        for(var i = 0; i < this.onGUIEvent.length; i++){\r\n            this.onGUIEvent[i](value ? 'open' : 'close');\r\n        }\r\n    }\r\n});\r\n\r\n// Disabled\r\nfunction blockEvent(event){\r\n    event.stopPropagation();\r\n}\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"disabled\", {\r\n    get: function(){\r\n        return this.domElement.hasAttribute(\"disabled\");\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            this.domElement.setAttribute(\"disabled\", \"disabled\");\r\n            this.domElement.addEventListener(\"click\", blockEvent, true);\r\n            Element.AddStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n        else{\r\n            this.domElement.removeAttribute(\"disabled\");\r\n            this.domElement.removeEventListener(\"click\", blockEvent, true);\r\n            Element.RemoveStyle(this.domElement.parentElement.parentElement, styles.datDisabled);\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.enable = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.disabled = !value;\r\n};\r\n\r\n// Tooltip\r\n\r\nObject.defineProperty((window.dat || require(\"./datGUIConsole\").default).controllers.Controller.prototype, \"tooltip\", {\r\n    get: function(){\r\n        return this._tooltip.innerHTML;\r\n    },\r\n\r\n    set: function(value){\r\n        if (value){\r\n            if(this._tooltip === undefined) {\r\n                this._tooltip = crel('span', {class: 'tooltiptext'});\r\n\r\n                /**\r\n                 * @type {HTMLElement}\r\n                 */\r\n                var container = this.domElement.parentElement.parentElement;\r\n                container.classList.add('tooltip');\r\n                container.appendChild(this._tooltip);\r\n            }\r\n            this._tooltip.innerHTML = value;\r\n        }\r\n    },\r\n\r\n    enumerable: true\r\n});\r\n\r\n(window.dat || require(\"./datGUIConsole\").default).GUI.prototype.setTooltip = function(object, property, value){\r\n    var controller = this.find(object, property);\r\n    controller.tooltip = value;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/config/datGUIExtensions.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport CargoGroup from \"./CargoGroup\";\r\n\r\nconst stringType = 'string';\r\n\r\nconst signals = {\r\n    groupAdded: 'groupAdded',\r\n    groupRemoved: 'groupRemoved'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        /** @type {Map<string, CargoGroup>} */\r\n        this.groups = new Map();\r\n    }\r\n\r\n    /** Adds a new CargoGroup\r\n     * @param {CargoEntry} entry \r\n     */\r\n    Add(entry){\r\n        var group = new CargoGroup(entry);\r\n\r\n        this.groups.set(entry.uid, group);\r\n        this.Dispatch(signals.groupAdded, group);\r\n    }\r\n\r\n    /** Removes the CargoGroup using its uid\r\n     * @param {string} uid \r\n     */\r\n    Remove(uid){\r\n        var group = this.groups.get(uid);\r\n        if(group){\r\n            this.groups.delete(uid);\r\n            this.Dispatch(signals.groupRemoved, group);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","class TextField {\r\n    /**\r\n     * @param {string} label \r\n     * @param {string} content \r\n     */\r\n    constructor(label, content){\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.label = label;\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.content = content;\r\n    }\r\n\r\n    /**\r\n     * @param {TextField} field \r\n     */\r\n    Copy(field){\r\n        this.label = field.label;\r\n        this.content = field.content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import Container from \"./components/Container\";\r\nimport Item from \"./components/Item\";\r\n\r\nconst epsilon = Math.pow(2, -52);\r\n\r\n/**\r\n * From the master's thesis:\r\n * \"The double linked list we use keeps the topology of the edge of the \r\n * current layer under construction. We keep the x and z coordinates of \r\n * each gap's right corner. The program looks at those gaps and tries to \r\n * fill them with boxes one at a time while trying to keep the edge of the\r\n * layer even\" (p. 3-7).\r\n */\r\nclass ScrapPad{\r\n    constructor(){\r\n        /** The x coordinate of the gap's right corner. */\r\n        this.CumX = 0;\r\n        /** The z coordinate of the gap's right corner. */\r\n        this.CumZ = 0;\r\n        \r\n        /** The following entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Post;\r\n\r\n        /** The previous entry.\r\n         * @type {ScrapPad}\r\n         */\r\n        this.Pre;\r\n    }\r\n}\r\n\r\n/**\r\n * A list that stores all the different lengths of all item dimensions.\r\n * From the master's thesis:\r\n * \"Each Layerdim value in this array represents a different layer thickness\r\n * value with which each iteration can start packing. Before starting iterations,\r\n * all different lengths of all box dimensions along with evaluation values are\r\n * stored in this array\" (p. 3-6).\r\n */\r\nclass Layer {\r\n    constructor(layerEval){\r\n        this.LayerDim = 0;\r\n        this.LayerEval = layerEval !== undefined ? layerEval : 0;\r\n    }\r\n\r\n    /**\r\n     * @param {Layer} l1 \r\n     * @param {Layer} l2 \r\n     */\r\n    static SortByEval(l1, l2){\r\n        return l1.LayerEval - l2.LayerEval;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef PackingResult\r\n * @property {Container} Container\r\n * @property {Boolean} IsCompletePack\r\n * @property {Array<Item>} PackedItems\r\n * @property {Number} PercentContainerVolumePacked\r\n * @property {Number} PercentItemVolumePacked\r\n * @property {Array<Item>} UnpackedItems\r\n * @property {Number} PackTimeInMilliseconds\r\n */\r\n\r\nclass PackingResult{\r\n    constructor(){\r\n\t\t/** @type {Container} */\r\n\t\tthis.Container;\r\n        this.IsCompletePack = false;\r\n        /** @type {Array<Item>} */\r\n        this.PackedItems = [];\r\n        this.PercentContainerVolumePacked = 0;\r\n        this.PercentItemVolumePacked = 0;\r\n        /** @type {Array<Item>} */\r\n        this.UnpackedItems = [];\r\n        this.PackTimeInMilliseconds = Number.MAX_SAFE_INTEGER;\r\n    }\r\n}\r\n\r\n\r\n/** @type {Array<Item>} */\r\nvar itemsToPack = [];\r\n/** @type {Array<Item>} */\r\nvar itemsPackedInOrder;\r\n/** @type {Array<Layer>} */\r\nvar layers;\r\n\r\n/** @type {ScrapPad} */\r\nvar scrapfirst;\r\n/** @type {ScrapPad} */\r\nvar smallestZ;\r\n/** @type {ScrapPad} */\r\nvar trash;\r\n\r\nvar evened = false;\r\nvar hundredPercentPacked = false\r\nvar layerDone = false;\r\nvar packing = false;\r\nvar packingBest = false;\r\nvar quit = false;\r\n\r\nvar bboxi = 0;\r\nvar bestIteration = 0;\r\nvar bestVariant = 0;\r\nvar boxi = 0;\r\nvar cboxi = 0;\r\nvar layerListLen = 0;\r\nvar packedItemCount = 0;\r\nvar x = 0;\r\n\r\nvar bbfx = 0;\r\nvar bbfy = 0;\r\nvar bbfz = 0;\r\nvar bboxx = 0;\r\nvar bboxy = 0;\r\nvar bboxz = 0;\r\nvar bfx = 0;\r\nvar bfy = 0;\r\nvar bfz = 0;\r\nvar boxx = 0;\r\nvar boxy = 0;\r\nvar boxz = 0;\r\nvar cboxx = 0;\r\nvar cboxy = 0;\r\nvar cboxz = 0;\r\nvar layerinlayer = 0;\r\nvar layerThickness = 0;\r\nvar lilz = 0;\r\nvar packedVolume = 0;\r\nvar packedy = 0;\r\nvar prelayer = 0;\r\nvar prepackedy = 0;\r\nvar preremainpy = 0;\r\nvar px = 0;\r\nvar py = 0;\r\nvar pz = 0;\r\nvar remainpy = 0;\r\nvar remainpz = 0;\r\nvar itemsToPackCount = 0;\r\nvar totalItemVolume = 0;\r\nvar totalContainerVolume = 0;\r\n\r\n/**\r\n * Current port by chadiik (2018)\r\n * A 3D bin packing algorithm originally ported from https://github.com/davidmchapman/3DContainerPacking\r\n * which itself was ported from https://github.com/keremdemirer/3dbinpackingjs,\r\n * which itself was a JavaScript port of https://github.com/wknechtel/3d-bin-pack/, which is a C reconstruction \r\n * of a novel algorithm developed in a U.S. Air Force master's thesis by Erhan Baltacioglu in 2001.\r\n */\r\nclass AFit {\r\n    constructor(){\r\n\r\n    }\r\n    \r\n    /**\r\n     * Runs the algorithm\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     * @returns {PackingResult}\r\n     */\r\n    Solve(container, items)\r\n    {\r\n        this.Initialize(container, items);\r\n        this.ExecuteIterations(container);\r\n        this.Report(container);\r\n\r\n\t\tvar result = new PackingResult();\r\n\t\tresult.Container = container;\r\n\r\n        for (var i = 1; i <= itemsToPackCount; i++)\r\n        {\r\n            itemsToPack[i].Quantity = 1;\r\n\r\n            if (!itemsToPack[i].IsPacked)\r\n            {\r\n                result.UnpackedItems.push(itemsToPack[i]);\r\n            }\r\n        }\r\n\r\n        result.PackedItems = itemsPackedInOrder;\r\n        \r\n\r\n\r\n        if (result.UnpackedItems.length == 0)\r\n        {\r\n            result.IsCompletePack = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Analyzes each unpacked box to find the best fitting one to the empty space given.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     * @param {Number} dim1 \r\n     * @param {Number} dim2 \r\n     * @param {Number} dim3 \r\n     */\r\n    AnalyzeBox(hmx, hy, hmy, hz, hmz, dim1, dim2, dim3)\r\n\t{\r\n\t\tif (dim1 <= hmx && dim2 <= hmy && dim3 <= hmz)\r\n\t\t{\r\n\t\t\tif (dim2 <= hy)\r\n\t\t\t{\r\n\t\t\t\tif (hy - dim2 < bfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 < bfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (hy - dim2 == bfy && hmx - dim1 == bfx && Math.abs(hz - dim3) < bfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tboxx = dim1;\r\n\t\t\t\t\tboxy = dim2;\r\n\t\t\t\t\tboxz = dim3;\r\n\t\t\t\t\tbfx = hmx - dim1;\r\n\t\t\t\t\tbfy = hy - dim2;\r\n\t\t\t\t\tbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (dim2 - hy < bbfy)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 < bbfx)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t\telse if (dim2 - hy == bbfy && hmx - dim1 == bbfx && Math.abs(hz - dim3) < bbfz)\r\n\t\t\t\t{\r\n\t\t\t\t\tbboxx = dim1;\r\n\t\t\t\t\tbboxy = dim2;\r\n\t\t\t\t\tbboxz = dim3;\r\n\t\t\t\t\tbbfx = hmx - dim1;\r\n\t\t\t\t\tbbfy = dim2 - hy;\r\n\t\t\t\t\tbbfz = Math.abs(hz - dim3);\r\n\t\t\t\t\tbboxi = x;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * After finding each box, the candidate boxes and the condition of the layer are examined.\r\n     */\r\n\tCheckFound()\r\n\t{\r\n\t\tevened = false;\r\n\r\n\t\tif (boxi != 0)\r\n\t\t{\r\n\t\t\tcboxi = boxi;\r\n\t\t\tcboxx = boxx;\r\n\t\t\tcboxy = boxy;\r\n\t\t\tcboxz = boxz;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif ((bboxi > 0) && (layerinlayer != 0 || (!smallestZ.Pre && !smallestZ.Post)))\r\n\t\t\t{\r\n\t\t\t\tif (layerinlayer == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tprelayer = layerThickness;\r\n\t\t\t\t\tlilz = smallestZ.CumZ;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcboxi = bboxi;\r\n\t\t\t\tcboxx = bboxx;\r\n\t\t\t\tcboxy = bboxy;\r\n\t\t\t\tcboxz = bboxz;\r\n\t\t\t\tlayerinlayer = layerinlayer + bboxy - layerThickness;\r\n\t\t\t\tlayerThickness = bboxy;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (!smallestZ.Pre && !smallestZ.Post)\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerDone = true;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tevened = true;\r\n\r\n\t\t\t\t\tif (!smallestZ.Pre)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (!smallestZ.Post)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\r\n\t\t\t\t\t\t\tif (smallestZ.Pre.CumZ < smallestZ.Post.CumZ)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Executes the packing algorithm variants.\r\n     * @param {Container} container \r\n     */\r\n\tExecuteIterations(container)\r\n\t{\r\n\t\tvar itelayer = 0;\r\n\t\tvar layersIndex = 0;\r\n\t\tvar bestVolume = 0;\r\n\r\n\t\tfor (var containerOrientationVariant = 1; (containerOrientationVariant <= 6) && !quit; containerOrientationVariant++)\r\n\t\t{\r\n\t\t\tswitch (containerOrientationVariant)\r\n\t\t\t{\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 6:\r\n\t\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlayers.push(new Layer(-1));\r\n\t\t\tthis.ListCanditLayers();\r\n            //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n            layers.sort(Layer.SortByEval);\r\n\r\n\t\t\tfor (layersIndex = 1; (layersIndex <= layerListLen) && !quit; layersIndex++)\r\n\t\t\t{\r\n\t\t\t\tpackedVolume = 0;\r\n\t\t\t\tpackedy = 0;\r\n\t\t\t\tpacking = true;\r\n\t\t\t\tlayerThickness = layers[layersIndex].LayerDim;\r\n\t\t\t\titelayer = layersIndex;\r\n\t\t\t\tremainpy = py;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t\tpackedItemCount = 0;\r\n\r\n\t\t\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdo\r\n\t\t\t\t{\r\n\t\t\t\t\tlayerinlayer = 0;\r\n\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\t\t\tif (layerinlayer != 0 && !quit)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprepackedy = packedy;\r\n\t\t\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\t\t\tremainpz = lilz;\r\n\t\t\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\t\t\tlayerDone = false;\r\n\r\n\t\t\t\t\t\tthis.PackLayer();\r\n\r\n\t\t\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\t\t\tremainpz = pz;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t\t} while (packing && !quit);\r\n\r\n\t\t\t\tif ((packedVolume > bestVolume) && !quit)\r\n\t\t\t\t{\r\n\t\t\t\t\tbestVolume = packedVolume;\r\n\t\t\t\t\tbestVariant = containerOrientationVariant;\r\n\t\t\t\t\tbestIteration = itelayer;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hundredPercentPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (hundredPercentPacked) break;\r\n\r\n\t\t\tif ((container.Length == container.Height) && (container.Height == container.Width)) containerOrientationVariant = 6;\r\n\r\n\t\t\tlayers = [];\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper boxes by looking at all six possible orientations,\r\n\t * empty space given, adjacent boxes, and pallet limits.\r\n     * @param {Number} hmx \r\n     * @param {Number} hy \r\n     * @param {Number} hmy \r\n     * @param {Number} hz \r\n     * @param {Number} hmz \r\n     */\r\n\tFindBox(hmx, hy, hmy, hz, hmz)\r\n\t{\r\n        var y = 0;\r\n        \r\n\t\tbfx = Number.MAX_VALUE;\r\n\t\tbfy = Number.MAX_VALUE;\r\n\t\tbfz = Number.MAX_VALUE;\r\n\t\tbbfx = Number.MAX_VALUE;\r\n\t\tbbfy = Number.MAX_VALUE;\r\n\t\tbbfz = Number.MAX_VALUE;\r\n\t\tboxi = 0;\r\n\t\tbboxi = 0;\r\n\r\n\t\tfor (y = 1; y <= itemsToPackCount; y = y + itemsToPack[y].Quantity)\r\n\t\t{\r\n\t\t\tfor (x = y; x < x + itemsToPack[y].Quantity - 1; x++)\r\n\t\t\t{\r\n\t\t\t\tif (!itemsToPack[x].IsPacked) break;\r\n\t\t\t}\r\n\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tif (x > itemsToPackCount) return;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim2, itemsToPack[x].Dim3);\r\n\r\n\t\t\tif ((itemsToPack[x].Dim1 == itemsToPack[x].Dim3) && (itemsToPack[x].Dim3 == itemsToPack[x].Dim2)) continue;\r\n\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim1, itemsToPack[x].Dim3, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim1, itemsToPack[x].Dim3);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim2, itemsToPack[x].Dim3, itemsToPack[x].Dim1);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim1, itemsToPack[x].Dim2);\r\n\t\t\tthis.AnalyzeBox(hmx, hy, hmy, hz, hmz, itemsToPack[x].Dim3, itemsToPack[x].Dim2, itemsToPack[x].Dim1);\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Finds the most proper layer height by looking at the unpacked boxes and the remaining empty space available.\r\n     * @param {Number} thickness \r\n     */\r\n\tFindLayer(thickness)\r\n\t{\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar layereval = 0;\r\n        var maxEvaluations = 1000000;\r\n        \r\n\t\tlayerThickness = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tif (itemsToPack[x].IsPacked) continue;\r\n\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tif ((exdim <= thickness) && (((dimen2 <= px) && (dimen3 <= pz)) || ((dimen3 <= px) && (dimen2 <= pz))))\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!(x == z) && !(itemsToPack[z].IsPacked))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (layereval < maxEvaluations)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmaxEvaluations = layereval;\r\n\t\t\t\t\t\tlayerThickness = exdim;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (layerThickness == 0 || layerThickness > remainpy) packing = false;\r\n\t}\r\n\r\n    /**\r\n     * Finds the first to be packed gap in the layer edge.\r\n     */\r\n\tFindSmallestZ()\r\n\t{\r\n\t\tvar scrapmemb = scrapfirst;\r\n\t\tsmallestZ = scrapmemb;\r\n\r\n\t\twhile (scrapmemb.Post)\r\n\t\t{\r\n\t\t\tif (scrapmemb.Post.CumZ < smallestZ.CumZ)\r\n\t\t\t{\r\n\t\t\t\tsmallestZ = scrapmemb.Post;\r\n\t\t\t}\r\n\r\n\t\t\tscrapmemb = scrapmemb.Post;\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Initializes everything.\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n\tInitialize(container, items)\r\n\t{\r\n\t\titemsToPack = [];\r\n\t\titemsPackedInOrder = [];\r\n\r\n\t\t// The original code uses 1-based indexing everywhere. This fake entry is added to the beginning\r\n\t\t// of the list to make that possible.\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0, 0));\r\n\r\n\t\tlayers = [];\r\n\t\titemsToPackCount = 0;\r\n\r\n\t\tfor(var iItems = 0, numItems = items.length; iItems < numItems; iItems++)\r\n\t\t{\r\n            let item = items[iItems];\r\n\t\t\tfor (var i = 1; i <= item.Quantity; i++)\r\n\t\t\t{\r\n\t\t\t\tlet newItem = new Item(item.ID, item.Dim1, item.Dim2, item.Dim3, item.Quantity);\r\n\t\t\t\titemsToPack.push(newItem);\r\n\t\t\t}\r\n\r\n\t\t\titemsToPackCount += item.Quantity;\r\n\t\t}\r\n\r\n\t\titemsToPack.push(new Item(0, 0, 0, 0, 0));\r\n\r\n\t\ttotalContainerVolume = container.Length * container.Height * container.Width;\r\n\t\ttotalItemVolume = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\ttotalItemVolume = totalItemVolume + itemsToPack[x].Volume;\r\n\t\t}\r\n\r\n\t\tscrapfirst = new ScrapPad();\r\n\r\n\t\tscrapfirst.Pre = undefined;\r\n\t\tscrapfirst.Post = undefined;\r\n\t\tpackingBest = false;\r\n\t\thundredPercentPacked = false;\r\n\t\tquit = false;\r\n\t}\r\n\r\n    /**\r\n     * Lists all possible layer heights by giving a weight value to each of them.\r\n     */\r\n\tListCanditLayers()\r\n\t{\r\n\t\tvar same = false;\r\n\t\tvar exdim = 0;\r\n\t\tvar dimdif = 0;\r\n\t\tvar dimen2 = 0;\r\n\t\tvar dimen3 = 0;\r\n\t\tvar y = 0;\r\n\t\tvar z = 0;\r\n\t\tvar k = 0;\r\n\t\tvar layereval = 0;\r\n\r\n\t\tlayerListLen = 0;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\tfor (y = 1; y <= 3; y++)\r\n\t\t\t{\r\n\t\t\t\tswitch (y)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\texdim = itemsToPack[x].Dim3;\r\n\t\t\t\t\t\tdimen2 = itemsToPack[x].Dim1;\r\n\t\t\t\t\t\tdimen3 = itemsToPack[x].Dim2;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((exdim > py) || (((dimen2 > px) || (dimen3 > pz)) && ((dimen3 > px) || (dimen2 > pz)))) continue;\r\n\r\n\t\t\t\tsame = false;\r\n\r\n\t\t\t\tfor (k = 1; k <= layerListLen; k++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (exdim == layers[k].LayerDim)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsame = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (same) continue;\r\n\r\n\t\t\t\tlayereval = 0;\r\n\r\n\t\t\t\tfor (z = 1; z <= itemsToPackCount; z++)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!(x == z))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim1);\r\n\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim2) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim2);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Math.abs(exdim - itemsToPack[z].Dim3) < dimdif)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tdimdif = Math.abs(exdim - itemsToPack[z].Dim3);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlayereval = layereval + dimdif;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayerListLen++;\r\n\r\n\t\t\t\tlayers.push(new Layer());\r\n\t\t\t\tlayers[layerListLen].LayerEval = layereval;\r\n\t\t\t\tlayers[layerListLen].LayerDim = exdim;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Transforms the found coordinate system to the one entered by the user and writes them to the report file.\r\n     */\r\n\tOutputBoxList()\r\n\t{\r\n\t\tvar packCoordX = 0;\r\n\t\tvar packCoordY = 0;\r\n\t\tvar packCoordZ = 0;\r\n\t\tvar packDimX = 0;\r\n\t\tvar packDimY = 0;\r\n\t\tvar packDimZ = 0;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpackCoordX = itemsToPack[cboxi].CoordZ;\r\n\t\t\t\tpackCoordY = itemsToPack[cboxi].CoordX;\r\n\t\t\t\tpackCoordZ = itemsToPack[cboxi].CoordY;\r\n\t\t\t\tpackDimX = itemsToPack[cboxi].PackDimZ;\r\n\t\t\t\tpackDimY = itemsToPack[cboxi].PackDimX;\r\n\t\t\t\tpackDimZ = itemsToPack[cboxi].PackDimY;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\titemsToPack[cboxi].CoordX = packCoordX;\r\n\t\titemsToPack[cboxi].CoordY = packCoordY;\r\n\t\titemsToPack[cboxi].CoordZ = packCoordZ;\r\n\t\titemsToPack[cboxi].PackDimX = packDimX;\r\n\t\titemsToPack[cboxi].PackDimY = packDimY;\r\n\t\titemsToPack[cboxi].PackDimZ = packDimZ;\r\n\r\n\t\titemsPackedInOrder.push(itemsToPack[cboxi]);\r\n\t}\r\n\r\n    /**\r\n     * Packs the boxes found and arranges all variables and records properly.\r\n     */\r\n\tPackLayer()\r\n\t{\r\n\t\tvar lenx = 0;\r\n\t\tvar lenz = 0;\r\n\t\tvar lpz = 0;\r\n\r\n\t\tif (layerThickness == 0)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tscrapfirst.CumX = px;\r\n\t\tscrapfirst.CumZ = 0;\r\n\r\n        //for (; !quit;)\r\n        while(!quit)\r\n\t\t{\r\n\t\t\tthis.FindSmallestZ();\r\n\r\n\t\t\tif ((!smallestZ.Pre) && (!smallestZ.Post))\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-1: NO BOXES ON THE RIGHT AND LEFT SIDES ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lpz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tsmallestZ.Post = new ScrapPad();\r\n\r\n\t\t\t\t\tsmallestZ.Post.Post = undefined;\r\n\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ;\r\n\t\t\t\t\tsmallestZ.CumX = cboxx;\r\n\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Pre)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-2: NO BOXES ON THE LEFT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX;\r\n\t\t\t\tlenz = smallestZ.Post.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\tif (cboxx == smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = 0;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.Post.CumZ;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.Post.CumX;\r\n\t\t\t\t\t\ttrash = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Post;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!smallestZ.Post)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-3: NO BOXES ON THE RIGHT SIDE ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (smallestZ.Pre.CumZ == smallestZ.Post.CumZ)\r\n\t\t\t{\r\n\t\t\t\t//*** SITUATION-4: THERE ARE BOXES ON BOTH OF THE SIDES ***\r\n\r\n\t\t\t\t//*** SUBSITUATION-4A: SIDES ARE EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\r\n\t\t\t\tif (cboxx == smallestZ.CumX - smallestZ.Pre.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Post.CumX;\r\n\r\n\t\t\t\t\t\tif (smallestZ.Post.Post)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post.Post;\r\n\t\t\t\t\t\t\tsmallestZ.Post.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsmallestZ.Pre.Post = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (smallestZ.Pre.CumX < px - smallestZ.CumX)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (smallestZ.CumZ + cboxz == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre.Pre = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Post = smallestZ.Post.Pre;\r\n\t\t\t\t\t\tsmallestZ.Post.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Post.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//*** SUBSITUATION-4B: SIDES ARE NOT EQUAL TO EACH OTHER ***\r\n\r\n\t\t\t\tlenx = smallestZ.CumX - smallestZ.Pre.CumX;\r\n\t\t\t\tlenz = smallestZ.Pre.CumZ - smallestZ.CumZ;\r\n\t\t\t\tlpz = remainpz - smallestZ.CumZ;\r\n\t\t\t\tthis.FindBox(lenx, layerThickness, remainpy, lenz, lpz);\r\n\t\t\t\tthis.CheckFound();\r\n\r\n\t\t\t\tif (layerDone) break;\r\n\t\t\t\tif (evened) continue;\r\n\r\n\t\t\t\titemsToPack[cboxi].CoordY = packedy;\r\n\t\t\t\titemsToPack[cboxi].CoordZ = smallestZ.CumZ;\r\n\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.Pre.CumX;\r\n\r\n\t\t\t\tif (cboxx == (smallestZ.CumX - smallestZ.Pre.CumX))\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.CumX;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = smallestZ.Post;\r\n\t\t\t\t\t\tsmallestZ.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((smallestZ.CumZ + cboxz) == smallestZ.Pre.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.CumX + cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (smallestZ.CumZ + cboxz == smallestZ.Post.CumZ)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\titemsToPack[cboxi].CoordX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t\tsmallestZ.CumX = smallestZ.CumX - cboxx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsmallestZ.Pre.Post = new ScrapPad();\r\n\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Pre = smallestZ.Pre;\r\n\t\t\t\t\t\tsmallestZ.Pre.Post.Post = smallestZ;\r\n\t\t\t\t\t\tsmallestZ.Pre = smallestZ.Pre.Post;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumX = smallestZ.Pre.Pre.CumX + cboxx;\r\n\t\t\t\t\t\tsmallestZ.Pre.CumZ = smallestZ.CumZ + cboxz;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.VolumeCheck();\r\n\t\t}\r\n\t}\r\n\r\n    /**\r\n     * Using the parameters found, packs the best solution found and reports to the console.\r\n     * @param {Container} container \r\n     */\r\n\tReport(container)\r\n\t{\r\n\t\tquit = false;\r\n\r\n\t\tswitch (bestVariant)\r\n\t\t{\r\n\t\t\tcase 1:\r\n\t\t\t\tpx = container.Length; py = container.Height; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tpx = container.Width; py = container.Height; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\tpx = container.Width; py = container.Length; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\tpx = container.Height; py = container.Length; pz = container.Width;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\tpx = container.Length; py = container.Width; pz = container.Height;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\tpx = container.Height; py = container.Width; pz = container.Length;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tpackingBest = true;\r\n\r\n\t\t//Print(\"BEST SOLUTION FOUND AT ITERATION                      :\", bestIteration, \"OF VARIANT\", bestVariant);\r\n\t\t//Print(\"TOTAL ITEMS TO PACK                                   :\", itemsToPackCount);\r\n\t\t//Print(\"TOTAL VOLUME OF ALL ITEMS                             :\", totalItemVolume);\r\n\t\t//Print(\"WHILE CONTAINER ORIENTATION X - Y - Z                 :\", px, py, pz);\r\n\r\n\t\tlayers.length = 0;\r\n\t\tlayers[0] = new Layer(-1);\r\n\t\tthis.ListCanditLayers();\r\n        //layers = layers.OrderBy(l => l.LayerEval).ToList();\r\n        layers.sort(Layer.SortByEval);\r\n\t\tpackedVolume = 0;\r\n\t\tpackedy = 0;\r\n\t\tpacking = true;\r\n\t\tlayerThickness = layers[bestIteration].LayerDim;\r\n\t\tremainpy = py;\r\n\t\tremainpz = pz;\r\n\r\n\t\tfor (x = 1; x <= itemsToPackCount; x++)\r\n\t\t{\r\n\t\t\titemsToPack[x].IsPacked = false;\r\n\t\t}\r\n\r\n\t\tdo\r\n\t\t{\r\n\t\t\tlayerinlayer = 0;\r\n\t\t\tlayerDone = false;\r\n\t\t\tthis.PackLayer();\r\n\t\t\tpackedy = packedy + layerThickness;\r\n\t\t\tremainpy = py - packedy;\r\n\r\n\t\t\tif (layerinlayer > epsilon)\r\n\t\t\t{\r\n\t\t\t\tprepackedy = packedy;\r\n\t\t\t\tpreremainpy = remainpy;\r\n\t\t\t\tremainpy = layerThickness - prelayer;\r\n\t\t\t\tpackedy = packedy - layerThickness + prelayer;\r\n\t\t\t\tremainpz = lilz;\r\n\t\t\t\tlayerThickness = layerinlayer;\r\n\t\t\t\tlayerDone = false;\r\n\t\t\t\tthis.PackLayer();\r\n\t\t\t\tpackedy = prepackedy;\r\n\t\t\t\tremainpy = preremainpy;\r\n\t\t\t\tremainpz = pz;\r\n\t\t\t}\r\n\r\n\t\t\tif (!quit)\r\n\t\t\t{\r\n\t\t\t\tthis.FindLayer(remainpy);\r\n\t\t\t}\r\n\t\t} while (packing && !quit);\r\n\t}\r\n\r\n    /**\r\n     * After packing of each item, the 100% packing condition is checked.\r\n     */\r\n\tVolumeCheck()\r\n\t{\r\n\t\titemsToPack[cboxi].IsPacked = true;\r\n\t\titemsToPack[cboxi].PackDimX = cboxx;\r\n\t\titemsToPack[cboxi].PackDimY = cboxy;\r\n\t\titemsToPack[cboxi].PackDimZ = cboxz;\r\n\t\tpackedVolume = packedVolume + itemsToPack[cboxi].Volume;\r\n\t\tpackedItemCount++;\r\n\r\n\t\tif (packingBest)\r\n\t\t{\r\n\t\t\tthis.OutputBoxList();\r\n\t\t}\r\n\t\telse if (packedVolume == totalContainerVolume || packedVolume == totalItemVolume)\r\n\t\t{\r\n\t\t\tpacking = false;\r\n\t\t\thundredPercentPacked = true;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default AFit;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFit.js","import { ThisWorkbook, Cells, CheckWorksheetExistence, Range, Application } from \"./Workbook\";\r\nimport Signaler from \"../../utils/cik/Signaler\";\r\n\r\n/** Javascript port by chadiik 2018\r\n * \r\n * CLP Spreadsheet Solver v1.1\r\n * Open source, developed by Dr. Gunes Erdogan\r\n * http://people.bath.ac.uk/ge277/index.php/clp-spreadsheet-solver/\r\n * 'This work is licensed under the Creative Commons Attribution 4.0 International License.; <=view a copy of this license, visit http://creativecommons.org/licenses/by/4.0/.\r\n */\r\n\r\nconst epsilon = 0.0001;\r\n\r\n//data declarations\r\n\r\nclass item_type_data{\r\n    /**\r\n     * @param {Number} id \r\n     * @param {Number} width \r\n     * @param {Number} height \r\n     * @param {Number} length \r\n     */\r\n    constructor(id, width, height, length){\r\n        this.id = id;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.length = length\r\n        this.volume = width * height * length;\r\n        this.weight = 0;\r\n        this.xy_rotatable = true;\r\n        this.yz_rotatable = true;\r\n        this.mandatory = 0;\r\n        this.profit = 0;\r\n        this.number_requested = 1;\r\n        this.sort_criterion = 0;\r\n    }\r\n}\r\n\r\nclass item_list_data{\r\n    constructor(){\r\n        this.num_item_types = 0;\r\n        this.total_number_of_items = 0;\r\n        /** @type {Array<item_type_data>} */\r\n        this.item_types;\r\n    }\r\n\r\n    item_typesGet(index){ if(index === 0){ console.warn('0 index'); } return this.item_types[index]; }\r\n}\r\n\r\nvar item_list = new item_list_data();\r\n\r\nclass container_type_data{\r\n    constructor(){\r\n        this.type_id = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.length = 0;\r\n        this.volume_capacity = 0;\r\n        this.weight_capacity = 0;\r\n        this.mandatory = 0;\r\n        this.cost = 0;\r\n        this.number_available = 0;\r\n    }\r\n}\r\n\r\nclass container_list_data{\r\n    constructor(){\r\n        this.num_container_types = 0;\r\n        /** @type {Array<container_type_data>} */\r\n        this.container_types;\r\n    }\r\n\r\n    container_typesGet(index){ if(index === 0){ console.warn('0 index'); } return this.container_types[index]; }\r\n}\r\n\r\nvar container_list = new container_list_data();\r\n\r\nclass compatibility_data{\r\n    constructor(){\r\n        /** @type {Array<Boolean>} */\r\n        this.item_to_item;\r\n        /** @type {Array<Array<Boolean>>} */\r\n        this.container_to_item;\r\n    }\r\n\r\n    item_to_itemGet(index, index2){ if(index === 0 || index2 === 0){ console.warn('0 index'); } return this.item_to_item[index][index2]; }\r\n    container_to_itemGet(index, index2){ if(index === 0 || index2 === 0){ console.warn('0 index'); } return this.container_to_item[index][index2]; }\r\n}\r\n\r\nvar compatibility_list = new compatibility_data();\r\n\r\nclass item_location{\r\n    constructor(){\r\n        this.origin_x = 0;\r\n        this.origin_y = 0;\r\n        this.origin_z = 0;\r\n        this.next_to_item_type = 0;\r\n    }\r\n}\r\n\r\nclass item_in_container{\r\n    constructor(){\r\n        this.item_type = 0;\r\n        this.rotation = 0; //1 to 6\r\n        this.mandatory = 0;\r\n        this.origin_x = 0;\r\n        this.origin_y = 0;\r\n        this.origin_z = 0;\r\n        this.opposite_x = 0;\r\n        this.opposite_y = 0;\r\n        this.opposite_z = 0;\r\n    }\r\n\r\n    static ResolveOrientation(rotationNum){\r\n        const orientations_base1 = ['xyz', 'xyz', 'zyx', 'xzy', 'yzx', 'yxz', 'zxy'];\r\n        return orientations_base1[rotationNum];\r\n    }\r\n}\r\n\r\nclass container_data{\r\n    constructor(){\r\n        this.type_id = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.length = 0;\r\n        this.volume_capacity = 0;\r\n        this.weight_capacity = 0;\r\n        this.cost = 0;\r\n        this.item_cnt = 0;\r\n        this.mandatory = 0;\r\n        this.addition_point_count = 0;\r\n        this.volume_packed = 0;\r\n        this.weight_packed = 0;\r\n\r\n        /** @type {Array<item_in_container>} */\r\n        this.items;\r\n        /** @type {Array<item_location>} */\r\n        this.addition_points;\r\n        /** @type {Array<Number>} */\r\n        this.repack_item_count;\r\n    }\r\n\r\n    itemsGet(index){ if(index === 0){ console.warn('0 index'); } return this.items[index]; }\r\n    addition_pointsGet(index){ if(index === 0){ console.warn('0 index'); } return this.addition_points[index]; }\r\n    repack_item_countGet(index){ if(index === 0){ console.warn('0 index'); } return this.repack_item_count[index]; }\r\n}\r\n\r\nclass solution_data{\r\n    constructor(){\r\n        this.feasible = false;\r\n\r\n        this.num_containers = 0;\r\n        this.net_profit = 0;\r\n        this.total_volume = 0;\r\n        this.total_weight = 0;\r\n        this.total_distance = 0;\r\n        this.total_x_moment = 0;\r\n        this.total_yz_moment = 0;\r\n\r\n        /** @type {Array<container_data>} */\r\n        this.container;\r\n        /** @type {Array<Array<Number>>} */\r\n        this.rotation_order;\r\n        /** @type {Array<Number>} */\r\n        this.item_type_order;\r\n        /** @type {Array<Number>} */\r\n        this.unpacked_item_count;\r\n    }\r\n\r\n    containerGet(index){ if(index === 0){ console.warn('0 index'); } return this.container[index]; }\r\n    item_type_orderGet(index){ if(index === 0){ console.warn('0 index'); } return this.item_type_order[index]; }\r\n    unpacked_item_countGet(index){ if(index === 0){ console.warn('0 index'); } return this.unpacked_item_count[index]; }\r\n}\r\n\r\nclass instance_data{\r\n    constructor(){\r\n        this.front_side_support = false;\r\n        this.item_item_compatibility_worksheet = false; // true if the data exists\r\n        this.container_item_compatibility_worksheet = false; // true if the data exists\r\n    }\r\n}\r\n\r\nvar instance = new instance_data();\r\n\r\nclass solver_option_data{\r\n    constructor(){\r\n        this.CPU_time_limit = 0;\r\n        this.item_sort_criterion = 0;\r\n        this.show_progress = false;\r\n    }\r\n}\r\n\r\nvar solver_options = new solver_option_data();\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} random_reorder_probability \r\n */\r\nfunction SortContainers(solution, random_reorder_probability){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var candidate_index = 0;\r\n    var max_mandatory = 0;\r\n    var max_volume_packed = 0;\r\n    var min_ratio = 0;\r\n\r\n    /** @type {container_data} */\r\n    var swap_container;\r\n        \r\n    // insertion sort\r\n\r\n    if( Math.random() < (1 - random_reorder_probability) ){\r\n        // insertion sort\r\n        for( i = 1; i <= solution.num_containers; i++ ){\r\n            let container = solution.containerGet(i);\r\n            candidate_index = i;\r\n            max_mandatory = container.mandatory;\r\n            max_volume_packed = container.volume_packed;\r\n            min_ratio = container.cost / container.volume_capacity;\r\n    \r\n            for( j = i + 1; j <= solution.num_containers; j++ ){\r\n                let container2 = solution.containerGet(j);\r\n                if (\r\n                    (container2.mandatory > max_mandatory)\r\n                    || ((container2.mandatory === max_mandatory) && (container2.volume_packed > max_volume_packed + epsilon)) \r\n                    || ((container2.mandatory === 0) && (max_mandatory === 0) && (container2.volume_packed > max_volume_packed - epsilon) && ((container2.cost / container2.volume_capacity) < min_ratio))\r\n                ){\r\n                    candidate_index = j;\r\n                    max_mandatory = container2.mandatory;\r\n                    max_volume_packed = container2.volume_packed;\r\n                    min_ratio = container2.cost / container2.volume_capacity;\r\n                }\r\n    \r\n            }\r\n    \r\n            if( candidate_index != i ){\r\n                swap_container = solution.containerGet(candidate_index);\r\n                solution.container[candidate_index] = solution.containerGet(i);\r\n                solution.container[i] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for( i = 1; i <= solution.num_containers; i++){\r\n            candidate_index = Math.floor((solution.num_containers - i + 1) * Math.random() + i);\r\n\r\n            if( candidate_index != i ){\r\n                swap_container = solution.containerGet(candidate_index);\r\n                solution.container[candidate_index] = solution.containerGet(i);\r\n                solution.container[i] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} container_id \r\n * @param {Number} percent_time_left \r\n */\r\nfunction PerturbSolution(solution, container_id, percent_time_left){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var swap_long = 0;\r\n    var operator_selection = 0;\r\n    var container_emptying_probability = 0;\r\n    var item_removal_probability = 0;\r\n    var repack_flag = false;\r\n    var continue_flag = false;\r\n    \r\n    var max_z = 0;\r\n    \r\n    //With solution.containerGet(container_id)\r\n    let container = solution.containerGet(container_id);\r\n    \r\n    // test\r\n    \r\n    container_emptying_probability = 0.05 + 0.15 * percent_time_left\r\n    item_removal_probability = 0.05 + 0.15 * percent_time_left\r\n    \r\n    if( container.item_cnt > 0 ){\r\n\r\n        if (Math.random() < container_emptying_probability ){\r\n            \r\n            // empty the container\r\n            for( j = 1; j <= container.item_cnt; j++ ){\r\n                let jType = container.itemsGet(j).item_type;\r\n                solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n            }\r\n            \r\n            solution.net_profit = solution.net_profit + container.cost;\r\n            solution.total_volume = solution.total_volume - container.volume_packed;\r\n            solution.total_weight = solution.total_weight - container.weight_packed;\r\n            \r\n            container.item_cnt = 0;\r\n            container.volume_packed = 0;\r\n            container.weight_packed = 0;\r\n            container.addition_point_count = 1;\r\n            container.addition_points[1].origin_x = 0;\r\n            container.addition_points[1].origin_y = 0;\r\n            container.addition_points[1].origin_z = 0;\r\n        }\r\n        else{\r\n            repack_flag = false;\r\n            operator_selection = Math.random();\r\n            \r\n            if ( operator_selection < 0.3 ){\r\n\r\n                for( j = 1; j < container.item_cnt; j++ ){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if ( (solution.feasible === false && jItem.mandatory === 0) || (Math.random() < item_removal_probability) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n               \r\n            }\r\n            else if( operator_selection < 0.3 ){ // ???\r\n                max_z = 0;\r\n                for( j = 1 ; j <= container.item_cnt; j++){\r\n                    if( max_z < container.itemsGet(j).opposite_z ) max_z = container.itemsGet(j).opposite_z;\r\n                }\r\n                \r\n                max_z = max_z * (0.1 + 0.5 * percent_time_left * Math.random());\r\n                \r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if ( ((solution.feasible === false) && (jItem.mandatory === 0)) || (jItem.opposite_z < max_z) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                \r\n                max_z = 0;\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    if( max_z < container.itemsGet(j).opposite_z ) max_z = container.itemsGet(j).opposite_z;\r\n                }\r\n                \r\n                max_z = max_z * (0.6 - 0.5 * percent_time_left * Math.random());\r\n                \r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    let jItem = container.itemsGet(j);\r\n\r\n                    if( ((solution.feasible === false) && (jItem.mandatory === 0)) || (jItem.opposite_z > max_z) ){\r\n                        let jType = jItem.item_type;\r\n                        solution.unpacked_item_count[jType] = solution.unpacked_item_countGet(jType) + 1;\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(jType).profit;\r\n                        jItem.item_type = 0;\r\n\r\n                        repack_flag = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if( repack_flag ){\r\n\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n                    if( container.itemsGet(j).item_type > 0 )\r\n                        solution.net_profit = solution.net_profit - item_list.item_typesGet(container.itemsGet(j).item_type).profit;\r\n                }\r\n                \r\n                solution.net_profit = solution.net_profit + container.cost;\r\n                solution.total_volume = solution.total_volume - container.volume_packed;\r\n                solution.total_weight = solution.total_weight - container.weight_packed;\r\n\r\n                for( j = 1;  j <= item_list.num_item_types; j++ ){\r\n                    container.repack_item_count[j] = 0;\r\n                }\r\n\r\n                for( j = 1 ; j <= container.item_cnt; j++ ){\r\n                    if( container.itemsGet(j).item_type > 0 )\r\n                        container.repack_item_count[container.itemsGet(j).item_type] = container.repack_item_countGet(container.itemsGet(j).item_type) + 1;\r\n                }\r\n\r\n                container.volume_packed = 0;\r\n                container.weight_packed = 0;\r\n                container.item_cnt = 0;\r\n                container.addition_point_count = 1;\r\n                container.addition_points[1].origin_x = 0;\r\n                container.addition_points[1].origin_y = 0;\r\n                container.addition_points[1].origin_z = 0;\r\n\r\n                // repack now\r\n\r\n                for( j = 1; j <= item_list.num_item_types; j++ ){\r\n                    continue_flag = true;\r\n                    while( (container.repack_item_countGet(solution.item_type_orderGet(j)) > 0) && continue_flag )\r\n                        continue_flag = AddItemToContainer(solution, container_id, solution.item_type_orderGet(j), 2, true);\r\n\r\n                    // put the remaining items in the unpacked items list\r\n\r\n                    solution.unpacked_item_count[solution.item_type_orderGet(j)] = solution.unpacked_item_countGet(solution.item_type_orderGet(j)) + container.repack_item_countGet(solution.item_type_orderGet(j));\r\n                    container.repack_item_count[solution.item_type_orderGet(j)] = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    // change the preferred rotation order randomly\r\n    \r\n    for( i = 1; i <= item_list.num_item_types; i++ ){\r\n        \r\n        for( j = 1; j <= 6; j++ ){\r\n            k = Math.floor((6 - j + 1) * Math.random() + j); // the order to swap with\r\n            \r\n            swap_long = solution.rotation_order[i][j];\r\n            solution.rotation_order[i][j] = solution.rotation_order[i][k];\r\n            solution.rotation_order[i][k] = swap_long;\r\n        }\r\n        // MsgBox (\"Item type \" + i + \" rotation order: \" + solution.rotation_order(i, 1) + solution.rotation_order(i, 2) + solution.rotation_order(i, 3) + solution.rotation_order(i, 4) + solution.rotation_order(i, 5) + solution.rotation_order(i, 6))\r\n    }\r\n    \r\n    // change the item order randomly - test\r\n\r\n    for( i = 1; i<= item_list.num_item_types; i++){\r\n        j = Math.floor((item_list.num_item_types - i + 1) * Math.random() + i) // the order to swap with\r\n\r\n        swap_long = solution.item_type_orderGet(i);\r\n        solution.item_type_order[i] = solution.item_type_orderGet(j);\r\n        solution.item_type_order[j] = swap_long;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n * @param {Number} container_index \r\n * @param {Number} item_type_index \r\n * @param {Number} add_type \r\n * @param {Boolean} item_cohesion \r\n */\r\nfunction AddItemToContainer(solution, container_index, item_type_index, add_type, item_cohesion){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n\r\n    var rotation_index = 0;\r\n\r\n    var origin_x = 0;\r\n    var origin_y = 0;\r\n    var origin_z = 0;\r\n    var opposite_x = 0;\r\n    var opposite_y = 0;\r\n    var opposite_z = 0;\r\n\r\n    var min_x = 0;\r\n    var min_y = 0;\r\n    var min_z = 0;\r\n    var next_to_item_type = 0;\r\n\r\n    var candidate_position = 0;\r\n    var current_rotation = 0;\r\n    var candidate_rotation = 0;\r\n\r\n    var area_supported = 0;\r\n    var area_required = 0;\r\n    var intersection_right = 0;\r\n    var intersection_left = 0;\r\n    var intersection_top = 0;\r\n    var intersection_bottom = 0;\r\n    var support_flag = false;\r\n    \r\n    //With solution.containerGet(container_index)\r\n    var container = solution.containerGet(container_index);\r\n    \r\n    min_x = container.width + 1;\r\n    min_y = container.height + 1;\r\n    min_z = container.length + 1;\r\n    next_to_item_type = 0;\r\n    \r\n    candidate_position = 0;\r\n\r\n    var GoTo = false;\r\n    // compatibility check\r\n    if( !GoTo && instance.container_item_compatibility_worksheet === true ){\r\n        if( compatibility_list.container_to_itemGet(container.type_id, item_list.item_typesGet(item_type_index).id) === false )\r\n            GoTo = true; //'AddItemToContainer_Finish';\r\n    }\r\n    \r\n    // volume size check\r\n    if( !GoTo && container.volume_packed + item_list.item_typesGet(item_type_index).volume > container.volume_capacity )\r\n        GoTo = true; //'AddItemToContainer_Finish';\r\n    \r\n    // weight capacity check\r\n    if( !GoTo && container.weight_packed + item_list.item_typesGet(item_type_index).weight > container.weight_capacity )\r\n        GoTo = true; //'AddItemToContainer_Finish';\r\n    \r\n    // item to item compatibility check\r\n    if( !GoTo && instance.item_item_compatibility_worksheet === true ){\r\n        for( i = 1; i <= container.item_cnt; i++ ){\r\n            if( compatibility_list.item_to_itemGet(item_list.item_typesGet(item_type_index).id, item_list.item_typesGet(container.itemsGet(i).item_type).id) === false ){\r\n                GoTo = true; //'AddItemToContainer_Finish';\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    if( !GoTo ){\r\n        for( rotation_index = 1; rotation_index <= 6; rotation_index++ ){\r\n            current_rotation = solution.rotation_order[item_type_index][rotation_index];\r\n\r\n            // forbidden rotations\r\n            if( ((current_rotation === 3) || (current_rotation === 4)) && (item_list.item_typesGet(item_type_index).xy_rotatable === false) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( ((current_rotation === 5) || (current_rotation === 6)) && (item_list.item_typesGet(item_type_index).yz_rotatable === false) ){\r\n                //GoTo  = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            // symmetry breaking\r\n\r\n            if( (current_rotation === 2) && (Math.abs(item_list.item_typesGet(item_type_index).width - item_list.item_typesGet(item_type_index).length) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( (current_rotation === 4) && (Math.abs(item_list.item_typesGet(item_type_index).width - item_list.item_typesGet(item_type_index).height) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            if( (current_rotation === 6) && (Math.abs(item_list.item_typesGet(item_type_index).height - item_list.item_typesGet(item_type_index).length) < epsilon) ){\r\n                //GoTo = 'next_rotation_iteration';\r\n                continue;\r\n            }\r\n\r\n            for( i = 1; i <= container.addition_point_count; i++ ){\r\n\r\n                if( (item_cohesion === true) && (candidate_position != 0) && (next_to_item_type === item_type_index) && (container.addition_pointsGet(i).next_to_item_type != item_type_index) ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                origin_x = container.addition_pointsGet(i).origin_x;\r\n                origin_y = container.addition_pointsGet(i).origin_y;\r\n                origin_z = container.addition_pointsGet(i).origin_z;\r\n                \r\n                if( current_rotation === 1 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).length;\r\n                } else if ( current_rotation === 2 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).width;\r\n                } else if ( current_rotation === 3 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).height;\r\n                } else if ( current_rotation === 4 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).width;\r\n                } else if ( current_rotation === 5 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).height;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).length;\r\n                } else if ( current_rotation === 6 ){\r\n                    opposite_x = origin_x + item_list.item_typesGet(item_type_index).length;\r\n                    opposite_y = origin_y + item_list.item_typesGet(item_type_index).width;\r\n                    opposite_z = origin_z + item_list.item_typesGet(item_type_index).height;\r\n                }\r\n\r\n                // check the feasibility of all four corners, w.r.t to the other items\r\n\r\n                if( (opposite_x > container.width + epsilon) || (opposite_y > container.height + epsilon) || (opposite_z > container.length + epsilon) ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                } \r\n                \r\n                let next_iteration = false;\r\n                for( j = 1; j <= container.item_cnt; j++){\r\n\r\n                    if( (opposite_x < container.itemsGet(j).origin_x + epsilon) ||\r\n                        (container.itemsGet(j).opposite_x < origin_x + epsilon) ||\r\n                        (opposite_y < container.itemsGet(j).origin_y + epsilon) ||\r\n                        (container.itemsGet(j).opposite_y < origin_y + epsilon) ||\r\n                        (opposite_z < container.itemsGet(j).origin_z + epsilon) ||\r\n                        (container.itemsGet(j).opposite_z < origin_z + epsilon) ){\r\n                        // no conflict\r\n                    } else {\r\n                        // conflict\r\n                        //GoTo = 'next_iteration';\r\n                        next_iteration = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if( next_iteration ){\r\n                    continue;\r\n                }\r\n\r\n                // vertical support\r\n\r\n                if( origin_y < epsilon ){\r\n                    support_flag = true;\r\n                } else {\r\n                    area_supported = 0;\r\n                    area_required = ((opposite_x - origin_x) * (opposite_z - origin_z));\r\n                    support_flag = false;\r\n                    for( j = container.item_cnt; j >= 1; j-- ){\r\n                        if( (Math.abs(origin_y - container.itemsGet(j).opposite_y) < epsilon) ){\r\n                            // check for intersection\r\n\r\n                            intersection_right = opposite_x;\r\n                            if( intersection_right > container.itemsGet(j).opposite_x ) intersection_right = container.itemsGet(j).opposite_x;\r\n                            \r\n                            intersection_left = origin_x;\r\n                            if( intersection_left < container.itemsGet(j).origin_x ) intersection_left = container.itemsGet(j).origin_x;\r\n                            \r\n                            intersection_top = opposite_z;\r\n                            if( intersection_top > container.itemsGet(j).opposite_z ) intersection_top = container.itemsGet(j).opposite_z;\r\n                            \r\n                            intersection_bottom = origin_z;\r\n                            if( intersection_bottom < container.itemsGet(j).origin_z ) intersection_bottom = container.itemsGet(j).origin_z;\r\n                            \r\n                            if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                if( area_supported > area_required - epsilon ){\r\n                                    support_flag = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                if( support_flag === false ){ \r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                // side support\r\n\r\n                if( instance.front_side_support === true ){\r\n                    if( origin_z < epsilon ){\r\n                        support_flag = true;\r\n                    } else {\r\n                        area_supported = 0;\r\n                        area_required = ((opposite_x - origin_x) * (opposite_y - origin_y));\r\n                        support_flag = false;\r\n                        for( j = container.item_cnt; j >= 1; j-- ){\r\n                            if( (Math.abs(origin_z - container.itemsGet(j).opposite_z) < epsilon) ){\r\n                                // check for intersection\r\n                            \r\n                                intersection_right = opposite_x;\r\n                                if( intersection_right > container.itemsGet(j).opposite_x ) intersection_right = container.itemsGet(j).opposite_x;\r\n                                \r\n                                intersection_left = origin_x;\r\n                                if( intersection_left < container.itemsGet(j).origin_x ) intersection_left = container.itemsGet(j).origin_x;\r\n                                \r\n                                intersection_top = opposite_y;\r\n                                if( intersection_top > container.itemsGet(j).opposite_y ) intersection_top = container.itemsGet(j).opposite_y;\r\n                                \r\n                                intersection_bottom = origin_y;\r\n                                if( intersection_bottom < container.itemsGet(j).origin_y ) intersection_bottom = container.itemsGet(j).origin_y;\r\n                                \r\n                                if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                    area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                    if( area_supported > area_required - epsilon ){\r\n                                        support_flag = true;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            \r\n                            }\r\n                        }\r\n                    \r\n                    }\r\n                }\r\n\r\n                if( support_flag === false ){\r\n                    //GoTo = 'next_iteration';\r\n                    continue;\r\n                }\r\n                \r\n                // no conflicts at this point\r\n                \r\n                if( (item_cohesion === true) && (next_to_item_type != item_type_index) && (container.addition_pointsGet(i).next_to_item_type === item_type_index) ){\r\n                   min_x = origin_x;\r\n                   min_y = origin_y;\r\n                   min_z = origin_z;\r\n                   candidate_position = i;\r\n                   candidate_rotation = current_rotation;\r\n                   next_to_item_type = container.addition_pointsGet(i).next_to_item_type;\r\n                } else {\r\n                    if( (origin_z < min_z) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y < min_y)) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y <= min_y + epsilon) && (origin_x < min_x)) ||\r\n                      ((origin_z <= min_z + epsilon) && (origin_y <= min_y + epsilon) && (origin_x <= min_x + epsilon) && ((opposite_x > container.width + epsilon) || (opposite_y > container.height + epsilon))) ){\r\n                       min_x = origin_x;\r\n                       min_y = origin_y;\r\n                       min_z = origin_z;\r\n                       candidate_position = i;\r\n                       candidate_rotation = current_rotation;\r\n                       next_to_item_type = container.addition_pointsGet(i).next_to_item_type;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n// next_iteration: Next i\r\n// next_rotation_iteration: Next rotation_index\r\n    \r\n// AddItemToContainer_Finish:\r\n\r\n    if( candidate_position === 0 ){\r\n        return false;\r\n    } else {\r\n        //With solution.containerGet(container_index)\r\n        let container = solution.containerGet(container_index);\r\n            container.item_cnt = container.item_cnt + 1;\r\n            container.itemsGet(container.item_cnt).item_type = item_type_index;\r\n            container.itemsGet(container.item_cnt).origin_x = container.addition_pointsGet(candidate_position).origin_x;\r\n            container.itemsGet(container.item_cnt).origin_y = container.addition_pointsGet(candidate_position).origin_y;\r\n            container.itemsGet(container.item_cnt).origin_z = container.addition_pointsGet(candidate_position).origin_z;\r\n            container.itemsGet(container.item_cnt).rotation = candidate_rotation;\r\n            container.itemsGet(container.item_cnt).mandatory = item_list.item_typesGet(item_type_index).mandatory;\r\n            \r\n            if( candidate_rotation === 1 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).length;\r\n            } else if ( candidate_rotation === 2 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).width;\r\n            } else if ( candidate_rotation === 3 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).height;\r\n            } else if ( candidate_rotation === 4 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).width;\r\n            } else if ( candidate_rotation === 5 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).height;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).length;\r\n            } else if ( candidate_rotation === 6 ){\r\n                container.itemsGet(container.item_cnt).opposite_x = container.itemsGet(container.item_cnt).origin_x + item_list.item_typesGet(item_type_index).length;\r\n                container.itemsGet(container.item_cnt).opposite_y = container.itemsGet(container.item_cnt).origin_y + item_list.item_typesGet(item_type_index).width;\r\n                container.itemsGet(container.item_cnt).opposite_z = container.itemsGet(container.item_cnt).origin_z + item_list.item_typesGet(item_type_index).height;\r\n            }\r\n            \r\n            container.volume_packed = container.volume_packed + item_list.item_typesGet(item_type_index).volume;\r\n            container.weight_packed = container.weight_packed + item_list.item_typesGet(item_type_index).weight;\r\n\r\n            if( add_type === 2 ){\r\n                container.repack_item_count[item_type_index] = container.repack_item_countGet(item_type_index) - 1;\r\n            }\r\n            \r\n            // update the addition points\r\n            \r\n            for( i = candidate_position; i <= container.addition_point_count - 1; i++){\r\n                container.addition_points[i] = container.addition_pointsGet(i + 1);\r\n            }\r\n            \r\n            container.addition_point_count = container.addition_point_count - 1;\r\n            \r\n            if( (container.itemsGet(container.item_cnt).opposite_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).origin_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).origin_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).opposite_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).origin_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).origin_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index;\r\n            }\r\n            \r\n            if( (container.itemsGet(container.item_cnt).origin_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).opposite_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).origin_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).origin_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).opposite_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).origin_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index;\r\n            }\r\n            \r\n            if( (container.itemsGet(container.item_cnt).origin_x < container.width - epsilon) && (container.itemsGet(container.item_cnt).origin_y < container.height - epsilon) && (container.itemsGet(container.item_cnt).opposite_z < container.length - epsilon) ){\r\n                container.addition_point_count = container.addition_point_count + 1;\r\n                container.addition_pointsGet( container.addition_point_count).origin_x = container.itemsGet(container.item_cnt).origin_x;\r\n                container.addition_pointsGet( container.addition_point_count).origin_y = container.itemsGet(container.item_cnt).origin_y;\r\n                container.addition_pointsGet( container.addition_point_count).origin_z = container.itemsGet(container.item_cnt).opposite_z;\r\n                container.addition_pointsGet( container.addition_point_count).next_to_item_type = item_type_index     ;    \r\n            }\r\n            \r\n        \r\n        //With solution\r\n            // update the profit\r\n            \r\n            if( solution.containerGet(container_index).item_cnt === 1 ){\r\n                solution.net_profit = solution.net_profit + item_list.item_typesGet(item_type_index).profit - solution.containerGet(container_index).cost;\r\n            } else {\r\n                solution.net_profit = solution.net_profit + item_list.item_typesGet(item_type_index).profit;\r\n            }\r\n            \r\n            // update the volume per container and the total volume\r\n            \r\n            solution.total_volume = solution.total_volume + item_list.item_typesGet(item_type_index).volume;\r\n            solution.total_weight = solution.total_weight + item_list.item_typesGet(item_type_index).weight;\r\n            \r\n            // update the unpacked items\r\n            \r\n            if( add_type === 1 ){\r\n                solution.unpacked_item_count[item_type_index] = solution.unpacked_item_countGet(item_type_index) - 1;\r\n            }\r\n        \r\n        return true;\r\n    }\r\n\r\n    return false;\r\n    \r\n}\r\n\r\n/**\r\n * @typedef SolverOptions\r\n * @property {Number} itemSortCriterion - 1:Volume, 2:Weight, 3:MaxDim\r\n * @property {Boolean} showProgress\r\n * @property {Number} cpuTimeLimit - in seconds\r\n * \r\n * @param {SolverOptions} options \r\n */\r\nfunction GetSolverOptions(options){\r\n    if(options){\r\n        solver_options.item_sort_criterion = options.itemSortCriterion;\r\n        solver_options.show_progress = options.showProgress;\r\n        solver_options.CPU_time_limit = options.cpuTimeLimit;\r\n    }\r\n    else{\r\n        ThisWorkbook.Worksheets(\"CLP Solver Console\").Activate;\r\n        \r\n        //With solver_options\r\n            \r\n        if( Cells(12, 3).Value === \"Volume\" ){\r\n            solver_options.item_sort_criterion = 1;\r\n        } else if ( Cells(12, 3).Value === \"Weight\" ){\r\n            solver_options.item_sort_criterion = 2;\r\n        } else {\r\n            solver_options.item_sort_criterion = 3;\r\n        }\r\n        \r\n        if( Cells(13, 3).Value === \"Yes\" ){\r\n            solver_options.show_progress = true;\r\n        } else {\r\n            solver_options.show_progress = false;\r\n        }\r\n        \r\n        solver_options.CPU_time_limit = Cells(14, 3).Value;\r\n    }\r\n}\r\n\r\n/**\r\n * @typedef ItemData\r\n * @property {Number} length\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Boolean} xyRotatable\r\n * @property {Boolean} yzRotatable\r\n * @property {Number} weight\r\n * @property {Number} mandatory\r\n * @property {Number} profit\r\n * @property {Number} quantity\r\n * \r\n * @param {Array<ItemData>} itemsData \r\n */\r\nfunction GetItemData(itemsData){\r\n\r\n    var numItemTypes;\r\n\r\n    if(itemsData){\r\n        numItemTypes = itemsData.length;\r\n    }\r\n    else{\r\n        numItemTypes = ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(2, 3).Value;\r\n        ThisWorkbook.Worksheets(\"1.Items\").Activate;\r\n    }\r\n    item_list.num_item_types = numItemTypes;\r\n    item_list.total_number_of_items = 0;\r\n    \r\n    item_list.item_types = [null];\r\n    var i = 0;\r\n    for(i = 1; i <= item_list.num_item_types; i++){\r\n        item_list.item_types.push(new item_type_data());\r\n    }\r\n    \r\n    var max_volume = 0;\r\n    var max_weight = 0;\r\n    \r\n    if(itemsData){\r\n        if(itemsData[0] !== null) itemsData.unshift(null);\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            let item = itemsData[i];\r\n            item_list.item_typesGet(i).id = i;\r\n            \r\n            item_list.item_typesGet(i).width = item.width;\r\n            item_list.item_typesGet(i).height = item.height;\r\n            item_list.item_typesGet(i).length = item.length;\r\n            \r\n            item_list.item_typesGet(i).volume = item.width * item.height * item.length;\r\n            \r\n            if( max_volume < item_list.item_typesGet(i).volume ){\r\n                max_volume = item_list.item_typesGet(i).volume;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).xy_rotatable = item.xyRotatable;\r\n            item_list.item_typesGet(i).yz_rotatable = item.yzRotatable;\r\n            \r\n            if( (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).height) < epsilon) && (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).length) < epsilon) ){\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).weight = item.weight;\r\n            \r\n            if( max_weight < item_list.item_typesGet(i).weight ){\r\n                max_weight = item_list.item_typesGet(i).weight;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).mandatory = item.mandatory;\r\n            \r\n            item_list.item_typesGet(i).profit = item.profit;\r\n            \r\n            item_list.item_typesGet(i).number_requested = item.quantity;\r\n            \r\n            item_list.total_number_of_items = item_list.total_number_of_items + item_list.item_typesGet(i).number_requested;\r\n        \r\n        }\r\n    }\r\n    else{\r\n        //With item_list\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            item_list.item_typesGet(i).id = i;\r\n            \r\n            item_list.item_typesGet(i).width = Cells(2 + i, 4).Value;\r\n            item_list.item_typesGet(i).height = Cells(2 + i, 5).Value;\r\n            item_list.item_typesGet(i).length = Cells(2 + i, 6).Value;\r\n            \r\n            item_list.item_typesGet(i).volume = Cells(2 + i, 7).Value;\r\n            \r\n            if( max_volume < item_list.item_typesGet(i).volume ){\r\n                max_volume = item_list.item_typesGet(i).volume;\r\n            }\r\n            \r\n            if( Cells(2 + i, 9).Value === \"Yes\" ){\r\n                item_list.item_typesGet(i).xy_rotatable = true;\r\n            } else {\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n            }\r\n            \r\n            if( Cells(2 + i, 10).Value === \"Yes\" ){\r\n                item_list.item_typesGet(i).yz_rotatable = true;\r\n            } else {\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            if( (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).height) < epsilon) && (Math.abs(item_list.item_typesGet(i).width - item_list.item_typesGet(i).length) < epsilon) ){\r\n                item_list.item_typesGet(i).xy_rotatable = false;\r\n                item_list.item_typesGet(i).yz_rotatable = false;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).weight = Cells(2 + i, 11).Value;\r\n            \r\n            if( max_weight < item_list.item_typesGet(i).weight ){\r\n                max_weight = item_list.item_typesGet(i).weight;\r\n            }\r\n            \r\n            if( Cells(2 + i, 12).Value === \"Must be packed\" ){\r\n                item_list.item_typesGet(i).mandatory = 1;\r\n            } else if ( Cells(2 + i, 12).Value === \"May be packed\" ){\r\n                item_list.item_typesGet(i).mandatory = 0;\r\n            } else if ( Cells(2 + i, 12).Value === \"Don't pack\" ){\r\n                item_list.item_typesGet(i).mandatory = -1;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).profit = Cells(2 + i, 13).Value;\r\n            \r\n            item_list.item_typesGet(i).number_requested = Cells(2 + i, 14).Value;\r\n            \r\n            item_list.total_number_of_items = item_list.total_number_of_items + item_list.item_typesGet(i).number_requested;\r\n        \r\n        }\r\n    }\r\n    \r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n    \r\n        if( solver_options.item_sort_criterion === 1 ){\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).volume * (max_weight + 1) + item_list.item_typesGet(i).weight;\r\n        } else if ( solver_options.item_sort_criterion === 2 ){\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).weight * (max_volume + 1) + item_list.item_typesGet(i).volume;\r\n        } else {\r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).width;\r\n            if( item_list.item_typesGet(i).sort_criterion < item_list.item_typesGet(i).height ){\r\n                item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).height;\r\n            }\r\n            if( item_list.item_typesGet(i).sort_criterion < item_list.item_typesGet(i).length ){\r\n                item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).length;\r\n            }\r\n            \r\n            item_list.item_typesGet(i).sort_criterion = item_list.item_typesGet(i).sort_criterion * (max_volume + 1) + item_list.item_typesGet(i).volume;\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n/**\r\n * @typedef ContainerData\r\n * @property {Number} length\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} weightCapacity\r\n * @property {Number} mandatory\r\n * @property {Number} cost\r\n * @property {Number} quantity\r\n * \r\n * @param {Array<ContainerData>} containersData \r\n */\r\nfunction GetContainerData(containersData){\r\n\r\n    var numContainerTypes;\r\n    if(containersData){\r\n        numContainerTypes = containersData.length;\r\n    }\r\n    else{\r\n        numContainerTypes = ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(4, 3).Value;\r\n        ThisWorkbook.Worksheets(\"2.Containers\").Activate;\r\n    }\r\n\r\n    container_list.num_container_types = numContainerTypes;\r\n    \r\n    container_list.container_types = [null];\r\n    var i = 0;\r\n    for(i = 1; i <= container_list.num_container_types; i++){\r\n        container_list.container_types.push(new container_type_data());\r\n    }\r\n    \r\n    if(containersData){\r\n        containersData.unshift(null);\r\n        for( i = 1; i <= container_list.num_container_types; i++){\r\n            let container = containersData[i];\r\n            \r\n            container_list.container_typesGet(i).type_id = i;\r\n            \r\n            container_list.container_typesGet(i).width = container.width;\r\n            container_list.container_typesGet(i).height = container.height;\r\n            container_list.container_typesGet(i).length = container.length;\r\n            \r\n            container_list.container_typesGet(i).volume_capacity = container.width * container.height * container.length;\r\n            container_list.container_typesGet(i).weight_capacity = container.weightCapacity;\r\n            \r\n            container_list.container_typesGet(i).mandatory = container.mandatory;\r\n            \r\n            container_list.container_typesGet(i).cost = container.cost;\r\n            \r\n            container_list.container_typesGet(i).number_available = container.quantity;\r\n        }\r\n    }\r\n    else{\r\n        //With container_list\r\n        for( i = 1; i <= container_list.num_container_types; i++){\r\n            \r\n            container_list.container_typesGet(i).type_id = i;\r\n            \r\n            container_list.container_typesGet(i).width = Cells(1 + i, 3).Value;\r\n            container_list.container_typesGet(i).height = Cells(1 + i, 4).Value;\r\n            container_list.container_typesGet(i).length = Cells(1 + i, 5).Value;\r\n            \r\n            container_list.container_typesGet(i).volume_capacity = Cells(1 + i, 6).Value;\r\n            container_list.container_typesGet(i).weight_capacity = Cells(1 + i, 7).Value;\r\n            \r\n            if( Cells(1 + i, 8).Value === \"Must be used\" ){\r\n                container_list.container_typesGet(i).mandatory = 1;\r\n            } else if ( Cells(1 + i, 8).Value === \"May be used\" ){\r\n                container_list.container_typesGet(i).mandatory = 0;\r\n            } else if ( Cells(1 + i, 8).Value === \"Do not use\" ){\r\n                container_list.container_typesGet(i).mandatory = -1;\r\n            }\r\n            \r\n            container_list.container_typesGet(i).cost = Cells(1 + i, 9).Value;\r\n            \r\n            container_list.container_typesGet(i).number_available = Cells(1 + i, 10).Value;\r\n        \r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction GetCompatibilityData(){\r\n\r\n    /*\r\n    \r\n    //With compatibility_list\r\n        \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n\r\n    if( instance.item_item_compatibility_worksheet === true ){\r\n    \r\n        compatibility_list.item_to_item = [[]];\r\n        \r\n        for( i = 1; i <= item_list.num_item_types; i++) {\r\n            for( j = 1; j <= item_list.num_item_types; j++ ){\r\n                item_list.item_to_item[i][j] = true;\r\n            }\r\n        }\r\n        \r\n        k = 3;\r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            for( j = i + 1; j <= item_list.num_item_types; j++){\r\n                if( ThisWorkbook.Worksheets(\"1.3.Item-Item Compatibility\").Cells(k, 3) === \"No\" ){\r\n                    item_list.item_to_item[i][j] = false;\r\n                    item_list.item_to_item[j][i] = false;\r\n                }\r\n                k = k + 1;\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n    if( instance.container_item_compatibility_worksheet = true ){\r\n    \r\n        Re var .container_to_itemGet(1; <=container_list.num_container_types, 1; <=item_list.num_item_types)\r\n        \r\n        for( i = 1; <=container_list.num_container_types\r\n            for( j = 1; <=item_list.num_item_types\r\n            \r\n                .container_to_itemGet(i, j) = true\r\n                \r\n            }\r\n        }\r\n        \r\n        k = 3\r\n        for( i = 1; <=container_list.num_container_types\r\n            for( j = 1; <=item_list.num_item_types\r\n            \r\n                if( ThisWorkbook.Worksheets(\"2.3.Container-ItemCompatibility\").Cells(k, 3) = \"No\" ){\r\n                    .container_to_itemGet(i, j) = false\r\n                }\r\n                    \r\n                k = k + 1\r\n            }\r\n        }\r\n        \r\n    }\r\n    */\r\n}\r\n\r\n/**\r\n * \r\n * @param {solution_data} solution \r\n */\r\nfunction InitializeSolution(solution){\r\n    \r\n     var i = 0;\r\n     var j = 0;\r\n     var k = 0;\r\n     var l = 0;\r\n    \r\n    //With solution\r\n    solution.feasible = false;\r\n    solution.net_profit = 0;\r\n    solution.total_volume = 0;\r\n    solution.total_weight = 0;\r\n    solution.total_distance = 0;\r\n    solution.total_x_moment = 0;\r\n    solution.total_yz_moment = 0;\r\n    \r\n    solution.num_containers = 0;\r\n    for( i = 1; i <= container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            solution.num_containers = solution.num_containers + container_list.container_typesGet(i).number_available;\r\n        }\r\n    }\r\n    \r\n    solution.rotation_order = [null];\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        solution.rotation_order[i] = [null];\r\n        for( j = 1; j<=6; j++){\r\n           solution.rotation_order[i][j] = j;\r\n        }\r\n    }\r\n    \r\n    solution.item_type_order = [null];\r\n    for( i = 1; i<=item_list.num_item_types; i++){\r\n       solution.item_type_order[i] = i;\r\n    }\r\n    \r\n    solution.container = [null];\r\n    for( i = 1; i <= solution.num_containers; i++){\r\n        solution.container[i] = new container_data();\r\n\r\n        solution.containerGet(i).items = [null];\r\n        for(j = 1; j <= item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).items.push(new item_in_container());\r\n\r\n        solution.containerGet(i).addition_points = [null];\r\n        for(j = 1; j <= 3 * item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).addition_points.push(new item_location());\r\n\r\n        solution.containerGet(i).repack_item_count = [null];\r\n        for(j = 1; j <= item_list.total_number_of_items; j++)\r\n            solution.containerGet(i).repack_item_count.push(0);\r\n    }\r\n    \r\n    solution.unpacked_item_count = [null];\r\n    \r\n    l = 1;\r\n    for( i = 1; i<=container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            for( j = 1; j<=container_list.container_typesGet(i).number_available; j++){\r\n                \r\n               solution.containerGet(l).width = container_list.container_typesGet(i).width;\r\n               solution.containerGet(l).height = container_list.container_typesGet(i).height;\r\n               solution.containerGet(l).length = container_list.container_typesGet(i).length;\r\n               solution.containerGet(l).volume_capacity = container_list.container_typesGet(i).volume_capacity;\r\n               solution.containerGet(l).weight_capacity = container_list.container_typesGet(i).weight_capacity;\r\n               solution.containerGet(l).cost = container_list.container_typesGet(i).cost;\r\n               solution.containerGet(l).mandatory = container_list.container_typesGet(i).mandatory;\r\n               solution.containerGet(l).type_id = i;\r\n               solution.containerGet(l).volume_packed = 0;\r\n               solution.containerGet(l).weight_packed = 0;\r\n               solution.containerGet(l).item_cnt = 0;\r\n                \r\n               solution.containerGet(l).addition_point_count = 1;\r\n                \r\n                for( k = 1; k<=item_list.total_number_of_items; k++){\r\n                   solution.containerGet(l).itemsGet(k).item_type = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_x = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_y = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).origin_z = 0;\r\n                   solution.containerGet(l).addition_pointsGet(k).next_to_item_type = 0;\r\n                }\r\n                \r\n                for( k = 1; k<=item_list.total_number_of_items; k++){\r\n                   solution.containerGet(l).repack_item_count[k] = 0;\r\n                }\r\n                \r\n                l = l + 1;\r\n            }\r\n        }\r\n    }\r\n    \r\n    for( i = 1; i<=item_list.num_item_types; i++){\r\n       solution.unpacked_item_count[i] = item_list.item_typesGet(i).number_requested;\r\n    }\r\n        \r\n}\r\n\r\nfunction GetInstanceData(){\r\n    \r\n    if( ThisWorkbook.Worksheets(\"CLP Solver Console\").Cells(6, 3).Value === \"Yes\" ){\r\n        instance.front_side_support = true;\r\n    } else {\r\n        instance.front_side_support = false;\r\n    }\r\n    \r\n    if( CheckWorksheetExistence(\"1.3.Item-Item Compatibility\") === true ){\r\n        instance.item_item_compatibility_worksheet = true;\r\n    } else {\r\n        instance.item_item_compatibility_worksheet = false;\r\n    }\r\n        \r\n    if( CheckWorksheetExistence(\"2.3.Container-ItemCompatibility\") === true ){\r\n        instance.container_item_compatibility_worksheet = true;\r\n    } else {\r\n        instance.container_item_compatibility_worksheet = false;\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction WriteSolution(solution){\r\n\r\n    //Application.ScreenUpdating = False\r\n    //Application.Calculation = xlCalculationManual\r\n            \r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n\r\n    var container_index = 0;\r\n\r\n    /** @type {container_data} */\r\n    var swap_container;\r\n    \r\n    // sort the containers\r\n    \r\n    for( i = 1; i<=solution.num_containers; i++){\r\n        for( j = solution.num_containers; j >= 2; j--){\r\n            if( (solution.containerGet(j).type_id < solution.containerGet(j - 1).type_id) ||\r\n                ((solution.containerGet(j).type_id === solution.containerGet(j - 1).type_id) && (solution.containerGet(j).volume_packed > solution.containerGet(j - 1).volume_packed)) ){\r\n                swap_container = solution.containerGet(j);\r\n                solution.container[j] = solution.containerGet(j - 1);\r\n                solution.container[j - 1] = swap_container;\r\n            }\r\n        }\r\n    }\r\n    \r\n    ThisWorkbook.Worksheets(\"3.Solution\").Activate;\r\n\r\n    if( solution.feasible === false ){\r\n        Cells(2, 1).Value = \"Warning: Last solution returned by the solver does not satisfy all constraints.\";\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.ColorIndex = 45;\r\n    } else {\r\n        Cells(2, 1).Value = 0;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.Pattern = xlNone;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.TintAndShade = 0;\r\n        //Range(Cells(2, 1), Cells(2, 10)).Interior.PatternTintAndShade = 0;\r\n    }\r\n    \r\n    var offset = 0;\r\n    \r\n    offset = 0;\r\n    container_index = 1;\r\n    \r\n    //With solution\r\n    \r\n    for( i = 1; i<=container_list.num_container_types; i++){\r\n    \r\n        for( j = 1; j<=container_list.container_typesGet(i).number_available; j++){\r\n\r\n            Range(Cells(6, offset + 2), Cells(5 + 2 * item_list.total_number_of_items, offset + 2)).Value = 0;\r\n            Range(Cells(6, offset + 3), Cells(5 + 2 * item_list.total_number_of_items, offset + 5)).ClearContents;\r\n            Range(Cells(6, offset + 6), Cells(5 + 2 * item_list.total_number_of_items, offset + 6)).Value = 0;\r\n            \r\n            if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n                Cells(3, 'B', solution.containerGet(container_index).item_cnt);\r\n                for( k = 1; k <= solution.containerGet(container_index).item_cnt; k++){\r\n                    Cells(5 + k, offset + 2).Value = ThisWorkbook.Worksheets(\"1.Items\").Cells(2 + item_list.item_typesGet(solution.containerGet(container_index).itemsGet(k).item_type).id, 2).Value;\r\n                    Cells(5 + k, offset + 3).Value = solution.containerGet(container_index).itemsGet(k).origin_x;\r\n                    Cells(5 + k, offset + 4).Value = solution.containerGet(container_index).itemsGet(k).origin_y;\r\n                    Cells(5 + k, offset + 5).Value = solution.containerGet(container_index).itemsGet(k).origin_z;\r\n                    if(solution.containerGet(container_index).itemsGet(k).rotation === 1 ){\r\n                        Cells(5 + k, offset + 6).Value = \"xyz\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 2 ){\r\n                        Cells(5 + k, offset + 6).Value = \"zyx\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 3 ){\r\n                        Cells(5 + k, offset + 6).Value = \"xzy\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 4 ){\r\n                        Cells(5 + k, offset + 6).Value = \"yzx\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 5 ){\r\n                        Cells(5 + k, offset + 6).Value = \"yxz\";\r\n                    } else if (solution.containerGet(container_index).itemsGet(k).rotation === 6 ){\r\n                        Cells(5 + k, offset + 6).Value = \"zxy\";\r\n                    }\r\n                }\r\n                    \r\n                container_index = container_index + 1;\r\n            }\r\n            \r\n            offset = offset + 11;\r\n        }\r\n    }\r\n\r\n    signaler.Dispatch(signals.solution, solution);\r\n    \r\n    //Application.ScreenUpdating = true\r\n    //Application.Calculation = xlCalculationAutomatic\r\n}\r\n\r\n/**\r\n * \r\n * @param {Array<SolverOptions>} solverOptions \r\n * @param {Array<ItemData>} itemsData \r\n * @param {Array<ContainerData>} containersData \r\n */\r\nfunction CLP_Solver(solverOptions, itemsData, containersData){\r\n\r\n    //Application.ScreenUpdating = false\r\n    //Application.Calculation = xlCalculationManual\r\n    \r\n    var WorksheetExists = false;\r\n    var reply = 0;\r\n\r\n    GetSolverOptions(solverOptions);\r\n    \r\n    WorksheetExists = CheckWorksheetExistence(\"1.Items\") && CheckWorksheetExistence(\"2.Containers\") && CheckWorksheetExistence(\"3.Solution\");\r\n    if( (!solverOptions || !itemsData || !containersData) && WorksheetExists === false ){\r\n        Application.Alert(\"Worksheets 1.Items, 2.Containers, and 3.Solution must exist for the CLP Spreadsheet Solver to function.\");\r\n        //Application.ScreenUpdating = true\r\n        //Application.Calculation = xlCalculationAutomatic\r\n        return;\r\n    } else {\r\n        reply = Application.Confirm(\"This will take \" + solver_options.CPU_time_limit + \" seconds. Do you want to continue?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply === false ){\r\n            //Application.ScreenUpdating = true\r\n            //Application.Calculation = xlCalculationAutomatic\r\n            return;\r\n        }\r\n    }\r\n    \r\n    //Application.EnableCancelKey = xlErrorHandler\r\n    //On Error GoTo CLP_Solver_Finish\r\n    \r\n    // Allocate memory and get the data\r\n    \r\n    GetItemData(itemsData);\r\n    GetContainerData(containersData);\r\n    //GetInstanceData();\r\n    //GetCompatibilityData();\r\n    SortItems();\r\n    \r\n    var incumbent = new solution_data();\r\n    InitializeSolution(incumbent);\r\n    \r\n    var best_known = new solution_data();\r\n    InitializeSolution(best_known);\r\n    best_known = incumbent;\r\n    \r\n    var iteration = 0;\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var l = 0;\r\n\r\n    var nonempty_container_cnt = 0;\r\n    var container_id = 0;\r\n\r\n    var start_time = 0;\r\n    var end_time = 0;\r\n\r\n    var continue_flag = false;\r\n    var sort_criterion = 0;\r\n    var selected_rotation = 0;\r\n    \r\n    // infeasibility check    \r\n\r\n    var fcData = FeasibilityCheckData();\r\n    var infeasibility_count = fcData.infeasibility_count;\r\n    var infeasibility_string = fcData.infeasibility_string;\r\n\r\n    if( infeasibility_count > 0 ){\r\n        reply = Application.Confirm(\"Infeasibilities detected. \" + infeasibility_string + \" Do you want to continue?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply === false ){\r\n            //Application.ScreenUpdating = true\r\n            //Application.Calculation = xlCalculationAutomatic\r\n            return;\r\n        }\r\n    }\r\n    \r\n    start_time = performance.now() / 1000.0;\r\n    end_time = start_time;\r\n        \r\n    // constructive phase\r\n    \r\n    if( solver_options.show_progress === true ){\r\n        Application.ScreenUpdating = true\r\n        Application.StatusBar = \"Constructive phase...\"\r\n        Application.ScreenUpdating = false\r\n    } else {\r\n        Application.ScreenUpdating = true\r\n        Application.StatusBar = \"LNS algorithm running...\"\r\n        Application.ScreenUpdating = false\r\n    }\r\n    \r\n    SortContainers(incumbent, 0);\r\n    \r\n    for( i = 1; i <= incumbent.num_containers; i++){\r\n        // sort the rotation order for this container\r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n            sort_criterion = 0;\r\n            selected_rotation = 0;\r\n            \r\n            if( sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height);\r\n                selected_rotation = 1;\r\n            }\r\n            \r\n            if( sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height);\r\n                selected_rotation = 2;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).xy_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length);\r\n                selected_rotation = 3;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).xy_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length)) ){\r\n                sort_criterion = sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length);\r\n                selected_rotation = 4;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).yz_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).height) * item_list.item_typesGet(j).height) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width);\r\n                selected_rotation = 5;\r\n            }\r\n            \r\n            if( (item_list.item_typesGet(j).yz_rotatable === true) && (sort_criterion < (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width)) ){\r\n                sort_criterion = (Math.floor(incumbent.containerGet(i).width / item_list.item_typesGet(j).length) * item_list.item_typesGet(j).length) * (Math.floor(incumbent.containerGet(i).height / item_list.item_typesGet(j).width) * item_list.item_typesGet(j).width);\r\n                selected_rotation = 6;\r\n            }\r\n            \r\n            if( selected_rotation === 0 ){\r\n                selected_rotation = 1;\r\n            }\r\n            \r\n            incumbent.rotation_order[j][1] = selected_rotation;\r\n            incumbent.rotation_order[j][selected_rotation] = 1;\r\n        }\r\n        \r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n        \r\n            continue_flag = true;\r\n            while ( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && continue_flag ){\r\n                continue_flag = AddItemToContainer(incumbent, i, incumbent.item_type_orderGet(j), 1, false);\r\n            }\r\n        }\r\n        \r\n        incumbent.feasible = true;\r\n        for( j = 1; j <= item_list.num_item_types; j++){\r\n            if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                incumbent.feasible = false;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        CalculateDispersion(incumbent);\r\n\r\n        if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n           ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n           ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n           ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ){\r\n\r\n            best_known = incumbent;\r\n            \r\n        }\r\n        \r\n    }\r\n    \r\n    // GoTo CLP_Solver_Finish\r\n\r\n    // end_time = Timer\r\n    // MsgBox \"Constructive phase result: \" + best_known.net_profit + \" time: \" + end_time - start_time\r\n\r\n    // improvement phase\r\n\r\n    iteration = 0;\r\n\r\n    //Do\r\n    do {\r\n        //DoEvents\r\n        if( (solver_options.show_progress === true) && (iteration % 100 === 0) ){\r\n            //Application.ScreenUpdating = true\r\n            if( best_known.feasible === true ){\r\n                Application.StatusBar = \"Starting iteration \" + iteration + \". Best net profit found so far: \" + best_known.net_profit + \" Dispersion: \" + best_known.total_distance;\r\n            } else {\r\n                Application.StatusBar = \"Starting iteration \" + iteration + \". Best net profit found so far: N/A\" + \" Dispersion: \" + best_known.total_distance;\r\n            }\r\n            Application.ScreenUpdating = false\r\n        }\r\n\r\n        if( Math.random() < 0.5 ){ // < ((end_time - start_time) / solver_options.CPU_time_limit) ^ 2 ){\r\n\r\n            incumbent = best_known;\r\n\r\n        }\r\n        \r\n        //With incumbent\r\n        for( i = 1; i <= incumbent.num_containers; i++){\r\n            PerturbSolution(incumbent, i, 1 - ((end_time - start_time) / solver_options.CPU_time_limit));\r\n        } \r\n        \r\n        SortContainers(incumbent, 0.2);\r\n\r\n        //With incumbent\r\n        for( i = 1; i <= incumbent.num_containers; i++){\r\n            for( j = 1; j <= item_list.num_item_types; j++){\r\n                continue_flag = true;\r\n                while ( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && (continue_flag === true) ){\r\n                    continue_flag = AddItemToContainer(incumbent, i, incumbent.item_type_orderGet(j), 1, false);\r\n                    //DoEvents\r\n                }\r\n            }\r\n    \r\n            incumbent.feasible = true;\r\n            for( j = 1; j <= item_list.num_item_types; j++){\r\n                if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                    incumbent.feasible = false;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            CalculateDispersion(incumbent);\r\n            \r\n            if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n               ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance - epsilon) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment - epsilon) ||\r\n               ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment + epsilon) && (incumbent.total_yz_moment < best_known.total_yz_moment - epsilon) ){\r\n    \r\n                best_known = incumbent;\r\n            }\r\n        }\r\n\r\n        iteration = iteration + 1;\r\n        \r\n        end_time = performance.now() / 1000.0;\r\n        \r\n        /* WILL NEVER HAPPEN ? chadik\r\n        if( end_time < start_time - 0.01 ){\r\n            solver_options.CPU_time_limit = solver_options.CPU_time_limit - (86400 - start_time)\r\n            start_time = end_time\r\n        }\r\n        */\r\n        \r\n    }\r\n    while( end_time - start_time < solver_options.CPU_time_limit / 3 );\r\n    \r\n    // reorganize now\r\n\r\n    CalculateDistance(best_known);\r\n\r\n    nonempty_container_cnt = 0;\r\n    //With best_known\r\n    for( i = 1; i <= best_known.num_containers; i++){\r\n        if( best_known.containerGet(i).item_cnt > 0 ){\r\n            nonempty_container_cnt = nonempty_container_cnt + 1;\r\n        }\r\n    }\r\n\r\n    for( container_id = 1; container_id <= best_known.num_containers; container_id++){\r\n        Application.ScreenUpdating = true;\r\n        if( best_known.feasible === true ){\r\n            Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: \" + best_known.net_profit + \" Distance: \" + best_known.total_distance;\r\n        } else {\r\n            Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: N/A\" + \" Distance: \" + best_known.total_distance;\r\n        }\r\n        Application.ScreenUpdating = false;\r\n\r\n        if( best_known.containerGet(container_id).item_cnt > 0 ){\r\n\r\n            incumbent = best_known;\r\n\r\n            start_time = performance.now() / 1000.0;\r\n            end_time = start_time;\r\n\r\n            //Do\r\n            do{\r\n                //DoEvents\r\n\r\n                PerturbSolution(incumbent, container_id, 0.1 + 0.2 * ((end_time - start_time) / ((solver_options.CPU_time_limit * 0.666) / nonempty_container_cnt)));\r\n\r\n                //With incumbent\r\n\r\n                    for( j = 1; j <= item_list.num_item_types; j++){\r\n                        continue_flag = true;\r\n                        while( (incumbent.unpacked_item_countGet(incumbent.item_type_orderGet(j)) > 0) && (continue_flag === true) ){\r\n                            continue_flag = AddItemToContainer(incumbent, container_id, incumbent.item_type_orderGet(j), 1, true);\r\n                            //DoEvents\r\n                        }\r\n                    }\r\n\r\n                incumbent.feasible = true\r\n                for( j = 1; j <= item_list.num_item_types; j++){\r\n                    if( (incumbent.unpacked_item_countGet(j) > 0) && (item_list.item_typesGet(j).mandatory === 1) ){\r\n                        incumbent.feasible = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                CalculateDistance(incumbent);\r\n\r\n                if( ((incumbent.feasible === true) && (best_known.feasible === false)) ||\r\n                   ((incumbent.feasible === false) && (best_known.feasible === false) && (incumbent.total_volume > best_known.total_volume + epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit + epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume - epsilon)) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance - epsilon) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment - epsilon) ||\r\n                   ((incumbent.feasible === true) && (best_known.feasible === true) && (incumbent.net_profit > best_known.net_profit - epsilon) && (incumbent.total_volume < best_known.total_volume + epsilon)) && (incumbent.total_distance < best_known.total_distance + epsilon) && (incumbent.total_x_moment < best_known.total_x_moment + epsilon) && (incumbent.total_yz_moment < best_known.total_yz_moment - epsilon) ){\r\n            \r\n                    best_known = incumbent;\r\n                    \r\n                    // if( best_known.feasible = true ){\r\n                    //     Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: \" + best_known.net_profit + \" Distance: \" + best_known.total_distance\r\n                    // } else {\r\n                    //     Application.StatusBar = \"Reorganizing container \" + container_id + \". Best net profit found so far: N/A\" + \" Distance: \" + best_known.total_distance\r\n                    // }\r\n                    \r\n                }\r\n\r\n                end_time = performance.now() / 1000.0;\r\n                \r\n                /* WILL NEVER HAPPEN? chadiik\r\n                if( end_time < start_time - 0.01 ){\r\n                    solver_options.CPU_time_limit = solver_options.CPU_time_limit - (86400 - start_time)\r\n                    start_time = end_time\r\n                }\r\n                */\r\n\r\n            }\r\n            while ( end_time - start_time < (solver_options.CPU_time_limit * 0.666) / nonempty_container_cnt );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // MsgBox \"Iterations performed: \" + iteration\r\n    \r\n//CLP_Solver_Finish:\r\n    \r\n    // ensure loadability\r\n\r\n    var min_x = 0;\r\n    var min_y = 0;\r\n    var min_z = 0;\r\n\r\n    var intersection_right = 0;\r\n    var intersection_left = 0;\r\n    var intersection_top = 0;\r\n    var intersection_bottom = 0;\r\n\r\n    var selected_item_index = 0;\r\n\r\n    /** @type {item_in_container} */\r\n    var swap_item;\r\n\r\n    var area_supported = 0;\r\n    var area_required = 0;\r\n    var support_flag = false;\r\n\r\n    for( i = 1; i <= best_known.num_containers; i++){\r\n        //With best_known.containerGet(i)\r\n        let container = best_known.containerGet(i);\r\n\r\n            for( j = 1; j <= container.item_cnt; j++ ){\r\n\r\n                selected_item_index = 0;\r\n                min_x = container.width;\r\n                min_y = container.height;\r\n                min_z = container.length;\r\n                \r\n                for( k = j; k <= container.item_cnt; k++ ){\r\n\r\n                    if( (container.itemsGet(k).origin_z < min_z - epsilon) ||\r\n                        ((container.itemsGet(k).origin_z < min_z + epsilon) && (container.itemsGet(k).origin_y < min_y - epsilon)) ||\r\n                        ((container.itemsGet(k).origin_z < min_z + epsilon) && (container.itemsGet(k).origin_y < min_y + epsilon) && (container.itemsGet(k).origin_x < min_x - epsilon)) ){\r\n\r\n                        // check for support\r\n                    \r\n                        if( container.itemsGet(k).origin_y < epsilon ){\r\n                            support_flag = true;\r\n                        } else {\r\n                            area_supported = 0;\r\n                            area_required = ((container.itemsGet(k).opposite_x - container.itemsGet(k).origin_x) * (container.itemsGet(k).opposite_z - container.itemsGet(k).origin_z));\r\n                            support_flag = false;\r\n                            for( l = j - 1; l >= 1; l--){\r\n                                        \r\n                                if( (Math.abs(container.itemsGet(k).origin_y - container.itemsGet(l).opposite_y) < epsilon) ){\r\n                                    \r\n                                    // check for intersection\r\n                                    \r\n                                    intersection_right = container.itemsGet(k).opposite_x;\r\n                                    if( intersection_right > container.itemsGet(l).opposite_x ) intersection_right = container.itemsGet(l).opposite_x;\r\n\r\n                                    intersection_left = container.itemsGet(k).origin_x;\r\n                                    if( intersection_left < container.itemsGet(l).origin_x ) intersection_left = container.itemsGet(l).origin_x;\r\n                                    \r\n                                    intersection_top = container.itemsGet(k).opposite_z;\r\n                                    if( intersection_top > container.itemsGet(l).opposite_z ) intersection_top = container.itemsGet(l).opposite_z;\r\n                                    \r\n                                    intersection_bottom = container.itemsGet(k).origin_z;\r\n                                    if( intersection_bottom < container.itemsGet(l).origin_z ) intersection_bottom = container.itemsGet(l).origin_z;\r\n                                    \r\n                                    if( (intersection_right > intersection_left) && (intersection_top > intersection_bottom) ){\r\n                                        area_supported = area_supported + (intersection_right - intersection_left) * (intersection_top - intersection_bottom);\r\n                                        if( area_supported > area_required - epsilon ){\r\n                                            support_flag = true;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                    \r\n                                }\r\n                            }\r\n                            \r\n                        }\r\n                        \r\n                        if( support_flag === true ){\r\n                            selected_item_index = k;\r\n\r\n                            min_x = container.itemsGet(k).origin_x;\r\n                            min_y = container.itemsGet(k).origin_y;\r\n                            min_z = container.itemsGet(k).origin_z;\r\n                        }\r\n                    }\r\n                \r\n                }\r\n\r\n                if( selected_item_index > 0 ){\r\n                    swap_item = container.itemsGet(selected_item_index);\r\n                    container.items[selected_item_index] = container.itemsGet(j);\r\n                    container.items[j] = swap_item;\r\n                } else {\r\n                    Application.Alert(\"Loading order could not be constructed.\");\r\n                }\r\n            }\r\n    }\r\n        \r\n    // write the solution\r\n    \r\n    // MsgBox best_known.total_distance\r\n    \r\n    if( best_known.feasible === true ){\r\n        reply = Application.Confirm(\"CLP Spreadsheet Solver performed \" + iteration + \" LNS iterations and found a solution with a net profit of \" + best_known.net_profit + \". Do you want to overwrite the current solution with the best found solution?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply ){\r\n            WriteSolution(best_known);\r\n        }\r\n    } else if ( infeasibility_count > 0 ){\r\n        WriteSolution(best_known);\r\n    } else {\r\n        reply = Application.Confirm(\"The best found solution after \" + iteration + \" LNS iterations does not satisfy all constraints. Do you want to overwrite the current solution with the best found solution?\", true);//, vbYesNo, \"CLP Spreadsheet Solver\")\r\n        if( reply ){\r\n            WriteSolution(best_known);\r\n        }\r\n    }\r\n    \r\n    // Erase the data\r\n    /*\r\n    delete item_list.item_types;\r\n    delete container_list.container_types;\r\n    delete compatibility_list.item_to_item;\r\n    delete compatibility_list.container_to_item;\r\n\r\n    for( i = 1; i <= incumbent.num_containers; i++){\r\n        delete incumbent.containerGet(i).items;\r\n    }\r\n    delete incumbent.container;\r\n    delete incumbent.unpacked_item_count;\r\n    \r\n    if(best_known.container){\r\n        for( i = 1; i <= best_known.container.length; i++){\r\n            if(best_known.container[i])\r\n                delete best_known.containerGet(i).items;\r\n        }\r\n        delete best_known.container;\r\n    }\r\n    delete best_known.unpacked_item_count;\r\n    */\r\n    Application.StatusBar = false;\r\n    Application.ScreenUpdating = true;\r\n    //Application.Calculation = xlCalculationAutomatic\r\n    \r\n    //ThisWorkbook.Worksheets(\"3.Solution\").Activate;\r\n    //Cells(1, 1).Select;\r\n    \r\n}\r\n\r\nfunction FeasibilityCheckData(){\r\n    \r\n    var i = 0;\r\n    var j = 0;\r\n    var feasibility_flag = false;\r\n    \r\n    var infeasibility_count = 0;\r\n    var infeasibility_string = '';\r\n    \r\n    Range(ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 9, 1), ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + (4 * item_list.total_number_of_items), 1)).Clear;\r\n    \r\n    var volume_capacity_required = 0;\r\n    var volume_capacity_available = 0;\r\n\r\n    var weight_capacity_required = 0;\r\n    var weight_capacity_available = 0;\r\n\r\n    var max_width = 0;\r\n    var max_heigth = 0;\r\n    var max_length = 0;\r\n    \r\n    //With item_list\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        if( item_list.item_typesGet(i).mandatory === 1 ){\r\n            volume_capacity_required = volume_capacity_required + (item_list.item_typesGet(i).volume * item_list.item_typesGet(i).number_requested);\r\n            weight_capacity_required = weight_capacity_required + (item_list.item_typesGet(i).weight * item_list.item_typesGet(i).number_requested);\r\n        }\r\n    }\r\n    \r\n    \r\n    //With container_list\r\n    for( i = 1; i <= container_list.num_container_types; i++){\r\n        if( container_list.container_typesGet(i).mandatory >= 0 ){\r\n            volume_capacity_available = volume_capacity_available + (container_list.container_typesGet(i).volume_capacity * container_list.container_typesGet(i).number_available);\r\n            weight_capacity_available = weight_capacity_available + (container_list.container_typesGet(i).weight_capacity * container_list.container_typesGet(i).number_available);\r\n            \r\n            if( container_list.container_typesGet(i).width > max_width ) max_width = container_list.container_typesGet(i).width;\r\n            if( container_list.container_typesGet(i).height > max_heigth ) max_heigth = container_list.container_typesGet(i).height;\r\n            if( container_list.container_typesGet(i).length > max_length ) max_length = container_list.container_typesGet(i).length;\r\n            \r\n        }\r\n    }\r\n    \r\n    if( volume_capacity_required > volume_capacity_available + epsilon ){\r\n        infeasibility_count = infeasibility_count + 1;\r\n        infeasibility_string = infeasibility_string + \"The amount of available volume is not enough to pack the mandatory items.\\n\";\r\n        ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"The amount of available volume is not enough to pack the mandatory items.\";\r\n    }\r\n    \r\n    if( weight_capacity_required > weight_capacity_available + epsilon ){\r\n        infeasibility_count = infeasibility_count + 1;\r\n        infeasibility_string = infeasibility_string + \"The amount of available weight capacity is not enough to pack the mandatory items.\\n\";\r\n        ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"The amount of available weight capacity is not enough to pack the mandatory items.\";\r\n    }\r\n    \r\n    //With item_list\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        //With .item_typesGet(i)\r\n        let itemType = item_list.item_typesGet(i);\r\n        if( (itemType.mandatory === 1) && (itemType.xy_rotatable === false) && (itemType.yz_rotatable === false) && ((itemType.width > max_width + epsilon) || (itemType.height > max_heigth + epsilon) || (itemType.length > max_length + epsilon)) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too large to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too large to fit into any container.\";\r\n        }\r\n\r\n        if( (itemType.mandatory === 1) && (itemType.width > max_width + epsilon) && (itemType.width > max_heigth + epsilon) && (itemType.width > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too wide to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too wide to fit into any container.\";\r\n        }\r\n\r\n        if( (itemType.mandatory === 1) && (itemType.height > max_width + epsilon) && (itemType.height > max_heigth + epsilon) && (itemType.height > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too tall to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too tall to fit into any container.\";\r\n        }\r\n        \r\n        if( (itemType.mandatory === 1) && (itemType.length > max_width + epsilon) && (itemType.length > max_heigth + epsilon) && (itemType.length > max_length + epsilon) ){\r\n            infeasibility_count = infeasibility_count + 1;\r\n            if( infeasibility_count < 5 ){\r\n                infeasibility_string = infeasibility_string + \"Item type \" + i + \" is too long to fit into any container.\" + \"\\n\";\r\n            }\r\n            if( infeasibility_count === 5 ){\r\n                infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n            }\r\n            ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is too long to fit into any container.\";\r\n        }\r\n        \r\n    }\r\n    \r\n    if( instance.container_item_compatibility_worksheet === true ){\r\n    \r\n        for( i = 1; i <= item_list.num_item_types; i++){\r\n            \r\n            feasibility_flag = false;\r\n            \r\n            for( j = 1; j <= container_list.num_container_types; j++){\r\n                if( compatibility_list.container_to_itemGet(j, i) === true ){\r\n                    feasibility_flag = true;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            if( feasibility_flag === false ){\r\n                \r\n                infeasibility_count = infeasibility_count + 1;\r\n                if( infeasibility_count < 5 ){\r\n                    infeasibility_string = infeasibility_string + \"Item type \" + i + \" is not compatible with any container.\" + \"\\n\";\r\n                }\r\n                if( infeasibility_count === 5 ){\r\n                    infeasibility_string = infeasibility_string + \"More can be found in the list of detected infeasibilities in the solution worksheet.\" + \"\\n\";\r\n                }\r\n                ThisWorkbook.Worksheets(\"3.Solution\").Cells(item_list.total_number_of_items + 8 + infeasibility_count, 1).Value = \"Item type \" + i + \" is not compatible with any container.\";\r\n            }\r\n            \r\n        }\r\n    }\r\n    \r\n    return {\r\n        infeasibility_count: infeasibility_count,\r\n        infeasibility_string: infeasibility_string\r\n    };\r\n}\r\n\r\n\r\nfunction SortItems(){\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n\r\n    /** @type {item_type_data} */\r\n    var swap_item_type;\r\n    \r\n    if( item_list.num_item_types > 1 ){\r\n       for( i = 1; i <= item_list.num_item_types; i++){\r\n           for( j = item_list.num_item_types; j >= 2; j--){\r\n               if( (item_list.item_typesGet(j).mandatory > item_list.item_typesGet(j - 1).mandatory) ||\r\n                   ((item_list.item_typesGet(j).mandatory === 1) && (item_list.item_typesGet(j - 1).mandatory === 1) && (item_list.item_typesGet(j).sort_criterion > item_list.item_typesGet(j - 1).sort_criterion)) ||\r\n                   ((item_list.item_typesGet(j).mandatory === 0) && (item_list.item_typesGet(j - 1).mandatory === 0) && ((item_list.item_typesGet(j).profit / item_list.item_typesGet(j).volume) > (item_list.item_typesGet(j - 1).profit / item_list.item_typesGet(j - 1).volume))) ){\r\n                   \r\n                   swap_item_type = item_list.item_typesGet(j);\r\n                   item_list.item_types[j] = item_list.item_typesGet(j - 1);\r\n                   item_list.item_types[j - 1] = swap_item_type;\r\n                   \r\n               }\r\n           }\r\n       }\r\n    }\r\n    \r\n    // for( i = 1; <=item_list.num_item_types\r\n    //    MsgBox item_list.item_typesGet(i).id + \" \" + item_list.item_typesGet(i).weight + \" \" + item_list.item_typesGet(i).sort_criterion\r\n    // }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction CalculateDistance(solution){\r\n\r\n     var j = 0;\r\n     var k = 0;\r\n     var l = 0;\r\n     var max_z = 0;\r\n\r\n    //With solution\r\n    \r\n    solution.total_distance = 0;\r\n    solution.total_x_moment = 0;\r\n    solution.total_yz_moment = 0;\r\n    \r\n    for( j = 1; j <= solution.num_containers; j++){\r\n\r\n         //With .containerGet(j)\r\n        let container = solution.containerGet(j);\r\n        max_z = 0;\r\n        for( k = 1; k <= container.item_cnt; k++){\r\n               for( l = k + 1; l <= container.item_cnt; l++){\r\n                   if( container.itemsGet(k).item_type === container.itemsGet(l).item_type ){\r\n                       solution.total_distance = solution.total_distance + Math.abs(container.itemsGet(k).opposite_x + container.itemsGet(k).origin_x - container.itemsGet(l).opposite_x - container.itemsGet(l).origin_x) + Math.abs(container.itemsGet(k).opposite_y + container.itemsGet(k).origin_y - container.itemsGet(l).opposite_y - container.itemsGet(l).origin_y) + Math.abs(container.itemsGet(k).opposite_z + container.itemsGet(k).origin_z - container.itemsGet(l).opposite_z - container.itemsGet(l).origin_z);\r\n                   }\r\n\r\n                  // solution.total_distance = solution.total_distance + container.itemsGet(k).opposite_z\r\n               }\r\n\r\n            if( max_z < container.itemsGet(k).opposite_z ) max_z = container.itemsGet(k).opposite_z;\r\n\r\n           // solution.total_distance = solution.total_distance + penalty * max_z\r\n           solution.total_distance = solution.total_distance + container.itemsGet(k).opposite_z;\r\n\r\n          // solution.total_x_moment = solution.total_x_moment + (container.itemsGet(k).origin_y + container.itemsGet(k).opposite_y) * item_list.item_typesGet(container.itemsGet(k).item_type).weight\r\n\r\n        }\r\n\r\n        solution.total_distance = solution.total_distance + container.item_cnt * container.item_cnt * max_z;\r\n    }\r\n    \r\n}\r\n\r\n/**\r\n * @param {solution_data} solution \r\n */\r\nfunction CalculateDispersion(solution){\r\n\r\n    var i = 0;\r\n    var j = 0;\r\n    var k = 0;\r\n    var item_flag = false;\r\n    var container_count = 0;\r\n    \r\n    // With solution\r\n    \r\n    solution.total_distance = 0;\r\n\r\n    for( i = 1; i <= item_list.num_item_types; i++){\r\n        container_count = 0;\r\n        for( j = 1; j <= solution.num_containers; j++){\r\n\r\n            // With .containerGet(j)\r\n            let container = solution.containerGet(j);\r\n            item_flag = false\r\n            for( k = 1; k <= container.item_cnt; k++){\r\n               if( container.itemsGet(k).item_type === i ){\r\n                   item_flag = true;\r\n                   break;\r\n               }\r\n            }\r\n\r\n            if( item_flag === true ) container_count = container_count + 1;\r\n\r\n        }\r\n\r\n        solution.total_distance = solution.total_distance + container_count * container_count;\r\n    }\r\n}\r\n\r\nvar signaler = new Signaler();\r\nconst signals = {\r\n    solution: 'solution'\r\n};\r\n\r\nexport { \r\n    CLP_Solver as Execute,\r\n    solution_data as SolutionData,\r\n    item_in_container as ContainerItem,\r\n    signaler,\r\n    signals\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/CLPSolver.js","import Signaler from \"../../utils/cik/Signaler\";\r\n\r\nconst typeofString = 'string';\r\nvar colLabels = '0ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\r\n\r\nconst signals = {\r\n    updated: 'u'\r\n};\r\n\r\nclass CellEntry /*extends Signaler*/{\r\n    constructor(value){\r\n        this.Value = value;\r\n        this.col = 0;\r\n        this.row = 0;\r\n\r\n        /** @type {Function} */\r\n        this.calculate = undefined;\r\n    }\r\n\r\n    get Value(){\r\n        if(this.calculate)\r\n            this._value = this.calculate();\r\n        return this._value;\r\n    }\r\n    set Value(value){\r\n        this._value = value;\r\n        //this.Dispatch(signals.updated, this);\r\n    }\r\n\r\n    get Select(){\r\n        console.log('Select: ', this.Value);\r\n    }\r\n\r\n    toString(){\r\n        return this.Value.toString();\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} row \r\n * @param {Number} col \r\n * @param {*} [value]\r\n */\r\nfunction Cells(row, col, value){\r\n    return new CellEntry('default');\r\n}\r\n\r\n/** @type {Worksheet} */\r\nvar active;\r\n\r\nclass Worksheet{\r\n    /** @param {string} label */\r\n    constructor(label){\r\n        this.label = label.toLowerCase();\r\n        /** @type {Map<Number, Map<Number, CellEntry>>} */\r\n        this.data = new Map();\r\n\r\n        this.cellsFN = this.Cells.bind(this);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CellEntry} cell1 \r\n     * @param {CellEntry} cell2 \r\n     */\r\n    Sum(cell1, cell2){\r\n        var cells = Range(cell1, cell2).cells;\r\n        var total = 0;\r\n        cells.forEach(cell => {\r\n            let value = Number.parseFloat(cell.Value);\r\n            if(!isNaN(value))\r\n                total += value;\r\n        });\r\n        return total;\r\n    }\r\n\r\n    get Activate(){\r\n        active = this;\r\n        Cells = this.cellsFN;\r\n    }\r\n\r\n    Cells(row, col, value){\r\n        if(typeof col === typeofString) col = colLabels.indexOf(col);\r\n\r\n        if(!this.data.has(row) || !this.data.get(row).has(col)){\r\n            if(!this.data.has(row))\r\n                this.data.set(row, new Map());\r\n            \r\n            let newEntry = new CellEntry(0);\r\n            newEntry.row = row;\r\n            newEntry.col = col;\r\n            this.data.get(row).set(col, newEntry);\r\n        }\r\n        \r\n        if(value)\r\n            this.data.get(row).get(col).Value = value;\r\n        \r\n        return this.data.get(row).get(col);\r\n    }\r\n\r\n    Find(value){\r\n        for(var row of this.data.values()){\r\n            for(var cell of row.values()){\r\n                if(cell.Value === value){\r\n                    return cell;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    Print(){\r\n        console.group(this.label);\r\n        var rows = [];\r\n        for(var [row, rowData] of this.data){\r\n            let rowResult = [row + ':'];\r\n            for(var [col, colData] of rowData){\r\n                rowResult.push(colData.Value);\r\n            }\r\n            rows[row] = rowResult;\r\n        }\r\n        \r\n        rows.forEach(row => {\r\n            console.log(...row);\r\n        });\r\n        console.groupEnd();\r\n    }\r\n}\r\n\r\nclass Workbook{\r\n    constructor(){\r\n        /** @type {Map<string, Worksheet>} */\r\n        this.worksheets = new Map();\r\n    }\r\n\r\n    /** @param {Worksheet} worksheet */\r\n    Add(worksheet){\r\n        this.worksheets.set(worksheet.label.toLowerCase(), worksheet);\r\n    }\r\n\r\n    /** @param {string} label */\r\n    Worksheets(label){\r\n        return this.worksheets.get(label.toLowerCase());\r\n    }\r\n\r\n    Print(){\r\n        for(var worksheet of this.worksheets.values()){\r\n            worksheet.Print();\r\n        }\r\n    }\r\n\r\n    get print(){\r\n        this.Print();\r\n    }\r\n}\r\n\r\nvar solverSheet = new Worksheet('CLP Solver Console');\r\nvar itemsSheet = new Worksheet('1.Items');\r\nvar containersSheet = new Worksheet('2.Containers');\r\nvar solutionSheet = new Worksheet('3.Solution');\r\n\r\nvar ThisWorkbook = new Workbook();\r\nThisWorkbook.Add(solverSheet);\r\nThisWorkbook.Add(itemsSheet);\r\nThisWorkbook.Add(containersSheet);\r\nThisWorkbook.Add(solutionSheet);\r\n\r\n/**\r\n * @param {string} label \r\n * @returns {Boolean}\r\n */\r\nfunction CheckWorksheetExistence(label){\r\n    return ThisWorkbook.Worksheets(label) !== undefined;\r\n}\r\n\r\nclass CellsRange{\r\n    constructor(){\r\n        /** @type {Array<CellEntry>} */\r\n        this.cells = [];        \r\n    }\r\n\r\n    set Value(value){\r\n        this.cells.forEach(cell => {\r\n            cell.Value = value;\r\n        });\r\n    }\r\n\r\n    get Clear(){\r\n        this.cells.forEach(cell => {\r\n            cell.Value = null;\r\n        });\r\n    }\r\n\r\n    get ClearContents(){\r\n        this.Clear;\r\n    }\r\n}\r\n\r\nvar _range = new CellsRange();\r\n\r\n/**\r\n * @param {CellEntry} cell1 \r\n * @param {CellEntry} cell2 \r\n */\r\nfunction Range(cell1, cell2){\r\n    var minCol = Math.min(cell1.col, cell2.col);\r\n    var maxCol = Math.max(cell1.col, cell2.col);\r\n    var minRow = Math.min(cell1.row, cell2.row);\r\n    var maxRow = Math.max(cell1.row, cell2.row);\r\n\r\n    _range.cells.length = 0;\r\n    for(var c = minCol; c < maxCol; c++){\r\n        for(var r = minRow; r < maxRow; r++){\r\n            _range.cells.push(Cells(r, c));\r\n        }\r\n    }\r\n\r\n    return _range;\r\n}\r\n\r\nclass Application{\r\n\r\n    static set StatusBar(value){\r\n        console.log(value);\r\n    }\r\n\r\n    static set ScreenUpdating(value){\r\n\r\n    }\r\n\r\n    static Alert(msg){\r\n        console.log('CLP alert:', msg);\r\n    }\r\n\r\n    static Confirm(msg, defaultValue){\r\n        console.log('CLP confirm (' + defaultValue + '):', msg);\r\n        return defaultValue;\r\n    }\r\n}\r\n\r\nexport {\r\n    ThisWorkbook, Cells, CheckWorksheetExistence, Range, Application\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/Workbook.js","export default class Bin {\r\n\r\n  constructor(name, w, h, d, mw) {\r\n    this.name = name || '';\r\n    this.width = w || 0;\r\n    this.height = h || 0;\r\n    this.depth = d || 0;\r\n    this.maxWeight = mw || 0;\r\n    this.items = [];\r\n  }\r\n\r\n  getName() {\r\n    return this.name;\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  getDepth() {\r\n    return this.depth;\r\n  }\r\n\r\n  getMaxWeight() {\r\n    return this.maxWeight;\r\n  }\r\n\r\n  getItems() {\r\n    return this.items;\r\n  }\r\n\r\n  getVolume() {\r\n    return this.getWidth() * this.getHeight() * this.getDepth();\r\n  }\r\n\r\n  getPackedWeight() {\r\n    return this.items.reduce( ( weight, item ) => weight + item.getWeight(), 0 );\r\n  }\r\n\r\n  weighItem(item) {\r\n    const maxWeight = this.getMaxWeight();\r\n    return ! maxWeight || item.getWeight() + this.getPackedWeight() <= maxWeight;\r\n  }\r\n\r\n  putItem(item, p) {\r\n    let box = this;\r\n    let fit = false;\r\n\r\n    item.position = p;\r\n    for (let i=0; i<6; i++) {\r\n      item.rotationType = i;\r\n      let d = item.getDimension();\r\n\r\n      if (box.getWidth() < p[0] + d[0] || box.getHeight() < p[1] + d[1] || box.getDepth() < p[2] + d[2]) {\r\n        continue;\r\n      }\r\n\r\n      fit = true;\r\n\r\n      for (let j=0; j<box.items.length; j++) {\r\n        let _j = box.items[j];\r\n        if (_j.intersect(item)) {\r\n          fit = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (fit) {\r\n        box.items.push(item);\r\n      }\r\n\r\n      return fit;\r\n    }\r\n\r\n    return fit;\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Bin.js","export const RotationType_WHD = 0;\r\nexport const RotationType_HWD = 1;\r\nexport const RotationType_HDW = 2;\r\nexport const RotationType_DHW = 3;\r\nexport const RotationType_DWH = 4;\r\nexport const RotationType_WDH = 5;\r\n\r\nexport const WidthAxis = 0;\r\nexport const HeightAxis = 1;\r\nexport const DepthAxis = 2;\r\n\r\nexport const StartPosition = [0, 0, 0];\r\n\r\nexport const RotationTypeStrings = {\r\n  [RotationType_WHD]: 'xyz',\r\n  [RotationType_HWD]: 'yxz',\r\n  [RotationType_HDW]: 'yzx',\r\n  [RotationType_DHW]: 'zyx',\r\n  [RotationType_DWH]: 'zxy',\r\n  [RotationType_WDH]: 'xzy',\r\n};\r\n\r\nexport default class Item {\r\n\r\n  constructor(name, w, h, d, wg) {\r\n    this.name = name || '';\r\n    this.width = w || 0;\r\n    this.height = h || 0;\r\n    this.depth = d || 0;\r\n    this.weight = wg || 0;\r\n    this.rotationType = RotationType_WHD;\r\n    this.position = []; // x, y, z\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  getHeight() {\r\n    return this.height;\r\n  }\r\n\r\n  getDepth() {\r\n    return this.depth;\r\n  }\r\n\r\n  getWeight() {\r\n    return this.weight;\r\n  }\r\n\r\n  getRotationType() {\r\n    return this.rotationType;\r\n  }\r\n\r\n  getRotationTypeString() {\r\n    return RotationTypeStrings[this.getRotationType()];\r\n  }\r\n\r\n  getDimension() {\r\n    let d;\r\n    switch (this.rotationType) {\r\n      case RotationType_WHD:\r\n        d = [this.getWidth(), this.getHeight(), this.getDepth()];\r\n        break;\r\n      case RotationType_HWD:\r\n        d = [this.getHeight(), this.getWidth(), this.getDepth()];\r\n        break;\r\n      case RotationType_HDW:\r\n        d = [this.getHeight(), this.getDepth(), this.getWidth()];\r\n        break;\r\n      case RotationType_DHW:\r\n        d = [this.getDepth(), this.getHeight(), this.getWidth()];\r\n        break;\r\n      case RotationType_DWH:\r\n        d = [this.getDepth(), this.getWidth(), this.getHeight()];\r\n        break;\r\n      case RotationType_WDH:\r\n        d = [this.getWidth(), this.getDepth(), this.getHeight()];\r\n        break;\r\n    }\r\n    return d;\r\n  }\r\n\r\n  intersect(i2) {\r\n    return rectIntersect(this, i2, WidthAxis, HeightAxis) &&\r\n        rectIntersect(this, i2, HeightAxis, DepthAxis) &&\r\n        rectIntersect(this, i2, WidthAxis, DepthAxis);\r\n  }\r\n\r\n  getVolume() {\r\n    return this.getWidth() * this.getHeight() * this.getDepth();\r\n  }\r\n}\r\n\r\nexport const rectIntersect = (i1, i2, x, y) => {\r\n  let d1, d2, cx1, cy1, cx2, cy2, ix, iy;\r\n\r\n  d1 = i1.getDimension();\r\n  d2 = i2.getDimension();\r\n\r\n  cx1 = i1.position[x] + d1[x] / 2;\r\n  cy1 = i1.position[y] + d1[y] / 2;\r\n  cx2 = i2.position[x] + d2[x] / 2;\r\n  cy2 = i2.position[y] + d2[y] / 2;\r\n\r\n  ix = Math.max(cx1, cx2) - Math.min(cx1, cx2);\r\n  iy = Math.max(cy1, cy2) - Math.min(cy1, cy2);\r\n\r\n  return ix < (d1[x] + d2[x]) / 2 && iy < (d1[y] + d2[y]) / 2;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Item.js","import Logger from \"../utils/cik/Logger\";\r\nimport CargoBoxView from \"./CargoBoxView\";\r\nimport CargoView from \"./CargoView\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoGroup from \"../packer/CargoGroup\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\n\r\n/**\r\n * @typedef {Object} CargoListViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/**\r\n * @typedef SortResult\r\n * @property {Number} min\r\n * @property {Number} max\r\n * @property {Number} cargoes\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nconst signals = {\r\n    sort: 'sort'\r\n};\r\n\r\n/** @type {CargoListViewParams} */\r\nconst defaultParams = {};\r\n\r\nclass CargoListView extends Signaler {\r\n    /**\r\n     * @param {CargoListViewParams} params \r\n     */\r\n    constructor(params){\r\n        super();\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view;\r\n        this.templatesView = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Map<CargoGroup, CargoView>}\r\n         */\r\n        this.cargoTemplateViews = new Map();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Add(group){\r\n        //Logger.Log('Adding cargo group #' + this.cargoTemplateViews.size + ': ' + group.ToString() + ' to view', group);\r\n        var templateCargoView;\r\n        switch(group.entry.type){\r\n            case 'BoxEntry': {\r\n                templateCargoView = new CargoBoxView(group.entry);\r\n                \r\n                break;\r\n            }\r\n\r\n            default :\r\n                templateCargoView = CargoView.Dummy(group.entry);\r\n                Logger.Warn('group.entry.type not supported by viewer,', group);\r\n                break;\r\n        }\r\n\r\n        this.cargoTemplateViews.set(group, templateCargoView);\r\n        this.templatesView.add(templateCargoView.view);\r\n\r\n        this.Sort();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group \r\n     */\r\n    Remove(group){\r\n        var templateCargoView = this.cargoTemplateViews.get(group);\r\n        if(templateCargoView){\r\n            this.cargoTemplateViews.delete(group);\r\n            this.templatesView.remove(templateCargoView.view);\r\n\r\n            this.Sort();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {CargoGroup|CargoEntry|string|Number} id \r\n     */\r\n    GetTemplate(id){\r\n        var group;\r\n        if(id instanceof CargoGroup){\r\n            group = id;\r\n        }\r\n        else if(id instanceof CargoEntry){\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry === id) group = cargoGroup;\r\n            }\r\n        }\r\n        else{\r\n            for(var cargoGroup of this.cargoTemplateViews.keys()){\r\n                if(cargoGroup.entry.uid === id) group = cargoGroup;\r\n            }\r\n        }\r\n\r\n        return this.cargoTemplateViews.get(group);\r\n    }\r\n\r\n    /**\r\n     * @param {Map<CargoGroup, CargoView>} cargoViews \r\n     * @returns {Number}\r\n     */\r\n    Sort(){\r\n\r\n        this.SortMapBySize();\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.templatesView.scale.set(1, 1, 1);\r\n        this.templatesView.updateMatrixWorld(true);\r\n        const worldToLocal = new THREE.Matrix4().getInverse(this.templatesView.matrixWorld);\r\n        const padding = 3 * units,\r\n            start = 0;\r\n\r\n        var i = 0,\r\n            offset = 0;\r\n            \r\n        /**\r\n         * @type {SortResult}\r\n         */\r\n        var result = {min: start, max: start, cargoes: 0};\r\n        \r\n        var list = this.cargoTemplateViews.values(),\r\n            cargoView;\r\n        while( ( cargoView = list.next() ).done === false ){\r\n\r\n            cargoView.value.position.set(0, start, 0);\r\n\r\n            tempBox.setFromObject(cargoView.value.view);\r\n            tempBox.applyMatrix4(worldToLocal);\r\n\r\n            tempBox.getSize(tempVec);\r\n            var halfSize = tempVec.y / 2;\r\n            if(i > 0)\r\n                offset += halfSize;\r\n\r\n            cargoView.value.position.set(0, start + offset, 0);\r\n\r\n            offset += halfSize + padding;\r\n\r\n            i++;\r\n        }\r\n\r\n        //result.min = tempVec.set(0, result.min, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        //result.max = tempVec.set(0, offset, 0).applyMatrix4(this.view.matrixWorld).y;\r\n        result.min = start;\r\n        result.max = offset;\r\n        result.cargoes = i;\r\n        this.Dispatch(signals.sort, result);\r\n\r\n        //for(var [cargo, cargoView] of cargoViews){}\r\n    }\r\n\r\n    SortMapBySize(){\r\n        /**\r\n         * \r\n         * @param {[CargoGroup, CargoListView]} a \r\n         * @param {[CargoGroup, CargoListView]} b \r\n         */\r\n        function sort(a, b){\r\n            return -a[0].entry.dimensions.Compare(b[0].entry.dimensions);\r\n        }\r\n\r\n        var list = [...this.cargoTemplateViews.entries()];\r\n        list.sort(sort);\r\n        this.cargoTemplateViews = new Map(list);\r\n        return;\r\n\r\n        this.cargoTemplateViews.clear();\r\n        list.forEach(entry => {\r\n            this.cargoTemplateViews.set(entry[0], entry[1]);\r\n        });\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","import CargoView from \"./CargoView\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst materialTemplate = new THREE.MeshStandardMaterial();\r\n\r\nconst brightnessRange = [.45, .55];\r\nvar hueBase = Math.random();\r\nfunction nextColor(){\r\n    let color = new THREE.Color();\r\n    color.setHSL(hueBase, 1, brightnessRange[0] + Math.random() * (brightnessRange[1] - brightnessRange[0]));\r\n    hueBase = Utils.GoldenSeries(hueBase);\r\n    return color;\r\n}\r\n\r\nclass CargoBoxView extends CargoView {\r\n    /**\r\n     * \r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var material = materialTemplate.clone();\r\n        material.color = nextColor();\r\n        this.mesh = new THREE.Mesh(unitCubeGeometry, material);\r\n        this.mesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(this.mesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        var s = value.dimensions.vec3;\r\n        this.SetScale(s.x, s.y, s.z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n    }\r\n}\r\n\r\nexport default CargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoBoxView.js","import Container from \"../packer/container/Container\";\r\nimport ContainerView from \"./ContainerView\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\nconst typeofString = 'string';\r\n\r\nvar yRotation = new THREE.Matrix4().makeRotationY(-Math.PI / 2);\r\nvar tempMatrix4 = new THREE.Matrix4();\r\n\r\nclass PackingSpaceView{\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n\r\n        /**\r\n         * @type {Array<ContainerView>}\r\n         */\r\n        this.containerViews = [];\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     */\r\n    Add(container){\r\n        Logger.Log('Adding container: ' + container.ToString() + ' to view', container);\r\n        var containerView = ContainerView.Request(container);\r\n        this.view.add(containerView.view);\r\n        this.containerViews.push(containerView);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     */\r\n    Remove(container){\r\n\r\n    }\r\n\r\n    /**\r\n     * @param {string} containingVolumeUID \r\n     */\r\n    FindContainingVolume(containingVolumeUID){\r\n        for(var iCView = 0; iCView < this.containerViews.length; iCView++){\r\n            let volumes = this.containerViews[iCView].container.volumes;\r\n            for(var iCVolume = 0; iCVolume < volumes.length; iCVolume++){\r\n                if(volumes[iCVolume].uid === containingVolumeUID){\r\n                    return volumes[iCVolume];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {ContainingVolume} containingVolume \r\n     */\r\n    GetMatrix(containingVolume){\r\n        if(typeof containingVolume === typeofString) containingVolume = this.FindContainingVolume(containingVolume);\r\n        tempMatrix4.identity();\r\n        tempMatrix4.makeTranslation(containingVolume.position.x - containingVolume.dimensions.width / 2, containingVolume.position.y, containingVolume.position.z - containingVolume.dimensions.length / 2);\r\n        //tempMatrix4.premultiply(yRotation);\r\n        return tempMatrix4;\r\n    }\r\n}\r\n\r\nexport default PackingSpaceView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackingSpaceView.js","import Container from \"../packer/container/Container\";\r\nimport Asset from \"../components/assets/Asset\";\r\nimport Logger from \"../utils/cik/Logger\";\r\nimport ContainingVolume from \"../packer/container/ContainingVolume\";\r\n\r\n/**\r\n * \r\n * @param {Container} container \r\n */\r\nfunction createContainerBoxes(container){\r\n    /**\r\n     * @type {Map<ContainingVolume, THREE.Mesh>}\r\n     */\r\n    var meshes = new Map();\r\n\r\n    container.volumes.forEach(cv => {\r\n        let mesh = Asset.CreateMesh();\r\n            \r\n        let extent = cv.dimensions.vec3;\r\n        mesh.scale.copy(extent);\r\n        mesh.position.y += extent.y / 2;\r\n\r\n        mesh.material = mesh.material.clone();\r\n        mesh.material.color.setHex(0xffaaaa);\r\n        mesh.material.transparent = true;\r\n        mesh.material.opacity = .2;\r\n        mesh.material.side = THREE.BackSide;\r\n        mesh.material.polygonOffset = true;\r\n        mesh.material.polygonOffsetFactor = 1;\r\n        mesh.material.polygonOffsetUnits = 1;\r\n\r\n        meshes.set(cv, mesh);\r\n    });\r\n\r\n    return meshes;\r\n}\r\n\r\nvar views = new WeakMap();\r\n\r\nclass ContainerView {\r\n    /**\r\n     * \r\n     * @param {Container} container \r\n     * @param {THREE.Object3D} view\r\n     */\r\n    constructor(container, view){\r\n\r\n        views.set(container, this);\r\n\r\n        this.container = container;\r\n        this.view = new THREE.Object3D();\r\n        this.view.add(view);\r\n\r\n        Asset.StandardSceneObject(this.view);\r\n\r\n        var containerBoxes = createContainerBoxes(container);\r\n        for(var [cv, mesh] of containerBoxes){\r\n            mesh.position.add(cv.position);\r\n            this.view.add(mesh);\r\n        }\r\n\r\n        console.log(this);\r\n    }\r\n\r\n    /*\r\n    Set(object3d){\r\n        this.view = object3d;\r\n    }*/\r\n\r\n    /**\r\n     * @param {Container} container\r\n     * @returns {ContainerView}\r\n     */\r\n    static Request(container){\r\n        var view = views.get(container);\r\n        if( ! view ){\r\n            let meshes = createContainerBoxes(container);\r\n            let view = new THREE.Object3D();\r\n            for(var [cv, mesh] of meshes){\r\n                mesh.position.add(cv.position);\r\n                view.add(mesh);\r\n            }\r\n\r\n            containerView = new ContainerView(container, view);\r\n            Logger.Warn('View not found for:', container);\r\n        }\r\n        return view;\r\n    }\r\n}\r\n\r\nexport default ContainerView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/ContainerView.js","\r\n\r\n\r\nconst defaultGeometry = new THREE.CubeGeometry(1, 1, 1);\r\nconst defaultMeshMaterial = new THREE.MeshStandardMaterial({color: 0xaaaaaa});\r\n\r\nconst objectLoader = new THREE.ObjectLoader();\r\nconst jsonLoader = new THREE.JSONLoader();\r\n\r\nclass Asset {\r\n    constructor(){\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \r\n     * @param {THREE.Material} [material]\r\n     */\r\n    static CreateMesh(geometry, material){\r\n        geometry = geometry || defaultGeometry;\r\n        material = material || defaultMeshMaterial;\r\n\r\n        var mesh = new THREE.Mesh(geometry, material);\r\n        return mesh;\r\n    }\r\n\r\n    /**\r\n     * @typedef GeometryJSONReturn\r\n     * @property {THREE.Geometry|THREE.BufferGeometry} geometry\r\n     * @property {Array<THREE.Material>} [materials]\r\n     * \r\n     * @param {Object} json - Representing Geometry or BufferGeometry json data\r\n     * @param {string} [texturePath] - optional texture url \r\n     * @returns {GeometryJSONReturn}\r\n     */\r\n    static FromGeometryJSON(json, texturePath){\r\n        return jsonLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * @param {Object} json \r\n     * @param {THREE.Object3D} texturePath \r\n     */\r\n    static FromJSON(json, texturePath){\r\n        return objectLoader.parse(json, texturePath);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} object \r\n     */\r\n    static StandardSceneObject(object){\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                child.castShadow = true;\r\n                child.receiveShadow = true;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport default Asset;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/assets/Asset.js","\r\nconst _new = Symbol('new'),\r\n    _reset = Symbol('reset');\r\n\r\n/**\r\n * @template {T}\r\n */\r\nclass Pool{\r\n    /**\r\n     * @param {function(...args)=>T} fnNew \r\n     * @param {function(T, ...args)=>T} [fnReset]\r\n     */\r\n    constructor(fnNew, fnReset){\r\n        this.objects = [];\r\n\r\n        this[_new] = fnNew;\r\n        this[_reset] = fnReset;\r\n    }\r\n\r\n    /** Get a clean object (fnNew & fnReset) from the pool\r\n     * @returns {T}\r\n     */\r\n    Request(...args){\r\n        var object;\r\n\r\n        if(this.objects.length === 0){\r\n            object = this[_new](...args);\r\n        }\r\n        else{\r\n            object = this.objects[this.objects.length - 1];\r\n            --this.objects.length;\r\n        }\r\n\r\n        return this[_reset](object, ...args);\r\n    }\r\n\r\n    /** Make object available again\r\n     * @param {T} object \r\n     */\r\n    Return(object){\r\n        this.objects[this.objects.length] = object;\r\n    }\r\n}\r\n\r\nexport default Pool;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Pool.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\nimport BoxEntry from './box/BoxEntry';\r\nimport Dimensions from './box/Dimensions';\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst numberType = 'number';\r\n\r\nconst signals = {\r\n    updated: 'updated',\r\n    aborted: 'aborted',\r\n    completed: 'completed'\r\n};\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        /** Do not modify directly, use CargoInput.Update instead\r\n         * @ignore\r\n         */\r\n        //this.entry = new BoxEntry();\r\n    }\r\n\r\n    /** Creates a new BoxEntry, required for inputs. (Can be reused) */\r\n    CreateBoxEntry(){\r\n        return new BoxEntry();\r\n    }\r\n\r\n    /** Shows/updates entry 3D display\r\n     * @param {BoxEntry} entry \r\n     * @returns {Boolean}\r\n     */\r\n    Show(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n            try{\r\n                this.Dispatch(signals.updated, entry);\r\n                return true;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Show, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Show, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    /** Hides entry 3D display */\r\n    Hide(){\r\n        this.Dispatch(signals.aborted);\r\n    }\r\n\r\n    /** Adds a new entry and obtain its uid\r\n     * @param {BoxEntry} entry\r\n     * @returns {Number|Boolean} uid or false if error\r\n     */\r\n    Add(entry){\r\n        if(BoxEntry.Assert(entry)){\r\n\r\n            if( Dimensions.IsVolume(entry.dimensions.Abs()) === false ){\r\n                Logger.Warn('Cargo.Input.Add, entry rejected, dimensions != Volume:', entry);\r\n                return false;\r\n            }\r\n\r\n            try{\r\n                var commitedEntry = entry.Clone();\r\n                var uid = commitedEntry.SetUID();\r\n\r\n                this.Dispatch(signals.completed, commitedEntry);\r\n                return uid;\r\n            }\r\n            catch(error){\r\n                Logger.Warn('Error in Cargo.Input.Add, error/entry:', error, entry);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        Logger.Warn('BoxEntry.Assert failed in Cargo.Input.Add, entry:', entry);\r\n        return false;\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import Signaler from \"../utils/cik/Signaler\";\r\nimport Container from \"../packer/container/Container\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport ContainerView from \"../view/ContainerView\";\r\nimport Asset from \"./assets/Asset\";\r\n\r\n/**\r\n * @typedef PackingSpaceJSON\r\n * @property {THREE.Geometry} jsonObject.geometry\r\n * @property {Container} jsonObject.container\r\n */\r\n\r\nconst signals = {\r\n    containerLoaded: 'containerLoaded'\r\n};\r\n\r\nclass PackingSpaceInput extends Signaler {\r\n    constructor(){\r\n        super();\r\n\r\n        this.packingSpace = new PackingSpace();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {PackingSpaceJSON} jsonObject \r\n     */\r\n    Load(jsonObject){\r\n        var data = typeof jsonObject === 'string' ? JSON.parse(jsonObject) : jsonObject;\r\n        console.log(data);\r\n        if(data.container){\r\n            var container = Container.FromJSON(data.container);\r\n            \r\n            if(data.view){\r\n                var model = Asset.FromJSON(data.view);\r\n                //var model = Asset.CreateMesh(geometry);\r\n                var containerView = new ContainerView(container, model);\r\n            }\r\n\r\n            this.packingSpace.AddContainer(container);\r\n\r\n            this.Dispatch(signals.containerLoaded, container);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default PackingSpaceInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackingSpaceInput.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport CargoInput from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\nimport PackingSpaceInput from './api/components/PackingSpaceInput';\r\nimport UX from './api/UX';\r\nimport PackerInterface from './api/components/PackerInterface';\r\n\r\n/**\r\n * @typedef InitializationParams\r\n * @property {Boolean} debug\r\n * @property {import('./api/UX').UXParams} ux\r\n */\r\n\r\n/**\r\n * @type {InitializationParams}\r\n */\r\nconst defaultParams = {\r\n\tdebug: false\r\n};\r\n\r\nconst utils = {\r\n\tTHREE: THREE,\r\n\tdat: (window.dat || require('./api/utils/cik/config/datGUIConsole').default),\r\n\tSignaler: require('./api/utils/cik/Signaler').default,\r\n\tUtils: require('./api/utils/cik/Utils').default,\r\n\tDebug: require('./api/debug/Debug').default,\r\n\tConfig: require('./api/utils/cik/config/Config').default\r\n};\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Freight Packer API instance\r\n\t * @param {HTMLDivElement} containerDiv\r\n\t * @param {InitializationParams} params\r\n\t */\r\n\tconstructor( containerDiv, params ) {\r\n\r\n\t\tthis.params = Utils.AssignUndefined(params, defaultParams);\r\n\t\tFreightPacker.DevSetup(this);\r\n\r\n\t\tthis.ux = new UX(this.params.ux);\r\n\r\n\t\t/**\r\n\t\t * Handles input of: description fields (label, etc.), dimensions and constraints\r\n\t\t * @type {CargoInput}\r\n\t\t */\r\n\t\tthis.cargoInput = new CargoInput();\r\n\r\n\t\t/**\r\n\t\t * Handles input of: packing spaces configurations and assets\r\n\t\t * @type {PackingSpaceInput}\r\n\t\t */\r\n\t\tthis.packingSpaceInput = new PackingSpaceInput();\r\n\r\n\t\tvar app = new App(containerDiv, this.ux, {\r\n\t\t\tcargoInput: this.cargoInput,\r\n\t\t\tpackingSpaceInput: this.packingSpaceInput\r\n\t\t});\r\n\r\n\t\tFreightPacker.DevSetup(app);\r\n\r\n\t\t/**\r\n\t\t * Manual solving and notification\r\n\t\t * @type {PackerInterface}\r\n\t\t */\r\n\t\tthis.packer = new PackerInterface(app);\r\n\r\n\t\tif(this.params.debug){\r\n\t\t\tFreightPacker.Auto(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get utils(){\r\n\t\treturn utils;\r\n\t}\r\n\r\n\t/** @param {FreightPacker|App} domain */\r\n\tstatic DevSetup(domain){\r\n\t\tif(domain instanceof FreightPacker){\r\n\t\t\tlet fp = domain;\r\n\t\t\tglobal.fp = fp;\r\n\t\t\tlet params = fp.params;\r\n\t\t\tif(params.debug) {\r\n\t\t\t\tLogger.active = true;\r\n\t\t\t\tLogger.toConsole = true;\r\n\t\t\t\tLogger.traceToConsole = true;\r\n\t\t\t}\r\n\r\n\t\t\t//require('./api/debug/Tester').testPool();\r\n\t\t\t//utils.Debug.CLPTest.Test1();\r\n\t\t}\r\n\r\n\t\tif(domain instanceof App){\r\n\t\t\tconst SceneSetup = require('./api/view/SceneSetup').default;\r\n\t\t\tlet app = domain;\r\n\t\t\tapp.sceneSetup.On(SceneSetup.signals.init, function(){\r\n\t\t\t\tFreightPacker.utils.Debug.Viz.scene = app.sceneSetup.sceneController.scene;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/** @param {FreightPacker} fp */\r\n\tstatic Auto(fp){\r\n\t\t\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","import UpdateComponent from \"./UpdateComponent\";\r\n\r\n/**\r\n * @typedef {Object} IScreen\r\n * @property {Number} x\r\n * @property {Number} y\r\n * @property {Number} width\r\n * @property {Number} height\r\n * @property {Number} left\r\n * @property {Number} right\r\n * @property {Number} bottom\r\n * @property {Number} top\r\n */\r\n\r\n/**\r\n * @typedef {Object} DragEvent\r\n * @property {MouseEvent} mouseEvent\r\n * @property {Number} sx - Start screen x\r\n * @property {Number} sy - Start screen y\r\n * @property {Number} x - Current screen x\r\n * @property {Number} y - Current screen y\r\n * @property {Number} dx - Delta x\r\n * @property {Number} dy - Delta y\r\n * @property {Number} distance - Distance (current - start)\r\n * @property {Number} minDist - Minimum distance to raise onDrag\r\n */\r\n\r\n /** keyboard api (http://dmauro.github.io/Keypress/)\r\n * @typedef keyboard\r\n * @property {function} on\r\n * @property {function} unregister\r\n */\r\n\r\nconst epsilon = Math.pow(2, -52);\r\nconst defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        /**\r\n         * @type {IScreen}\r\n         */\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.updateComponents = [\r\n            new UpdateComponent(true, 1/25, this.Update25.bind(this)),\r\n            new UpdateComponent(true, 1/10, this.Update10.bind(this))\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n        this.onDrag = [];\r\n\r\n        /**\r\n         * @type {DragEvent}\r\n         */\r\n        this.onDragEvent = {\r\n            mouseEvent: undefined,\r\n            sx: undefined, sy: undefined,\r\n            x: 0, y: 0,\r\n            dx: 0, dy: 0,\r\n            distance: 0,\r\n            minDist: 4 // pixels \r\n        };\r\n        var onDragStatus = false;\r\n        Object.defineProperty(this.onDragEvent, '_status', {\r\n            get: function(){\r\n                return onDragStatus;\r\n            },\r\n            set: function(value){\r\n                onDragStatus = value;\r\n                this.sx = this.sy = undefined;\r\n                this.dx = this.dy = 0;\r\n            }\r\n        })\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        /**\r\n         * @type {keyboard}\r\n         */\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = defaultKeysListen;\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n            this.onDragEvent._status = true;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n\r\n            this.onDragEvent._status = false;\r\n        }\r\n    }\r\n\r\n    OnMouseDrag(){\r\n        var p = this.onDragEvent;\r\n        if(p._status){\r\n            let m = this.mouseScreen;\r\n            if(p.sx === undefined) p.sx = p.x = m.x;\r\n            if(p.sy === undefined) p.sy = p.y = m.y;\r\n\r\n            let vx = p.x - p.sx,\r\n                vy = p.y - p.sy;\r\n            p.distance = Math.sqrt(vx * vx + vy * vy);\r\n            if(p.distance > p.minDist && \r\n                (Math.abs(p.dx) > epsilon || Math.abs(p.dy) > epsilon)\r\n            ){\r\n                for(var i = 0; i < this.onDrag.length; i++){\r\n                    this.onDrag[i](p);\r\n                }\r\n            }\r\n\r\n            p.dx = p.x - m.x;\r\n            p.dy = p.y - m.y;\r\n\r\n            p.x = m.x;\r\n            p.y = m.y;\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.onDragEvent.mouseEvent = mouseEvent;\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.updateComponents.length; iUpdate++){\r\n            var updateComponent = this.updateComponents[iUpdate];\r\n            if(updateComponent.active\r\n                && (now - updateComponent.lastUpdateTime > updateComponent.interval)\r\n            ){\r\n                updateComponent.Update(now);\r\n            }\r\n        }\r\n\r\n        this.OnMouseDrag();\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","import Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef RendererParams\r\n * @property {Boolean} antialias\r\n * @property {Boolean} shadows\r\n * @property {Boolean} shadowsAutoUpdate\r\n * @property {Number} clearColor - hex color 0xff7f00\r\n * @property {Number} renderSizeMul\r\n * @property {Boolean} composer\r\n */\r\n\r\n/** @type {RendererParams} */\r\nconst defaultParams = {\r\n    antialias: true,\r\n    shadows: THREE.PCFSoftShadowMap,\r\n    shadowsAutoUpdate: true,\r\n    clearColor: 0xcfcfcf,\r\n    renderSizeMul: 1,\r\n    composer: false\r\n};\r\n\r\nclass Renderer {\r\n    /**\r\n     * @param {RendererParams} params \r\n     */\r\n    constructor(params) {\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = this.params.shadows;\r\n            this.renderer.shadowMap.autoUpdate = this.params.shadowsAutoUpdate;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene, camera){\r\n            this.renderer.render(scene, camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.AdjustCamera = function(screen, camera){\r\n            camera.aspect = screen.width / screen.height;\r\n            camera.updateProjectionMatrix();\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen, camera){\r\n            this.AdjustCamera(screen, camera);\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","import Controller from \"../scene/Controller\";\r\nimport Camera from \"../scene/Camera\";\r\nimport Transform from \"../scene/Transform\";\r\nimport Utils from \"../utils/cik/Utils\";\r\n\r\n/**\r\n * @typedef {Object} HUDViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n/** @type {HUDViewParams} */\r\nconst defaultParams = {};\r\n\r\n// -11.3, 23.9, 215.5\r\nconst defaultCamTRS = new Transform( new THREE.Vector3(0, 80, 400), new THREE.Euler(-0.1, 0, 0) );\r\n\r\nclass HUDView extends Controller {\r\n    /**\r\n     * @param {HUDViewParams} params \r\n     * @param {import('../scene/Camera').CameraParams} cameraParams \r\n     */\r\n    constructor(params, cameraParams){\r\n        super(params);\r\n\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var units = this.params.ux.params.units;\r\n\r\n        this.cameraController = new Camera(cameraParams);\r\n\r\n        this.cameraTransform = defaultCamTRS.Clone();\r\n        this.cameraTransform.position.multiplyScalar(units);\r\n        this.cameraTransform.Apply(this.cameraController);\r\n        this.cameraController.camera.updateMatrixWorld();\r\n\r\n        //var gridHelper = new THREE.GridHelper(100 * units, 20);\r\n        //this.AddDefault(gridHelper);\r\n    }\r\n}\r\n\r\nexport default HUDView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/HUDView.js","\r\nconst _position = Symbol('position');\r\nconst _rotation = Symbol('rotation');\r\n\r\nclass Transform {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} position \r\n     * @param {THREE.Euler} rotation \r\n     */\r\n    constructor(position, rotation){\r\n        this[_position] = position || new THREE.Vector3();\r\n        this[_rotation] = rotation || new THREE.Euler();\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    get position(){\r\n        return this[_position];\r\n    }\r\n\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /**\r\n     * @returns {THREE.Euler}\r\n     */\r\n    get rotation(){\r\n        return this[_rotation];\r\n    }\r\n\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} target \r\n     */\r\n    Apply(target){\r\n        target.position.copy(this[_position]);\r\n        target.rotation.copy(this[_rotation]);\r\n    }\r\n\r\n    Clone(){\r\n        var transform = new Transform(this[_position].clone(), this[_rotation].clone());\r\n        return transform;\r\n    }\r\n}\r\n\r\nexport default Transform;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Transform.js","import CargoGroup from \"./CargoGroup\";\r\n\r\nvar _position = Symbol('position');\r\nvar _rotation = Symbol('rotation');\r\n\r\nclass PackingItem {\r\n    constructor(){\r\n        this[_position] = new THREE.Vector3();\r\n        this[_rotation] = new THREE.Euler();\r\n    }\r\n\r\n    /** @returns {THREE.Vector3} */\r\n    get position(){ return this[_position]; }\r\n    set position(value){\r\n        this[_position] = value;\r\n    }\r\n\r\n    /** @returns {THREE.Euler} */\r\n    get rotation(){ return this[_position]; }\r\n    set rotation(value){\r\n        this[_rotation] = value;\r\n    }\r\n}\r\n\r\nclass Cargo extends PackingItem {\r\n    /**\r\n     * \r\n     * @param {CargoGroup} group\r\n     */\r\n    constructor(group){\r\n        super();\r\n\r\n        this.group = group;\r\n    }\r\n\r\n    get entry(){\r\n        return this.group.entry;\r\n    }\r\n\r\n    Clone(){\r\n        var cargo = new Cargo(this.group);\r\n        return cargo;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nconst type = 'Volume';\r\nconst _box3 = Symbol('box3');\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n\r\n        this[_box3] = new THREE.Box3();\r\n    }\r\n\r\n    /** @returns {THREE.Box3} */\r\n    get box3(){\r\n        /** @type {THREE.Box3} */\r\n        let b = this[_box3];\r\n        b.setFromCenterAndSize(this.position, this.dimensions.vec3);\r\n        return b;\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: type,\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n\r\n    ToString(){\r\n        return this.dimensions.ToString();\r\n    }\r\n\r\n    static FromJSON(data, volume){\r\n        if( ! volume ) {\r\n            if(data.type !== type) console.warn('Data supplied is not: ' + type);\r\n\r\n            volume = new Volume();\r\n        }\r\n\r\n        volume.position = new THREE.Vector3(data.position.x, data.position.y, data.position.z);\r\n        volume.dimensions = Dimensions.FromJSON(data.dimensions);\r\n\r\n        return volume;\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","\r\nconst _enabled = Symbol('enabled');\r\n\r\nclass PackingProperty {\r\n    constructor(){\r\n        this[_enabled] = false;\r\n    }\r\n\r\n    /** @returns {Boolean} Is property enabled */\r\n    get enabled(){ return this[_enabled]; }\r\n    set enabled(value){\r\n        this[_enabled] = value;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Copy(){\r\n        Logger.Warn('PackingProperty.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('PackingProperty.Clone is not implemented');\r\n    }\r\n\r\n    static Assert(prop){\r\n        return prop instanceof PackingProperty;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n\r\n        \r\n    }\r\n\r\n    /**\r\n     * @param {SupportsStacking} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new SupportsStacking();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    Copy(prop){\r\n        Logger.Warn('Constraint.Copy is not implemented');\r\n    }\r\n\r\n    Clone(){\r\n        Logger.Warn('Constraint.Clone is not implemented');\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {RotationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new RotationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * @param {TranslationConstraint} prop \r\n     */\r\n    Copy(prop){\r\n        this.enabled = prop.enabled;\r\n    }\r\n\r\n    Clone(){\r\n        var prop = new TranslationConstraint();\r\n        prop.enabled = this.enabled;\r\n        return prop;\r\n    }\r\n}\r\n\r\nexport {\r\n    PackingProperty,\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\nfunction resolve(w, l, h, dimensions){\r\n    var dw = dimensions.width, dl = dimensions.length, dh = dimensions.height;\r\n\r\n    if(almost(w, dw)){ // x\r\n        if(almost(h, dh)){ // y\r\n            return 'xyz';\r\n        }\r\n        else if(almost(h, dl)){ // z\r\n            return 'xzy';\r\n        }\r\n    }\r\n    else if(almost(w, dh)){ // y\r\n        if(almost(h, dw)){ // x\r\n            return 'yxz';\r\n        }\r\n        else if(almost(h, dl)){ // z\r\n            return 'yzx';\r\n        }\r\n    }\r\n    else if(almost(w, dl)){ // z\r\n        if(almost(h, dw)){ // x\r\n            return 'zxy';\r\n        }\r\n        else if(almost(h, dh)){ // y\r\n            return 'zyx';\r\n        }\r\n    }\r\n\r\n    console.warn('ResolveOrientation issue with:', item);\r\n    return 'xyz';\r\n}\r\n\r\nexport { resolve };\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/aas/AASOrientation.js","import Bin from './Bin';\r\nimport {\r\n  Item,\r\n  StartPosition,\r\n  WidthAxis,\r\n  HeightAxis,\r\n  DepthAxis\r\n} from './Item';\r\n\r\nexport default class Packer {\r\n\r\n  constructor(bins, items){\r\n    this.bins = bins || [];\r\n    this.items = items || [];\r\n    this.unfitItems = [];\r\n  }\r\n\r\n  addBin(bin) {\r\n    this.bins.push(bin);\r\n  }\r\n\r\n  addItem(item) {\r\n    this.items.push(item);\r\n  }\r\n\r\n  findFittedBin(i) {\r\n    for (let _i=0; _i<this.bins.length; _i++) {\r\n      let b = this.bins[_i];\r\n\r\n      if (!b.weighItem(i) || !b.putItem(i, StartPosition)) {\r\n        continue;\r\n      }\r\n\r\n      if (b.items.length === 1 && b.items[0] === i) {\r\n        b.items = [];\r\n      }\r\n\r\n      return b;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getBiggerBinThan(b) {\r\n    let v = b.getVolume();\r\n    for (let _i=0; _i<this.bins; _i++) {\r\n      let b2 = this.bins[_i];\r\n      if (b2.getVolume() > v) {\r\n        return b2;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  unfitItem() {\r\n    if (this.items.length === 0) {\r\n      return;\r\n    }\r\n    this.unfitItems.push(this.items[0]);\r\n    this.items.splice(0, 1);\r\n  }\r\n\r\n  packToBin(b, items) {\r\n    let b2 = null;\r\n    let unpacked = [];\r\n    let fit = b.weighItem(items[0]) && b.putItem(items[0], StartPosition);\r\n\r\n    if (!fit) {\r\n      let b2 = this.getBiggerBinThan(b);\r\n      if (b2) {\r\n        return this.packToBin(b2, items);\r\n      }\r\n      return this.items;\r\n    }\r\n\r\n    // Pack unpacked items.\r\n    for (let _i=1; _i < this.items.length; _i++) {\r\n      let fitted = false;\r\n      let item = this.items[_i];\r\n\r\n      if (b.weighItem(item)) {\r\n        // Try available pivots in current bin that are not intersect with\r\n        // existing items in current bin.\r\n        lookup:\r\n        for (let _pt=0; _pt < 3; _pt++) {\r\n          for (let _j=0; _j < b.items.length; _j++) {\r\n            let pv;\r\n            let ib = b.items[_j];\r\n            switch (_pt) {\r\n              case WidthAxis:\r\n                pv = [ib.position[0] + ib.getWidth(), ib.position[1], ib.position[2]];\r\n                break;\r\n              case HeightAxis:\r\n                pv = [ib.position[0], ib.position[1] + ib.getHeight(), ib.position[2]];\r\n                break;\r\n              case DepthAxis:\r\n                pv = [ib.position[0], ib.position[1], ib.position[2] + ib.getDepth()];\r\n                break;\r\n            }\r\n\r\n            if (b.putItem(item, pv)) {\r\n              fitted = true;\r\n              break lookup;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!fitted) {\r\n        while (b2 !== null) {\r\n          b2 = this.getBiggerBinThan(b);\r\n          if (b2) {\r\n            b2.items.push(item);\r\n            let left = this.packToBin(b2, b2.items);\r\n            if (left.length === 0) {\r\n              b = b2;\r\n              fitted = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!fitted) {\r\n          unpacked.push(item);\r\n        }\r\n      }\r\n    }\r\n\r\n    return unpacked;\r\n  }\r\n\r\n  pack() {\r\n\r\n    this.bins.sort((a, b) => {\r\n      return a.getVolume() > b.getVolume();\r\n    });\r\n\r\n    this.items.sort((a, b) => {\r\n      return a.getVolume() < b.getVolume();\r\n    });\r\n\r\n    while (this.items.length > 0) {\r\n      let bin = this.findFittedBin(this.items[0]);\r\n\r\n      if (bin === null) {\r\n        this.unfitItem();\r\n        continue;\r\n      }\r\n\r\n      this.items = this.packToBin(bin, this.items);\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/sim/Packer.js","\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nfunction str(obj){\r\n    var result;\r\n    if(obj instanceof Array){\r\n        result = '[';\r\n        let i;\r\n        for(i = 0; i < obj.length - 1; i++) result += obj[i] + ', ';\r\n        result += obj[i] + ']';\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction debugLog(...args){\r\n    console.log(...args);\r\n    return sleep(200);\r\n}\r\n\r\nfunction debugPacking(...args){\r\n\r\n    return sleep(200);\r\n}\r\n\r\nfunction debugSpace(...args){\r\n\r\n    return sleep(200);\r\n}\r\n\r\nfunction debugPlacement(...args){\r\n\r\n    return sleep(200);\r\n}\r\n\r\nfunction debugAs(type, ...args){\r\n    switch(type){\r\n        case 'Log': return debugLog(...args);\r\n        case 'Packing': return debugPacking(...args);\r\n        case 'Space': return debugSpace(...args);\r\n        case 'Placement': return debugPlacement(...args);\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * @typedef {Array<Number>} Dimensions\r\n * @typedef {Array<Number>} Position\r\n * \r\n * @typedef Item\r\n * @property {string} id \r\n * @property {Dimensions} dimensions\r\n * @property {Number} weight\r\n * \r\n * @typedef Container\r\n * @property {Dimensions} dimensions\r\n * @property {Number} weight\r\n * \r\n * @typedef Placement\r\n * @property {string} id\r\n * @property {Dimensions} dimensions\r\n * @property {Position} position\r\n * @property {Number} weight\r\n * \r\n * @typedef Space\r\n * @property {Dimensions} dimensions\r\n * @property {Position} position\r\n * \r\n * @typedef Packing\r\n * @property {Array<Space>} spaces\r\n * @property {Array<Placement>} placements\r\n * @property {Number} weight\r\n */\r\n\r\nconst placePermutations = [ [0, 1, 2], [0, 2, 1], [1, 0, 2], [1, 2, 0], [2, 0, 1], [2, 1, 0] ];\r\n\r\n/**\r\n * @param {Item} item \r\n * @param {Space} space\r\n * @returns {Placement}\r\n */\r\nfunction place(item, space){\r\n    var d = item.dimensions,\r\n        sd = space.dimensions;\r\n    \r\n    for(let i = 0; i < 6; i++){\r\n        let p = placePermutations[i];\r\n        if( d[p[0]] <= sd[0]\r\n            && d[p[1]] <= sd[1]\r\n            && d[p[2]] <= sd[2]\r\n        ){\r\n            return {\r\n                id: item.id,\r\n                dimensions: [d[p[0]], d[p[1]], d[p[2]]],\r\n                position: space.position,\r\n                weight: item.weight\r\n            };\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Space} space \r\n * @param {Placement} placement\r\n * @returns {Array<Space>} \r\n */\r\nfunction breakUpSpace(space, placement){\r\n    var spaceDim = space.dimensions,\r\n        spacePos = space.position,\r\n        placementDim = placement.dimensions;\r\n    return [\r\n        {  \r\n            dimensions: [ spaceDim[0] - placementDim[0]  , spaceDim[1]                      , spaceDim[2]                   ],  \r\n            position:   [ spacePos[0] + placementDim[0]  , spacePos[1]                      , spacePos[2]                   ]\r\n        },{  \r\n            dimensions: [ placementDim[0]                , spaceDim[1] - placementDim[1]    , spaceDim[2]                   ],  \r\n            position:   [ spacePos[0]                    , spacePos[1] + placementDim[1]    , spacePos[2]                   ]\r\n        },{  \r\n            dimensions: [ placementDim[0]                , placementDim[1]                  , spaceDim[2] - placementDim[2] ],  \r\n            position:   [ spacePos[0]                    , spacePos[1]                      , spacePos[2] + placementDim[2] ]\r\n        }\r\n    ];\r\n}\r\n\r\nfunction rnsort(a, b){\r\n    if(a < b) return 1;\r\n    if(a > b) return -1;\r\n    return 0;\r\n}\r\n\r\nfunction volumeSort(a, b){\r\n    var av = a.dimensions[0] * a.dimensions[1] * a.dimensions[2];\r\n    var bv = b.dimensions[0] * b.dimensions[1] * b.dimensions[2];\r\n\r\n    if(av > bv) return -1;\r\n    if(av < bv) return 1;\r\n    return 0;\r\n}\r\n\r\n/**\r\n * @param {Container} container \r\n * @param {Array<Item>} items \r\n */\r\nasync function pack(container, items){\r\n    /** @type {Array<Packing>} */\r\n    var packings = [];\r\n    /** @type {Array<Item>} */\r\n    var unpacked = [];\r\n\r\n    items.sort(volumeSort);\r\n\r\n    //for(let iItem = 0; iItem < items.length; iItem++){\r\n    const iItem = 0;\r\n    while(items.length > 0){\r\n        let item = items[iItem];\r\n\r\n        if(item.weight > container.weight){\r\n            return {failed: 'Item is too big'};\r\n        }\r\n        \r\n        let packed = false;\r\n\r\n        for(let iPacking = 0; iPacking < packings.length && !packed; iPacking++){\r\n            let packing = packings[iPacking];\r\n            await debugAs('Packing', packing);\r\n\r\n            // If this packing's going to be too big with this item as well then skip on to the next packing\r\n            if(packing.weight + item.weight > container.weight){\r\n                await debugAs('Log', 'Packing ' + iPacking + ' is overweight');\r\n                continue;\r\n            }\r\n\r\n            for(let iSpace = 0; iSpace < packing.spaces.length; iSpace++){\r\n                let space = packing.spaces[iSpace];\r\n                await debugAs('Space', space);\r\n                \r\n                // Try placing the item in this space, if it doesn't fit skip on the next space\r\n                let placement = place(item, space);\r\n                if( !placement ){\r\n                    await debugAs('Log', 'Placing item in Space ' + iSpace + ' of Packing ' + iPacking + ' failed');\r\n                    continue;\r\n                }\r\n\r\n                await debugAs('Placement', 'placement');\r\n\r\n                // Add the item to the packing and break up the surrounding spaces\r\n                packing.placements.push(placement);\r\n                packing.weight += item.weight;\r\n                packing.spaces.splice(iSpace, 1);\r\n                packing.spaces.push(...breakUpSpace(space, placement));\r\n\r\n                packed = true;\r\n                items.splice(iItem, 1);\r\n                await debugAs('Log', 'Item packed successfully in Space ' + iSpace + ' of Packing ' + iPacking);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if( packed ){\r\n            continue;\r\n        }\r\n\r\n        // Can't fit in any of the spaces for the current packings so lets try a new space the size of the container\r\n        /** @type {Space} */\r\n        let space = {\r\n            dimensions: container.dimensions.sort(rnsort),\r\n            position: [0, 0, 0]\r\n        };\r\n\r\n        let placement = place(item, space);\r\n\r\n        // If it can't be placed in this space, then it's just too big for the container and we should abandon hope\r\n        if( !placement ){\r\n            unpacked.push(...items.splice(iItem, 1));\r\n            await debugAs('Log', 'Placing item of dimensions' + str(item.dimensions) + ' abandoned');\r\n            continue;\r\n        }\r\n\r\n        // Otherwise lets put the item in a new packing and break up the remaing free space around it\r\n        /** @type {Packing} */\r\n        let packing = {\r\n            placements: [placement],\r\n            weight: item.weight,\r\n            spaces: breakUpSpace(space, placement)\r\n        };\r\n        packings.push(packing);\r\n\r\n        items.splice(iItem, 1);\r\n    }\r\n\r\n    return {\r\n        packings,\r\n        unpacked\r\n    };\r\n}\r\n\r\nfunction almost(n1, n2){\r\n    return Math.abs(n1 - n2) < .01;\r\n}\r\n\r\n/** \r\n * @param {Array<Number>} packedDimensions\r\n * @param {Array<Number>} itemDimensions\r\n * @returns {string} - axis order (xyz, xzy, yxz, yzx, zxy or zyx)\r\n */\r\nfunction resolveOrientation(packedDimensions, itemDimensions){\r\n    var pw = packedDimensions[0],\r\n        ph = packedDimensions[1],\r\n        w = itemDimensions[0],\r\n        h = itemDimensions[1],\r\n        l = itemDimensions[2];\r\n    if(almost(pw, w)){ // x\r\n        if(almost(ph, h)){ // y\r\n            return 'xyz';\r\n        }\r\n        else if(almost(ph, l)){ // z\r\n            return 'xzy';\r\n        }\r\n    }\r\n    else if(almost(pw, h)){ // y\r\n        if(almost(ph, w)){ // x\r\n            return 'yxz';\r\n        }\r\n        else if(almost(ph, l)){ // z\r\n            return 'yzx';\r\n        }\r\n    }\r\n    else if(almost(pw, l)){ // z\r\n        if(almost(ph, w)){ // x\r\n            return 'zxy';\r\n        }\r\n        else if(almost(ph, h)){ // y\r\n            return 'zyx';\r\n        }\r\n    }\r\n    return 'xyz';\r\n}\r\n\r\nexport {\r\n    pack,\r\n    resolveOrientation\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/brb/BRB.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\nimport PackingSpaceView from \"./PackingSpaceView\";\r\nimport PackingSpace from \"../packer/PackingSpace\";\r\nimport SceneSetup from \"../view/SceneSetup\";\r\nimport Utils3D from \"../utils/cik/Utils3D\";\r\nimport Utils from \"../utils/cik/Utils\";\r\nimport PackResultView from \"./PackResultView\";\r\nimport UpdateComponent from \"../utils/cik/input/UpdateComponent\";\r\nimport Container from \"../packer/container/Container\";\r\n\r\n/**\r\n * @typedef {Object} ViewParams\r\n * @property {import('../UX').default} ux\r\n * @property {Object} cargoListView\r\n * @property {import('../utils/cik/Utils3D').IPoint} cargoListView.bottomLeft\r\n * @property {import('./CargoListView').CargoListViewParams} cargoListView.params\r\n * @property {Object} packResultView\r\n * @property {import('./PackResultView').PackResultViewParams} packResultView.params\r\n */\r\n\r\n /** @type {ViewParams} */\r\nconst defaultParams = {\r\n    ux: undefined,\r\n    cargoListView: {\r\n        bottomLeft: { x: 100, y: 100 },\r\n        params: {}\r\n    },\r\n    packResultView: {\r\n        params: {}\r\n    }\r\n};\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     * @param {ViewParams} params \r\n     */\r\n    constructor(packer, sceneSetup, params){\r\n        this.sceneSetup = sceneSetup;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        var scope = this;\r\n\r\n        // Fill lights\r\n        if(true){\r\n            let lights = this.sceneSetup.DefaultLights(this.sceneSetup.sceneController, true, false);\r\n\r\n            let dl = lights.filter(light => light instanceof THREE.DirectionalLight)[0];\r\n            let dlData = {\"color\":\"0xfeeedd\",\"intensity\":1,\"castShadow\":true,\"shadow.bias\":0.001,\"shadow.radius\":1,\"shadow.mapSize.x\":2048,\"shadow.mapSize.y\":2048,\"shadow.camera.left\":-400,\"shadow.camera.top\":400,\"shadow.camera.right\":400,\"shadow.camera.bottom\":-400,\"shadow.camera.near\":1,\"shadow.camera.far\":1000};\r\n            let Config = require('../utils/cik/config/Config').default;\r\n            Config.Load(dl, dlData);\r\n\r\n            if(this.sceneSetup.ux.params.hud){\r\n                this.sceneSetup.DefaultLights(this.sceneSetup.hud);\r\n            }\r\n        }\r\n\r\n        // Packing space\r\n        this.packingSpaceView = new PackingSpaceView();\r\n        this.sceneSetup.sceneController.AddDefault(this.packingSpaceView.view);\r\n        /** @param {Container} container */\r\n        function onContainerAdded(container){\r\n            /** @type {THREE.Box3} */\r\n            let box3;\r\n            container.volumes.forEach(volume => {\r\n                if(box3 === undefined)\r\n                    box3 = volume.box3;\r\n                else\r\n                    box3.union(volume.box3);\r\n            });\r\n            scope.sceneSetup.cameraController.Frame(box3, .7);\r\n            scope.packingSpaceView.Add(container);\r\n        }\r\n        packer.packingSpace.On(PackingSpace.signals.containerAdded, onContainerAdded);\r\n\r\n        // Cargo list\r\n        this.params.cargoListView.params.ux = this.params.ux;\r\n        this.cargoListView = new CargoListView(this.params.cargoListView.params);\r\n        var onCargoGroupAdded = this.cargoListView.Add.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupAdded, onCargoGroupAdded);\r\n        var onCargoRemoved = this.cargoListView.Remove.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.groupRemoved, onCargoRemoved);\r\n\r\n        // Cargo list display\r\n        if(this.params.ux.params.hud){    \r\n            this.sceneSetup.hud.Add(this.cargoListView.templatesView);\r\n            this.HUDSetup();\r\n        }\r\n\r\n        // Packing result\r\n        this.params.packResultView.params.ux = this.params.ux;\r\n        this.packResultView = new PackResultView(this.cargoListView, this.packingSpaceView, this.params.packResultView.params);\r\n        this.sceneSetup.sceneController.AddDefault(this.packResultView.view);\r\n\r\n        var onPackUpdate = this.packResultView.DisplayPackingResult.bind(this.packResultView);\r\n        packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n\r\n        var updateComponent = new UpdateComponent(true, 1/30, this.Update.bind(this));\r\n        this.sceneSetup.input.updateComponents.push(updateComponent);\r\n\r\n        if(this.params.ux.params.configure){\r\n            this.Configure();\r\n        }\r\n    }\r\n\r\n    /** @param {Number} now */\r\n    Update(now){\r\n        this.packResultView.Update();\r\n    }\r\n\r\n    HUDSetup(){\r\n        var units = this.params.ux.params.units;\r\n        var input = this.sceneSetup.input;\r\n        var hud = this.sceneSetup.hud;\r\n        var clv = this.cargoListView;\r\n        var scope = this;\r\n\r\n        var cargoListViewRect = new Utils3D.Rect(0, 0, 150, input.screen.height);\r\n        var clvRectIgnore = cargoListViewRect.Clone();\r\n        clvRectIgnore.Offset(input.screen.left, input.screen.top);\r\n\r\n        var min = -1, max = 1;\r\n        var v = new THREE.Vector3(),\r\n            viewportPointA = new THREE.Vector2(),\r\n            viewportPointB = new THREE.Vector2();\r\n        var dragOffset = 0;\r\n\r\n        // \r\n        \r\n        /**\r\n         * @param {import('./CargoListView').SortResult} sortResult\r\n         */\r\n        function onSort(sortResult){\r\n            if(sortResult.cargoes > 0){\r\n                Utils3D.Project(v.set(0, sortResult.min, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, sortResult.max, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                \r\n                var distance = viewportPointA.sub(viewportPointB).length();\r\n                var ratio = .8 / distance;\r\n                var s = Math.max(.6, Math.pow(Math.min(1, clv.templatesView.scale.length() * ratio), .9));\r\n                clv.templatesView.scale.set(s, s, s);\r\n                clv.templatesView.updateMatrixWorld();\r\n            }\r\n\r\n            min = v.set(0, sortResult.min, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n            max = v.set(0, sortResult.max, 0).applyMatrix4(clv.templatesView.matrixWorld).y;\r\n        }\r\n        this.cargoListView.On(CargoListView.signals.sort, onSort);\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').DragEvent} dragEvent \r\n         */\r\n        function onDrag(dragEvent){\r\n            let start = cargoListViewRect.ContainsPoint(dragEvent.sx, dragEvent.sy);\r\n            let current = cargoListViewRect.ContainsPoint(dragEvent.x, dragEvent.y);\r\n            if(start && current){\r\n                let offset = dragEvent.dy * .5 * units;\r\n                let clvMin = min + offset,\r\n                    clvMax = max + offset;\r\n                Utils3D.Project(v.set(0, clvMin, 0), hud.cameraController.camera, input.screen, viewportPointA);\r\n                Utils3D.Project(v.set(0, clvMax, 0), hud.cameraController.camera, input.screen, viewportPointB);\r\n                //console.log(viewportPointA, viewportPointB);\r\n                if( (offset > 0 && viewportPointA.y < -.7)\r\n                    || \r\n                    (offset < 0 && viewportPointB.y > .8)\r\n                ){\r\n                    dragOffset += offset;\r\n                    min += offset;\r\n                    max += offset;\r\n                    clv.templatesView.position.y += offset;\r\n                }\r\n            }\r\n        }\r\n        input.onDrag.push(onDrag);\r\n\r\n        this.sceneSetup.cameraController.orbitControls.ignoredAreas.push(\r\n            clvRectIgnore\r\n        );\r\n\r\n        /**\r\n         * @param {import('../utils/cik/input/Input').IScreen} screen \r\n         */\r\n        function onScreenResize(screen){\r\n\r\n            cargoListViewRect.bottom = screen.height;\r\n            clvRectIgnore.Copy(cargoListViewRect);\r\n            clvRectIgnore.Offset(screen.left, screen.top);\r\n\r\n            var bottomLeft = scope.params.cargoListView.bottomLeft; // offset in pixels\r\n            tempVec.set(bottomLeft.x, bottomLeft.y); // viewport point in pixels\r\n\r\n            Utils3D.ToNDC(tempVec, screen); // NDC point\r\n            Utils3D.Unproject(tempVec, hud.cameraController.camera, tempVec, 'z'); // worldPos on z plane\r\n            tempVec.y += dragOffset;\r\n            clv.templatesView.position.copy(tempVec); // set view position\r\n\r\n            clv.templatesView.updateMatrixWorld(true);\r\n\r\n            clv.Sort();\r\n        }\r\n        \r\n        input.onResize.push(onScreenResize);\r\n        onScreenResize(input.screen);\r\n    }\r\n\r\n    Configure(){\r\n\r\n        var Smart = require('../utils/cik/config/Smart').default;\r\n        var Config = require('../utils/cik/config/Config').default;\r\n        var Control3D = require('../utils/cik/config/Control3D').default;\r\n\r\n        var scope = this;\r\n        var input = this.sceneSetup.input;\r\n\r\n        if(this.params.ux.params.hud){\r\n            var hudControl3D = Control3D.Request('hud');\r\n\r\n            Config.MakeShortcut('Configure', 'Show HUDControl3D', function(){\r\n                hudControl3D.Toggle(scope.cargoListView.templatesView);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","\r\n\r\n/**\r\n * @typedef {Object} Screen\r\n * @property {Number} width\r\n * @property {Number} height\r\n */\r\n\r\n/**\r\n * @typedef {Object} IPoint\r\n * @property {Number} x\r\n * @property {Number} y\r\n */\r\n\r\nvar tempBox = new THREE.Box3();\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass Utils3D {\r\n\r\n    /** Converts 'vec' to NDC, to supply 'vec' in the range [0, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToNDC(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        vec.x = vec.x * 2 - 1;\r\n        vec.y = vec.y * 2 - 1;\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts 'vec' to [0, 1] range, to supply 'vec' in NDC [-1, 1], ommit 'screen'\r\n     * @param {THREE.Vector2|THREE.Vector3} vec \r\n     * @param {Screen} [screen]\r\n     * @returns {THREE.Vector2|THREE.Vector3}\r\n     */\r\n    static ToUnit(vec, screen){\r\n        if(screen){\r\n            vec.x /= screen.width;\r\n            vec.y /= screen.height;\r\n        }\r\n        else{\r\n            vec.x = vec.x / 2 + .5;\r\n            vec.y = vec.y / 2 + .5;\r\n        }\r\n\r\n        if(vec.z !== undefined)\r\n            vec.z = .5;\r\n\r\n        return vec;\r\n    }\r\n\r\n    /** Converts a NDC to world plane (axis) position\r\n     * @param {THREE.Vector2|THREE.Vector3} viewportPoint - in NDC, can be safely used as 'result' if THREE.Vector3\r\n     * @param {THREE.Camera} camera \r\n     * @param {THREE.Vector3} [result]\r\n     * @param {string} [axis] - 'x', 'y' or 'z' (default='z')\r\n     * @returns {THREE.Vector3}\r\n     */\r\n    static Unproject(viewportPoint, camera, result, axis){\r\n        // Ref: https://stackoverflow.com/a/13091694/1712403\r\n\r\n        result = result || new THREE.Vector3();\r\n        result.set(viewportPoint.x, viewportPoint.y, .5);\r\n        result.unproject(camera);\r\n        result.sub(camera.position).normalize();\r\n\r\n        axis = axis || 'z';\r\n        var distance = - camera.position[axis] / result[axis];\r\n        result.multiplyScalar(distance).add(camera.position);\r\n\r\n        return result;\r\n    }\r\n\r\n    /** Converts world position to NDC\r\n     * @param {THREE.Vector3} worldPoint \r\n     * @param {THREE.Camera} camera \r\n     * @param {Screen} screen \r\n     * @param {THREE.Vector2} result \r\n     */\r\n    static Project(worldPoint, camera, screen, result) {\r\n        // Ref: https://github.com/josdirksen/threejs-cookbook/blob/master/03-camera/03.07-convert-world-coordintate-to-screen-coordinates.html\r\n\r\n        tempVec.copy(worldPoint).project(camera);\r\n        result = result || new THREE.Vector2();\r\n        result.x  = tempVec.x;\r\n        result.y  = tempVec.y;\r\n        return result;\r\n    }\r\n}\r\n\r\nclass Rect {\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    constructor(left, top, right, bottom){\r\n        this.Set(left, top, right, bottom);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} left \r\n     * @param {Number} top \r\n     * @param {Number} right \r\n     * @param {Number} bottom \r\n     */\r\n    Set(left, top, right, bottom){\r\n        this.left = left;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n    }\r\n\r\n    /**\r\n     * @param {IPoint|Number} point - {x, y} | x value\r\n     * @param {Number} y - y value\r\n     */\r\n    ContainsPoint(point, y){\r\n        let x = y ? point : point.x;\r\n        y = y ? y : point.y;\r\n        return x > this.left && x < this.right && y > this.top && y < this.bottom;\r\n    }\r\n\r\n    Offset(x, y){\r\n        this.left += x;\r\n        this.top += y;\r\n        this.right += x;\r\n        this.bottom += y;\r\n    }\r\n\r\n    Copy(rect){\r\n        this.Set(rect.left, rect.top, rect.right, rect.bottom);\r\n    }\r\n\r\n    Clone(){\r\n        return new Rect(this.left, this.top, this.right, this.bottom);\r\n    }\r\n}\r\n\r\nUtils3D.Rect = Rect;\r\n\r\nexport default Utils3D;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils3D.js","import Utils from '../utils/cik/Utils';\r\nimport CargoListView from './CargoListView';\r\nimport CargoView from './CargoView';\r\nimport Pool from '../utils/cik/Pool';\r\nimport PackedCargoBoxView from './PackedCargoBoxView';\r\nimport PackingSpaceView from './PackingSpaceView';\r\nimport Logger from '../utils/cik/Logger';\r\nimport Tween from '../utils/cik/Tween';\r\nimport Packer from '../packer/Packer';\r\n\r\n/**\r\n * @typedef {Object} PackResultViewParams\r\n * @property {import('../UX').default} ux\r\n */\r\n\r\n /** @type {PackResultViewParams} */\r\nconst defaultParams = {};\r\n\r\n/**\r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolNewFN(cargoView){\r\n    //console.log('pool new', cargoView);\r\n    var packedCargoView = new PackedCargoBoxView(cargoView.entry);\r\n    packedCargoView.Extend(cargoView);\r\n    return packedCargoView;\r\n}\r\n\r\n/**\r\n * @param {PackedCargoBoxView} object \r\n * @param {CargoView} cargoView\r\n * @returns {PackedCargoBoxView}\r\n */\r\nfunction poolResetFN(object, cargoView){\r\n    //console.log('pool reset', cargoView);\r\n    object.Extend(cargoView);\r\n    return object;\r\n}\r\n\r\nfunction getOrientationAngles(orientation){\r\n    switch(orientation){\r\n        case 'xyz': return  [0,     0,      0];\r\n        case 'xzy': return  [90,    0,      0];\r\n        case 'yxz': return  [0,     0,      90];\r\n        case 'yzx': return  [90,    0,      90];\r\n        case 'zxy': return  [90,    -90,    0];\r\n        case 'zyx': return  [0,     -90,    0];\r\n    }\r\n}\r\n\r\n/**\r\n * @param {string} orientation \r\n */\r\nfunction getOrientationEuler(orientation){\r\n    const rad = Math.PI / 180.0;\r\n    var a = getOrientationAngles(orientation);\r\n    return new THREE.Euler(a[0] * rad, a[1] * rad, a[2] * rad);\r\n}\r\n\r\nclass PackResultView{\r\n    /**\r\n     * @param {CargoListView} cargoListView\r\n     * @param {PackingSpaceView} packingSpaceView\r\n     * @param {PackResultViewParams} params \r\n     */\r\n    constructor(cargoListView, packingSpaceView, params){\r\n\r\n        this.cargoListView = cargoListView;\r\n        this.packingSpaceView = packingSpaceView;\r\n        this.params = Utils.AssignUndefined(params, defaultParams);\r\n\r\n        this.view = new THREE.Object3D();\r\n\r\n        this.pool = new Pool(poolNewFN, poolResetFN);\r\n\r\n        /** @type {Array<Tween>} */\r\n        this.animatingViews = [];\r\n    }\r\n\r\n    /** \r\n     * @param {Packer.PackingResult} packingResult\r\n     */\r\n    DisplayPackingResult(packingResult){\r\n        console.log(packingResult);\r\n        //var containingVolume = this.packingSpaceView.FindContainingVolume(containingVolumeID);\r\n        var containingVolume = packingResult.packed[0].containingVolume;\r\n        var matrix = this.packingSpaceView.GetMatrix(containingVolume);\r\n        var offset = new THREE.Vector3();\r\n        var orientation = new THREE.Quaternion();\r\n        var scale = new THREE.Vector3();\r\n        matrix.decompose(offset, orientation, scale);\r\n\r\n\r\n        var animatingViews = this.animatingViews;\r\n        var view = this.view;\r\n        var onTweenCompleted = this.OnTweenCompleted.bind(this);\r\n\r\n        for(var i = 0, numPackedItems = packingResult.packed.length; i < numPackedItems; i++){\r\n            let item = packingResult.packed[i];\r\n            let cargoViewTemplate = this.cargoListView.GetTemplate(item.entry);\r\n            let packedCargoView = this.pool.Request(cargoViewTemplate);\r\n\r\n            Logger.WarnOnce('PackResultView.DisplayPackingResult', 'packedCargoView should be rotated instead of re-scaling');\r\n            let rotation = getOrientationEuler(item.orientation);\r\n            packedCargoView.SetRotationAngles(rotation.x, rotation.y, rotation.z);\r\n\r\n            let x = item.position.x + offset.x,\r\n                y = item.position.y + offset.y,\r\n                z = item.position.z + offset.z;\r\n\r\n            let zEntry = containingVolume.dimensions.length;\r\n            setTimeout(function(){\r\n                let posTweenCombo = Tween.Combo.Request3(Tween.functions.linear,\r\n                    x, y, zEntry, \r\n                    0, 0, z - zEntry,\r\n                    .5\r\n                );\r\n                \r\n                posTweenCombo.Hook(packedCargoView.position, 'x', 'y', 'z');\r\n                posTweenCombo.onComplete = onTweenCompleted;\r\n                posTweenCombo.Update(0);\r\n                animatingViews.push(posTweenCombo);\r\n    \r\n                view.add(packedCargoView.view);\r\n            }, 100 * i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Tween|Tween.Combo} tween \r\n     */\r\n    OnTweenCompleted(tween){\r\n        var index = this.animatingViews.indexOf(tween);\r\n        if(index != -1){\r\n            this.animatingViews.splice(index, 1);\r\n        }\r\n        tween.Unhook();\r\n        tween.Return();\r\n    }\r\n\r\n    Update(){\r\n        this.animatingViews.forEach(animatingView => {\r\n            animatingView.Update();\r\n        });\r\n    }\r\n}\r\n\r\nexport default PackResultView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackResultView.js","import CargoBoxView from \"./CargoBoxView\";\r\nimport BoxEntry from \"../components/box/BoxEntry\";\r\n\r\nconst unitCubeEdgeGeometry = new THREE.EdgesGeometry(new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1));\r\nconst wireframeMaterialTemplate = new THREE.LineBasicMaterial({color: 0xffffff});\r\n\r\nclass PackedCargoBoxView extends CargoBoxView {\r\n    /**\r\n     * @param {BoxEntry} boxEntry \r\n     */\r\n    constructor(boxEntry){\r\n        super(boxEntry);\r\n\r\n        var meshMaterial = this.mesh.material;\r\n        meshMaterial.polygonOffset = true;\r\n        meshMaterial.polygonOffsetFactor = 1;\r\n        meshMaterial.polygonOffsetUnits = 1;\r\n        meshMaterial.transparent = true;\r\n        meshMaterial.opacity = .5;\r\n\r\n        this.mesh.castShadow = this.mesh.receiveShadow = true;\r\n\r\n        var material = wireframeMaterialTemplate.clone();\r\n        this.wireMesh = new THREE.LineSegments(unitCubeEdgeGeometry, material);\r\n        this.wireMesh.scale.copy(boxEntry.dimensions.vec3);\r\n\r\n        this.view.add(this.wireMesh);\r\n    }\r\n\r\n    /** @returns {BoxEntry} */\r\n    get entry(){ return super.entry; }\r\n    set entry(value){\r\n        super.entry = value;\r\n        this.scale = value.dimensions.vec3;\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x \r\n     * @param {Number} y \r\n     * @param {Number} z \r\n     */\r\n    SetScale(x, y, z){\r\n        this.mesh.scale.set(x, y, z);\r\n        this.wireMesh.scale.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {Number} x in radians\r\n     * @param {Number} y in radians\r\n     * @param {Number} z in radians\r\n     */\r\n    SetRotationAngles(x, y, z){\r\n        this.mesh.rotation.set(x, y, z);\r\n        this.wireMesh.rotation.set(x, y, z);\r\n    }\r\n\r\n    /**\r\n     * @param {CargoBoxView} cargoView \r\n     */\r\n    Extend(cargoView){\r\n        this.entry = cargoView.entry;\r\n        this.mesh.material.color = cargoView.mesh.material.color;\r\n    }\r\n}\r\n\r\nexport default PackedCargoBoxView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/PackedCargoBoxView.js","import Pool from \"./Pool\";\r\n\r\n/** \r\n * Tween update function\r\n * @param {Number} time \r\n * @param {Number} startValue \r\n * @param {Number} delta \r\n * @param {Number} duration\r\n * @returns {Number} value\r\n */\r\nfunction TweenCallback(time, startValue, delta, duration){}\r\n\r\n/**\r\n * On completed callback\r\n * @param {Tween} target\r\n */\r\nfunction TweenCompletedCallback(target){}\r\n\r\nvar clock = new THREE.Clock();\r\n\r\nfunction poolNewFN(){\r\n    return new Tween();\r\n}\r\n/** @param {Tween} tween */\r\nfunction poolResetFN(tween){\r\n    return tween;\r\n}\r\nvar pool = new Pool(poolNewFN, poolResetFN);\r\n\r\nconst functions = {\r\n    /** @type {TweenCallback} */\r\n    linear: function(t, b, c, d){\r\n        return b + c * (t / d);\r\n    },\r\n\r\n    ease: {\r\n        /** @type {TweenCallback} */\r\n        easeOutElastic: function(t, b, c, d) {\r\n            var ts=(t/=d)*t;\r\n            var tc=ts*t;\r\n            return b+c*(33*tc*ts + -106*ts*ts + 126*tc + -67*ts + 15*t);\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * On completed callback\r\n * @param {TweenCombo} target\r\n */\r\nfunction TweenComboCompletedCallback(target){}\r\n\r\nclass TweenCombo{\r\n    /**\r\n     * \r\n     * @param {Array<Tween>} tweens \r\n     */\r\n    constructor(...tweens){\r\n        this.tweens = tweens;\r\n\r\n        /** @type {TweenComboCompletedCallback} */\r\n        this.onComplete;\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {Array<string>} properties \r\n     */\r\n    Hook(object, ...properties){\r\n        for(var i = 0; i < this.tweens.length; i++){\r\n            this.tweens[i].Hook(object, properties[i]);\r\n        };\r\n    }\r\n\r\n    Unhook(){\r\n        this.tweens.forEach(tween => {\r\n            tween.Unhook();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        var completed = true;\r\n        this.tweens.forEach(tween => {\r\n            if(tween.completed === false)\r\n                tween.Update(t);\r\n\r\n            completed = completed && tween.completed;\r\n        });\r\n\r\n        this.completed = completed;\r\n        if(this.completed && this.onComplete)\r\n            this.onComplete(this);\r\n    }\r\n\r\n    /**\r\n     * Returns tweens to pool\r\n     */\r\n    Return(){\r\n        this.tweens.forEach(tween => {\r\n            pool.Return(tween);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} startValue0\r\n     * @param {Number} startValue1\r\n     * @param {Number} startValue2\r\n     * @param {Number} delta0\r\n     * @param {Number} delta1\r\n     * @param {Number} delta2\r\n     * @param {Number} duration\r\n     */\r\n    static Request3(callback, startValue0, startValue1, startValue2, delta0, delta1, delta2, duration){\r\n        var tween0 = pool.Request();\r\n        tween0.Reset(callback, startValue0, delta0, duration);\r\n\r\n        var tween1 = pool.Request();\r\n        tween1.Reset(callback, startValue1, delta1, duration);\r\n\r\n        var tween2 = pool.Request();\r\n        tween2.Reset(callback, startValue2, delta2, duration);\r\n\r\n        var combo = new TweenCombo(tween0, tween1, tween2);\r\n\r\n        return combo;\r\n    }\r\n}\r\n\r\nclass Tween{\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue] \r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    constructor(callback, startValue, delta, duration){\r\n        this.Reset(callback, startValue, delta, duration);\r\n        \r\n        /** @type {TweenCompletedCallback} */\r\n        this.onComplete;\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    Reset(callback, startValue, delta, duration){\r\n        this.callback = callback;\r\n        this.startValue = startValue;\r\n        this.delta = delta;\r\n        this.duration = duration;\r\n\r\n        if(this.startValue === undefined && this.object && this.property){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n\r\n        this.startTime = clock.getElapsedTime();\r\n        this.completed = false;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} object \r\n     * @param {string} property \r\n     */\r\n    Hook(object, property){\r\n        this.object = object;\r\n        this.property = property;\r\n\r\n        if(this.startValue === undefined){\r\n            this.startValue = this.object[this.property];\r\n        }\r\n    }\r\n\r\n    Unhook(){\r\n        this.object = this.property = undefined;\r\n    }\r\n\r\n    /**\r\n     * Update tween\r\n     * @param {Number} t [0, duration]\r\n     */\r\n    Update(t){\r\n        if(t === undefined) t = clock.getElapsedTime() - this.startTime;\r\n\r\n        if(t >= this.duration){\r\n            this.completed = true;\r\n            let endValue = this.startValue + this.delta;\r\n        \r\n            if(this.object)\r\n                this.object[this.property] = endValue;\r\n            \r\n            if(this.onComplete)\r\n                this.onComplete(this);\r\n            \r\n            return endValue;\r\n        }\r\n\r\n        var x = this.callback(t, this.startValue, this.delta, this.duration);\r\n        if(this.object)\r\n            this.object[this.property] = x;\r\n        \r\n        return x;\r\n    }\r\n\r\n    Return(){\r\n        pool.Return(this);\r\n    }\r\n\r\n    /**\r\n     * @param {TweenCallback} callback \r\n     * @param {Number} [startValue]\r\n     * @param {Number} delta \r\n     * @param {Number} duration \r\n     */\r\n    static Request(callback, startValue, delta, duration){\r\n        var tween = pool.Request();\r\n        tween.Reset(callback, startValue, delta, duration);\r\n\r\n        return tween;\r\n    }\r\n\r\n    static get functions(){\r\n        return functions;\r\n    }\r\n}\r\n\r\nTween.Combo = TweenCombo;\r\n\r\nexport default Tween;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Tween.js","import App from \"../App\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport Packer from \"../packer/Packer\";\r\n\r\nconst _app = Symbol('app');\r\n\r\nconst signals = {\r\n    packUpdate: 'packUpdate'\r\n};\r\n\r\nclass PackerInterface extends Signaler {\r\n    /**\r\n     * @param {App} app \r\n     */\r\n    constructor(app){\r\n        super();\r\n        \r\n        var scope = this;\r\n        function onPackUpdate(){\r\n            scope.Dispatch(signals.packUpdate);\r\n        }\r\n\r\n        app.packer.On(Packer.signals.packUpdate, onPackUpdate);\r\n        this[_app] = app;\r\n    }\r\n\r\n    Solve(arg){\r\n        /** @type {App} */\r\n        var app = this[_app];\r\n        app.packer.Solve(arg);\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default PackerInterface;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/PackerInterface.js","import AFitTest from \"../packer/afit/AFitTest\";\r\n\r\nfunction delay(time, callback){\r\n    setTimeout(callback, time);\r\n}\r\n\r\nconst debugGeometry = new THREE.BoxBufferGeometry(1, 1, 1, 1, 1, 1);\r\nconst debugMaterial = new THREE.MeshStandardMaterial({color: 0xff7f00, transparent: true, opacity: .35});\r\nconst debugBox = new THREE.Mesh(debugGeometry, debugMaterial);\r\n\r\nvar tempVec = new THREE.Vector3();\r\n\r\nclass DebugBox {\r\n\r\n    /**\r\n     * @param {THREE.Vector3} center \r\n     * @param {Number|THREE.Vector3} size \r\n     */\r\n    static FromCenterSize(center, size){\r\n        var box = debugBox.clone();\r\n        box.position.copy(center);\r\n        \r\n        if(size instanceof THREE.Vector3)\r\n            box.scale.copy(size);\r\n        else\r\n            box.scale.set(size, size, size);\r\n\r\n        return box;\r\n    }\r\n\r\n    /**\r\n     * @param {THREE.Box3} box3 \r\n     */\r\n    static FromBox3(box3){\r\n        var box = debugBox.clone();\r\n\r\n        box3.getCenter(tempVec);\r\n        box.position.copy(tempVec);\r\n        box3.getSize(tempVec);\r\n        box.scale.copy(tempVec);\r\n\r\n        return box;\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\n/** @type {THREE.Object3D} */\r\nvar view;\r\n\r\n/** @type {Map<string, *>} */\r\nvar debugObjects = new Map();\r\n\r\nvar tVec3 = new THREE.Vector3(),\r\n    tPos = new THREE.Vector3(),\r\n    tScale = new THREE.Vector3();\r\n\r\nclass DebugViz {\r\n\r\n    /**\r\n     * @param {THREE.Object3D} parent\r\n     */\r\n    static SetViewParent(parent){\r\n        view = new THREE.Object3D();\r\n        view.name = 'DebugViz view';\r\n        view.renderOrder = Number.MAX_SAFE_INTEGER - 10;\r\n        parent.add(view);\r\n    }\r\n\r\n    static get view(){ return view; }\r\n\r\n    /**\r\n     * @param {Number} x center x * @param {Number} y center y * @param {Number} z center z * @param {Number} w * @param {Number} h * @param {Number} l\r\n     * @param {Number} [color] hex color\r\n     * @param {Number} [duration] in milliseconds\r\n     */\r\n    static DrawVolume(x, y, z, w, h, l, color, duration){\r\n        tPos.set(x, y, z);\r\n        tScale.set(w, h, l);\r\n\r\n        /** @type {THREE.Mesh} */\r\n        var volume = debugBox.clone();\r\n        view.add(volume);\r\n\r\n        volume.position.copy(center);\r\n\r\n        if(color){\r\n            /** @type {THREE.MeshStandardMaterial} */\r\n            let material = volume.material;\r\n            material.color.setHex(color);\r\n        }\r\n\r\n        let uid = THREE.Math.generateUUID();\r\n        debugObjects.set(uid, volume);\r\n\r\n        if(duration){\r\n            delay(duration, function(){\r\n                DebugViz.RemoveObjectByUID(uid);\r\n            });\r\n        }\r\n\r\n        return uid;\r\n    }\r\n\r\n    /**\r\n     * @param {string} uid \r\n     */\r\n    static RemoveObjectByUID(uid){\r\n        var object = debugObjects.get(uid);\r\n        if(object instanceof THREE.Object3D && object.parent){\r\n            object.parent.remove(object);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * DebugViz\r\n */\r\n\r\nclass Debug {\r\n\r\n    static get AFitTest(){\r\n        return AFitTest;\r\n    }\r\n\r\n    static get CLPTest(){\r\n        return require('../packer/clp/CLPTest');\r\n    }\r\n}\r\n\r\nDebug.Box = DebugBox;\r\nDebug.Viz = DebugViz;\r\n\r\nexport default Debug;\n\n\n// WEBPACK FOOTER //\n// ./src/api/debug/Debug.js","import Item from \"./components/Item\";\r\nimport AFit from \"./AFit\";\r\nimport Container from \"./components/Container\";\r\n\r\n/** @param {Array<Item>} items */\r\nfunction sumOfVolumes(items){\r\n    var sum = 0;\r\n    for(var i = 0, len = items.length; i < len; i++) sum += items[i].Volume;\r\n    return sum;\r\n}\r\n\r\n/**\r\n * @param {Array<Object>} objects \r\n * @param {Array<string>} m - mapping to Item.constructor, ie: [ID, Length, ...]\r\n */\r\nfunction toItems(objects, m){\r\n    var items = [];\r\n    objects.forEach(o => {\r\n        items.push(new Item(o[m[0]], o[m[1]], o[m[2]], o[m[3]], o[m[4]]));\r\n    });\r\n    return items;\r\n}\r\n\r\nclass TestData{\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    constructor(container, items){\r\n        this.container = container;\r\n        this.items = items;\r\n    }\r\n}\r\n\r\nclass AFitTest{\r\n    constructor(){\r\n        this.aFitPacker = new AFit();\r\n    }\r\n\r\n    /**\r\n     * @param {Container} container \r\n     * @param {Array<Item>} items \r\n     */\r\n    T1(container, items){\r\n\r\n        var startTime = performance.now();\r\n        var result = this.aFitPacker.Solve(container, items);\r\n        result.PackTimeInMilliseconds = Math.ceil(performance.now() - startTime);\r\n\r\n        var containerVolume = container.Length * container.Width * container.Height;\r\n        var itemVolumePacked = sumOfVolumes(result.PackedItems);\r\n        var itemVolumeUnpacked = sumOfVolumes(result.UnpackedItems);\r\n\r\n        result.PercentContainerVolumePacked = Math.floor(itemVolumePacked / containerVolume * 100 * 100) / 100;\r\n        result.PercentItemVolumePacked = Math.floor(itemVolumePacked / (itemVolumePacked + itemVolumeUnpacked) * 100 * 100) / 100;\r\n\r\n        return result;\r\n    }\r\n\r\n    static GenerateDataSample1(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 15, Width: 13, Height: 9 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 5,  Width: 4, Height: 2, Quantity: 1 },\r\n\t\t    { ID: 1001, Name: 'Item2', Length: 2,  Width: 1, Height: 1, Quantity: 3 },\r\n\t\t    { ID: 1002, Name: 'Item3', Length: 9,  Width: 7, Height: 3, Quantity: 4 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 8 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 1 },\r\n            { ID: 1005, Name: 'Item6', Length: 3,  Width: 3, Height: 2, Quantity: 2 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSample2(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 60, Width: 35, Height: 25 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 30,  Width: 50, Height: 20, Quantity: 1 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 13, Width: 6, Height: 3, Quantity: 6 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 17, Width: 8, Height: 6, Quantity: 3 },\r\n            { ID: 1005, Name: 'Item6', Length: 5,  Width: 5, Height: 2, Quantity: 16 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n\r\n    static GenerateDataSampleFlatdeck(){\r\n        var containerData = { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 };\r\n        var itemsData = [\r\n            { ID: 1000, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n\t\t    { ID: 1003, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n\t\t    { ID: 1004, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n            { ID: 1005, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n        ];\r\n\r\n        var container = Object.assign(new Container(), containerData);\r\n        var items = toItems(itemsData, ['ID', 'Length', 'Width', 'Height', 'Quantity']);\r\n\r\n        var data = new TestData(container, items);\r\n        return data;\r\n    }\r\n}\r\n\r\nexport default AFitTest;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/afit/AFitTest.js","import { ThisWorkbook, Cells } from \"./Workbook\";\r\n\r\nvar solverSheet = ThisWorkbook.Worksheets('CLP Solver Console');\r\nvar itemsSheet = ThisWorkbook.Worksheets('1.Items');\r\nvar containersSheet = ThisWorkbook.Worksheets('2.Containers');\r\nvar solutionSheet = ThisWorkbook.Worksheets('3.Solution');\r\n\r\nconst noYes = ['No', 'Yes'];\r\nconst sortCriterion = [null, 'Volume', 'Weight', 'MaxDim'];\r\n\r\n/** @type {import('./CLPSolver').SolverOptions} */\r\nconst solverOptions = {\r\n    itemSortCriterion: 1,\r\n    showProgress: false,\r\n    cpuTimeLimit: 3\r\n};\r\n\r\n// First-Fit-Decreasing based on:\r\nsolverSheet.Cells(12, 3, sortCriterion[solverOptions.itemSortCriterion]);\r\n// Show progress on status bar?\r\nsolverSheet.Cells(13, 3, noYes[Number(solverOptions.showProgress)]);\r\n// CPU time limit (seconds)\r\nsolverSheet.Cells(14, 3, solverOptions.cpuTimeLimit);\r\n\r\n// Front side support required?\r\nsolverSheet.Cells(6, 3, noYes[0]);\r\n\r\nfunction packPriority(p){\r\n    switch(p){\r\n        case 1: return 'Must be packed';\r\n        case 0: return 'May be packed';\r\n        case -1: return 'Don\\'t pack';\r\n    }\r\n}\r\nfunction fillPriority(p){\r\n    switch(p){\r\n        case 1: return 'Must be used';\r\n        case 0: return 'May be used';\r\n        case -1: return 'Do not use';\r\n    }\r\n}\r\n\r\nvar containersDataSrc = [\r\n    { ID: 1000, Name: 'Box1', Length: 576, Width: 102, Height: 102 }\r\n];\r\nvar containersData = [];\r\nvar itemsDataSrc = [\r\n    { ID: 1001, Name: 'Item1', Length: 100,  Width: 70, Height: 90, Quantity: 3 },\r\n    { ID: 1002, Name: 'Item4', Length: 60, Width: 60, Height: 60, Quantity: 7 },\r\n    { ID: 1003, Name: 'Item5', Length: 40, Width: 20, Height: 30, Quantity: 4 },\r\n    { ID: 1004, Name: 'Item6', Length: 30,  Width: 20, Height: 30, Quantity: 20 }\r\n];\r\nvar itemsData = [];\r\n\r\nvar numItems = itemsDataSrc.length;\r\n// Number of types of items\r\nsolverSheet.Cells(2, 3, numItems);\r\n\r\nfor(var i = 1; i <= numItems; i++){\r\n    let item = itemsDataSrc[i - 1];\r\n\r\n    let volume = item.Length * item.Width * item.Height;\r\n\r\n    /** @type {import('./CLPSolver').ItemData} */\r\n    let itemData = {\r\n        length: item.Length,\r\n        width: item.Width,\r\n        height: item.Height,\r\n        xyRotatable: true,\r\n        yzRotatable: true,\r\n        mandatory: 1,\r\n        profit: 0,\r\n        weight: volume / 1000,\r\n        quantity: item.Quantity\r\n    };\r\n    itemsData.push(itemData);\r\n    continue;\r\n    // 1 id, 2 name, 4 width, 5 height, 6 length, 7 volume, 9 xy, 10 yz, 11 weight, 12 packPriority = MustBePacked, 13 profit = 0, 14 quantity\r\n\r\n    itemsSheet.Cells(2 + i, 1, i);\r\n    itemsSheet.Cells(2 + i, 2, item.ID);\r\n\r\n    itemsSheet.Cells(2 + i, 4, itemData.width);\r\n    itemsSheet.Cells(2 + i, 5, itemData.height);\r\n    itemsSheet.Cells(2 + i, 6, itemData.length);\r\n    itemsSheet.Cells(2 + i, 7, volume);\r\n\r\n    itemsSheet.Cells(2 + i, 9, noYes[Number(itemData.xyRotatable)]);\r\n    itemsSheet.Cells(2 + i, 10, noYes[Number(itemData.yzRotatable)]);\r\n\r\n    itemsSheet.Cells(2 + i, 11, itemData.weight);\r\n\r\n    itemsSheet.Cells(2 + i, 12, packPriority(itemData.mandatory));\r\n\r\n    itemsSheet.Cells(2 + i, 13, itemData.profit);\r\n    \r\n    itemsSheet.Cells(2 + i, 14, itemData.quantity);\r\n}\r\n\r\nvar numContainers = containersDataSrc.length;\r\n// Number of types of containers\r\nsolverSheet.Cells(4, 3, numContainers);\r\nfor(var i = 1; i <= numContainers; i++){\r\n    let container = containersDataSrc[i - 1];\r\n\r\n    let volume = container.Width * container.Height * container.Length;\r\n\r\n    /** @type {import('./CLPSolver').ContainerData} */\r\n    let containerData = {\r\n        length: container.Length,\r\n        width: container.Width,\r\n        height: container.Height,\r\n        quantity: 1,\r\n        mandatory: 1,\r\n        cost: 0,\r\n        weightCapacity: volume / 1000\r\n    };\r\n    containersData.push(containerData);\r\n    continue;\r\n    // 1 id, 2 name, 3 width, 4 height, 5, length, 6 volume_capacity, 7 weight_capacity, 8 fillPriority = 1, 9 cost = 1, 10 quantity\r\n\r\n    containersSheet.Cells(1 + i, 1, i);\r\n    containersSheet.Cells(1 + i, 2, container.ID);\r\n\r\n    containersSheet.Cells(1 + i, 3, containerData.width);\r\n    containersSheet.Cells(1 + i, 4, containerData.height);\r\n    containersSheet.Cells(1 + i, 5, containerData.length);\r\n    containersSheet.Cells(1 + i, 6, volume);\r\n\r\n    containersSheet.Cells(1 + i, 7, containerData.weightCapacity);\r\n\r\n    containersSheet.Cells(1 + i, 8, fillPriority(containerData.mandatory));\r\n\r\n    containersSheet.Cells(1 + i, 9, containerData.cost);\r\n\r\n    containersSheet.Cells(1 + i, 10, containerData.quantity);\r\n}\r\n\r\nsolutionSheet.Cells(1, 'B').calculate = () => { return Math.abs(solutionSheet.Cells(4, 'J').Value); }; // =+$J$4\r\nsolutionSheet.Cells(4, 'G').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'G'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'G')); }; // =SUM($G$6:$G$39)\r\nsolutionSheet.Cells(4, 'H').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'H'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'H')); }; // =SUM($H$6:$H$39)\r\nsolutionSheet.Cells(4, 'I').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'I'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'I')); }; // =SUM($I$6:$I$39)\r\nsolutionSheet.Cells(4, 'J').calculate = () => { return solutionSheet.Sum(solutionSheet.Cells(6, 'J'), solutionSheet.Cells(6 + solutionSheet.Cells(3, 'B'), 'J')); }; // =SUM($J$6:$J$39)\r\n\r\nfor(var i = 1; i <= 100/*solutionSheet.Cells(3, 'B')*/; i++){\r\n    solutionSheet.Cells(5 + i, 'G').calculate = () => {\r\n        let itemName = solutionSheet.Cells(6, 'B').Value;\r\n        return itemsSheet.Cells(itemsSheet.Find(itemName).row, 1).Value;\r\n    }; // itemIndex\r\n    \r\n    solutionSheet.Cells(5 + i, 'H').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 7).Value }; // volume\r\n    solutionSheet.Cells(5 + i, 'I').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 11).Value }; // weight\r\n    solutionSheet.Cells(5 + i, 'J').calculate = () => { return itemsSheet.Cells(2 + solutionSheet.Cells(5 + i, 'G'), 13).Value }; // profit\r\n}\r\n\r\nconsole.log('CLP setup complete');\r\nconsole.log(ThisWorkbook);\r\n\r\nconst CLPSolver = require('./CLPSolver');\r\n\r\nconst test1Data = {\r\n    solverOptions: solverOptions,\r\n    items: itemsData,\r\n    container: containersData[0]\r\n};\r\n\r\nfunction Test1(){\r\n\r\n    /** @param {CLPSolver.SolutionData} solution */\r\n    function onSolution(solution){\r\n        console.log(solution);\r\n        let packedItems = solution.container.filter(container => container !== null)[0].items;\r\n        console.log(packedItems);\r\n    }\r\n    CLPSolver.signaler.On(CLPSolver.signals.solution, onSolution);\r\n    CLPSolver.Execute(test1Data.solverOptions, test1Data.items, [test1Data.container]);\r\n\r\n}\r\n\r\nexport {\r\n    Test1,\r\n    test1Data\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/clp/CLPTest.js"],"sourceRoot":""}