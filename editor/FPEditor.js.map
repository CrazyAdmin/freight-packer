{"version":3,"sources":["webpack:///webpack/bootstrap ca307e83a3642b64a765","webpack:///./src/api/utils/cik/Logger.js","webpack:///./src/templates/editors/wizard/WizardStep.js","webpack:///./src/templates/ui/Dom.js","webpack:///./src/api/utils/cik/Signaler.js","webpack:///./src/templates/editors/containersEditor/wizard/ContainersEditorWizard.js","webpack:///./src/templates/ui/elements/Draggable.js","webpack:///./src/api/components/common/CargoEntry.js","webpack:///./src/templates/ui/Element.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/api/scene/SceneSetup.js","webpack:///./src/api/utils/cik/input/RaycastGroup.js","webpack:///./src/api/utils/cik/Utils.js","webpack:///./src/api/packer/Packer.js","webpack:///./src/api/packer/CargoList.js","webpack:///./src/api/packer/Cargo.js","webpack:///./src/api/packer/container/Container.js","webpack:///./src/api/packer/container/ContainingVolume.js","webpack:///./src/api/components/box/Dimensions.js","webpack:///./src/templates/editors/wizard/Wizard.js","webpack:///./src/templates/utils/IO.js","webpack:///./src/templates/utils/SurfaceUtils.js","webpack:///./src/main.js","webpack:///./src/FreightPacker.js","webpack:///./src/api/utils/Capabilities.js","webpack:///./src/api/App.js","webpack:///./src/api/utils/cik/input/Input.js","webpack:///./src/api/utils/cik/Quality.js","webpack:///./src/api/scene/Controller.js","webpack:///./src/api/scene/Renderer.js","webpack:///./src/api/scene/Camera.js","webpack:///./src/api/packer/PackingSpace.js","webpack:///./src/api/packer/container/Volume.js","webpack:///./src/api/view/View.js","webpack:///./src/api/view/CargoListView.js","webpack:///./src/api/components/CargoInput.js","webpack:///./src/api/components/box/BoxEntry.js","webpack:///./src/api/components/box/PackingProperty.js","webpack:///./src/api/components/common/TextField.js","webpack:///./src/templates/Editor.js","webpack:///./src/templates/editors/containersEditor/ContainersEditor.js","webpack:///./src/templates/editors/ActiveEditor.js","webpack:///./src/templates/editors/containersEditor/wizard/LoadRefStep.js","webpack:///./src/templates/editors/containersEditor/wizard/ConfigureSpaceStep.js","webpack:///./src/templates/utils/DirectedRect.js","webpack:///./src/templates/utils/Feedback.js","webpack:///./src/templates/ui/elements/WizardAction.js","webpack:///./src/templates/editors/containersEditor/wizard/ExportStep.js","webpack:///./src/templates/editors/wizard/WizardTest.js"],"names":["tracing","standard","warning","messages","Message","type","content","args","forEach","arg","push","json","JSON","parse","stringify","err","Logger","message","_active","AddLog","_toConsole","_traceToConsole","groupCollapsed","console","trace","groupEnd","warn","filter","undefined","output","ToString","value","active","signals","start","complete","WizardStep","key","data","dataPass","Dispatch","Dispose","instance","Dom","element","crel","id","class","appendChild","domElement","Signaler","event","callback","callbacks","index","indexOf","splice","i","len","length","title","ContainersEditorWizard","loadRef","configureSpace","exporter","steps","widths","small","medium","large","Draggable","width","dom","move","xpos","ypos","style","left","top","diffX","diffY","eWi","eHe","cWi","cHe","onMouseMove","evt","window","posX","clientX","posY","clientY","aX","aY","startMoving","p","parentNode","container","document","body","divTop","divLeft","parseInt","height","cursor","replace","addEventListener","stopMoving","removeEventListener","Math","floor","random","domStyle","head","header","onmousedown","onmouseup","scope","close","Close","closeBtn","remove","elt","getComputedStyle","parseFloat","x","y","CargoEntry","properties","descriptions","entry","stopPropagation","e","Element","_domElement","classList","add","opacity","text","attributes","label","_span","_Span","SceneSetup","containerDiv","quality","Common","units","controllerParams","sceneController","cameraParams","fov","aspect","near","far","cameraController","OrbitControls","rendererParams","clearColor","renderSizeMul","Object","assign","sceneRenderer","renderer","UseCamera","camera","input","onResize","ReconfigureViewport","bind","setupParams","fillLights","gridHelper","position","z","SetTarget","THREE","Vector3","DefaultLights","GridHelper","AddDefault","Promise","resolve","reject","Update","timestamp","animationFrameID","requestAnimationFrame","Render","scene","cancelAnimationFrame","params","ambient","AmbientLight","directionalLight","DirectionalLight","set","ambientContainer","RaycastGroup","items","collectionQuery","updateProperty","recursive","enabled","raycastItems","GetRaycastItems","iItem","rItem","Cik","Log","raycaster","intersects","intersectObjects","raycastItemIndex","BubbleUpForIndex","object","child","collection","nestLimit","numCollection","parent","trimVariableRegex","RegExp","twopi","PI","Utils","constructor","classProperties","instanceProperties","prototype","def","defineProperties","getOwnPropertyDescriptors","target","source","keys","obj","marginLeft","marginTop","paddingLeft","paddingTop","str","substring","divisions","da","a","cos","b","sin","nc","ns","t","c","d","color","Color","r","g","Packer","packingSpace","cargoList","cargoAdded","cargoRemoved","CargoList","cargoes","cargo","Cargo","FromEntry","removedCargoes","Container","volumes","ContainingVolume","Dimensions","Set","_vec3","dimensions","toFixed","change","Wizard","current","Link","step","next","Next","On","FindIndex","Start","Load","finalStep","download","filename","pom","createElement","setAttribute","encodeURIComponent","createEvent","initEvent","dispatchEvent","click","IO","FileInfo","file","Filename","name","trailStartIndex","lastIndexOf","trail","slice","extStartIndex","nameOnly","extension","SaveUTF","blob","Blob","hasOwnProperty","saveAs","FileInput","GetFile","binary","onFileChange","files","reader","FileReader","onload","result","readAsArrayBuffer","UploadFile","path","failure","success","response","log","onFile","PHPFileUpload","XHRequest","req","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","responseText","PHPClear","dir","vars","open","setRequestHeader","send","PHPZipExtract","formData","FormData","append","radToDeg","vertexHash","pendingRecursive","SurfaceUtils","geometries","updateMatrixWorld","traverse","Mesh","bg","geometry","applyMatrix","matrixWorld","isBufferGeometry","BufferGeometry","fromGeometry","MergeBufferGeometries","BufferGeometryUtils","mergeBufferGeometries","faces","vLen","vertices","f","maxAngle","face","clamp","out","originFace","count","Array","CreateVertexHash","v","vertexIndex","adjacentFaces","newface","testFace","normal","angleTo","GetCoplanar","Geometry","numFaces","Face3","mergeVertices","computeFaceNormals","computeBoundingSphere","n","normalize","vector","numVertices","clone","global","FreightPacker","defaultOptions","debug","options","AssignUndefined","DevSetup","cargoInput","app","boxInput","webgl","Capabilities","IsWebGLReady","toConsole","traceToConsole","canvas","gl","getContext","WebGLRenderingContext","App","components","packer","sceneSetup","Init","then","view","boxEntry","Trace","Add","Clone","Input","domContainer","defineProperty","get","_camera","min","max","_mouse","mouseScreen","Vector2","mouseViewport","mouseDelta","lastMouseDownTime","screen","ComputeScreen","Raycaster","clock","Clock","_raycastGroups","Update25","Update10","OnMouseDown","OnDoubleClick","OnMouseUp","OnRightClick","OnClick","update","interval","last","fireOnce","onMouseDown","onMouseUp","onRightClick","onDoubleClick","onClick","doubleClickTime","OnMouseMove","thisOnMouseWheel","OnMouseWheel","attachEvent","screenNeedsUpdate","OnScroll","cameraNeedsUpdate","OnResize","keyboard","keypress","Listener","on","simple_combo","unregister","unregister_combo","defaultKeysListen","register_combo","prevent_repeat","on_keydown","on_keyup","getBoundingClientRect","right","bottom","mouseEvent","button","UpdateScreenAndMouse","now","getElapsedTime","_dridMouseDown","AbortDelayedAction","DelayedAction","_mouseDownDelayed","UpdateRaycast","copy","ExecuteDelayedMD","distanceToSquared","noMouseDrag","preventDefault","delta","wheelDelta","detail","lerp","Number","isNaN","updateProjectionMatrix","eventType","iCallback","FireOnce","UpdateRaycaster","iUpdate","LerpZoom","action","delay","drid","setTimeout","clearTimeout","_repeats","setInterval","clearInterval","objects","intersectObject","groupID","group","setFromCamera","raycastGroupsKeys","numRaycastGroups","sort","reverse","iGroup","Raycast","_defaultKeysListen","split","concat","Quality","testCallback","composer","antialias","shadows","Boolean","OnTestComplete","Controller","itemsContainer","Object3D","miscContainer","defaults","Scene","objName","getObjectByName","Renderer","WebGLRenderer","shadowMap","PCFSoftShadowMap","autoUpdate","physicallyCorrectLights","gammaInput","gammaOutput","toneMapping","ReinhardToneMapping","maxTextureSize","context","getParameter","MAX_TEXTURE_SIZE","pixelRatio","devicePixelRatio","setPixelRatio","setClearColor","ResizeRenderer","newWidth","newHeight","setSize","render","UpdateShadowMaps","needsUpdate","ResizeDomElement","UseComposer","dispose","EffectComposer","renderPass","RenderPass","renderToScreen","addPass","renderPasses","Camera","PerspectiveCamera","fpsControls","Navigation","FirstPerson","Hold","Release","speed","speedX","speedY","damping","momentum","limitPhi","moveSpeed","keyControls","controls","orbitControls","lookTarget","getWorldDirection","multiplyScalar","distanceTo","subVectors","maxDistance","maxPolarAngle","autoRotate","LerpRotation","FirstPersonControls","point","quat","Quaternion","applyQuaternion","getWorldQuaternion","rotation","PackingSpace","_current","containers","Volume","View","cargoListView","Display","onCargoAdded","onCargoRemoved","Remove","CargoListView","updated","aborted","completed","CargoInput","Reset","BoxEntry","stacking","translation","TextField","defaultContent","statcking","PackingProperty","property","SupportsStacking","Constraint","RotationConstraint","TranslationConstraint","field","Editor","guiElement","viewElement","GUI","gui","dat","autoPlace","controller","EditContainers","activeEditor","FPEditor","ContainersEditor","wizard","Globals","ActiveEditor","folder","LoadRefStep","elements","getElementById","querySelector","loadBtn","onclick","Import3DModel","modal","FBXLoader","SetRefModel","refGeometry","MergeObject","fromBufferGeometry","MeshStandardMaterial","ref","Complete","surfacePick","dimensionsInput","sidePick","ConfigureSpaceStep","volume","sideAction","PickLoadingSide","inputAction","InputDimensions","surfaceAction","PickSurface","nextBtn","disabled","raycastGroup","intersection","pickSurfaceMode","OnClickPickSurface","AddRaycastGroup","platform","up","horizontalUp","dot","alert","coplanar","gVertices","DirectedRect","FromPoints","ValidatePlatform","center","surfaceGeometry","FromVertices","Normal","verticesNeedUpdate","selectedSurface","matrix","visible","PlatformDimensions","platformDimensions","onChange","sw","sl","sh","scale","Scale","invert","m","Matrix4","makeRotationFromEuler","Euler","applyMatrix4","offset","sub","Feedback","Prompt","DisplayVolume","displayVolume","BoxGeometry","transparent","raycastGroupSide","pickSideMode","OnClickPickSide","faceIndex","side","direction","AxisDirection","setPosition","makeRotationFromQuaternion","setFromAxisAngle","axesHelper","AxesHelper","extent","points","box","Box3","setFromPoints","getCenter","size","getSize","crossVectors","dRect","abs","sign","line","isList","prepend","InfoBar","defaultValue","prompt","confirm","location","reload","buttonStyle","docHandler","registerElement","create","HTMLDivElement","WizardAction","checkbox","checked","ExportStep","exportBtn","Export","NameEntryStep","enterKeyHandler","keyListeners","listener","SomethingStep","spaceKeyHandler","WizardTest","nameEntry","something"],"mappings":"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","file":"FPEditor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ca307e83a3642b64a765","\r\nvar tracing = 0,\r\n    standard = 1,\r\n    warning = 2;\r\n\r\nvar messages = [];\r\n\r\nclass Message {\r\n    constructor(type, ...args){\r\n        this.type = type;\r\n        var content = [];\r\n        args.forEach(arg => {\r\n            if(typeof arg === 'string'){\r\n                content.push(arg);\r\n            }\r\n            else{\r\n                try{\r\n                    var json = JSON.parse(JSON.stringify(arg));\r\n                    content.push(json);\r\n                }\r\n                catch(err){\r\n                    content.push(err);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    ToString(){\r\n\r\n    }\r\n}\r\n\r\nclass Logger {\r\n\r\n    static set active(value){\r\n        this._active = value;\r\n    }\r\n\r\n    static set toConsole(value){\r\n        this._toConsole = value;\r\n    }\r\n\r\n    static set traceToConsole(value){\r\n        this._traceToConsole = value;\r\n    }\r\n\r\n    static AddLog(message){\r\n        messages.push(message);\r\n    }\r\n\r\n    static Trace(...args){\r\n        if(this._active){\r\n            var message = new Message(tracing, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole || this._traceToConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Log(...args){\r\n        if(this._active){\r\n            var message = new Message(standard, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole){\r\n                console.groupCollapsed(...args);\r\n                console.trace('stack');\r\n                console.groupEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    static Warn(...args){\r\n        if(this._active){\r\n            var message = new Message(warning, ...args);\r\n            this.AddLog(message);\r\n            if(this._toConsole) console.warn(...args);\r\n        }\r\n    }\r\n\r\n    static Print(filter){\r\n        if(filter === undefined){\r\n            filter = {};\r\n            filter[tracing] = filter[standard] = filter[warning] = true;\r\n        }\r\n\r\n        var output = 'Log:\\n';\r\n        messages.forEach(message => {\r\n            if(filter[message.type]){\r\n                output += message.ToString() + '\\n';\r\n            }\r\n        });\r\n\r\n        return output;\r\n    }\r\n}\r\n\r\nLogger.active = true;\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Logger.js","import Signaler from \"../../../api/utils/cik/Signaler\";\r\n\r\nconst signals = {\r\n    start: 'start',\r\n    complete: 'complete'\r\n};\r\n\r\nclass WizardStep extends Signaler {\r\n    /**\r\n     * \r\n     * @param {string} key \r\n     * @param {Object} data \r\n     */\r\n    constructor(key, data){\r\n        super();\r\n\r\n        /**\r\n         * @type {string}\r\n         */\r\n        this.key = key;\r\n\r\n        /**\r\n         * @type {Object}\r\n         */\r\n        this.data = data || {};\r\n    }\r\n\r\n    Start(dataPass){\r\n        this.Dispatch(signals.start);\r\n    }\r\n\r\n    Complete(data){\r\n        this.Dispose();\r\n        this.Dispatch(signals.complete, data);\r\n    }\r\n\r\n    Dispose(){\r\n\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default WizardStep;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/wizard/WizardStep.js","\r\n/**\r\n * @type {Dom}\r\n */\r\nvar instance;\r\n\r\nclass Dom {\r\n\r\n    constructor(){\r\n        instance = this;\r\n        this.element = crel('div', {id:'UIDom', class:'UIOrigin UIExpand'});\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} element \r\n     */\r\n    Add(element){\r\n        this.element.appendChild(element.domElement);\r\n    }\r\n\r\n    static get instance(){\r\n        return instance;\r\n    }\r\n}\r\n\r\nexport default Dom;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/ui/Dom.js","\r\nclass Signaler {\r\n    constructor(){\r\n        this.signals = {};\r\n    }\r\n\r\n    On(event, callback){\r\n        if(this.signals[event] === undefined){\r\n            this.signals[event] = [];\r\n        }\r\n        this.signals[event].push(callback);\r\n    }\r\n\r\n    Off(event, callback){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            var index = callbacks.indexOf(callback);\r\n            if(index != -1){\r\n                callbacks.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Dispatch(event, ...args){\r\n        var callbacks = this.signals[event];\r\n        if(callbacks){\r\n            for(var i = 0, len = callbacks.length; i < len; i++){\r\n                callbacks[i](...args);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Signaler;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Signaler.js","import Wizard from \"../../wizard/Wizard\";\r\nimport LoadRefStep from \"./LoadRefStep\";\r\nimport ConfigureSpaceStep from \"./ConfigureSpaceStep\";\r\nimport ExportStep from \"./ExportStep\";\r\n\r\nconst title = 'Containers wizard...';\r\n\r\nclass ContainersEditorWizard extends Wizard {\r\n    constructor(){\r\n        var loadRef = new LoadRefStep();\r\n        var configureSpace = new ConfigureSpaceStep();\r\n        var exporter = new ExportStep();\r\n\r\n        var steps = [\r\n            loadRef,\r\n            configureSpace,\r\n            exporter\r\n        ];\r\n\r\n        super(steps);\r\n    }\r\n\r\n    static get title(){\r\n        return title;\r\n    }\r\n}\r\n\r\nexport default ContainersEditorWizard;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/containersEditor/wizard/ContainersEditorWizard.js","import Element from \"../Element\";\r\n\r\nconst widths = {\r\n    small: 162,\r\n    medium: 242,\r\n    large: 362\r\n};\r\n\r\nclass Draggable extends Element {\r\n    constructor(title, width){\r\n\r\n        super();\r\n\r\n        var dom;\r\n\r\n        var move = function(xpos, ypos){\r\n            dom.style.left = xpos + 'px';\r\n            dom.style.top = ypos + 'px';\r\n        };\r\n\r\n        var diffX = 0,\r\n            diffY = 0;\r\n        var eWi = 0,\r\n            eHe = 0,\r\n            cWi = 0,\r\n            cHe = 0;\r\n\r\n        var onMouseMove = function(evt){\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n                aX = posX - diffX,\r\n                aY = posY - diffY;\r\n                if (aX < 0) aX = 0;\r\n                if (aY < 0) aY = 0;\r\n                if (aX + eWi > cWi) aX = cWi - eWi;\r\n                if (aY + eHe > cHe) aY = cHe -eHe;\r\n            move(aX, aY);\r\n        };\r\n        \r\n        var startMoving = function(evt){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            evt = evt || window.event;\r\n            var posX = evt.clientX,\r\n                posY = evt.clientY,\r\n            divTop = dom.style.top,\r\n            divLeft = dom.style.left;\r\n\r\n            eWi = parseInt(dom.style.width);\r\n            eHe = parseInt(dom.style.height);\r\n            cWi = parseInt(container.style.width);\r\n            cHe = parseInt(container.style.height);\r\n\r\n            container.style.cursor='move';\r\n            divTop = divTop.replace('px','');\r\n            divLeft = divLeft.replace('px','');\r\n            diffX = posX - divLeft;\r\n            diffY = posY - divTop;\r\n            document.addEventListener('mousemove', onMouseMove);\r\n        };\r\n        \r\n        var stopMoving = function(){\r\n            var p = dom.parentNode;\r\n            var container = (p !== undefined && p !== null) ? p : window;\r\n            container = document.body;\r\n            container.style.cursor='default';\r\n            document.removeEventListener('mousemove', onMouseMove);\r\n        };\r\n\r\n        if(width === undefined) width = widths.medium;\r\n        var left = 60 + Math.floor(Math.random() * 160),\r\n            top = 60 + Math.floor(Math.random() * 60);\r\n        var domStyle = 'left:' + left + 'px; top:' + top + 'px; width:' + width + 'px; background-color: rgba(0, 0, 0, .8)';\r\n        dom = crel('div', {class:'UIFitContent UIDraggable', style: domStyle});\r\n        var head = crel('div');\r\n        dom.appendChild(head);\r\n        var header = crel('div', {onmousedown: startMoving, onmouseup: stopMoving, class: 'UIDHeader'}, title);\r\n        \r\n        var scope = this;\r\n        var close = function(){\r\n            scope.Close();\r\n        };\r\n        var closeBtn = crel('button', {onmouseup: close, class:'UIDCloseButton'}, 'Close');\r\n        head.appendChild(closeBtn);\r\n        head.appendChild(header);\r\n\r\n        dom.closeBtn = closeBtn;\r\n\r\n        this.domElement = dom;\r\n        this.closeBtn = closeBtn;\r\n    }\r\n\r\n    Close(){\r\n        this.domElement.remove();\r\n    }\r\n\r\n    Add(elt){\r\n        this.domElement.appendChild(elt);\r\n    }\r\n\r\n    GetPosition(){\r\n        var style = window.getComputedStyle(this.domElement),\r\n            left = parseFloat(style.left),\r\n            top = parseFloat(style.top);\r\n        \r\n        return {x: left, y: top};\r\n    }\r\n\r\n    SetPosition(x, y){\r\n        this.domElement.style.left = x + 'px';\r\n        this.domElement.style.top = y + 'px';\r\n    }\r\n\r\n    static get widths(){\r\n        return widths;\r\n    }\r\n}\r\n\r\nexport default Draggable;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/ui/elements/Draggable.js","class CargoEntry {\r\n    constructor(){\r\n        this.type = 'CargoEntry';\r\n\r\n        this.active = false;\r\n        this.properties = {};\r\n        this.descriptions = [];\r\n    }\r\n\r\n    Clone(entry){\r\n        if( entry === undefined) entry = new CargoEntry();\r\n        entry.active = this.active;\r\n        entry.properties = {};\r\n        entry.descriptions = [];\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        \r\n    }\r\n}\r\n\r\nexport default CargoEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/CargoEntry.js","\r\nfunction stopPropagation(e){\r\n    e.stopPropagation();\r\n}\r\n\r\nclass Element {\r\n\r\n    /**\r\n     * @property {HTMLElement} domElement\r\n     */\r\n\r\n    constructor(){\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this._domElement;\r\n    }\r\n\r\n    set domElement(value){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n        }\r\n\r\n        this._domElement = value;\r\n\r\n        this._domElement.addEventListener('mousedown', stopPropagation);\r\n        this._domElement.addEventListener('mouseup', stopPropagation);\r\n    }\r\n\r\n    get domElement(){\r\n        return this._domElement;\r\n    }\r\n\r\n    Hide(){\r\n        this.domElement.classList.add('UIHideMenu');\r\n    }\r\n    \r\n    Show(){\r\n        this.domElement.classList.remove('UIHideMenu');\r\n    }\r\n\r\n    Remove(){\r\n        if(this._domElement){\r\n            this._domElement.removeEventListener('mousedown', stopPropagation);\r\n            this._domElement.removeEventListener('mouseup', stopPropagation);\r\n\r\n            this._domElement.remove();\r\n            delete this._domElement;\r\n        }\r\n    }\r\n\r\n    get opacity(){\r\n        return parseFloat(this.domElement.style.opacity);\r\n    }\r\n\r\n    set opacity(value){\r\n        this.domElement.style.opacity = value;\r\n    }\r\n\r\n    static _Span(text, attributes){\r\n        return {\r\n            type: 'span',\r\n            label: text, \r\n            attributes: typeof(attributes) === 'string' ? {\r\n                class: attributes\r\n            } : attributes\r\n        };\r\n    }\r\n\r\n    static Span(text, attributes){\r\n        var _span = this._Span(text, attributes);\r\n        return crel(_span.type, _span.attributes, _span.label);\r\n    }\r\n}\r\n\r\nexport default Element;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/ui/Element.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 8\n// module chunks = 0","\r\nimport Input from '../utils/cik/input/Input';\r\nimport Quality from '../utils/cik/Quality';\r\nimport Controller from './Controller';\r\nimport Renderer from './Renderer';\r\nimport Camera from './Camera';\r\n\r\nclass SceneSetup {\r\n    constructor(containerDiv){\r\n        this.domElement = containerDiv;\r\n    }\r\n\r\n    Init(){\r\n        \r\n        var quality = new Quality().Common(2);\r\n\r\n        var units = 1;\r\n        var controllerParams = {units: units};\r\n        this.sceneController = new Controller(controllerParams);\r\n\r\n        var cameraParams = {fov: 65, aspect: 1, near: 0.01 * units, far: 1000 * units, id: 'app'};\r\n        this.cameraController = new Camera(cameraParams);\r\n        this.cameraController.OrbitControls(this.domElement);\r\n\r\n        var rendererParams = {clearColor: 0xafafaf, renderSizeMul: 1};\r\n        Object.assign(rendererParams, quality);\r\n        this.sceneRenderer = new Renderer(rendererParams);\r\n        this.domElement.appendChild(this.sceneRenderer.renderer.domElement);\r\n        this.sceneRenderer.UseCamera(this.cameraController.camera);\r\n\r\n        this.input = new Input(this.domElement);\r\n        this.input.camera = this.cameraController.camera;\r\n        this.input.onResize.push(this.sceneRenderer.ReconfigureViewport.bind(this.sceneRenderer));\r\n\r\n        // Comeplete setup\r\n        var setupParams = {\r\n            fillLights: true,\r\n            gridHelper: true,\r\n\r\n        }\r\n\r\n        // Initial camera move\r\n\t\tthis.cameraController.position.x = 100 * units;\r\n\t\tthis.cameraController.position.y = 40 * units;\r\n        this.cameraController.position.z = -100 * units;\r\n        this.cameraController.SetTarget(new THREE.Vector3());\r\n\r\n        // Fill lights\r\n        if(setupParams.fillLights){\r\n            this.DefaultLights(this.sceneController);\r\n        }\r\n\r\n        // Env\r\n        if(setupParams.gridHelper){\r\n            var gridHelper = new THREE.GridHelper(200 * units, 20);\r\n            this.sceneController.AddDefault(gridHelper);\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            resolve();\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        if(this.Update === undefined){\r\n            var scope = this;\r\n            this.Update = function(timestamp){\r\n                scope.animationFrameID = requestAnimationFrame(scope.Update);\r\n\r\n                scope.input.Update();\r\n                scope.cameraController.Update();\r\n                scope.sceneRenderer.Render(scope.sceneController.scene);\r\n\r\n            };\r\n        }\r\n\r\n        this.Update();\r\n    }\r\n\r\n    Pause(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n    }\r\n\r\n    Stop(){\r\n        if(this.animationFrameID){\r\n            cancelAnimationFrame(this.animationFrameID);\r\n        }\r\n        this.input.Dispose();\r\n        this.sceneRenderer.Dispose();\r\n    }\r\n\r\n    DefaultLights(){\r\n\r\n        var units = this.sceneController.params.units;\r\n\r\n        var ambient = new THREE.AmbientLight( 0x404040 );\r\n\r\n        var directionalLight = new THREE.DirectionalLight(0xfeeedd);\r\n        directionalLight.position.set(7 * units, 15 * units, 30 * units);\r\n        \r\n        this.sceneController.ambientContainer.add(ambient);\r\n        this.sceneController.ambientContainer.add(directionalLight);\r\n    }\r\n}\r\n\r\nexport default SceneSetup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/SceneSetup.js","\r\n/**\r\n * RaycastCallback\r\n * \r\n * @callback RaycastCallback\r\n * @param {Object} obj\r\n * @param {THREE.Intersection} intersection\r\n */\r\n\r\n /**\r\n  * Mapping function\r\n  * \r\n  * @callback RaycastMapping\r\n  * @param {Object} obj\r\n  */\r\n\r\nclass RaycastGroup {\r\n\r\n    /**\r\n     * \r\n     * @param {Array<THREE.Object3D>} items \r\n     * @param {RaycastCallback} callback \r\n     * @param {RaycastMapping} collectionQuery \r\n     * @param {Boolean} updateProperty \r\n     * @param {Boolean} recursive \r\n     */\r\n    constructor (items, callback, collectionQuery, updateProperty, recursive){\r\n        /**\r\n         * @type {Boolean}\r\n         */\r\n        this.enabled = true;\r\n\r\n        this.items = items;\r\n        this.callback = callback;\r\n        this.updateProperty = updateProperty !== undefined ? updateProperty : false;\r\n        this.recursive = recursive !== undefined ? recursive : false;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems = [];\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    GetRaycastItems(collectionQuery){\r\n        for(var iItem = 0; iItem < this.items.length; iItem++){\r\n            var rItem = collectionQuery(this.items[iItem]);\r\n            if(rItem !== undefined){\r\n                this.raycastItems.push(rItem);\r\n            }\r\n            else{\r\n                this.items.splice(iItem, 1);\r\n                Cik.Log('raycastItem is undefined, entry removed from .items array');\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateItems(items, collectionQuery){\r\n        this.items = items;\r\n        if(collectionQuery === undefined) collectionQuery = this.collectionQuery;\r\n\r\n        if(collectionQuery === undefined){\r\n            this.raycastItems = this.items;\r\n        }\r\n        else{\r\n            this.raycastItems.length = 0;\r\n            this.collectionQuery = collectionQuery;\r\n            this.GetRaycastItems(this.collectionQuery);\r\n        }\r\n    }\r\n\r\n    Raycast(raycaster){\r\n        if(this.enabled === false) return;\r\n\r\n        var raycastItems;\r\n        if(this.updateProperty){\r\n            raycastItems = [];\r\n            for(var i = 0; i < this.raycastItems.length; i++) raycastItems[i] = this.collectionQuery(this.items[i]);\r\n        }\r\n        else{\r\n            raycastItems = this.raycastItems;\r\n        }\r\n        // if ( object.visible === false || object.parent === null) return; in THREE.Raycaster.intersectObject()\r\n        var intersects = raycaster.intersectObjects(raycastItems, this.recursive);\r\n        if (intersects.length > 0) {\r\n            if(this.collectionQuery){\r\n                var raycastItemIndex = this.BubbleUpForIndex(intersects[0].object, raycastItems);\r\n                if(raycastItemIndex !== -1) this.callback(this.items[raycastItemIndex], intersects[0]);\r\n            }\r\n            else{\r\n                this.callback(intersects[0].object, intersects[0]);\r\n            }\r\n        }\r\n    }\r\n\r\n    BubbleUpForIndex(child, collection){\r\n        var nestLimit = 100;\r\n        var numCollection = collection.length;\r\n        while(child !== null && nestLimit-- > 0){\r\n            for(var i = 0; i < numCollection; i++) if(collection[i] === child) return i;\r\n            child = child.parent;\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\nexport default RaycastGroup;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/RaycastGroup.js","\r\nconst trimVariableRegex = new RegExp(/(?:\\d|_|-)+$/);\r\nconst twopi = 2 * Math.PI;\r\n\r\nclass Utils {\r\n\r\n    static Redefine(object, constructor){\r\n        var classProperties = object;\r\n        var instanceProperties = object.prototype;\r\n    \r\n        var def = constructor(instanceProperties);\r\n    \r\n        Object.assign(def, classProperties);\r\n        Object.assign(def.prototype, instanceProperties);\r\n        Object.defineProperties(def, Object.getOwnPropertyDescriptors(classProperties));\r\n        Object.defineProperties(def.prototype, Object.getOwnPropertyDescriptors(instanceProperties));\r\n\r\n        return def;\r\n    }\r\n\r\n    static AssignUndefined(target, source){\r\n        if(target === undefined){\r\n            target = {};\r\n            Object.assign(target, source);\r\n            return target;\r\n        }\r\n\r\n        var keys = Object.keys(source);\r\n        keys.forEach(key => {\r\n            if(target[key] === undefined) target[key] = source[key];\r\n        });\r\n        return target;\r\n    }\r\n\r\n    static Snapshot(obj){\r\n        return JSON.parse(JSON.stringify(obj));\r\n    }\r\n\r\n    static GetRectOffset(element){\r\n        var style = window.getComputedStyle(element),\r\n            marginLeft = parseFloat(style.marginLeft),\r\n            marginTop = parseFloat(style.marginTop),\r\n            paddingLeft = parseFloat(style.paddingLeft),\r\n            paddingTop = parseFloat(style.paddingTop);\r\n        return {x: marginLeft + paddingLeft, y: marginTop + paddingTop};\r\n    }\r\n\r\n    static TrimVariable(input){\r\n        return input.replace(trimVariableRegex, '');\r\n    }\r\n\r\n    static LimitString(str, length){\r\n        if(str.length > length) str = str.substring(str.length - length);\r\n        return str;\r\n    }\r\n\r\n    static LoopIndex(i, len){\r\n        i = i % len;\r\n        if(i < 0) i = len + i;\r\n        return i;\r\n    }\r\n\r\n    static FastCircleLoop(divisions, callback){\r\n        // ref: http://iquilezles.org/www/articles/sincos/sincos.htm\r\n        var da = twopi / divisions;\r\n        var a = Math.cos(da);\r\n        var b = Math.sin(da);\r\n        var cos = 1;\r\n        var sin = 0;\r\n        for( var i = 0; i < divisions; i++ )\r\n        {\r\n            var nc = a*cos - b*sin;\r\n            var ns = b*cos + a*sin;\r\n            cos = nc;\r\n            sin = ns;\r\n            callback(cos, sin);\r\n        }\r\n    }\r\n\r\n    static ColorPaletteAsVec3(t, a, b, c, d, color){\r\n        // ref: http://iquilezles.org/www/articles/palettes/palettes.htm\r\n        // return a + b * cos( 6.28318 * ( c * t + d ) );\r\n        color = color || new THREE.Color();\r\n        var r = a.x + b.x * Math.cos( twopi * (c.x * t + d.x) ), \r\n            g = a.y + b.y * Math.cos( twopi * (c.y * t + d.y) ),\r\n            b = a.z + b.z * Math.cos( twopi * (c.z * t + d.z) );\r\n        return color.set(r, g, b);\r\n    }\r\n}\r\n\r\nexport default Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Utils.js","import CargoList from \"./CargoList\";\r\nimport PackingSpace from \"./PackingSpace\";\r\n\r\nclass Packer {\r\n    constructor(){\r\n\r\n        this.packingSpace = new PackingSpace();\r\n        this.cargoList = new CargoList();\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Packer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Packer.js","import Cargo from \"./Cargo\";\r\nimport Signaler from \"../utils/cik/Signaler\";\r\nimport CargoEntry from \"../components/common/CargoEntry\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nconst signals = {\r\n    cargoAdded: 'cargoAdded',\r\n    cargoRemoved: 'cargoRemoved'\r\n};\r\n\r\nclass CargoList extends Signaler{\r\n    constructor(){\r\n        super();\r\n\r\n        this.cargoes = [];\r\n    }\r\n\r\n    Add(entry){\r\n        var cargo;\r\n        if(entry instanceof CargoEntry){\r\n            cargo = Cargo.FromEntry(entry);\r\n        }\r\n        else{\r\n            cargo = entry;\r\n            Logger.Log(entry, 'used as Cargo');\r\n        }\r\n\r\n        this.cargoes.push(cargo);\r\n        this.Dispatch(signals.cargoAdded, cargo);\r\n    }\r\n\r\n    Remove(cargo){\r\n        var index = this.cargoes.indexOf(cargo);\r\n        if(index != -1){\r\n            var removedCargoes = this.cargoes.splice(index, 1);\r\n            this.Dispatch(signals.cargoRemoved, removedCargoes[0]);\r\n        }\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n}\r\n\r\nexport default CargoList;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/CargoList.js","import CargoEntry from \"../components/common/CargoEntry\";\r\n\r\nclass Cargo {\r\n    /**\r\n     * \r\n     * @param {CargoEntry} entry\r\n     */\r\n    constructor(entry){\r\n        this.entry = entry;\r\n    }\r\n\r\n    ToString(){\r\n        var output = 'Cargo(' + this.entry.ToString() + ')';\r\n\r\n        return output;\r\n    }\r\n\r\n    static FromEntry(entry){\r\n        return new Cargo(entry);\r\n    }\r\n}\r\n\r\nexport default Cargo;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/Cargo.js","import ContainingVolume from \"./ContainingVolume\";\r\n\r\nclass Container {\r\n    constructor(){\r\n        /**\r\n         * Containing volumes array\r\n         * @type {Array<ContainingVolume>}\r\n         */\r\n        this.volumes = [];\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: 'Container',\r\n            volumes: this.volumes\r\n        };\r\n    }\r\n\r\n    get volume(){\r\n        var index = this.volumes.length - 1;\r\n        return this.volumes[index];\r\n    }\r\n}\r\n\r\nexport default Container;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Container.js","import Volume from \"./Volume\";\r\n\r\nclass ContainingVolume extends Volume {\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    toJSON(){\r\n        var json = super.toJSON();\r\n        json.type = 'ContainingVolume';\r\n        return json;\r\n    }\r\n}\r\n\r\nexport default ContainingVolume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/ContainingVolume.js","class Dimensions {\r\n    constructor(width, length, height){\r\n        if(width === undefined) width = 0;\r\n        if(length === undefined) length = 0;\r\n        if(height === undefined) height = 0;\r\n        \r\n        this.Set(width, length, height);\r\n        this._vec3 = new THREE.Vector3();\r\n    }\r\n\r\n    Set(width, length, height){\r\n        this.width = width;\r\n        this.length = length;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Returns a THREE.Vector3 representation of the dimensions\r\n     * Beware of ordering: y=height, z=length and x=width\r\n     */\r\n    get vec3(){\r\n        return this._vec3.set(this.width, this.height, this.length);\r\n    }\r\n\r\n    get volume(){\r\n        return this.width * this.height * this.length;\r\n    }\r\n\r\n    Clone(){\r\n        var dimensions = new Dimensions(this.width, this.length, this.height);\r\n        return dimensions;\r\n    }\r\n\r\n    ToString(){\r\n        return this.width.toFixed(2) + 'x' + this.length.toFixed(2) + 'x' + this.height.toFixed(2);\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: 'Dimensions',\r\n            width: this.width,\r\n            length: this.length,\r\n            height: this.height\r\n        };\r\n    }\r\n}\r\n\r\nexport default Dimensions;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/Dimensions.js","\r\nimport Signaler from '../../../api/utils/cik/Signaler';\r\nimport WizardStep from './WizardStep';\r\n\r\nconst signals = {\r\n    change: 'change',\r\n    complete: 'complete'\r\n};\r\n\r\nclass Wizard extends Signaler {\r\n    /**\r\n     * \r\n     * @param {Array<WizardStep>} steps \r\n     */\r\n    constructor(steps){\r\n        super();\r\n\r\n        this.current = -1;\r\n        this.steps = steps;\r\n\r\n        this.Link(...this.steps);\r\n    }\r\n\r\n    Globals(data){\r\n        this.steps.forEach(step => {\r\n            Object.assign(step.data, data);\r\n        });\r\n    }\r\n\r\n    Link(...steps){\r\n        var next = this.Next.bind(this);\r\n        steps.forEach(step => {\r\n            step.On(WizardStep.signals.complete, next);\r\n        });\r\n    }\r\n\r\n    FindIndex(key){\r\n        for(var i = 0, len = this.steps.length; i < len; i++){\r\n            let step = this.steps[i];\r\n            if(step.key === key)\r\n                return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    Load(index, dataPass){\r\n        if(this.current !== -1 && this.steps[this.current]){\r\n            this.steps[this.current].Dispose();\r\n        }\r\n\r\n        if(typeof index === 'string') index = this.FindIndex(index);\r\n\r\n        this.current = index;\r\n        this.steps[this.current].Start(dataPass);\r\n\r\n        this.Dispatch(signals.change, this.steps[this.current]);\r\n    }\r\n\r\n    Start(){\r\n        this.Load(0);\r\n    }\r\n\r\n    Next(dataPass){\r\n\r\n        var next = this.current + 1;\r\n\r\n        if(next === this.steps.length){\r\n            if(this.steps[this.current]){\r\n                this.steps[this.current].Dispose();\r\n            }\r\n\r\n            let finalStep = this.steps[this.current];\r\n            this.current++;\r\n            this.Dispatch(signals.complete, finalStep);\r\n            return;\r\n        }\r\n\r\n        this.Load(next, dataPass);\r\n\r\n    }\r\n\r\n    static get signals(){\r\n        return signals;\r\n    }\r\n\r\n}\r\n\r\nexport default Wizard;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/wizard/Wizard.js","\r\n// require FileSaver.js\r\n\r\nfunction download(filename, text) {\r\n    var pom = document.createElement('a');\r\n    pom.setAttribute('href', 'data:application/json;charset=utf-8,' + encodeURIComponent(text));\r\n    pom.setAttribute('download', filename);\r\n\r\n    if (document.createEvent) {\r\n        var event = document.createEvent('MouseEvents');\r\n        event.initEvent('click', true, true);\r\n        pom.dispatchEvent(event);\r\n    }\r\n    else {\r\n        pom.click();\r\n    }\r\n}\r\n\r\nconst IO = {\r\n\r\n    FileInfo: function(file){\r\n        return this.Filename(file.name);\r\n    },\r\n\r\n    Filename: function(name){\r\n        var trailStartIndex = name.lastIndexOf('/');\r\n        var trail = name.slice(trailStartIndex + 1);\r\n\r\n        var extStartIndex = trail.lastIndexOf('.');\r\n        var nameOnly = trail.slice(0, extStartIndex);\r\n        var extension = trail.slice(extStartIndex + 1);\r\n\r\n        return {\r\n            name: nameOnly,\r\n            extension: extension\r\n        }\r\n    },\r\n\r\n    SaveUTF: function(text, filename){\r\n        download(filename, text);\r\n    },\r\n    \r\n    JSON: function(object, filename){\r\n        var blob = new Blob([JSON.stringify(object)], {type: 'text/plain;charset=utf-8'});\r\n        if(filename === undefined && object.hasOwnProperty('name')) filename = object.name + '.json';\r\n        saveAs(blob, filename);\r\n    },\r\n\r\n    FileInput: crel('input', {type:'file', style:'display: none'}),\r\n\r\n    GetFile: function(callback, binary){\r\n        var onFileChange = function(){\r\n            var file = this.files.length > 0 ? this.files[0] : undefined;\r\n            if(file !== undefined){\r\n                if(binary){\r\n                    var reader = new FileReader();\r\n                    reader.onload = function(e) {\r\n                        callback(e.target.result);\r\n                    };\r\n                    reader.readAsArrayBuffer(file);\r\n                }\r\n                else{\r\n                    callback(file);\r\n                }\r\n            }\r\n            IO.FileInput.removeEventListener('change', onFileChange);\r\n            IO.FileInput = crel('input', {type:'file', style:'display: none'});\r\n        };\r\n        IO.FileInput.addEventListener('change', onFileChange, false);\r\n        IO.FileInput.click();\r\n    },\r\n\r\n    UploadFile: function(path, callback, failure){\r\n        var filename;\r\n        var success = function(response){\r\n            callback(filename);\r\n        };\r\n        var failure = failure || function(response){\r\n            console.log('Filename:', filename, ' - Failed to upload\\n', response);\r\n        };\r\n        var onFile = function(file){\r\n            filename = file.name;\r\n            IO.PHPFileUpload(file, path, success, failure);\r\n        };\r\n        IO.GetFile(onFile);\r\n    },\r\n\r\n    XHRequest: function(success, failure){\r\n        var req = false;\r\n        try\r\n        {\r\n            // most browsers\r\n            req = new XMLHttpRequest();\r\n        }\r\n        catch (e)\r\n        {\r\n            // IE\r\n            try\r\n            {\r\n                req = new ActiveXObject('Msxml2.XMLHTTP');\r\n            }\r\n            catch(e)\r\n            {\r\n                // try an older version\r\n                try\r\n                {\r\n                    req = new ActiveXObject('Microsoft.XMLHTTP');\r\n                }\r\n                catch(e)\r\n                {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        if (!req) return false;\r\n        if (typeof success != 'function') success = function () {};\r\n        if (typeof failure != 'function') failure = function () {};\r\n        req.onreadystatechange = function()\r\n        {\r\n            if(req.readyState == 4)\r\n            {\r\n                return req.status === 200 ?\r\n                    success(req.responseText) : failure(req.status);\r\n            }\r\n        };\r\n        return req;\r\n    },\r\n\r\n    PHPClear: function(dir, success, failure){\r\n        var vars = 'dir=' + encodeURIComponent(dir);\r\n\r\n        var req = this.XHRequest(success, failure);\r\n        req.open('POST', 'php/Clear.php', true);\r\n        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n        req.send(vars);\r\n        return req;\r\n    },\r\n\r\n    PHPZipExtract: function(file, path, success, failure){\r\n        var formData = new FormData();\r\n        formData.append('path', path);\r\n        formData.append('zip_file', file);\r\n\r\n        var req = this.XHRequest(success, failure);\r\n        req.open('POST', 'php/Zipper.php', true);\r\n        req.send(formData);\r\n        return req;\r\n    },\r\n\r\n    PHPFileUpload: function(file, path, success, failure){\r\n        var formData = new FormData();\r\n        formData.append(\"path\", path);\r\n        formData.append(\"file\", file);\r\n\r\n        var req = this.XHRequest(success, failure);\r\n        req.open(\"POST\", \"php/FileUploader.php\", true);\r\n        req.setRequestHeader(\"enctype\", \"multipart/form-data\");\r\n        req.send(formData);\r\n        return req;\r\n    }\r\n};\r\n\r\nexport default IO;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/utils/IO.js","\r\nconst radToDeg = 180.0 / Math.PI;\r\nvar vertexHash, pendingRecursive = 0;\r\nvar result;\r\n\r\nclass SurfaceUtils {\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Object3D} object \r\n     * @returns {THREE.BufferGeometry}\r\n     */\r\n    static MergeObject(object){\r\n        var geometries = [];\r\n        \r\n        object.updateMatrixWorld(true);\r\n        object.traverse(function(child){\r\n            if(child instanceof THREE.Mesh){\r\n                var bg = child.geometry;\r\n                bg.applyMatrix(child.matrixWorld);\r\n                if(bg.isBufferGeometry === false) bg = new THREE.BufferGeometry().fromGeometry(bg);\r\n                geometries.push(bg); \r\n            }\r\n        });\r\n\r\n        if(geometries.length === 1)\r\n            return geometries[0];\r\n        \r\n        return SurfaceUtils.MergeBufferGeometries(geometries);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Array<THREE.BufferGeometry>} geometries \r\n     * @returns {THREE.BufferGeometry}\r\n     */\r\n    static MergeBufferGeometries(geometries){\r\n        var bg = THREE.BufferGeometryUtils.mergeBufferGeometries(geometries);\r\n        return bg;\r\n    }\r\n\r\n    static CreateVertexHash(geometry){\r\n        var vertexHash = [];\r\n        var faces = geometry.faces;\r\n        var vLen = geometry.vertices.length;\r\n        for(var i = 0; i < vLen; i++){\r\n            vertexHash[i] = [];\r\n            for(var f in faces){\r\n               if(faces[f].a == i || faces[f].b == i || faces[f].c == i){\r\n                    vertexHash[i].push(faces[f]);\r\n                }\r\n            }\r\n        }\r\n        return vertexHash;\r\n    }\r\n\r\n    static GetCoplanar(maxAngle, geometry, face, clamp, out, originFace){\r\n        // Original by (https://stackoverflow.com/users/3311552/radio): http://jsfiddle.net/ta0g3mLc/10/\r\n\r\n        if(clamp === undefined) clamp = true;\r\n        if(originFace === undefined) originFace = face;\r\n        \r\n        result = out;\r\n        if(out === undefined) result = { count:0 };\r\n\r\n        if(vertexHash === undefined){\r\n            if(geometry instanceof Array) vertexHash = geometry;\r\n            else vertexHash = SurfaceUtils.CreateVertexHash(geometry);\r\n        }\r\n\r\n        pendingRecursive++;\r\n\r\n        var vertices = ['a', 'b', 'c'];\r\n        for(var v in vertices){\r\n            \r\n            var vertexIndex = face[vertices[v]];\r\n            var adjacentFaces = vertexHash[vertexIndex];\r\n\r\n            for(var a in adjacentFaces){\r\n                var newface = adjacentFaces[a];\r\n                var testFace = originFace;\r\n                if(clamp == false) testFace = face;\r\n\r\n                if(testFace.normal.angleTo(newface.normal) * radToDeg <= maxAngle){\r\n                    var key = newface.a + ',' + newface.b + ',' + newface.c;\r\n                    if(result[key] === undefined){\r\n                        result[key] = newface;\r\n                        result.count++;\r\n                        SurfaceUtils.GetCoplanar(maxAngle, geometry, newface, clamp, result, originFace);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        pendingRecursive--;\r\n      \r\n        if(pendingRecursive === 0){\r\n            // reset\r\n            vertexHash = undefined;\r\n            pendingRecursive = 0;\r\n\r\n            // output\r\n            delete result.count;\r\n            return result;\r\n        }\r\n    }\r\n\r\n    static FromVertices(vertices){\r\n        var geometry = new THREE.Geometry();\r\n        geometry.vertices = vertices;\r\n\r\n        for(var f = 0, numFaces = vertices.length / 3; f < numFaces; f++){\r\n            var v = f * 3;\r\n            geometry.faces.push(new THREE.Face3(v, v + 1, v + 2));\r\n        }\r\n        \r\n        geometry.mergeVertices();\r\n        geometry.computeFaceNormals();\r\n        geometry.computeBoundingSphere();\r\n        return geometry;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Geometry} geometry \r\n     * @param {THREE.Vector3} [normal]\r\n     */\r\n    static Normal(geometry, normal){\r\n        normal = normal || new THREE.Vector3();\r\n        for(var f in geometry.faces){\r\n            var n = geometry.faces[f].normal;\r\n            normal.add(n);\r\n        }\r\n        normal.normalize();\r\n        return normal;\r\n    }\r\n\r\n    static Add(vertices, vector){\r\n        var numVertices = vertices.length;\r\n        for(var v = 0; v < numVertices; v++){\r\n            vertices[v].add(vector);\r\n        }\r\n\r\n        return vertices;\r\n    }\r\n\r\n    static Clone(source){\r\n        if(source instanceof Array){\r\n            let length = source.length;\r\n            if(length === 0) return [];\r\n            if(source[0] instanceof THREE.Vector3){\r\n                let result = [];\r\n                for(let v = 0; v < length; v++){\r\n                    result[v] = source[v].clone();\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n\r\nexport default SurfaceUtils;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/utils/SurfaceUtils.js","import FreightPacker from './FreightPacker';\r\nglobal.FreightPacker = FreightPacker;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Capabilities from './api/utils/Capabilities';\r\nimport App from './api/App';\r\nimport CargoInput from './api/components/CargoInput';\r\nimport Logger from './api/utils/cik/Logger';\r\nimport Utils from './api/utils/cik/Utils';\r\n\r\nconst defaultOptions = {\r\n\tdebug: false\r\n};\r\n\r\nclass FreightPacker {\r\n\t/**\r\n\t * Constructor\r\n\t * @param {HTMLElement} containerDiv\r\n\t * @param {Object} options\r\n\t */\r\n\tconstructor( containerDiv, options ) {\r\n\r\n\t\tthis.options = Utils.AssignUndefined(options, defaultOptions);\r\n\t\tFreightPacker.DevSetup(this.options);\r\n\r\n\t\t/**\r\n\t\t * Handles input of: description fields (label, etc.), dimensions and constraints\r\n\t\t * @type {CargoInput}\r\n\t\t */\r\n\t\tthis.cargoInput = new CargoInput();\r\n\r\n\t\tthis.app = new App(containerDiv, {\r\n\t\t\tboxInput: this.cargoInput\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Will resolve if requirements are met, otherwise rejects with an error message\r\n\t * @return {Promise<Void>|Promise<string>} \r\n\t */\r\n\tstatic CheckRequirements () {\r\n\t\tvar webgl = Capabilities.IsWebGLReady();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(webgl){\r\n\t\t\t\tresolve();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvar message = 'WebGL not supported.';\r\n\t\t\t\treject(message);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstatic DevSetup(options){\r\n\t\tif(options.debug) {\r\n\t\t\tLogger.active = true;\r\n\t\t\tLogger.toConsole = true;\r\n\t\t\tLogger.traceToConsole = true;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\nexport default FreightPacker;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FreightPacker.js","\r\nclass Capabilities {\r\n    constructor() {\r\n      \r\n    }\r\n  \r\n    static IsWebGLReady(){\r\n        var canvas = document.createElement('canvas');\r\n        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\r\n        return gl && gl instanceof WebGLRenderingContext;\r\n    }\r\n}\r\n\r\nexport default Capabilities;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/Capabilities.js","\r\nimport SceneSetup from './scene/SceneSetup';\r\nimport Logger from './utils/cik/Logger';\r\nimport Packer from './packer/Packer';\r\nimport View from './view/View';\r\n\r\nclass App {\r\n    constructor(containerDiv, components) {\r\n        \r\n        this.components = components;\r\n\r\n        this.packer = new Packer();\r\n\r\n        this.sceneSetup = new SceneSetup(containerDiv);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n    }\r\n\r\n    Start(){\r\n        var packer = this.packer;\r\n        this.view = new View(packer, this.sceneSetup);\r\n        this.sceneSetup.Start();\r\n\r\n        this.components.boxInput.On('completed', function(boxEntry){\r\n            Logger.Trace('insert box');\r\n            packer.cargoList.Add(boxEntry.Clone());\r\n        });\r\n    }\r\n  \r\n}\r\n\r\nexport default App;\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/api/App.js","\r\nimport RaycastGroup from './RaycastGroup';\r\nimport Utils from '../Utils';\r\n\r\nclass Input {\r\n\r\n    /**\r\n     * \r\n     * @param {HTMLElement} domContainer \r\n     */\r\n    constructor (domContainer){\r\n        this.enabled = true;\r\n        \r\n        var scope = this;\r\n        Object.defineProperty(this, 'camera', {\r\n            get: function(){\r\n                return scope._camera;\r\n            },\r\n            set: function(camera){\r\n                scope._camera = camera;\r\n                scope.fov = {min: 40, max: camera.fov, target: camera.fov};\r\n            }\r\n        });\r\n\r\n        this.domContainer = domContainer;\r\n\r\n        this._mouse = {x:0, y:0};\r\n        this.mouseScreen = new THREE.Vector2();\r\n        this.mouseViewport = new THREE.Vector2();\r\n        this.mouseDelta = new THREE.Vector2();\r\n        this.lastMouseDownTime = 0;\r\n        this.screen = {};\r\n        this.ComputeScreen();\r\n\r\n        this.raycaster = new THREE.Raycaster();\r\n\r\n        this.clock = new THREE.Clock();\r\n        this.clock.start();\r\n\r\n        this._raycastGroups = {Update:{}, Update25:{}, Update10:{}, OnMouseDown:{}, OnDoubleClick:{}, OnMouseUp:{}, OnRightClick:{}, OnClick:{}};\r\n        this.update = [\r\n            {interval:(1/25), last:0, callback: this.Update25.bind(this)},\r\n            {interval:(1/10), last:0, callback: this.Update10.bind(this)}\r\n        ];\r\n\r\n        this.fireOnce = [];\r\n\r\n        this.onMouseDown = [];\r\n        this.onMouseUp = [];\r\n        this.onRightClick = [];\r\n        this.onDoubleClick = [];\r\n        this.onClick = [];\r\n\r\n        this.doubleClickTime = .2;\r\n        \r\n        this.domContainer.addEventListener('mousedown', this.OnMouseDown.bind(this));\r\n        this.domContainer.addEventListener('mouseup', this.OnMouseUp.bind(this));\r\n        this.domContainer.addEventListener('contextmenu', this.OnRightClick.bind(this));\r\n        this.domContainer.addEventListener('mousemove', this.OnMouseMove.bind(this), false);\r\n\r\n        var thisOnMouseWheel = this.OnMouseWheel.bind(this);\r\n        if (this.domContainer.addEventListener) {\r\n            this.domContainer.addEventListener(\"mousewheel\", thisOnMouseWheel, false);\r\n            this.domContainer.addEventListener(\"DOMMouseScroll\", thisOnMouseWheel, false);\r\n        }\r\n        else\r\n            this.domContainer.attachEvent(\"onmousewheel\", thisOnMouseWheel);\r\n\r\n        this.screenNeedsUpdate = true;\r\n        window.addEventListener('scroll', this.OnScroll.bind(this));\r\n\r\n        this.cameraNeedsUpdate = true;\r\n        this.onResize = [];\r\n        window.addEventListener('resize', this.OnResize.bind(this));\r\n\r\n        this.keyboard = new window.keypress.Listener();\r\n        this.keyboard.on = this.keyboard.simple_combo;\r\n        this.keyboard.unregister = this.keyboard.unregister_combo;\r\n        this.keys = {};\r\n\r\n        //\r\n        \r\n    }\r\n\r\n    Dispose(){\r\n        // remove listeners\r\n    }\r\n\r\n    static get defaultKeysListen(){\r\n        if(Input._defaultKeysListen === undefined){\r\n            Input._defaultKeysListen = 'abcdefghijklmnopqrtsuvwxyz'.split('').concat(['ctlr', 'shift', 'alt']);\r\n        }\r\n        return Input._defaultKeysListen;\r\n    }\r\n\r\n    ListenKeys(keys){\r\n        if(keys === undefined) {\r\n            keys = this.defaultKeysListen;\r\n        }\r\n        else{\r\n            /*this.defaultKeysListen.forEach(key => {\r\n                if(keys.indexOf(key) === -1) keys.push(key);\r\n            });*/\r\n        }\r\n\r\n        var scope = this;\r\n        keys.forEach(key => {\r\n            scope.keys[key] = false;\r\n            scope.keyboard.register_combo({\r\n                keys: key,\r\n                prevent_repeat: true,\r\n                on_keydown: function(){\r\n                    scope.keys[key] = true;\r\n                },\r\n                on_keyup: function(){\r\n                    scope.keys[key] = false;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    ComputeScreen(){\r\n        var screen = this.domContainer.getBoundingClientRect();\r\n        this.screen.x = screen.x;\r\n        this.screen.y = screen.y;\r\n        this.screen.width = screen.width;\r\n        this.screen.height = screen.height;\r\n        this.screen.left = screen.left;\r\n        this.screen.right = screen.right;\r\n        this.screen.bottom = screen.bottom;\r\n        this.screen.top = screen.top;\r\n        \r\n        /*\r\n        var rectOffset = Utils.GetRectOffset(this.domContainer);\r\n        this.screen.x += rectOffset.x;\r\n        this.screen.left += rectOffset.x;\r\n        this.screen.y += rectOffset.y;\r\n        this.screen.top += rectOffset.y;\r\n        */\r\n    }\r\n\r\n    OnMouseDown(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                if(this._dridMouseDown !== undefined){\r\n                    this.AbortDelayedAction(this._dridMouseDown);\r\n                    this._dridMouseDown = undefined;\r\n                }\r\n                this.OnDoubleClick(mouseEvent);\r\n                return;\r\n            }\r\n\r\n            this.lastMouseDownTime = now;\r\n\r\n            var scope = this;\r\n            this._dridMouseDown = this.DelayedAction(\r\n                this._mouseDownDelayed = function(){\r\n                    scope._dridMouseDown = undefined;\r\n                    for(var i = 0; i < scope.onMouseDown.length; i++){\r\n                        scope.onMouseDown[i](mouseEvent);\r\n                    }\r\n                    scope.UpdateRaycast('OnMouseDown');\r\n                    scope.mouseDelta.copy(scope.mouseScreen);\r\n                }, \r\n                this.doubleClickTime * 1000\r\n            );\r\n        }\r\n    }\r\n\r\n    OnDoubleClick(mouseEvent){\r\n        for(var i = 0; i < this.onDoubleClick.length; i++){\r\n            this.onDoubleClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnDoubleClick');\r\n    }\r\n\r\n    ExecuteDelayedMD(mouseEvent){\r\n        if(this._dridMouseDown !== undefined){\r\n            this.AbortDelayedAction(this._dridMouseDown);\r\n            this._dridMouseDown = undefined;\r\n            this._mouseDownDelayed();\r\n        }\r\n    }\r\n\r\n    OnMouseUp(mouseEvent){\r\n        if(mouseEvent.button === 0){\r\n            var now = this.clock.getElapsedTime();\r\n            if(now - this.lastMouseDownTime < this.doubleClickTime){\r\n                this.ExecuteDelayedMD(mouseEvent);\r\n            }\r\n            \r\n            this.UpdateScreenAndMouse(mouseEvent);\r\n            for(var i = 0; i < this.onMouseUp.length; i++){\r\n                this.onMouseUp[i](mouseEvent);\r\n            }\r\n\r\n            this.UpdateRaycast('OnMouseUp');\r\n            var d = this.mouseDelta.distanceToSquared(this.mouseScreen);\r\n            var noMouseDrag = d < 10; // pixels squared\r\n            if(noMouseDrag){\r\n                this.OnClick(mouseEvent);\r\n            }\r\n        }\r\n    }\r\n\r\n    OnClick(mouseEvent){\r\n        for(var i = 0; i < this.onClick.length; i++){\r\n            this.onClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnClick');\r\n    }\r\n\r\n    OnRightClick(mouseEvent){\r\n        //mouseEvent.preventDefault();\r\n        this.UpdateScreenAndMouse(mouseEvent);\r\n        for(var i = 0; i < this.onRightClick.length; i++){\r\n            this.onRightClick[i](mouseEvent);\r\n        }\r\n\r\n        this.UpdateRaycast('OnRightClick');\r\n    }\r\n\r\n    OnMouseMove(mouseEvent){\r\n        this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n        this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        this.ExecuteDelayedMD(mouseEvent);\r\n    }\r\n\r\n    OnScroll(event){\r\n        this.screenNeedsUpdate = true;\r\n    }\r\n\r\n    OnMouseWheel(mouseEvent){\r\n        mouseEvent.preventDefault();\r\n        var delta = THREE.Math.clamp(mouseEvent.wheelDelta || -mouseEvent.detail, -1, 1);\r\n        this.fov.target = THREE.Math.clamp(this.fov.target - delta * 2., this.fov.min, this.fov.max);\r\n        this.fov.lerp = 0;\r\n    }\r\n\r\n    LerpZoom(){\r\n        this.fov.lerp += .1;\r\n        if(this.fov.lerp >= 1 || Number.isNaN(this.fov.lerp)){\r\n            return;\r\n        }\r\n        this.camera.fov += (this.fov.target - this.camera.fov) * this.fov.lerp;\r\n        this.camera.updateProjectionMatrix();\r\n    }\r\n\r\n    OnResize(event) {\r\n        this.screenNeedsUpdate = true;\r\n        this.cameraNeedsUpdate = true;\r\n    }\r\n\r\n    RemoveEventCallback(eventType, callback){\r\n        var callbacks = this[eventType];\r\n        for(var iCallback = 0; iCallback < callbacks.length; iCallback++){\r\n            if(callbacks[iCallback] === callback){\r\n                callbacks.splice(iCallback, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        this.UpdateScreenAndMouse();\r\n\r\n        this.FireOnce();\r\n\r\n        // Raycasts\r\n        this.UpdateRaycaster();\r\n        this.UpdateRaycast('Update');\r\n\r\n        var now = this.clock.getElapsedTime();\r\n        for(var iUpdate = 0; iUpdate < this.update.length; iUpdate++){\r\n            var update = this.update[iUpdate];\r\n            if(update.callback === undefined){\r\n                update();\r\n            }\r\n            else if(now - update.last > update.interval){\r\n                update.callback();\r\n                update.last = now;\r\n            }\r\n        }\r\n    }\r\n\r\n    Update25(){\r\n        this.LerpZoom();\r\n        this.UpdateRaycast('Update25');\r\n    }\r\n\r\n    Update10(){\r\n        this.UpdateRaycast('Update10');\r\n    }\r\n\r\n    FireOnce(){\r\n        for(var iCallback = this.fireOnce.length; iCallback-- > 0;){\r\n            this.fireOnce[iCallback]();\r\n        }\r\n        this.fireOnce.length = 0;\r\n    }\r\n\r\n    DelayedAction(action, delay){\r\n        var drid = window.setTimeout(function(){\r\n            action();\r\n        }, delay);\r\n        return drid;\r\n    }\r\n\r\n    AbortDelayedAction(drid){\r\n        window.clearTimeout(drid);\r\n        return;\r\n    }\r\n\r\n    Repeat(action, interval){\r\n        if(this._repeats === undefined) this._repeats = [];\r\n        var drid = window.setInterval(function(){\r\n            action();\r\n        }, interval);\r\n        this._repeats.push({action:action, drid:drid});\r\n        return drid;\r\n    }\r\n\r\n    StopRepeat(action){\r\n        if(this._repeats === undefined) return;\r\n        if(typeof action === 'number'){\r\n            window.clearInterval(action);\r\n            return;\r\n        }\r\n        for(var i = 0; i < this._repeats.length; i++){\r\n            if(this._repeats[i].action === action){\r\n                window.clearInterval(this._repeats[i].drid);\r\n                this._repeats.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    UpdateScreenAndMouse(mouseEvent){\r\n        if(this.screenNeedsUpdate) {\r\n            this.ComputeScreen();\r\n            this.screenNeedsUpdate = false;\r\n        }\r\n        if(this.cameraNeedsUpdate) {\r\n            for(var i = 0; i < this.onResize.length; i++){\r\n                this.onResize[i](this.screen);\r\n            }\r\n            this.cameraNeedsUpdate = false;\r\n        }\r\n\r\n        if(mouseEvent !== undefined){\r\n            this._mouse.x = THREE.Math.clamp(mouseEvent.clientX - this.screen.left, 0, this.screen.width);\r\n            this._mouse.y = THREE.Math.clamp(mouseEvent.clientY - this.screen.top, 0, this.screen.height);\r\n        }\r\n\r\n        this.mouseScreen.x = this._mouse.x;\r\n        this.mouseScreen.y = this._mouse.y;\r\n\r\n        this.mouseViewport.x = this._mouse.x / this.screen.width * 2 - 1;\r\n        this.mouseViewport.y = -this._mouse.y / this.screen.height * 2 + 1;\r\n    }\r\n\r\n    RaycastTest(objects, recursive){\r\n        this.UpdateRaycaster();\r\n        recursive = recursive !== undefined ? recursive : false;\r\n        var intersects = objects instanceof Array ? this.raycaster.intersectObjects(objects, recursive) : this.raycaster.intersectObject(objects, recursive);\r\n        if (intersects.length > 0) {\r\n            return intersects[0];\r\n        }\r\n        return undefined;\r\n    }\r\n\r\n    AddRaycastGroup(event, groupID, group){\r\n        if(this._raycastGroups[event][groupID] !== undefined) console.log('RaycastGroup ' + groupID + ' is being overwritten.');\r\n        this._raycastGroups[event][groupID] = group;\r\n    }\r\n\r\n    RemoveRaycastGroup(event, groupID){\r\n        delete this._raycastGroups[event][groupID];\r\n    }\r\n\r\n    UpdateRaycaster(){\r\n        this.camera.updateMatrixWorld();\r\n        this.raycaster.setFromCamera(this.mouseViewport, this.camera);\r\n    }\r\n\r\n    UpdateRaycast(event){\r\n        var raycastGroupsKeys = Object.keys(this._raycastGroups[event]);\r\n        var numRaycastGroups = raycastGroupsKeys.length;\r\n        if(numRaycastGroups > 0){\r\n            if(numRaycastGroups > 1)\r\n                raycastGroupsKeys.sort().reverse();\r\n            \r\n            for(var iGroup = 0; iGroup < numRaycastGroups; iGroup++){\r\n                var key = raycastGroupsKeys[iGroup];\r\n                this._raycastGroups[event][key].Raycast(this.raycaster);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Input;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/input/Input.js","class Quality {\r\n    constructor(callback){\r\n        this.testCallback = callback;\r\n    }\r\n\r\n    Common(quality){\r\n        //                      0       1       2       3\r\n        var composer        = [ 0,      0,      0,      1       ];\r\n        var antialias       = [ 0,      1,      1,      0       ];\r\n        var shadows         = [ 0,      0,      1,      1       ];\r\n        var renderSizeMul   = [ .5,     1,      1,      1       ];\r\n        \r\n        var result = {\r\n            composer: Boolean(composer[quality]), \r\n            antialias: Boolean(antialias[quality]),\r\n            shadows: Boolean(shadows[quality]),\r\n            renderSizeMul: renderSizeMul[quality]\r\n        };\r\n        return result;\r\n    }\r\n\r\n    OnTestComplete(quality){\r\n        var result = this.Common(quality);\r\n        this.testCallback(result);\r\n    }\r\n\r\n    PerformanceTest1(){\r\n        var quality = 2;\r\n        // Test webgl supported shader precision, see WebGLRenderer, https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices\r\n        this.OnTestComplete(quality);\r\n    }\r\n\r\n}\r\n\r\nexport default Quality;\n\n\n// WEBPACK FOOTER //\n// ./src/api/utils/cik/Quality.js","\r\nclass Controller {\r\n    constructor(params){\r\n\r\n        this.params = params;\r\n\r\n        // Containers\r\n        this.itemsContainer = new THREE.Object3D();\r\n        this.itemsContainer.name = \"itemsContainer\";\r\n        this.miscContainer = new THREE.Object3D();\r\n        this.miscContainer.name = \"miscContainer\";\r\n        this.ambientContainer = new THREE.Object3D();\r\n        this.ambientContainer.name = \"ambientContainer\";\r\n        this.defaults = new THREE.Object3D();\r\n        this.defaults.name = \"defaults\";\r\n\r\n        // Scene\r\n        this.scene = new THREE.Scene();\r\n\r\n        // Setup rest\r\n        this.scene.add(this.itemsContainer);\r\n        this.scene.add(this.miscContainer);\r\n        this.scene.add(this.ambientContainer);\r\n        this.scene.add(this.defaults);\r\n    }\r\n\r\n    Add(object, container){\r\n        if(container === undefined) container = this.miscContainer;\r\n        container.add(object);\r\n    }\r\n\r\n    AddDefault(object){\r\n        this.defaults.add(object);\r\n    }\r\n\r\n    Remove(object){\r\n        if(typeof object === 'string'){\r\n            var objName = object;\r\n            object = this.itemsContainer.getObjectByName(objName);\r\n            if(object === undefined) object = this.miscContainer.getObjectByName(objName);\r\n            if(object === undefined) return;\r\n        }\r\n        this.itemsContainer.remove(object);\r\n        this.miscContainer.remove(object);\r\n    }\r\n}\r\n\r\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Controller.js","\r\nclass Renderer {\r\n    constructor(params) {\r\n\r\n        this.params = params;\r\n        this.renderer = new THREE.WebGLRenderer({antialias: this.params.antialias});\r\n\r\n        if(this.params.shadows){\r\n            this.renderer.shadowMap.enabled = true;\r\n            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            this.renderer.shadowMap.autoUpdate = false;\r\n        }\r\n\r\n        this.renderer.physicallyCorrectLights = true;\r\n        this.renderer.gammaInput = true;\r\n        this.renderer.gammaOutput = true;\r\n        this.renderer.toneMapping = THREE.ReinhardToneMapping;\r\n        //this.renderer.toneMappingExposure = ;\r\n        \r\n        this.maxTextureSize = this.renderer.context.getParameter(this.renderer.context.MAX_TEXTURE_SIZE);\r\n        this.pixelRatio = window.devicePixelRatio !== undefined ? window.devicePixelRatio : 1;\r\n        this.renderer.setPixelRatio(this.pixelRatio);\r\n        this.renderer.setClearColor(new THREE.Color(this.params.clearColor), 1);\r\n\r\n        this.UseCamera = function(camera){\r\n            this.camera = camera;\r\n        };\r\n\r\n        this.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * this.params.renderSizeMul;\r\n            var newHeight = screen.height * this.params.renderSizeMul;\r\n            this.renderer.setSize(newWidth, newHeight);\r\n        };\r\n\r\n        this.Render = function(scene){\r\n            this.renderer.render(scene, this.camera);\r\n        };\r\n        \r\n        this.UpdateShadowMaps = function(){\r\n            this.renderer.shadowMap.needsUpdate = true;\r\n        };\r\n\r\n        this.ResizeDomElement = function(screen){\r\n            this.renderer.domElement.style.width = Math.floor(screen.width) + 'px';\r\n            this.renderer.domElement.style.height = Math.floor(screen.height) + 'px';\r\n        };\r\n\r\n        this.ReconfigureViewport = function(screen){\r\n            this.camera.aspect = screen.width / screen.height;\r\n            this.camera.updateProjectionMatrix();\r\n\r\n            this.ResizeRenderer(screen);\r\n            this.ResizeDomElement(screen);\r\n        };\r\n\r\n        if(this.params.composer){\r\n            Renderer.UseComposer(this);\r\n        }\r\n    }\r\n\r\n    Dispose(){\r\n        this.renderer.dispose();\r\n    }\r\n\r\n    static UseComposer (sceneRenderer){\r\n        sceneRenderer.composer = new THREE.EffectComposer(sceneRenderer.renderer);\r\n        sceneRenderer.renderPass = new THREE.RenderPass(undefined, undefined);\r\n        sceneRenderer.renderPass.renderToScreen = true;\r\n        sceneRenderer.composer.addPass(sceneRenderer.renderPass);\r\n        sceneRenderer.renderPasses = [sceneRenderer.renderPass];\r\n\r\n        sceneRenderer.UseCamera = function(camera){\r\n            sceneRenderer.camera = camera;\r\n            sceneRenderer.renderPass.camera = camera;\r\n        };\r\n\r\n        sceneRenderer.ResizeRenderer = function(screen){\r\n            var newWidth = screen.width * sceneRenderer.params.renderSizeMul;\r\n            var newHeight = screen.height * sceneRenderer.params.renderSizeMul;\r\n            sceneRenderer.renderer.setSize(newWidth, newHeight);\r\n\r\n            newWidth  = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tnewHeight = Math.floor( newWidth / sceneRenderer.pixelRatio ) || 1;\r\n\t\t\tsceneRenderer.composer.setSize( newWidth, newHeight );\r\n        };\r\n\r\n        sceneRenderer.Render = function(scene){\r\n            sceneRenderer.renderPass.scene = scene;\r\n            sceneRenderer.composer.render();\r\n        };\r\n    }\r\n}\r\n\r\nexport default Renderer;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Renderer.js","\r\nclass Camera {\r\n    constructor(params){\r\n        this.params = params;\r\n\r\n        this.camera = new THREE.PerspectiveCamera(this.params.fov, this.params.aspect, this.params.near, this.params.far);\r\n        this.camera.name = 'UserCamera';\r\n    }\r\n\r\n    get position(){ return this.camera.position; }\r\n    set position(value){ this.camera.position.copy(value); }\r\n    get rotation(){ return this.camera.rotation; }\r\n    set rotation(value){ this.camera.rotation.copy(value); }\r\n\r\n    FirstPersonControls(container, params){\r\n        if(this.fpsControls === undefined && container !== undefined){\r\n            this.fpsControls = new App.Navigation.FirstPerson(this.camera, container);\r\n\r\n            this.fpsControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.fpsControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n        \r\n        if(this.fpsControls !== undefined){\r\n            if(params !== undefined){\r\n                this.fpsControls.speed.set(params.speedX, params.speedY);\r\n                this.fpsControls.damping = params.damping;\r\n                this.fpsControls.momentum = params.momentum;\r\n                this.fpsControls.limitPhi = params.limitPhi;\r\n                this.fpsControls.moveSpeed = params.moveSpeed;\r\n                this.fpsControls.keyControls = true;\r\n            }\r\n\r\n            this.controls = this.fpsControls;\r\n        }\r\n    }\r\n\r\n    OrbitControls(container, params){\r\n        if(this.orbitControls === undefined && container !== undefined){\r\n\r\n            var lookTarget = new THREE.Vector3();\r\n            this.camera.getWorldDirection(lookTarget);\r\n            lookTarget.multiplyScalar(200).add(this.camera.position);\r\n\r\n            this.orbitControls = new THREE.OrbitControls(this.camera, container);\r\n            this.orbitControls.target = lookTarget;\r\n            \r\n            var scope = this;\r\n            this.orbitControls.Update = function(){\r\n                if(this.enabled){\r\n                    if(this.object.position.distanceTo(this.target) < 50){\r\n                        var v = new THREE.Vector3().subVectors(this.target, this.object.position).multiplyScalar(.5);\r\n                        this.target.add(v);\r\n                    }\r\n                    this.update();\r\n                }\r\n            };\r\n            this.orbitControls.Hold = function(){\r\n                this.enabled = false;\r\n            };\r\n            this.orbitControls.Release = function(){\r\n                this.enabled = true;\r\n            };\r\n        }\r\n\r\n        \r\n        params = params || {\r\n            maxDistance: 9000.0 * /*units*/1,\r\n            maxPolarAngle: Math.PI * 0.895\r\n        }\r\n        if(params !== undefined){\r\n            this.orbitControls.maxDistance = params.maxDistance;\r\n            this.orbitControls.maxPolarAngle = params.maxPolarAngle;\r\n            this.orbitControls.autoRotate = false;\r\n        }\r\n\r\n        this.controls = this.orbitControls;\r\n    }\r\n\r\n    ToggleControls(){\r\n        this.Hold();\r\n\r\n        if(this.controls === this.orbitControls){\r\n            if(this.fpsControls){\r\n                this.fpsControls.LerpRotation(this.camera, 1);\r\n                this.FirstPersonControls();\r\n            }\r\n        }\r\n        else{\r\n            if(this.orbitControls){\r\n                this.OrbitControls();\r\n\r\n                // target\r\n                var maxDistance = 100;\r\n\r\n                var point = new THREE.Vector3(0, 0, -1);\r\n                var quat = new THREE.Quaternion();\r\n                point.applyQuaternion(this.camera.getWorldQuaternion(quat)).normalize().multiplyScalar(maxDistance * .5).add(this.camera.position);\r\n\r\n                this.SetTarget(point);\r\n            }\r\n        }\r\n\r\n        this.Release();\r\n    }\r\n\r\n    SetTarget(position){\r\n        if(this.controls instanceof THREE.OrbitControls){\r\n            this.controls.target.copy(position);\r\n        }\r\n        else {\r\n            console.warn('SetTarget not implemented for control type:', this.controls);\r\n        }\r\n    }\r\n\r\n    Update(){\r\n        if(this.controls !== undefined){\r\n            this.controls.Update();\r\n        }\r\n    }\r\n\r\n    Hold(){\r\n        if(this.controls !== undefined && this.controls.Hold){\r\n            this.controls.Hold();\r\n        }\r\n    }\r\n\r\n    Release(){\r\n        if(this.controls !== undefined && this.controls.Release){\r\n            this.controls.Release();\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera;\n\n\n// WEBPACK FOOTER //\n// ./src/api/scene/Camera.js","import Container from \"./container/Container\";\r\n\r\nclass PackingSpace {\r\n    constructor(){\r\n        this._current = -1;\r\n        this.containers = [];\r\n    }\r\n\r\n    get current(){\r\n        if(this._current != -1){\r\n            return this.containers[this._current];\r\n        }\r\n    }\r\n}\r\n\r\nexport default PackingSpace;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/PackingSpace.js","import Dimensions from \"../../components/box/Dimensions\";\r\n\r\nclass Volume {\r\n    constructor(){\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.position = new THREE.Vector3();\r\n\r\n        /**\r\n         * @type {Dimensions}\r\n         */\r\n        this.dimensions = new Dimensions();\r\n    }\r\n\r\n    toJSON(){\r\n        return {\r\n            type: 'Volume',\r\n            position: this.position,\r\n            dimensions: this.dimensions\r\n        };\r\n    }\r\n}\r\n\r\nexport default Volume;\n\n\n// WEBPACK FOOTER //\n// ./src/api/packer/container/Volume.js","import CargoListView from \"./CargoListView\";\r\nimport Packer from \"../packer/Packer\";\r\nimport CargoList from \"../packer/CargoList\";\r\n\r\nclass View {\r\n    /**\r\n     * Constructor\r\n     * @param {Packer} packer \r\n     * @param {SceneSetup} sceneSetup \r\n     */\r\n    constructor(packer, sceneSetup){\r\n        this.sceneSetup = sceneSetup;\r\n\r\n        this.cargoListView = new CargoListView();\r\n        this.Display(this.cargoListView);\r\n\r\n        var onCargoAdded = this.cargoListView.Add.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.cargoAdded, onCargoAdded);\r\n        var onCargoRemoved = this.cargoListView.Remove.bind(this.cargoListView);\r\n        packer.cargoList.On(CargoList.signals.cargoRemoved, onCargoRemoved);\r\n    }\r\n\r\n    Display(object){\r\n        var sceneController = this.sceneSetup.sceneController;\r\n        if(object instanceof CargoListView){\r\n            sceneController.AddDefault(object.view);\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/View.js","import Cargo from \"../packer/Cargo\";\r\nimport Logger from \"../utils/cik/Logger\";\r\n\r\nclass CargoListView {\r\n    constructor(){\r\n        this.view = new THREE.Object3D();\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Cargo} cargo \r\n     */\r\n    Add(cargo){\r\n        Logger.Trace('Adding cargo: ' + cargo.ToString() + ' to view', cargo);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Cargo} cargo \r\n     */\r\n    Remove(cargo){\r\n\r\n    }\r\n}\r\n\r\nexport default CargoListView;\n\n\n// WEBPACK FOOTER //\n// ./src/api/view/CargoListView.js","\r\nimport Logger from '../utils/cik/Logger';\r\nimport Signaler from '../utils/cik/Signaler';\r\nimport BoxEntry from './box/BoxEntry';\r\n\r\nvar updated = 'updated',\r\n    aborted = 'aborted',\r\n    completed = 'completed';\r\n\r\n/**\r\n * Cubic volumes entry\r\n */\r\nclass CargoInput extends Signaler {\r\n\r\n    constructor(){\r\n        super();\r\n        \r\n        this.entry = new BoxEntry();\r\n    }\r\n\r\n    /**\r\n     * Starts a new entry 'session', or, updates the current entry\r\n     * @param {Object} params \r\n     */\r\n    Update(params){\r\n        this.entry.dimensions.Set(params.width, params.length, params.height);\r\n        Logger.Trace('entry updated', this.entry);\r\n        this.entry.active = true;\r\n        this.Dispatch(updated, this.entry);\r\n    }\r\n\r\n    Abort(){\r\n        this.entry.active = false;\r\n        this.entry.Reset();\r\n        Logger.Trace('entry deleted');\r\n        this.Dispatch(aborted);\r\n    }\r\n\r\n    Complete(){\r\n        if( this.entry.active ){\r\n            this.Dispatch(completed, this.entry);\r\n            this.entry.Reset();\r\n        }\r\n        return this.entry;\r\n    }\r\n\r\n    get currentEntry(){\r\n        return this.entry;\r\n    }\r\n}\r\n\r\nexport default CargoInput;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/CargoInput.js","import { SupportsStacking, RotationConstraint, TranslationConstraint } from \"./PackingProperty\";\r\nimport Dimensions from \"./Dimensions\";\r\nimport TextField from \"../common/TextField\";\r\nimport CargoEntry from \"../common/CargoEntry\";\r\n\r\nclass BoxEntry extends CargoEntry {\r\n    constructor(){\r\n        super();\r\n        this.type = 'BoxEntry';\r\n\r\n        this.dimensions = new Dimensions(0, 0, 0);\r\n        \r\n        this.properties.stacking    = new SupportsStacking();\r\n        this.properties.rotation    = new RotationConstraint();\r\n        this.properties.translation = new TranslationConstraint();\r\n        \r\n        this.descriptions.push(new TextField('label', TextField.defaultContent));\r\n    }\r\n\r\n    Reset(){\r\n        this.active = false;\r\n        this.properties.stacking.Reset();\r\n        this.properties.rotation.Reset();\r\n        this.properties.translation.Reset();\r\n        this.descriptions.length = 1;\r\n        this.descriptions[0].content = TextField.defaultContent;\r\n    }\r\n\r\n    Clone(){\r\n        var entry = super.Clone(new BoxEntry());\r\n        \r\n        entry.dimensions = this.dimensions.Clone();\r\n\r\n        entry.properties.statcking      = this.properties.stacking.Clone();\r\n        entry.properties.rotation       = this.properties.rotation.Clone();\r\n        entry.properties.translation    = this.properties.translation.Clone();\r\n\r\n        for(var i = 0; i < this.descriptions.length; i++){\r\n            entry.descriptions.push(this.descriptions[i].Clone());\r\n        }\r\n\r\n        return entry;\r\n    }\r\n\r\n    ToString(){\r\n        return '\\'' + this.descriptions[0].content + '\\': ' + this.dimensions.ToString();\r\n    }\r\n}\r\n\r\nexport default BoxEntry;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/BoxEntry.js","class PackingProperty {\r\n    constructor(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Reset(){\r\n        this.enabled = false;\r\n    }\r\n\r\n    Clone(){\r\n        var property = new PackingProperty();\r\n        property.enabled = this.enabled;\r\n        return property;\r\n    }\r\n}\r\n\r\nclass SupportsStacking extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass Constraint extends PackingProperty {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass RotationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nclass TranslationConstraint extends Constraint {\r\n    constructor(){\r\n        super();\r\n    }\r\n}\r\n\r\nexport {\r\n    SupportsStacking,\r\n    RotationConstraint,\r\n    TranslationConstraint\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/box/PackingProperty.js","class TextField {\r\n    constructor(label, content){\r\n        this.label = label;\r\n        this.content = content;\r\n    }\r\n\r\n    Clone(){\r\n        var field = new TextField(this.label, this.content);\r\n        return field;\r\n    }\r\n\r\n    static get defaultContent(){\r\n        return '-';\r\n    }\r\n}\r\n\r\nexport default TextField;\n\n\n// WEBPACK FOOTER //\n// ./src/api/components/common/TextField.js","import SceneSetup from \"../api/scene/SceneSetup\";\r\nimport ContainersEditor from \"./editors/containersEditor/ContainersEditor\";\r\nimport WizardTest from \"./editors/wizard/WizardTest\";\r\nimport Dom from \"./ui/Dom\";\r\n\r\n/**\r\n * @type {Editor}\r\n */\r\nvar instance;\r\n\r\nclass Editor {\r\n    /**\r\n     * \r\n     * @param {HTMLElement} guiElement \r\n     * @param {HTMLElement} viewElement \r\n     */\r\n    constructor(guiElement, viewElement){\r\n\r\n        console.log('FP Editor');\r\n\r\n        instance = this;\r\n\r\n        this.domElement = guiElement;\r\n        this.GUI();\r\n\r\n        this.sceneSetup = new SceneSetup(viewElement);\r\n        this.sceneSetup.Init().then(this.Start.bind(this));\r\n\r\n        this.dom = new Dom();\r\n        viewElement.appendChild(this.dom.element);\r\n    }\r\n\r\n    GUI(){\r\n        this.gui = new dat.GUI({autoPlace: false});\r\n        this.domElement.appendChild(this.gui.domElement);\r\n\r\n        var controller = {\r\n            EditContainers: this.EditContainers.bind(this)\r\n        };\r\n        this.gui.add(controller, 'EditContainers');\r\n    }\r\n\r\n    EditContainers(){\r\n        this.activeEditor = new ContainersEditor(this.gui);\r\n    }\r\n\r\n    Start(){\r\n        this.sceneSetup.Start();\r\n    }\r\n\r\n    static get instance(){\r\n        return instance;\r\n    }\r\n}\r\n\r\nglobal.FPEditor = Editor;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/Editor.js","import ActiveEditor from \"../ActiveEditor\";\r\nimport ContainersEditorWizard from \"./wizard/ContainersEditorWizard\";\r\n\r\nclass ContainersEditor extends ActiveEditor {\r\n    constructor(gui){\r\n        super(gui);\r\n\r\n        this.Start();\r\n    }\r\n\r\n    Start(){\r\n        var view = new THREE.Object3D();\r\n        FPEditor.instance.sceneSetup.sceneController.Add(view);\r\n\r\n        var wizard = new ContainersEditorWizard();\r\n        wizard.Globals({\r\n            view: view\r\n        });\r\n        wizard.Start();\r\n    }\r\n}\r\n\r\nexport default ContainersEditor;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/containersEditor/ContainersEditor.js","\r\nclass ActiveEditor {\r\n    constructor(gui){\r\n        this.folder;\r\n    }\r\n\r\n    Dispose(){\r\n\r\n    }\r\n}\r\n\r\nexport default ActiveEditor;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/ActiveEditor.js","import WizardStep from \"../../wizard/WizardStep\";\r\nimport IO from '../../../utils/IO';\r\nimport Draggable from \"../../../ui/elements/Draggable\";\r\nimport Dom from \"../../../ui/Dom\";\r\nimport SurfaceUtils from \"../../../utils/SurfaceUtils\";\r\nimport ContainersEditorWizard from \"./ContainersEditorWizard\";\r\n\r\nclass LoadRefStep extends WizardStep {\r\n    constructor(){\r\n        super('loadRef');\r\n    }\r\n\r\n    Start(){\r\n        super.Start();\r\n\r\n        var scope = this;\r\n\r\n        var elements = document.getElementById('wizard-elements');\r\n        var element = elements.querySelector('#loadRef');\r\n        var loadBtn = element.querySelector('#loadBtn');\r\n        loadBtn.onclick = function(){\r\n            scope.Import3DModel();\r\n        };\r\n\r\n        this.modal = new Draggable(ContainersEditorWizard.title, Draggable.widths.medium);\r\n        this.modal.Add(element);\r\n        Dom.instance.Add(this.modal);\r\n    }\r\n\r\n    Import3DModel(){\r\n        var scope = this;\r\n        IO.GetFile(function(file){\r\n            var obj = new THREE.FBXLoader().parse(file);\r\n            scope.SetRefModel(obj);\r\n        }, true);\r\n    }\r\n\r\n    SetRefModel(obj){\r\n        var refGeometry = SurfaceUtils.MergeObject(obj);\r\n        refGeometry = new THREE.Geometry().fromBufferGeometry(refGeometry);\r\n        refGeometry.mergeVertices();\r\n        refGeometry.computeFaceNormals();\r\n        this.vertexHash = SurfaceUtils.CreateVertexHash(refGeometry);\r\n\r\n        if(this.obj === undefined){\r\n            this.obj = new THREE.Mesh(refGeometry, new THREE.MeshStandardMaterial({color: 0x999999}));\r\n            this.data.view.add(this.obj);\r\n            this.data.ref = this.obj;\r\n        }\r\n        else{\r\n            this.obj.geometry = refGeometry;\r\n        }\r\n\r\n        this.Complete(this.data);\r\n    }\r\n\r\n    Dispose(){\r\n        super.Dispose();\r\n        this.modal.Remove();\r\n    }\r\n}\r\n\r\nexport default LoadRefStep;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/containersEditor/wizard/LoadRefStep.js","\r\nimport RaycastGroup from \"../../../../api/utils/cik/input/RaycastGroup\";\r\nimport WizardStep from \"../../wizard/WizardStep\";\r\nimport SurfaceUtils from \"../../../utils/SurfaceUtils\";\r\nimport DirectedRect from \"../../../utils/DirectedRect\";\r\nimport Draggable from \"../../../ui/elements/Draggable\";\r\nimport Dom from \"../../../ui/Dom\";\r\nimport Feedback from \"../../../utils/Feedback\";\r\nimport Container from \"../../../../api/packer/container/Container\";\r\nimport ContainingVolume from \"../../../../api/packer/container/ContainingVolume\";\r\nimport WizardAction from \"../../../ui/elements/WizardAction\";\r\nimport ContainersEditorWizard from \"./ContainersEditorWizard\";\r\n\r\n/**\r\n * @typedef {Object} ConfigureSpaceData\r\n * \r\n * @property {THREE.Object3D} view\r\n * @property {Container} container\r\n * @property {DirectedRect} platform\r\n */\r\n\r\nconst signals = {\r\n    surfacePick: 'surfacePick',\r\n    dimensionsInput: 'dimensionsInput',\r\n    sidePick: 'sidePick'\r\n}\r\n\r\nclass ConfigureSpaceStep extends WizardStep {\r\n\r\n    constructor(){\r\n        super('configureSpace');\r\n\r\n        /**\r\n         * @type {ConfigureSpaceData}\r\n         */\r\n        this.data;\r\n        \r\n        var volume = new ContainingVolume();\r\n        var container = new Container();\r\n        container.volumes.push(volume);\r\n        this.data.container = container;\r\n        \r\n    }\r\n\r\n    Start(dataPass){\r\n        super.Start();\r\n\r\n        /**\r\n         * @type {THREE.Object3D}\r\n         */\r\n        this.obj = dataPass.ref;\r\n\r\n        var scope = this;\r\n\r\n        var elements = document.getElementById('wizard-elements');\r\n        var element = elements.querySelector('#configureSpace');\r\n\r\n        var sideAction = new WizardAction(element.querySelector('#side'));\r\n        sideAction.button.onclick = function(){\r\n            scope.PickLoadingSide();\r\n        };\r\n\r\n        var inputAction = new WizardAction(element.querySelector('#input'));\r\n        inputAction.button.onclick = function(){\r\n            scope.InputDimensions();\r\n        };\r\n\r\n        var surfaceAction = new WizardAction(element.querySelector('#surface'));\r\n        surfaceAction.button.onclick = function(){\r\n            scope.PickSurface();\r\n        };\r\n\r\n        var nextBtn = element.querySelector('#nextBtn');\r\n        nextBtn.onclick = function(){\r\n            scope.Complete();\r\n        }\r\n\r\n        this.modal = new Draggable(ContainersEditorWizard.title, Draggable.widths.medium);\r\n        this.modal.Add(element);\r\n        Dom.instance.Add(this.modal);\r\n\r\n        this.On(signals.surfacePick, function(){\r\n            surfaceAction.status = true;\r\n            inputAction.disabled = false;\r\n        });\r\n\r\n        this.On(signals.dimensionsInput, function(){\r\n            inputAction.status = true;\r\n            sideAction.disabled = false;\r\n        });\r\n\r\n        this.On(signals.sidePick, function(){\r\n            sideAction.status = true;\r\n            nextBtn.disabled = false;\r\n        });\r\n    }\r\n\r\n    PickSurface(){\r\n        if( ! this.raycastGroup ){\r\n            var scope = this;\r\n            this.raycastGroup = new RaycastGroup(\r\n                [this.obj], //items\r\n                function(obj, intersection){\r\n                    if(scope.pickSurfaceMode){\r\n                        scope.OnClickPickSurface(obj, intersection);\r\n                        scope.pickSurfaceMode = false;\r\n                    }\r\n                }, // callback\r\n                \r\n                undefined,\r\n                \r\n                false, //updateProperty\r\n                true //recursive\r\n            );\r\n\r\n            var input = FPEditor.instance.sceneSetup.input;\r\n            input.AddRaycastGroup('OnClick', 'Ref3D', this.raycastGroup);\r\n        }\r\n\r\n        this.pickSurfaceMode = true;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {DirectedRect} platform \r\n     */\r\n    ValidatePlatform(platform){\r\n        var up = new THREE.Vector3(0, 1, 0);\r\n        var horizontalUp = up.dot(platform.normal) > .9;\r\n        console.log(platform.normal, up.dot(platform.normal));\r\n        if(horizontalUp === false){\r\n            alert('Please pick a horizontal surface facing up');\r\n            return false;\r\n        }\r\n\r\n        if(platform.width < .0001){\r\n            alert('Platform\\'s width is too small');\r\n            return false;\r\n        }\r\n\r\n        if(platform.length < .0001){\r\n            alert('Platform\\'s length is too small');\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    OnClickPickSurface(obj, intersection){\r\n        var coplanar = SurfaceUtils.GetCoplanar(2, intersection.object.geometry, intersection.face, true);\r\n\r\n        var gVertices = this.obj.geometry.vertices;\r\n        var vertices = [];\r\n        for(var f in coplanar){\r\n            var face = coplanar[f];\r\n            vertices.push(\r\n                gVertices[face.a],\r\n                gVertices[face.b],\r\n                gVertices[face.c]\r\n            );\r\n        }\r\n\r\n        var platform = DirectedRect.FromPoints(vertices);\r\n        if(this.ValidatePlatform(platform) === false){\r\n            this.pickSurfaceMode = true;\r\n            return;\r\n        }\r\n\r\n        this.data.platform = platform;\r\n        var volume = this.data.container.volume;\r\n        volume.position.copy(this.data.platform.center);\r\n\r\n        vertices = SurfaceUtils.Clone(vertices);\r\n        var surfaceGeometry = SurfaceUtils.FromVertices(vertices);\r\n        var normal = SurfaceUtils.Normal(surfaceGeometry);\r\n        SurfaceUtils.Add(vertices, normal.clone().multiplyScalar(.1));\r\n        surfaceGeometry.verticesNeedUpdate = true;\r\n\r\n        if(this.selectedSurface === undefined){\r\n            this.selectedSurface = new THREE.Mesh(surfaceGeometry, new THREE.MeshStandardMaterial({color: 0xaa0000}));\r\n            this.selectedSurface.applyMatrix(this.obj.matrix);\r\n            this.data.view.add(this.selectedSurface);\r\n\r\n            var input = FPEditor.instance.sceneSetup.input;\r\n            var scope = this;\r\n            input.onClick.push(function(e){\r\n                scope.selectedSurface.visible = false;\r\n            });\r\n        }\r\n        this.selectedSurface.visible = true;\r\n\r\n        this.selectedSurface.geometry = surfaceGeometry;\r\n\r\n        var scope = this;\r\n        var input = FPEditor.instance.sceneSetup.input;\r\n        input.DelayedAction(function(){\r\n            scope.PlatformDimensions();\r\n        }, 200);\r\n\r\n        this.On(signals.surfacePick, function(){\r\n            scope.selectedSurface.visible = false;\r\n        });\r\n    }\r\n\r\n    PlatformDimensions(){\r\n\r\n        var scope = this;\r\n\r\n        var platform = this.data.platform;\r\n        var platformDimensions = this.platformDimensions = {width: platform.width, length: platform.length};\r\n\r\n        var obj = this.obj;\r\n        var onChange = function(){\r\n            let sw = platformDimensions.width / platform.width;\r\n            let sl = platformDimensions.length / platform.length;\r\n            let sh = (sw + sl) / 2;\r\n            obj.scale.set(sw, sh, sl);\r\n            platform.Scale(sw, sl, sh);\r\n\r\n            console.log(platform);\r\n            if(platform.invert){\r\n                let m = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(0, Math.PI / 2, 0));\r\n                obj.applyMatrix(m);\r\n                platform.center.applyMatrix4(m);\r\n            }\r\n\r\n            let offset = new THREE.Vector3().subVectors(platform.center, obj.position);\r\n            offset.y = 0;\r\n            obj.position.sub(offset);\r\n            platform.center.x = platform.center.z = 0;\r\n\r\n            var volume = scope.data.container.volume;\r\n            volume.position.copy(platform.center);\r\n        };\r\n\r\n        Feedback.Prompt('Platform width', platformDimensions.width)\r\n            .then(function(width){\r\n                platformDimensions.width = Number.parseFloat(width);\r\n                return Feedback.Prompt('Platform length', platformDimensions.length);\r\n            })\r\n            .then(function(length){\r\n                platformDimensions.length = Number.parseFloat(length);\r\n                onChange();\r\n                scope.Dispatch(signals.surfacePick);\r\n            })\r\n    }\r\n\r\n    InputDimensions(){\r\n\r\n        var scope = this;\r\n        \r\n        var dimensions = this.data.container.volume.dimensions;\r\n        if(dimensions.volume < 1){\r\n            let platform = this.data.platform;\r\n            dimensions.Set(platform.width, platform.length, platform.width);\r\n        }\r\n        var onChange = function(){\r\n            scope.DisplayVolume();\r\n        };\r\n\r\n        Feedback.Prompt('Volume width', dimensions.width)\r\n            .then(function(width){\r\n                dimensions.width = Number.parseFloat(width);\r\n                onChange();\r\n                return Feedback.Prompt('Volume length', dimensions.length);\r\n            })\r\n            .then(function(length){\r\n                dimensions.length = Number.parseFloat(length);\r\n                onChange();\r\n                return Feedback.Prompt('Volume height', dimensions.height)\r\n            })\r\n            .then(function(height){\r\n                dimensions.height = Number.parseFloat(height);\r\n                onChange();\r\n                scope.Dispatch(signals.dimensionsInput);\r\n            });\r\n    }\r\n\r\n    DisplayVolume(){\r\n        var platform = this.data.platform;\r\n\r\n        if(this.displayVolume === undefined){\r\n            this.displayVolume = new THREE.Mesh(\r\n                new THREE.BoxGeometry(1, 1, 1, 1, 1, 1),\r\n                new THREE.MeshStandardMaterial({\r\n                    transparent: true,\r\n                    opacity: .5\r\n                })\r\n            );\r\n            this.displayVolume.scale.set(0.01, 0.01, 0.01);\r\n            this.displayVolume.position.copy(platform.center);\r\n\r\n            this.data.view.add(this.displayVolume);\r\n        }\r\n\r\n        \r\n        var dimensions = this.data.container.volume.dimensions;\r\n        this.displayVolume.scale.set(\r\n            dimensions.width,\r\n            dimensions.height,\r\n            dimensions.length\r\n        );\r\n        this.displayVolume.position.y = platform.center.y + dimensions.height / 2;\r\n    }\r\n\r\n    PickLoadingSide(){\r\n        if( ! this.raycastGroupSide && this.displayVolume ){\r\n            var scope = this;\r\n            this.raycastGroupSide = new RaycastGroup(\r\n                [this.displayVolume], //items\r\n                function(obj, intersection){\r\n                    if(scope.pickSideMode){\r\n                        scope.OnClickPickSide(obj, intersection);\r\n                        scope.pickSideMode = false;\r\n                    }\r\n                }, // callback\r\n                \r\n                function(obj){ //collectionQuery\r\n                    return obj;\r\n                },\r\n                \r\n                true, //updateProperty\r\n                true //recursive\r\n            );\r\n\r\n            var input = FPEditor.instance.sceneSetup.input;\r\n            input.AddRaycastGroup('OnClick', 'Side', this.raycastGroupSide);\r\n        }\r\n\r\n        this.pickSideMode = true;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Mesh} obj \r\n     * @param {THREE.Intersection} intersection \r\n     */\r\n    OnClickPickSide(obj, intersection){\r\n\r\n        var scope = this;\r\n\r\n        /**\r\n         * @type {Array<THREE.Vector3>}\r\n         */\r\n        var v = obj.geometry.vertices;\r\n        var f = intersection.face;\r\n        var vertices = [v[f.a], v[f.b], v[f.c]];\r\n        f = obj.geometry.faces[intersection.faceIndex + (intersection.faceIndex % 2 === 1 ? - 1 : 1)];\r\n        vertices.push(v[f.a], v[f.b], v[f.c]);\r\n        \r\n        var side = new THREE.Vector3();\r\n        for(var i = 0; i < 6; i++){\r\n            side.add(vertices[i]);\r\n        }\r\n        side.multiplyScalar(1 / 6).applyMatrix4(this.displayVolume.matrix);\r\n\r\n        var center = this.displayVolume.position;\r\n        var direction = new THREE.Vector3().subVectors(side, center);\r\n\r\n        var platform = this.data.platform;\r\n        platform.direction = DirectedRect.AxisDirection(direction);\r\n\r\n        if(platform.direction.z < .99){\r\n            let m = new THREE.Matrix4();\r\n            m.setPosition(this.obj.position.clone().multiplyScalar(-1));\r\n            m.makeRotationFromQuaternion(\r\n                new THREE.Quaternion().setFromAxisAngle(new THREE.Vector3(0, 1, 0), Math.PI)\r\n            );\r\n            this.obj.applyMatrix(m);\r\n            \r\n            platform.direction.multiplyScalar(-1);\r\n        }\r\n\r\n        console.log(platform);\r\n\r\n        if(this.axesHelper === undefined){\r\n            this.axesHelper = new THREE.AxesHelper(direction.length());\r\n            this.data.view.add(this.axesHelper);\r\n        }\r\n\r\n        this.axesHelper.position.copy(center);\r\n\r\n        this.Dispatch(signals.sidePick);\r\n    }\r\n\r\n    Complete(){\r\n        this.obj.geometry = this.data.geometry = SurfaceUtils.MergeObject(this.obj);\r\n        this.obj.position.set(0, 0, 0);\r\n        this.obj.rotation.set(0, 0, 0);\r\n        this.obj.scale.set(1, 1, 1);\r\n        super.Complete(this.data);\r\n    }\r\n\r\n    Dispose(){\r\n        super.Dispose();\r\n        this.modal.Remove();\r\n    }\r\n}\r\n\r\nexport default ConfigureSpaceStep;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/containersEditor/wizard/ConfigureSpaceStep.js","\r\nclass DirectedRect {\r\n\r\n    /**\r\n     * \r\n     * @param {THREE.Vector3} center \r\n     * @param {THREE.Vector2} extent \r\n     * @param {THREE.Vector3} normal\r\n     * @param {Boolean} invert\r\n     */\r\n    constructor(center, extent, normal, invert){\r\n        this.center = center;\r\n        this.extent = extent;\r\n        this.normal = normal;\r\n        this.invert = invert;\r\n\r\n        /**\r\n         * @type {THREE.Vector3}\r\n         */\r\n        this.direction;\r\n    }\r\n\r\n    Scale(width, length, height){\r\n        length = length || width;\r\n        height = height || width;\r\n        \r\n        this.center.x *= width;\r\n        this.center.y *= height;\r\n        this.center.z *= length;\r\n\r\n        this.extent.x *= width;\r\n        this.extent.y *= length;\r\n    }\r\n\r\n    get width(){\r\n        return this.extent.x;\r\n    }\r\n\r\n    set width(value){\r\n        this.extent.x = value;\r\n    }\r\n\r\n    get length(){\r\n        return this.extent.y;\r\n    }\r\n\r\n    set length(value){\r\n        this.extent.y = value;\r\n    }\r\n\r\n    static FromPoints(points){\r\n        var box = new THREE.Box3().setFromPoints(points);\r\n        var y = (box.min.y + box.max.y) * .5;\r\n        box.min.y = box.max.y = y;\r\n\r\n        var center = new THREE.Vector3();\r\n        box.getCenter(center);\r\n        var size = new THREE.Vector3();\r\n        box.getSize(size);\r\n        \r\n        var width, length, invert = false;\r\n        if(size.x < size.z){\r\n            width = size.x;\r\n            length = size.z;\r\n        }\r\n        else{\r\n            width = size.z;\r\n            length = size.x;\r\n            invert = true;\r\n        }\r\n        var extent = new THREE.Vector2(width, length);\r\n        var normal = new THREE.Vector3().crossVectors(new THREE.Vector3(width, 0, 0), new THREE.Vector3(0, 0, -length)).normalize();\r\n\r\n        var dRect = new DirectedRect(center, extent, normal, invert);\r\n        return dRect;\r\n    }\r\n\r\n    static AxisDirection(direction){\r\n        var x = Math.abs(direction.x);\r\n        var y = Math.abs(direction.y);\r\n        var z = Math.abs(direction.z);\r\n        if (x > y && x > z){\r\n            return new THREE.Vector3(Math.sign(direction.x), 0, 0);\r\n        } else if (y > x && y > z){\r\n            return new THREE.Vector3(0, Math.sign(direction.y), 0);\r\n        }\r\n\r\n        return new THREE.Vector3(0, 0, Math.sign(direction.z));\r\n    }\r\n}\r\n\r\nexport default DirectedRect;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/utils/DirectedRect.js","\r\nvar log = '';\r\n\r\nclass Feedback {\r\n\r\n    static Clear(){\r\n        log = '';\r\n    }\r\n\r\n    static AddLine(line, isList){\r\n        var prepend = isList ? ' - ' : '';\r\n        log += prepend + line + '\\n';\r\n    }\r\n\r\n    static Notify(message){\r\n        if(message === undefined){\r\n            message = log;\r\n            log = '';\r\n        }\r\n\r\n        if(InfoBar)\r\n            InfoBar.Add(message);\r\n        \r\n        alert(message);\r\n    }\r\n\r\n    static Prompt(message, defaultValue){\r\n        var result = prompt(message, defaultValue ? defaultValue : '');\r\n        return new Promise((resolve, reject) => {\r\n            if (result == null || result == '') {\r\n                reject();\r\n            } else {\r\n                resolve(result);\r\n            }\r\n        });\r\n    }\r\n\r\n    static Confirm(message){\r\n        return new Promise((resolve, reject) => {\r\n            if (confirm(message)) {\r\n                resolve();\r\n            } else {\r\n                reject();\r\n            }\r\n        });\r\n    }\r\n\r\n    static Reload(){\r\n        location.reload(false);\r\n    }\r\n}\r\n\r\nexport default Feedback;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/utils/Feedback.js","import Element from \"../Element\";\r\n\r\nconst buttonStyle = \"\\\r\n    background-color: #aaa;\\\r\n    border: none;\\\r\n    color: black;\\\r\n    padding: 4px;\\\r\n    margin: 4px;\\\r\n    text-decoration: none;\\\r\n    display: inline-block;\\\r\n\";\r\n\r\nconst docHandler = document.registerElement('wizard-action', {\r\n    prototype: Object.assign(Object.create(HTMLDivElement.prototype))\r\n});\r\n\r\n/**\r\n * @typedef {HTMLDivElement} WizardActionElement\r\n */\r\n\r\nclass WizardAction extends Element {\r\n    /**\r\n     * @param {WizardActionElement} ref \r\n     */\r\n    constructor(ref){\r\n        super();\r\n\r\n        var label = ref.attributes['label'];\r\n        label = label ? label.value : '';\r\n        var status = ref.attributes['status'];\r\n        status = status ? status.value : false;\r\n        var disabled = ref.attributes['disabled'];\r\n        disabled = disabled ? disabled.value : false;\r\n\r\n        /**\r\n         * @type {HTMLInputElement}\r\n         */\r\n        this.checkbox = crel('input', {type:'checkbox'});\r\n        this.checkbox.disabled = true;\r\n        this.checkbox.checked = status;\r\n\r\n        /**\r\n         * @type {HTMLButtonElement}\r\n         */\r\n        this.button = crel('button', undefined, label);\r\n\r\n        /**\r\n         * @type {HTMLElement}\r\n         */\r\n        this.domElement = ref;\r\n        this.domElement.appendChild(this.checkbox);\r\n        this.domElement.appendChild(this.button);\r\n\r\n        this.disabled = disabled;\r\n        console.log(this);\r\n    }\r\n\r\n    get status(){\r\n        return this.checkbox.checked;\r\n    }\r\n\r\n    set status(value){\r\n        this.checkbox.checked = Boolean(value);\r\n    }\r\n\r\n    get disabled(){\r\n        return this.domElement.disabled;\r\n    }\r\n\r\n    set disabled(value){\r\n        this.domElement.disabled = Boolean(value);\r\n        this.button.disabled = this.domElement.disabled;\r\n    }\r\n}\r\n\r\nexport default WizardAction;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/ui/elements/WizardAction.js","import WizardStep from \"../../wizard/WizardStep\";\r\nimport IO from '../../../utils/IO';\r\nimport Draggable from \"../../../ui/elements/Draggable\";\r\nimport Dom from \"../../../ui/Dom\";\r\nimport ContainersEditorWizard from \"./ContainersEditorWizard\";\r\n\r\nclass ExportStep extends WizardStep {\r\n    constructor(){\r\n        super('export');\r\n    }\r\n\r\n    Start(dataPass){\r\n        super.Start();\r\n\r\n        Object.assign(this.data, dataPass);\r\n\r\n        var scope = this;\r\n\r\n        var elements = document.getElementById('wizard-elements');\r\n        var element = elements.querySelector('#export');\r\n\r\n        var exportBtn = element.querySelector('#exportBtn');\r\n        exportBtn.onclick = function(){\r\n            scope.Export();\r\n        };\r\n\r\n        this.modal = new Draggable(ContainersEditorWizard.title, Draggable.widths.medium);\r\n        this.modal.Add(element);\r\n        Dom.instance.Add(this.modal);\r\n    }\r\n\r\n    toJSON(){\r\n        var geometry = this.data.geometry;\r\n        var container = this.data.container;\r\n        return {\r\n            geometry: geometry,\r\n            container: container\r\n        };\r\n    }\r\n\r\n    Export(){\r\n        IO.SaveUTF(JSON.stringify(this), 'PackingSpace-config.json');\r\n        this.Complete();\r\n    }\r\n\r\n    Dispose(){\r\n        super.Dispose();\r\n        this.modal.Remove();\r\n    }\r\n}\r\n\r\nexport default ExportStep;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/containersEditor/wizard/ExportStep.js","import WizardStep from \"./WizardStep\";\r\nimport Wizard from \"./Wizard\";\r\nimport Dom from \"../../ui/Dom\";\r\nimport Draggable from \"../../ui/elements/Draggable\";\r\nimport Element from \"../../ui/Element\";\r\n\r\nclass NameEntryStep extends WizardStep {\r\n    constructor(){\r\n        var input = FPEditor.instance.sceneSetup.input;\r\n        super('nameEntry', {\r\n            input: input\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        super.Start();\r\n\r\n        console.log('nameEntry.Start, this = ', this);\r\n\r\n        var scope = this;\r\n        var enterKeyHandler = this.data.input.keyboard.on('enter', function(){\r\n            scope.Complete();\r\n        });\r\n\r\n        this.data.keyListeners = [enterKeyHandler];\r\n    }\r\n\r\n    Dispose(){\r\n        super.Dispose();\r\n        this.data.keyListeners.forEach(listener => {\r\n            this.data.input.keyboard.unregister(listener); \r\n        });\r\n        delete this.data.keyListeners;\r\n    }\r\n\r\n    Complete(){\r\n        super.Complete();\r\n        console.log('Enter key pressed.');\r\n    }\r\n    \r\n}\r\n\r\nclass SomethingStep extends WizardStep {\r\n    constructor(){\r\n        var input = FPEditor.instance.sceneSetup.input;\r\n        super('something', {\r\n            input: input\r\n        });\r\n    }\r\n\r\n    Start(){\r\n        super.Start();\r\n\r\n        console.log('something.Start, this = ', this);\r\n\r\n        var scope = this;\r\n        this.data.spaceKeyHandler = this.data.input.keyboard.on('space', function(){\r\n            scope.Complete();\r\n        });\r\n    }\r\n\r\n    Dispose(){\r\n        super.Dispose();\r\n        this.data.input.keyboard.unregister(this.data.spaceKeyHandler);\r\n    }\r\n\r\n    Complete(){\r\n        super.Complete();\r\n        console.log('Space key pressed.');\r\n    }\r\n    \r\n}\r\n\r\nclass WizardTest {\r\n    constructor(){\r\n\r\n        var elements = document.getElementById('wizard-elements');\r\n\r\n        var nameEntry = new NameEntryStep();\r\n        var something = new SomethingStep();\r\n\r\n        nameEntry.On(WizardStep.signals.start, function(){\r\n            console.log('nameEntry started, signal callback');\r\n            var modal = new Draggable('Name entry', Draggable.widths.medium);\r\n            modal.Add(elements.querySelector('#nameEntry'));\r\n            Dom.instance.Add(modal);\r\n        });\r\n\r\n        nameEntry.On(WizardStep.signals.complete, function(){\r\n            console.log('nameEntry completed, signal callback');\r\n            something.data.nameEntry = 'enter key';\r\n        });\r\n\r\n        something.On(WizardStep.signals.start, function(){\r\n            console.log('something started, signal callback');\r\n        });\r\n\r\n        something.On(WizardStep.signals.complete, function(){\r\n            console.log('something completed, signal callback');\r\n        });\r\n\r\n        var steps = [nameEntry, something];\r\n        var wizard = new Wizard(steps);\r\n\r\n        wizard.On(Wizard.signals.change, function(step){\r\n            console.log('wizard changed to ' + step.key + ', signal callback');\r\n        });\r\n\r\n        wizard.On(Wizard.signals.complete, function(step){\r\n            console.log('wizard completed with ' + step.key + ', signal callback');\r\n        });\r\n\r\n        wizard.Start();\r\n    }\r\n}\r\n\r\nexport default WizardTest;\n\n\n// WEBPACK FOOTER //\n// ./src/templates/editors/wizard/WizardTest.js"],"sourceRoot":""}